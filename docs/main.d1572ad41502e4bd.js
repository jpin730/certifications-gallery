"use strict";(self.webpackChunkcertifications_gallery=self.webpackChunkcertifications_gallery||[]).push([[179],{2011:(vt,Me,F)=>{F.d(Me,{Dh:()=>Ie,GT:()=>pe,cc:()=>Re,hO:()=>je,on:()=>j,pX:()=>oe,xv:()=>me});var m=F(4650),X=F(9260),O=F(4976);vt=F.hmd(vt);const ae=["ngOnDestroy"],oe=(we,pt,wt,Oe={})=>new Proxy(we,{get:(De,ve)=>wt.runOutsideAngular(()=>{var Ge;if(we[ve])return!(null===(Ge=Oe?.spy)||void 0===Ge)&&Ge.get&&Oe.spy.get(ve,we[ve]),we[ve];if(ae.indexOf(ve)>-1)return()=>{};const Ve=pt.toPromise().then(st=>{const ne=st&&st[ve];return"function"==typeof ne?ne.bind(st):ne&&ne.then?ne.then(re=>wt.run(()=>re)):wt.run(()=>ne)});return new Proxy(()=>{},{get:(st,ne)=>Ve[ne],apply:(st,ne,re)=>Ve.then(ee=>{var ge;const ue=ee&&ee(...re);return!(null===(ge=Oe?.spy)||void 0===ge)&&ge.apply&&Oe.spy.apply(ve,re,ue),ue})})})}),pe=(we,pt)=>{pt.forEach(wt=>{Object.getOwnPropertyNames(wt.prototype||wt).forEach(Oe=>{Object.defineProperty(we.prototype,Oe,Object.getOwnPropertyDescriptor(wt.prototype||wt,Oe))})})};class fe{constructor(pt){return pt}}const Ie=new m.OlP("angularfire2.app.options"),me=new m.OlP("angularfire2.app.name");function j(we,pt,wt){const De="object"==typeof wt&&wt||{};De.name=De.name||"string"==typeof wt&&wt||"[DEFAULT]";const Ge=X.Z.apps.filter(Ve=>Ve&&Ve.name===De.name)[0]||pt.runOutsideAngular(()=>X.Z.initializeApp(we,De));try{JSON.stringify(we)!==JSON.stringify(Ge.options)&&H("error",`${Ge.name} Firebase App already initialized with different options${vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Ge)}const H=(we,...pt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[we](...pt)},W={provide:fe,useFactory:j,deps:[Ie,m.R0b,[new m.FiY,me]]};let je=(()=>{class we{constructor(wt){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",m.q4F.full,wt.toString())}static initializeApp(wt,Oe){return{ngModule:we,providers:[{provide:Ie,useValue:wt},{provide:me,useValue:Oe}]}}}return we.\u0275fac=function(wt){return new(wt||we)(m.LFG(m.Lbi))},we.\u0275mod=m.oAB({type:we}),we.\u0275inj=m.cJS({providers:[W]}),we})();function Re(we,pt,wt,Oe,De){const[,ve,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===we)||[];if(ve)return function be(we,pt){try{return we.toString()===pt.toString()}catch{return we===pt}}(De,Ge)||(ye("error",`${pt} was already initialized on the ${wt} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:De,was:Ge})),ve;{const Ve=Oe();return globalThis.\u0275AngularfireInstanceCache.push([we,Ve,De]),Ve}}const at=!!vt.hot,ye=(we,...pt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[we](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(vt,Me,F)=>{F.d(Me,{q4:()=>Io,iC:()=>Bl,HU:()=>la,vb:()=>ou,JM:()=>mc});var m=F(4650),X=F(259),O=F(5861),ae=F(6881),oe=F(2090),pe=F(4859),fe=F(1877);let me,j;const je=new WeakMap,Re=new WeakMap,be=new WeakMap,at=new WeakMap,ye=new WeakMap;let wt={get(E,T,x){if(E instanceof IDBTransaction){if("done"===T)return Re.get(E);if("objectStoreNames"===T)return E.objectStoreNames||be.get(E);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ge(E[T])},set:(E,T,x)=>(E[T]=x,!0),has:(E,T)=>E instanceof IDBTransaction&&("done"===T||"store"===T)||T in E};function ve(E){return"function"==typeof E?function De(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...T){return E.apply(Ve(this),T),Ge(je.get(this))}:function(...T){return Ge(E.apply(Ve(this),T))}:function(T,...x){const P=E.call(Ve(this),T,...x);return be.set(P,T.sort?T.sort():[T]),Ge(P)}}(E):(E instanceof IDBTransaction&&function pt(E){if(Re.has(E))return;const T=new Promise((x,P)=>{const G=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",de),E.removeEventListener("abort",de)},K=()=>{x(),G()},de=()=>{P(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",K),E.addEventListener("error",de),E.addEventListener("abort",de)});Re.set(E,T)}(E),((E,T)=>T.some(x=>E instanceof x))(E,function H(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,wt):E)}function Ge(E){if(E instanceof IDBRequest)return function we(E){const T=new Promise((x,P)=>{const G=()=>{E.removeEventListener("success",K),E.removeEventListener("error",de)},K=()=>{x(Ge(E.result)),G()},de=()=>{P(E.error),G()};E.addEventListener("success",K),E.addEventListener("error",de)});return T.then(x=>{x instanceof IDBCursor&&je.set(x,E)}).catch(()=>{}),ye.set(T,E),T}(E);if(at.has(E))return at.get(E);const T=ve(E);return T!==E&&(at.set(E,T),ye.set(T,E)),T}const Ve=E=>ye.get(E),re=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],ge=new Map;function ue(E,T){if(!(E instanceof IDBDatabase)||T in E||"string"!=typeof T)return;if(ge.get(T))return ge.get(T);const x=T.replace(/FromIndex$/,""),P=T!==x,G=ee.includes(x);if(!(x in(P?IDBIndex:IDBObjectStore).prototype)||!G&&!re.includes(x))return;const K=function(){var de=(0,O.Z)(function*(qe,...$e){const Je=this.transaction(qe,G?"readwrite":"readonly");let Tt=Je.store;return P&&(Tt=Tt.index($e.shift())),(yield Promise.all([Tt[x](...$e),G&&Je.done]))[0]});return function($e){return de.apply(this,arguments)}}();return ge.set(T,K),K}!function Oe(E){wt=E(wt)}(E=>({...E,get:(T,x,P)=>ue(T,x)||E.get(T,x,P),has:(T,x)=>!!ue(T,x)||E.has(T,x)}));const Ze="@firebase/installations",Qt="w:0.6.4",rn="FIS_v2",Fn=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bn(E){return E instanceof oe.ZR&&E.code.includes("request-failed")}function Dr({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function li(E){return{token:E.token,requestStatus:2,expiresIn:Na(E.expiresIn),creationTime:Date.now()}}function di(E,T){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*(E,T){const P=(yield T.json()).error;return Fn.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function Ra({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Xi(E,{refreshToken:T}){const x=Ra(E);return x.append("Authorization",function jo(E){return`${rn} ${E}`}(T)),x}function es(E){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(E){const T=yield E();return T.status>=500&&T.status<600?E():T})).apply(this,arguments)}function Na(E){return Number(E.replace("s","000"))}function ct(E,T){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},{fid:x}){const P=Dr(E),G=Ra(E),K=T.getImmediate({optional:!0});if(K){const Je=yield K.getHeartbeatsHeader();Je&&G.append("x-firebase-client",Je)}const qe={method:"POST",headers:G,body:JSON.stringify({fid:x,authVersion:rn,appId:E.appId,sdkVersion:Qt})},$e=yield es(()=>fetch(P,qe));if($e.ok){const Je=yield $e.json();return{fid:Je.fid||x,registrationStatus:2,refreshToken:Je.refreshToken,authToken:li(Je.authToken)}}throw yield di("Create Installation",$e)})).apply(this,arguments)}function Ri(E){return new Promise(T=>{setTimeout(T,E)})}const $o=/^[cdef][\w-]{21}$/;function tr(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const x=function Dn(E){return function Lr(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return $o.test(x)?x:""}catch{return""}}function Xt(E){return`${E.appName}!${E.appId}`}const it=new Map;function _t(E,T){const x=Xt(E);qr(x,T),function Gn(E,T){const x=function dr(){return!Dt&&"BroadcastChannel"in self&&(Dt=new BroadcastChannel("[Firebase] FID Change"),Dt.onmessage=E=>{qr(E.data.key,E.data.fid)}),Dt}();x&&x.postMessage({key:E,fid:T}),function cn(){0===it.size&&Dt&&(Dt.close(),Dt=null)}()}(x,T)}function qr(E,T){const x=it.get(E);if(x)for(const P of x)P(T)}let Dt=null;const nr="firebase-installations-store";let hr=null;function Ni(){return hr||(hr=function st(E,T,{blocked:x,upgrade:P,blocking:G,terminated:K}={}){const de=indexedDB.open(E,T),qe=Ge(de);return P&&de.addEventListener("upgradeneeded",$e=>{P(Ge(de.result),$e.oldVersion,$e.newVersion,Ge(de.transaction))}),x&&de.addEventListener("blocked",()=>x()),qe.then($e=>{K&&$e.addEventListener("close",()=>K()),G&&$e.addEventListener("versionchange",()=>G())}).catch(()=>{}),qe}("firebase-installations-database",1,{upgrade:(E,T)=>{0===T&&E.createObjectStore(nr)}})),hr}function Mn(E,T){return fr.apply(this,arguments)}function fr(){return(fr=(0,O.Z)(function*(E,T){const x=Xt(E),G=(yield Ni()).transaction(nr,"readwrite"),K=G.objectStore(nr),de=yield K.get(x);return yield K.put(T,x),yield G.done,(!de||de.fid!==T.fid)&&_t(E,T.fid),T})).apply(this,arguments)}function ns(E){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(E){const T=Xt(E),P=(yield Ni()).transaction(nr,"readwrite");yield P.objectStore(nr).delete(T),yield P.done})).apply(this,arguments)}function Wr(E,T){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(E,T){const x=Xt(E),G=(yield Ni()).transaction(nr,"readwrite"),K=G.objectStore(nr),de=yield K.get(x),qe=T(de);return void 0===qe?yield K.delete(x):yield K.put(qe,x),yield G.done,qe&&(!de||de.fid!==qe.fid)&&_t(E,qe.fid),qe})).apply(this,arguments)}function V(E){return U.apply(this,arguments)}function U(){return(U=(0,O.Z)(function*(E){let T;const x=yield Wr(E.appConfig,P=>{const G=q(P),K=ce(E,G);return T=K.registrationPromise,K.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function q(E){return Fe(E||{fid:tr(),registrationStatus:0})}function ce(E,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Fn.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},P=function Y(E,T){return ze.apply(this,arguments)}(E,x);return{installationEntry:x,registrationPromise:P}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ct(E)}:{installationEntry:T}}function ze(){return(ze=(0,O.Z)(function*(E,T){try{const x=yield ct(E,T);return Mn(E.appConfig,x)}catch(x){throw bn(x)&&409===x.customData.serverCode?yield ns(E.appConfig):yield Mn(E.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Ct(E){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(E){let T=yield an(E.appConfig);for(;1===T.registrationStatus;)yield Ri(100),T=yield an(E.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:P}=yield V(E);return P||x}return T})).apply(this,arguments)}function an(E){return Wr(E,T=>{if(!T)throw Fn.create("installation-not-found");return Fe(T)})}function Fe(E){return function ut(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function gt(E,T){return hn.apply(this,arguments)}function hn(){return(hn=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},x){const P=pr(E,x),G=Xi(E,x),K=T.getImmediate({optional:!0});if(K){const Je=yield K.getHeartbeatsHeader();Je&&G.append("x-firebase-client",Je)}const qe={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:Qt,appId:E.appId}})},$e=yield es(()=>fetch(P,qe));if($e.ok)return li(yield $e.json());throw yield di("Generate Auth Token",$e)})).apply(this,arguments)}function pr(E,{fid:T}){return`${Dr(E)}/${T}/authTokens:generate`}function fn(E){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,O.Z)(function*(E,T=!1){let x;const P=yield Wr(E.appConfig,K=>{if(!kt(K))throw Fn.create("not-registered");const de=K.authToken;if(!T&&tn(de))return K;if(1===de.requestStatus)return x=ie(E,T),K;{if(!navigator.onLine)throw Fn.create("app-offline");const qe=Gt(K);return x=ke(E,qe),qe}});return x?yield x:P.authToken})).apply(this,arguments)}function ie(E,T){return te.apply(this,arguments)}function te(){return(te=(0,O.Z)(function*(E,T){let x=yield Ne(E.appConfig);for(;1===x.authToken.requestStatus;)yield Ri(100),x=yield Ne(E.appConfig);const P=x.authToken;return 0===P.requestStatus?fn(E,T):P})).apply(this,arguments)}function Ne(E){return Wr(E,T=>{if(!kt(T))throw Fn.create("not-registered");return function gr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function ke(E,T){return Et.apply(this,arguments)}function Et(){return(Et=(0,O.Z)(function*(E,T){try{const x=yield gt(E,T),P=Object.assign(Object.assign({},T),{authToken:x});return yield Mn(E.appConfig,P),x}catch(x){if(!bn(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const P=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Mn(E.appConfig,P)}else yield ns(E.appConfig);throw x}})).apply(this,arguments)}function kt(E){return void 0!==E&&2===E.registrationStatus}function tn(E){return 2===E.requestStatus&&!function Cn(E){const T=Date.now();return T<E.creationTime||E.creationTime+E.expiresIn<T+36e5}(E)}function Gt(E){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:T})}function Kr(){return(Kr=(0,O.Z)(function*(E){const T=E,{installationEntry:x,registrationPromise:P}=yield V(T);return P?P.catch(console.error):fn(T).catch(console.error),x.fid})).apply(this,arguments)}function Ru(){return(Ru=(0,O.Z)(function*(E,T=!1){const x=E;return yield pn(x),(yield fn(x,T)).token})).apply(this,arguments)}function pn(E){return rs.apply(this,arguments)}function rs(){return(rs=(0,O.Z)(function*(E){const{registrationPromise:T}=yield V(E);T&&(yield T)})).apply(this,arguments)}function rr(E){return Fn.create("missing-app-config-values",{valueName:E})}const Vr="installations",Pu=E=>{const T=E.getProvider("app").getImmediate(),x=function zd(E){if(!E||!E.options)throw rr("App Configuration");if(!E.name)throw rr("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!E.options[x])throw rr(x);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},ys=E=>{const T=E.getProvider("app").getImmediate(),x=(0,ae._getProvider)(T,Vr).getImmediate();return{getId:()=>function fi(E){return Kr.apply(this,arguments)}(x),getToken:G=>function Pa(E){return Ru.apply(this,arguments)}(x,G)}};(function ki(){(0,ae._registerComponent)(new pe.wA(Vr,Pu,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",ys,"PRIVATE"))})(),(0,ae.registerVersion)(Ze,"0.6.4"),(0,ae.registerVersion)(Ze,"0.6.4","esm2017");const qo="@firebase/remote-config",En=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pi{constructor(T,x,P,G){this.client=T,this.storage=x,this.storageCache=P,this.logger=G}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-x,G=P<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${G}.`),G}fetch(T){var x=this;return(0,O.Z)(function*(){const[P,G]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(G&&x.isCachedDataFresh(T.cacheMaxAgeMillis,P))return G;T.eTag=G&&G.eTag;const K=yield x.client.fetch(T),de=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&de.push(x.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(de),K})()}}function eh(E=navigator){return E.languages&&E.languages[0]||E.language}class Oa{constructor(T,x,P,G,K,de){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=P,this.projectId=G,this.apiKey=K,this.appId=de}fetch(T){var x=this;return(0,O.Z)(function*(){const[P,G]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},$e={sdk_version:x.sdkVersion,app_instance_id:P,app_instance_id_token:G,app_id:x.appId,language_code:eh()},Je={method:"POST",headers:qe,body:JSON.stringify($e)},Tt=fetch(de,Je),xt=new Promise((wi,Ei)=>{T.signal.addEventListener(()=>{const $l=new Error("The operation was aborted.");$l.name="AbortError",Ei($l)})});let _i;try{yield Promise.race([Tt,xt]),_i=yield Tt}catch(wi){let Ei="fetch-client-network";throw"AbortError"===wi?.name&&(Ei="fetch-timeout"),En.create(Ei,{originalErrorMessage:wi?.message})}let Bn=_i.status;const Ns=_i.headers.get("ETag")||void 0;let Ar,Br;if(200===_i.status){let wi;try{wi=yield _i.json()}catch(Ei){throw En.create("fetch-client-parse",{originalErrorMessage:Ei?.message})}Ar=wi.entries,Br=wi.state}if("INSTANCE_STATE_UNSPECIFIED"===Br?Bn=500:"NO_CHANGE"===Br?Bn=304:("NO_TEMPLATE"===Br||"EMPTY_CONFIG"===Br)&&(Ar={}),304!==Bn&&200!==Bn)throw En.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:Ns,config:Ar}})()}}class Wf{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const P=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,P)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:P}){var G=this;return(0,O.Z)(function*(){yield function ll(E,T){return new Promise((x,P)=>{const G=Math.max(T-Date.now(),0),K=setTimeout(x,G);E.addEventListener(()=>{clearTimeout(K),P(En.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const K=yield G.client.fetch(T);return yield G.storage.deleteThrottleMetadata(),K}catch(K){if(!function Ou(E){if(!(E instanceof oe.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}(K))throw K;const de={throttleEndTimeMillis:Date.now()+(0,oe.$s)(P),backoffCount:P+1};return yield G.storage.setThrottleMetadata(de),G.attemptFetch(T,de)}})()}}class Kf{constructor(T,x,P,G,K){this.app=T,this._client=x,this._storageCache=P,this._storage=G,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ar(E,T){const x=E.target.error||void 0;return En.create(T,{originalErrorMessage:x&&x?.message})}const Tr="app_namespace_store";class tE{constructor(T,x,P,G=function Uu(){return new Promise((E,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=P=>{T(ar(P,"storage-open"))},x.onsuccess=P=>{E(P.target.result)},x.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(Tr,{keyPath:"compositeKey"})}}catch(x){T(En.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=P,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const P=yield x.openDbPromise;return new Promise((G,K)=>{const qe=P.transaction([Tr],"readonly").objectStore(Tr),$e=x.createCompositeKey(T);try{const Je=qe.get($e);Je.onerror=Tt=>{K(ar(Tt,"storage-get"))},Je.onsuccess=Tt=>{const xt=Tt.target.result;G(xt?xt.value:void 0)}}catch(Je){K(En.create("storage-get",{originalErrorMessage:Je?.message}))}})})()}set(T,x){var P=this;return(0,O.Z)(function*(){const G=yield P.openDbPromise;return new Promise((K,de)=>{const $e=G.transaction([Tr],"readwrite").objectStore(Tr),Je=P.createCompositeKey(T);try{const Tt=$e.put({compositeKey:Je,value:x});Tt.onerror=xt=>{de(ar(xt,"storage-set"))},Tt.onsuccess=()=>{K()}}catch(Tt){de(En.create("storage-set",{originalErrorMessage:Tt?.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const P=yield x.openDbPromise;return new Promise((G,K)=>{const qe=P.transaction([Tr],"readwrite").objectStore(Tr),$e=x.createCompositeKey(T);try{const Je=qe.delete($e);Je.onerror=Tt=>{K(ar(Tt,"storage-delete"))},Je.onsuccess=()=>{G()}}catch(Je){K(En.create("storage-delete",{originalErrorMessage:Je?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Un{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),P=T.storage.getLastSuccessfulFetchTimestampMillis(),G=T.storage.getActiveConfig(),K=yield x;K&&(T.lastFetchStatus=K);const de=yield P;de&&(T.lastSuccessfulFetchTimestampMillis=de);const qe=yield G;qe&&(T.activeConfig=qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Zr(){return hl.apply(this,arguments)}function hl(){return(hl=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}let Wo,qt;!function _s(){(0,ae._registerComponent)(new pe.wA("remote-config",function E(T,{instanceIdentifier:x}){const P=T.getProvider("app").getImmediate(),G=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw En.create("registration-window");if(!(0,oe.hl)())throw En.create("indexed-db-unavailable");const{projectId:K,apiKey:de,appId:qe}=P.options;if(!K)throw En.create("registration-project-id");if(!de)throw En.create("registration-api-key");if(!qe)throw En.create("registration-app-id");const $e=new tE(qe,P.name,x=x||"firebase"),Je=new Un($e),Tt=new fe.Yd(qo);Tt.logLevel=fe.in.ERROR;const xt=new Oa(G,ae.SDK_VERSION,x,K,de,qe),_i=new Wf(xt,$e),Bn=new pi(_i,$e,Je,Tt),Ns=new Kf(P,Bn,Je,$e,Tt);return function mm(E){const T=(0,oe.m9)(E);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ns),Ns},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(qo,"0.4.4"),(0,ae.registerVersion)(qo,"0.4.4","esm2017")}();const th=new WeakMap,Qr=new WeakMap,Fa=new WeakMap,yr=new WeakMap,Rt=new WeakMap;let Ko={get(E,T,x){if(E instanceof IDBTransaction){if("done"===T)return Qr.get(E);if("objectStoreNames"===T)return E.objectStoreNames||Fa.get(E);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Fi(E[T])},set:(E,T,x)=>(E[T]=x,!0),has:(E,T)=>E instanceof IDBTransaction&&("done"===T||"store"===T)||T in E};function La(E){return"function"==typeof E?function rh(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ws(){return qt||(qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...T){return E.apply(Ua(this),T),Fi(th.get(this))}:function(...T){return Fi(E.apply(Ua(this),T))}:function(T,...x){const P=E.call(Ua(this),T,...x);return Fa.set(P,T.sort?T.sort():[T]),Fi(P)}}(E):(E instanceof IDBTransaction&&function Qf(E){if(Qr.has(E))return;const T=new Promise((x,P)=>{const G=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",de),E.removeEventListener("abort",de)},K=()=>{x(),G()},de=()=>{P(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",K),E.addEventListener("error",de),E.addEventListener("abort",de)});Qr.set(E,T)}(E),((E,T)=>T.some(x=>E instanceof x))(E,function vm(){return Wo||(Wo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Ko):E)}function Fi(E){if(E instanceof IDBRequest)return function Zf(E){const T=new Promise((x,P)=>{const G=()=>{E.removeEventListener("success",K),E.removeEventListener("error",de)},K=()=>{x(Fi(E.result)),G()},de=()=>{P(E.error),G()};E.addEventListener("success",K),E.addEventListener("error",de)});return T.then(x=>{x instanceof IDBCursor&&th.set(x,E)}).catch(()=>{}),Rt.set(T,E),T}(E);if(yr.has(E))return yr.get(E);const T=La(E);return T!==E&&(yr.set(E,T),Rt.set(T,E)),T}const Ua=E=>Rt.get(E);function Se(E,T,{blocked:x,upgrade:P,blocking:G,terminated:K}={}){const de=indexedDB.open(E,T),qe=Fi(de);return P&&de.addEventListener("upgradeneeded",$e=>{P(Fi(de.result),$e.oldVersion,$e.newVersion,Fi(de.transaction))}),x&&de.addEventListener("blocked",()=>x()),qe.then($e=>{K&&$e.addEventListener("close",()=>K()),G&&$e.addEventListener("versionchange",()=>G())}).catch(()=>{}),qe}function Ht(E,{blocked:T}={}){const x=indexedDB.deleteDatabase(E);return T&&x.addEventListener("blocked",()=>T()),Fi(x).then(()=>{})}const fl=["get","getKey","getAll","getAllKeys","count"],pl=["put","add","delete","clear"],Rn=new Map;function ju(E,T){if(!(E instanceof IDBDatabase)||T in E||"string"!=typeof T)return;if(Rn.get(T))return Rn.get(T);const x=T.replace(/FromIndex$/,""),P=T!==x,G=pl.includes(x);if(!(x in(P?IDBIndex:IDBObjectStore).prototype)||!G&&!fl.includes(x))return;const K=function(){var de=(0,O.Z)(function*(qe,...$e){const Je=this.transaction(qe,G?"readwrite":"readonly");let Tt=Je.store;return P&&(Tt=Tt.index($e.shift())),(yield Promise.all([Tt[x](...$e),G&&Je.done]))[0]});return function($e){return de.apply(this,arguments)}}();return Rn.set(T,K),K}!function nh(E){Ko=E(Ko)}(E=>({...E,get:(T,x,P)=>ju(T,x)||E.get(T,x,P),has:(T,x)=>!!ju(T,x)||E.has(T,x)}));const Zo="/firebase-messaging-sw.js",Yr="/firebase-cloud-messaging-push-scope",Va="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$u="google.c.a.c_id",ih="google.c.a.c_l",sh="google.c.a.ts",Hu="google.c.a.e";var br=(()=>{return(E=br||(br={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",br;var E})();function Jr(E){const T=new Uint8Array(E);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Es(E){const x=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(x),G=new Uint8Array(P.length);for(let K=0;K<P.length;++K)G[K]=P.charCodeAt(K);return G}const mi="fcm_token_details_db",uo="fcm_token_object_Store";function _m(E){return zu.apply(this,arguments)}function zu(){return zu=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(mi))return null;let T=null;return(yield Se(mi,5,{upgrade:(P=(0,O.Z)(function*(G,K,de,qe){var $e;if(K<2||!G.objectStoreNames.contains(uo))return;const Je=qe.objectStore(uo),Tt=yield Je.index("fcmSenderId").get(E);if(yield Je.clear(),Tt)if(2===K){const xt=Tt;if(!xt.auth||!xt.p256dh||!xt.endpoint)return;T={token:xt.fcmToken,createTime:null!==($e=xt.createTime)&&void 0!==$e?$e:Date.now(),subscriptionOptions:{auth:xt.auth,p256dh:xt.p256dh,endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:"string"==typeof xt.vapidKey?xt.vapidKey:Jr(xt.vapidKey)}}}else if(3===K){const xt=Tt;T={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:Jr(xt.auth),p256dh:Jr(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:Jr(xt.vapidKey)}}}else if(4===K){const xt=Tt;T={token:xt.fcmToken,createTime:xt.createTime,subscriptionOptions:{auth:Jr(xt.auth),p256dh:Jr(xt.p256dh),endpoint:xt.endpoint,swScope:xt.swScope,vapidKey:Jr(xt.vapidKey)}}}}),function(K,de,qe,$e){return P.apply(this,arguments)})})).close(),yield Ht(mi),yield Ht("fcm_vapid_details_db"),yield Ht("undefined"),ah(T)?T:null;var P}),zu.apply(this,arguments)}function ah(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:T}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Li="firebase-messaging-store";let Gu=null;function ja(){return Gu||(Gu=Se("firebase-messaging-database",1,{upgrade:(E,T)=>{0===T&&E.createObjectStore(Li)}})),Gu}function ml(E){return $a.apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(E){const T=Is(E),P=yield(yield ja()).transaction(Li).objectStore(Li).get(T);if(P)return P;{const G=yield _m(E.appConfig.senderId);if(G)return yield yl(E,G),G}})).apply(this,arguments)}function yl(E,T){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,O.Z)(function*(E,T){const x=Is(E),G=(yield ja()).transaction(Li,"readwrite");return yield G.objectStore(Li).put(T,x),yield G.done,T})).apply(this,arguments)}function uh(E){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(E){const T=Is(E),P=(yield ja()).transaction(Li,"readwrite");yield P.objectStore(Li).delete(T),yield P.done})).apply(this,arguments)}function Is({appConfig:E}){return E.appId}const Wt=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function is(E,T){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(E,T){const x=yield Qo(E),P=Yo(T),G={method:"POST",headers:x,body:JSON.stringify(P)};let K;try{K=yield(yield fetch(Ws(E.appConfig),G)).json()}catch(de){throw Wt.create("token-subscribe-failed",{errorInfo:de?.toString()})}if(K.error)throw Wt.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw Wt.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function vl(E,T){return _l.apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(E,T){const x=yield Qo(E),P=Yo(T.subscriptionOptions),G={method:"PATCH",headers:x,body:JSON.stringify(P)};let K;try{K=yield(yield fetch(`${Ws(E.appConfig)}/${T.token}`,G)).json()}catch(de){throw Wt.create("token-update-failed",{errorInfo:de?.toString()})}if(K.error)throw Wt.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw Wt.create("token-update-no-token");return K.token})).apply(this,arguments)}function qu(E,T){return wl.apply(this,arguments)}function wl(){return(wl=(0,O.Z)(function*(E,T){const P={method:"DELETE",headers:yield Qo(E)};try{const K=yield(yield fetch(`${Ws(E.appConfig)}/${T}`,P)).json();if(K.error)throw Wt.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(G){throw Wt.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function Ws({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Qo(E){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*({appConfig:E,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Yo({p256dh:E,auth:T,endpoint:x,vapidKey:P}){const G={web:{endpoint:x,auth:T,p256dh:E}};return P!==Va&&(G.web.applicationPubKey=P),G}const ss=6048e5;function Wu(E){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(E){const T=yield Zu(E.swRegistration,E.vapidKey),x={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:T.endpoint,auth:Jr(T.getKey("auth")),p256dh:Jr(T.getKey("p256dh"))},P=yield ml(E.firebaseDependencies);if(P){if(lh(P.subscriptionOptions,x))return Date.now()>=P.createTime+ss?lo(E,{token:P.token,createTime:Date.now(),subscriptionOptions:x}):P.token;try{yield qu(E.firebaseDependencies,P.token)}catch(G){console.warn(G)}return ch(E.firebaseDependencies,x)}return ch(E.firebaseDependencies,x)})).apply(this,arguments)}function Ku(E){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,O.Z)(function*(E){const T=yield ml(E.firebaseDependencies);T&&(yield qu(E.firebaseDependencies,T.token),yield uh(E.firebaseDependencies));const x=yield E.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function lo(E,T){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(E,T){try{const x=yield vl(E.firebaseDependencies,T),P=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield yl(E.firebaseDependencies,P),x}catch(x){throw yield Ku(E),x}})).apply(this,arguments)}function ch(E,T){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(E,T){const P={token:yield is(E,T),createTime:Date.now(),subscriptionOptions:T};return yield yl(E,P),P.token})).apply(this,arguments)}function Zu(E,T){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(E,T){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Es(T)})})).apply(this,arguments)}function lh(E,T){return T.vapidKey===E.vapidKey&&T.endpoint===E.endpoint&&T.auth===E.auth&&T.p256dh===E.p256dh}function wm(E){const T={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function El(E,T){if(!T.notification)return;E.notification={};const x=T.notification.title;x&&(E.notification.title=x);const P=T.notification.body;P&&(E.notification.body=P);const G=T.notification.image;G&&(E.notification.image=G);const K=T.notification.icon;K&&(E.notification.icon=K)}(T,E),function Xo(E,T){!T.data||(E.data=T.data)}(T,E),function Xf(E,T){var x,P,G,K,de;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;E.fcmOptions={};const qe=null!==(G=null===(P=T.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==G?G:null===(K=T.notification)||void 0===K?void 0:K.click_action;qe&&(E.fcmOptions.link=qe);const $e=null===(de=T.fcmOptions)||void 0===de?void 0:de.analytics_label;$e&&(E.fcmOptions.analyticsLabel=$e)}(T,E),T}function dh(E){return"object"==typeof E&&!!E&&$u in E}function ea(E,T){const x=[];for(let P=0;P<E.length;P++)x.push(E.charAt(P)),P<T.length&&x.push(T.charAt(P));return x.join("")}function Il(E){return Wt.create("missing-app-config-values",{valueName:E})}ea("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ea("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ga{constructor(T,x,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function hh(E){if(!E||!E.options)throw Il("App Configuration Object");if(!E.name)throw Il("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=E;for(const P of T)if(!x[P])throw Il(P);return{appName:E.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:G,installations:x,analyticsProvider:P}}_delete(){return Promise.resolve()}}function fh(E){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Zo,{scope:Yr}),E.swRegistration.update().catch(()=>{})}catch(T){throw Wt.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function ph(E,T){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(E,T){if(!T&&!E.swRegistration&&(yield fh(E)),T||!E.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Wt.create("invalid-sw-registration");E.swRegistration=T}})).apply(this,arguments)}function Qs(E,T){return qa.apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(E,T){T?E.vapidKey=T:E.vapidKey||(E.vapidKey=Va)})).apply(this,arguments)}function Qu(){return(Qu=(0,O.Z)(function*(E,T){if(!navigator)throw Wt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Wt.create("permission-blocked");return yield Qs(E,T?.vapidKey),yield ph(E,T?.serviceWorkerRegistration),Wu(E)})).apply(this,arguments)}function Ts(E,T,x){return mh.apply(this,arguments)}function mh(){return(mh=(0,O.Z)(function*(E,T,x){const P=Wa(T);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:x[$u],message_name:x[ih],message_time:x[sh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wa(E){switch(E){case br.NOTIFICATION_CLICKED:return"notification_open";case br.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ys(){return(Ys=(0,O.Z)(function*(E,T){const x=T.data;if(!x.isFirebaseMessaging)return;E.onMessageHandler&&x.messageType===br.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(wm(x)):E.onMessageHandler.next(wm(x)));const P=x.data;dh(P)&&"1"===P[Hu]&&(yield Ts(E,x.messageType,P))})).apply(this,arguments)}const fo="@firebase/messaging",Ka=E=>{const T=new Ga(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Dl(E,T){return Ys.apply(this,arguments)}(T,x)),T},Yu=E=>{const T=E.getProvider("messaging").getImmediate();return{getToken:P=>function gh(E,T){return Qu.apply(this,arguments)}(T,P)}};function yh(){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tl(){(0,ae._registerComponent)(new pe.wA("messaging",Ka,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",Yu,"PRIVATE")),(0,ae.registerVersion)(fo,"0.12.4"),(0,ae.registerVersion)(fo,"0.12.4","esm2017")}();const sn="analytics",Cl="firebase_id",na="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",go="https://www.googletagmanager.com/gtag/js",Nn=new fe.Yd("@firebase/analytics"),vr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Qa(E){if(!E.startsWith(go)){const T=vr.create("invalid-gtag-resource",{gtagURL:E});return Nn.warn(T.message),""}return E}function mo(E){return Promise.all(E.map(T=>T.catch(x=>x)))}function xl(E,T){const x=function Al(E,T){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(E,T)),x}("firebase-js-sdk-policy",{createScriptURL:Qa}),P=document.createElement("script"),G=`${go}?l=${E}&id=${T}`;P.src=x?x?.createScriptURL(G):G,P.async=!0,document.head.appendChild(P)}function vh(E,T,x,P,G,K){return _h.apply(this,arguments)}function _h(){return(_h=(0,O.Z)(function*(E,T,x,P,G,K){const de=P[G];try{if(de)yield T[de];else{const $e=(yield mo(x)).find(Je=>Je.measurementId===G);$e&&(yield T[$e.appId])}}catch(qe){Nn.error(qe)}E("config",G,K)})).apply(this,arguments)}function np(E,T,x,P,G){return rp.apply(this,arguments)}function rp(){return(rp=(0,O.Z)(function*(E,T,x,P,G){try{let K=[];if(G&&G.send_to){let de=G.send_to;Array.isArray(de)||(de=[de]);const qe=yield mo(x);for(const $e of de){const Je=qe.find(xt=>xt.measurementId===$e),Tt=Je&&T[Je.appId];if(!Tt){K=[];break}K.push(Tt)}}0===K.length&&(K=Object.values(T)),yield Promise.all(K),E("event",P,G||{})}catch(K){Nn.error(K)}})).apply(this,arguments)}function Vv(E){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(go)&&x.src.includes(E))return x;return null}const qn=new class Ya{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function tc(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Ja(E){return os.apply(this,arguments)}function os(){return(os=(0,O.Z)(function*(E){var T;const{appId:x,apiKey:P}=E,G={method:"GET",headers:tc(P)},K=na.replace("{app-id}",x),de=yield fetch(K,G);if(200!==de.status&&304!==de.status){let qe="";try{const $e=yield de.json();null!==(T=$e.error)&&void 0!==T&&T.message&&(qe=$e.error.message)}catch{}throw vr.create("config-fetch-failed",{httpStatus:de.status,responseMessage:qe})}return de.json()})).apply(this,arguments)}function sp(E){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(E,T=qn,x){const{appId:P,apiKey:G,measurementId:K}=E.options;if(!P)throw vr.create("no-app-id");if(!G){if(K)return{measurementId:K,appId:P};throw vr.create("no-api-key")}const de=T.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new op;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==x?x:6e4),Cs({appId:P,apiKey:G,measurementId:K},de,qe,T)})).apply(this,arguments)}function Cs(E,T,x){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(E,{throttleEndTimeMillis:T,backoffCount:x},P,G=qn){var K;const{appId:de,measurementId:qe}=E;try{yield Ss(P,T)}catch($e){if(qe)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${$e?.message}]`),{appId:de,measurementId:qe};throw $e}try{const $e=yield Ja(E);return G.deleteThrottleMetadata(de),$e}catch($e){const Je=$e;if(!ia(Je)){if(G.deleteThrottleMetadata(de),qe)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${Je?.message}]`),{appId:de,measurementId:qe};throw $e}const Tt=503===Number(null===(K=Je?.customData)||void 0===K?void 0:K.httpStatus)?(0,oe.$s)(x,G.intervalMillis,30):(0,oe.$s)(x,G.intervalMillis),xt={throttleEndTimeMillis:Date.now()+Tt,backoffCount:x+1};return G.setThrottleMetadata(de,xt),Nn.debug(`Calling attemptFetch again in ${Tt} millis`),Cs(E,xt,P,G)}})).apply(this,arguments)}function Ss(E,T){return new Promise((x,P)=>{const G=Math.max(T-Date.now(),0),K=setTimeout(x,G);E.addEventListener(()=>{clearTimeout(K),P(vr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ia(E){if(!(E instanceof oe.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}class op{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let nc,Ml;function ap(){return(ap=(0,O.Z)(function*(E,T,x,P,G){if(G&&G.global)E("event",x,P);else{const K=yield T;E("event",x,Object.assign(Object.assign({},P),{send_to:K}))}})).apply(this,arguments)}function oc(E){Ml=E}function nu(E){nc=E}function ru(){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(){if(!(0,oe.hl)())return Nn.warn(vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(E){return Nn.warn(vr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function Vi(){return(Vi=(0,O.Z)(function*(E,T,x,P,G,K,de){var qe;const $e=sp(E);$e.then(Bn=>{x[Bn.measurementId]=Bn.appId,E.options.measurementId&&Bn.measurementId!==E.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>Nn.error(Bn)),T.push($e);const Je=ru().then(Bn=>{if(Bn)return P.getId()}),[Tt,xt]=yield Promise.all([$e,Je]);Vv(K)||xl(K,Tt.measurementId),Ml&&(G("consent","default",Ml),oc(void 0)),G("js",new Date);const _i=null!==(qe=de?.config)&&void 0!==qe?qe:{};return _i.origin="firebase",_i.update=!0,null!=xt&&(_i[Cl]=xt),G("config",Tt.measurementId,_i),nc&&(G("set",nc),nu(void 0)),Tt.measurementId})).apply(this,arguments)}class As{constructor(T){this.app=T}_delete(){return delete Cr[this.app.options.appId],Promise.resolve()}}let Cr={},up=[];const Ih={};let yo,Sr,ac="dataLayer",Rl=!1;function uc(E,T,x){!function Dh(){const E=[];if((0,oe.ru)()&&E.push("This is a browser extension environment."),(0,oe.zI)()||E.push("Cookies are not available."),E.length>0){const T=E.map((P,G)=>`(${G+1}) ${P}`).join(" "),x=vr.create("invalid-analytics-context",{errorInfo:T});Nn.warn(x.message)}}();const P=E.options.appId;if(!P)throw vr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw vr.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cr[P])throw vr.create("already-exists",{id:P});if(!Rl){!function vn(E){let T=[];Array.isArray(window[E])?T=window[E]:window[E]=T}(ac);const{wrappedGtag:K,gtagCore:de}=function Em(E,T,x,P,G){let K=function(...de){window[P].push(arguments)};return window[G]&&"function"==typeof window[G]&&(K=window[G]),window[G]=function ip(E,T,x,P){function K(){return(K=(0,O.Z)(function*(de,...qe){try{if("event"===de){const[$e,Je]=qe;yield np(E,T,x,$e,Je)}else if("config"===de){const[$e,Je]=qe;yield vh(E,T,x,P,$e,Je)}else if("consent"===de){const[$e]=qe;E("consent","update",$e)}else if("get"===de){const[$e,Je,Tt]=qe;E("get",$e,Je,Tt)}else if("set"===de){const[$e]=qe;E("set",$e)}else E(de,...qe)}catch($e){Nn.error($e)}})).apply(this,arguments)}return function G(de){return K.apply(this,arguments)}}(K,E,T,x),{gtagCore:K,wrappedGtag:window[G]}}(Cr,up,Ih,ac,"gtag");Sr=K,yo=de,Rl=!0}return Cr[P]=function Eh(E,T,x,P,G,K,de){return Vi.apply(this,arguments)}(E,up,Ih,T,yo,ac,x),new As(E)}function Nl(){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const Ol="@firebase/analytics";!function lp(){(0,ae._registerComponent)(new pe.wA(sn,(T,{options:x})=>uc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function E(T){try{const x=T.getProvider(sn).getImmediate();return{logEvent:(P,G,K)=>function wo(E,T,x,P){E=(0,oe.m9)(E),function Im(E,T,x,P,G){return ap.apply(this,arguments)}(Sr,Cr[E.app.options.appId],T,x,P).catch(G=>Nn.error(G))}(x,P,G,K)}}catch(x){throw vr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(Ol,"0.10.0"),(0,ae.registerVersion)(Ol,"0.10.0","esm2017")}();var Xs=F(4408),eo=F(7565);const dc=new class Fl extends eo.v{}(class Eo extends Xs.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(T,x,P):(T.flush(this),0)}});var hc=F(4986),Xr=F(8505),fc=F(9468),ua=F(5363);const Io=new m.GfV("7.6.1"),ca="__angularfire_symbol__analyticsIsSupportedValue",Do="__angularfire_symbol__analyticsIsSupported",Ll="__angularfire_symbol__remoteConfigIsSupportedValue",Ul="__angularfire_symbol__remoteConfigIsSupported",Bi="__angularfire_symbol__messagingIsSupportedValue",pc="__angularfire_symbol__messagingIsSupported";function mc(E,T,x){if(T){if(1===T.length)return T[0];const K=T.filter(de=>de.app===x);if(1===K.length)return K[0]}return x.container.getProvider(E).getImmediate({optional:!0})}globalThis[Do]||(globalThis[Do]=Nl().then(E=>globalThis[ca]=E).catch(()=>globalThis[ca]=!1)),globalThis[pc]||(globalThis[pc]=yh().then(E=>globalThis[Bi]=E).catch(()=>globalThis[Bi]=!1)),globalThis[Ul]||(globalThis[Ul]=Zr().then(E=>globalThis[Ll]=E).catch(()=>globalThis[Ll]=!1));const ou=(E,T)=>{const x=T?[T]:(0,X.C6)(),P=[];return x.forEach(G=>{G.container.getProvider(E).instances.forEach(de=>{P.includes(de)||P.push(de)})}),P};function xs(){}class yc{constructor(T,x=dc){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,P){const G=this.zone;return this.delegate.schedule(function(de){G.runGuarded(()=>{T.apply(this,[de])})},x,P)}}class Tm{constructor(T){this.zone=T,this.task=null}call(T,x){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xs,{},xs,xs)),x.pipe((0,Xr.b)({next:P,complete:P,error:P})).subscribe(T).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let la=(()=>{class E{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new yc(Zone.current)),this.insideAngular=x.run(()=>new yc(Zone.current,hc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(x){return new(x||E)(m.LFG(m.R0b))},E.\u0275prov=m.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Ms(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Bl(E){return Ms(),function jl(E){return function(x){return(x=x.lift(new Tm(E.ngZone))).pipe((0,fc.R)(E.outsideAngular),(0,ua.Q)(E.insideAngular))}}(Ms())(E)}},2090:(vt,Me,F)=>{F.d(Me,{$s:()=>ns,BH:()=>ve,G6:()=>Qt,L:()=>me,LL:()=>It,Pz:()=>De,Sg:()=>Ge,UG:()=>ne,US:()=>pe,ZB:()=>W,ZR:()=>At,aH:()=>Oe,b$:()=>ge,eu:()=>Ye,hl:()=>rn,jU:()=>re,m9:()=>Ur,ne:()=>Xt,pd:()=>tr,r3:()=>Mi,ru:()=>ee,tV:()=>j,uI:()=>st,vZ:()=>Fr,w1:()=>Ze,xO:()=>$o,xb:()=>jo,z$:()=>Ve,zI:()=>or,zd:()=>hi});const ae=function(V){const U=[];let q=0;for(let ce=0;ce<V.length;ce++){let Y=V.charCodeAt(ce);Y<128?U[q++]=Y:Y<2048?(U[q++]=Y>>6|192,U[q++]=63&Y|128):55296==(64512&Y)&&ce+1<V.length&&56320==(64512&V.charCodeAt(ce+1))?(Y=65536+((1023&Y)<<10)+(1023&V.charCodeAt(++ce)),U[q++]=Y>>18|240,U[q++]=Y>>12&63|128,U[q++]=Y>>6&63|128,U[q++]=63&Y|128):(U[q++]=Y>>12|224,U[q++]=Y>>6&63|128,U[q++]=63&Y|128)}return U},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,U){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let Y=0;Y<V.length;Y+=3){const ze=V[Y],Ct=Y+1<V.length,Pt=Ct?V[Y+1]:0,an=Y+2<V.length,Fe=an?V[Y+2]:0;let hn=(15&Pt)<<2|Fe>>6,pr=63&Fe;an||(pr=64,Ct||(hn=64)),ce.push(q[ze>>2],q[(3&ze)<<4|Pt>>4],q[hn],q[pr])}return ce.join("")},encodeString(V,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(V):this.encodeByteArray(ae(V),U)},decodeString(V,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(V):function(V){const U=[];let q=0,ce=0;for(;q<V.length;){const Y=V[q++];if(Y<128)U[ce++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const ze=V[q++];U[ce++]=String.fromCharCode((31&Y)<<6|63&ze)}else if(Y>239&&Y<365){const an=((7&Y)<<18|(63&V[q++])<<12|(63&V[q++])<<6|63&V[q++])-65536;U[ce++]=String.fromCharCode(55296+(an>>10)),U[ce++]=String.fromCharCode(56320+(1023&an))}else{const ze=V[q++],Ct=V[q++];U[ce++]=String.fromCharCode((15&Y)<<12|(63&ze)<<6|63&Ct)}}return U.join("")}(this.decodeStringToByteArray(V,U))},decodeStringToByteArray(V,U){this.init_();const q=U?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let Y=0;Y<V.length;){const ze=q[V.charAt(Y++)],Pt=Y<V.length?q[V.charAt(Y)]:0;++Y;const Fe=Y<V.length?q[V.charAt(Y)]:64;++Y;const gt=Y<V.length?q[V.charAt(Y)]:64;if(++Y,null==ze||null==Pt||null==Fe||null==gt)throw new fe;ce.push(ze<<2|Pt>>4),64!==Fe&&(ce.push(Pt<<4&240|Fe>>2),64!==gt&&ce.push(Fe<<6&192|gt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const me=function(V){return function(V){const U=ae(V);return pe.encodeByteArray(U,!0)}(V).replace(/\./g,"")},j=function(V){try{return pe.decodeString(V,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function W(V,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return U}for(const q in U)!U.hasOwnProperty(q)||!je(q)||(V[q]=W(V[q],U[q]));return V}function je(V){return"__proto__"!==V}const we=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=V&&j(V[1]);return U&&JSON.parse(U)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},Oe=()=>{var V;return null===(V=we())||void 0===V?void 0:V.config},De=V=>{var U;return null===(U=we())||void 0===U?void 0:U[`_${V}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,q)=>{this.resolve=U,this.reject=q})}wrapCallback(U){return(q,ce)=>{q?this.reject(q):this.resolve(ce),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(q):U(q,ce))}}}function Ge(V,U){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=U||"demo-project",Y=V.iat||0,ze=V.sub||V.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:Y,exp:Y+3600,auth_time:Y,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},V);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(Ct)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function st(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ne(){var V;const U=null===(V=we())||void 0===V?void 0:V.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function re(){return"object"==typeof self&&self.self===self}function ee(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const V=Ve();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Qt(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rn(){try{return"object"==typeof indexedDB}catch{return!1}}function Ye(){return new Promise((V,U)=>{try{let q=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ce);Y.onsuccess=()=>{Y.result.close(),q||self.indexedDB.deleteDatabase(ce),V(!0)},Y.onupgradeneeded=()=>{q=!1},Y.onerror=()=>{var ze;U((null===(ze=Y.error)||void 0===ze?void 0:ze.message)||"")}}catch(q){U(q)}})}function or(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class At extends Error{constructor(U,q,ce){super(q),this.code=U,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,At.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(U,q,ce){this.service=U,this.serviceName=q,this.errors=ce}create(U,...q){const ce=q[0]||{},Y=`${this.service}/${U}`,ze=this.errors[U],Ct=ze?function Fn(V,U){return V.replace(bn,(q,ce)=>{const Y=U[ce];return null!=Y?String(Y):`<${ce}?>`})}(ze,ce):"Error";return new At(Y,`${this.serviceName}: ${Ct} (${Y}).`,ce)}}const bn=/\{\$([^}]+)}/g;function Mi(V,U){return Object.prototype.hasOwnProperty.call(V,U)}function jo(V){for(const U in V)if(Object.prototype.hasOwnProperty.call(V,U))return!1;return!0}function Fr(V,U){if(V===U)return!0;const q=Object.keys(V),ce=Object.keys(U);for(const Y of q){if(!ce.includes(Y))return!1;const ze=V[Y],Ct=U[Y];if(Ri(ze)&&Ri(Ct)){if(!Fr(ze,Ct))return!1}else if(ze!==Ct)return!1}for(const Y of ce)if(!q.includes(Y))return!1;return!0}function Ri(V){return null!==V&&"object"==typeof V}function $o(V){const U=[];for(const[q,ce]of Object.entries(V))Array.isArray(ce)?ce.forEach(Y=>{U.push(encodeURIComponent(q)+"="+encodeURIComponent(Y))}):U.push(encodeURIComponent(q)+"="+encodeURIComponent(ce));return U.length?"&"+U.join("&"):""}function hi(V){const U={};return V.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[Y,ze]=ce.split("=");U[decodeURIComponent(Y)]=decodeURIComponent(ze)}}),U}function tr(V){const U=V.indexOf("?");if(!U)return"";const q=V.indexOf("#",U);return V.substring(U,q>0?q:void 0)}function Xt(V,U){const q=new it(V,U);return q.subscribe.bind(q)}class it{constructor(U,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{U(this)}).catch(ce=>{this.error(ce)})}next(U){this.forEachObserver(q=>{q.next(U)})}error(U){this.forEachObserver(q=>{q.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,q,ce){let Y;if(void 0===U&&void 0===q&&void 0===ce)throw new Error("Missing Observer.");Y=function dn(V,U){if("object"!=typeof V||null===V)return!1;for(const q of U)if(q in V&&"function"==typeof V[q])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:q,complete:ce},void 0===Y.next&&(Y.next=ts),void 0===Y.error&&(Y.error=ts),void 0===Y.complete&&(Y.complete=ts);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),ze}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,U)}sendOne(U,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{q(this.observers[U])}catch(ce){typeof console<"u"&&console.error&&console.error(ce)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ts(){}function ns(V,U=1e3,q=2){const ce=U*Math.pow(q,V),Y=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+Y)}function Ur(V){return V&&V._delegate?V._delegate:V}},2434:(vt,Me,F)=>{var m=F(4650);let X=null;function O(){return X}const fe=new m.OlP("DocumentToken");let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function me(){return(0,m.LFG)(H)}()},providedIn:"platform"}),n})();const j=new m.OlP("Location Initialized");let H=(()=>{class n extends Ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){W()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){W()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function je(){return new H((0,m.LFG)(fe))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(pt)},providedIn:"root"}),n})();const we=new m.OlP("appBaseHref");let pt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+at(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+at(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ie),m.LFG(we,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+at(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+at(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ie),m.LFG(we,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+at(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=at,n.joinWithSlash=Re,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(m.LFG(ye))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function De(){return new Oe((0,m.LFG)(ye))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}class sl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new sl(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),qs(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{qs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function qs(n,e){n.context.$implicit=e.item}let mr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class zd{constructor(){this.$implicit=null,this.ngIf=null}}function rr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let ka=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function En(n,e){return new m.vHH(2100,!1)}();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),dl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Lu(n){return"server"===n}let _s=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Vu((0,m.LFG)(fe),window)}),n})();class Vu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Zr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gi(this.window.history)||gi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class co extends class uh extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){X||(X=n)}(new co)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Jf(){return Is=Is||document.querySelector("base"),Is?Is.getAttribute("href"):null}();return null==t?null:function is(n){Wt=Wt||document.createElement("a"),Wt.setAttribute("href",n);const e=Wt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Is=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ru(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Wt,Is=null;const In=new m.OlP("TRANSITION_ID"),_l=[{provide:m.ip1,useFactory:function vl(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[In,fe,m.zs3],multi:!0}];let wl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ws=new m.OlP("EventManagerPlugins");let Qo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ws),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ds{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ss=(()=>{class n extends Yo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Wu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Wu))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Wu(n){O().remove(n)}const Ks={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ku=/%COMP%/g;function Jo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Jo(n,i,t):(i=i.replace(Ku,n),t.push(i))}return t}function lh(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let El=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Xo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new hh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Il(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Jo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qo),m.LFG(ss),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Xo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ks[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ea(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ea(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Ks[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ks[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,lh(r)):this.eventManager.addEventListener(e,t,lh(r))}}function ea(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hh extends Xo{constructor(e,t,r,i){super(e),this.component=r;const u=Jo(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function yi(n){return"_ngcontent-%COMP%".replace(Ku,n)}(i+"-"+r.id),this.hostAttr=function Zu(n){return"_nghost-%COMP%".replace(Ku,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Il extends Xo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Jo(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ga=(()=>{class n extends Ds{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const fh=["alt","control","meta","shift"],ho={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ph={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zs=(()=>{class n extends Ds{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),fh.forEach(D=>{const C=r.indexOf(D);C>-1&&(r.splice(C,1),c+=D+".")}),c+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=i,v.fullKey=c,v}static matchEventFullKeyCode(t,r){let i=ho[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),fh.forEach(c=>{c!==i&&(0,ph[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const fo=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function mh(){co.makeCurrent()},multi:!0},{provide:fe,useFactory:function Dl(){return(0,m.RDi)(document),document},deps:[]}]),ta=new m.OlP(""),Ka=[{provide:m.rWj,useClass:class qu{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(v){c=c||v,u--,0==u&&r(c)};i.forEach(function(v){v.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Yu=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Wa(){return new m.qLn},deps:[]},{provide:Ws,useClass:Ga,multi:!0,deps:[fe,m.R0b,m.Lbi]},{provide:Ws,useClass:Zs,multi:!0,deps:[fe]},{provide:El,useClass:El,deps:[Qo,ss,m.AFp]},{provide:m.FYo,useExisting:El},{provide:Yo,useExisting:ss},{provide:ss,useClass:ss,deps:[fe]},{provide:Qo,useClass:Qo,deps:[Ws,m.R0b]},{provide:class Bu{},useClass:wl,deps:[]},[]];let Tl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:In,useExisting:m.AFp},_l]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ta,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Yu,...Ka],imports:[dl,m.hGG]}),n})(),Za=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function bs(){return new Za((0,m.LFG)(fe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;class tc{}const os="*";function sp(n,e){return{type:7,name:n,definitions:e,options:{}}}function Wn(n,e=null){return{type:4,styles:e,timings:n}}function Xa(n,e=null){return{type:2,steps:n,options:e}}function Ss(n){return{type:6,styles:n,offset:null}}function nc(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function sa(n){Promise.resolve().then(n)}class as{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sa(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class eu{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?sa(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function wh(n){return new m.vHH(3e3,!1)}function Xs(){return typeof window<"u"&&typeof window.document<"u"}function Eo(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function eo(n){switch(n.length){case 0:return new as;case 1:return n[0];default:return new eu(n)}}function Fl(n,e,t,r,i=new Map,u=new Map){const c=[],f=[];let v=-1,D=null;if(r.forEach(C=>{const M=C.get("offset"),L=M==v,$=L&&D||new Map;C.forEach((Z,he)=>{let _e=he,He=Z;if("offset"!==he)switch(_e=e.normalizePropertyName(_e,c),He){case"!":He=i.get(he);break;case os:He=u.get(he);break;default:He=e.normalizeStyleValue(he,_e,He,c)}$.set(_e,He)}),L||f.push($),D=$,v=M}),c.length)throw function Pl(n){return new m.vHH(3502,!1)}();return f}function dc(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ah(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ah(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ah(t,"destroy",n)))}}function Ah(n,e,t){const u=hc(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function hc(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Xr(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function fc(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let ua=(n,e)=>!1,Io=(n,e,t)=>[],ca=null;function Do(n){const e=n.parentNode||n.host;return e===ca?null:e}(Eo()||typeof Element<"u")&&(Xs()?(ca=(()=>document.documentElement)(),ua=(n,e)=>{for(;e;){if(e===n)return!0;e=Do(e)}return!1}):ua=(n,e)=>n.contains(e),Io=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Bi=null,pc=!1;const gc=ua,mc=Io;let xs=(()=>{class n{validateStyleProperty(t){return function su(n){Bi||(Bi=function Vl(){return typeof document<"u"?document.body:null}()||{},pc=!!Bi.style&&"WebkitAppearance"in Bi.style);let e=!0;return Bi.style&&!function Ul(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Bi.style,!e&&pc&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Bi.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return gc(t,r)}getParentElement(t){return Do(t)}query(t,r,i){return mc(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],v){return new as(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),yc=(()=>{class n{}return n.NOOP=new xs,n})();const To="ng-enter",ji="ng-leave",vc="ng-trigger",_c=".ng-trigger",Bl="ng-animating",jl=".ng-animating";function Rs(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xh(parseFloat(e[1]),e[2])}function xh(n,e){return"s"===e?1e3*n:n}function E(n,e,t){return n.hasOwnProperty("duration")?n:function T(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(wh()),{duration:0,delay:0,easing:""};i=xh(parseFloat(f[1]),f[2]);const v=f[3];null!=v&&(u=xh(parseFloat(v),f[4]));const D=f[5];D&&(c=D)}else i=n;if(!t){let f=!1,v=e.length;i<0&&(e.push(function tu(){return new m.vHH(3100,!1)}()),f=!0),u<0&&(e.push(function Ml(){return new m.vHH(3101,!1)}()),f=!0),f&&e.splice(v,0,wh())}return{duration:i,delay:u,easing:c}}(n,e,t)}function x(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function P(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function de(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function qe(n,e,t){return t?e+":"+t+";":""}function $e(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=qe(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=qe(0,$l(t),n.style[t]));n.setAttribute("style",e)}function Je(n,e,t){n.style&&(e.forEach((r,i)=>{const u=Ei(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),Eo()&&$e(n))}function Tt(n,e){n.style&&(e.forEach((t,r)=>{const i=Ei(r);n.style[i]=""}),Eo()&&$e(n))}function xt(n){return Array.isArray(n)?1==n.length?n[0]:Xa(n):n}const Bn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ns(n){let e=[];if("string"==typeof n){let t;for(;t=Bn.exec(n);)e.push(t[1]);Bn.lastIndex=0}return e}function Ar(n,e,t){const r=n.toString(),i=r.replace(Bn,(u,c)=>{let f=e[c];return null==f&&(t.push(function nu(n){return new m.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function Br(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const wi=/-+([a-z0-9])/g;function Ei(n){return n.replace(wi,(...e)=>e[1].toUpperCase())}function $l(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ps(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function ru(n){return new m.vHH(3004,!1)}()}}function wc(n,e){return window.getComputedStyle(n)[e]}function Cm(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Hl(n,e,t){if(":"==n[0]){const v=function Hv(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function uc(n){return new m.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Dh(n){return new m.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(Kn(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(Kn(c,i))}(r,t,e)):t.push(n),t}const zl=new Set(["true","1"]),to=new Set(["false","0"]);function Kn(n,e){const t=zl.has(n)||to.has(n),r=zl.has(e)||to.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?zl.has(n):to.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?zl.has(e):to.has(e)),c&&f}}const hp=new RegExp("s*:selfs*,?","g");function Gl(n,e,t,r){return new zv(n).build(e,t,r)}class zv{constructor(e){this._driver=e}build(e,t,r){const i=new qv(t);return this._resetContextStyleTimingState(i),Ps(this,xt(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Eh(){return new m.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const v=f,D=v.name;D.toString().split(/\s*,\s*/).forEach(C=>{v.name=C,u.push(this.visitState(v,t))}),v.name=D}else if(1==f.type){const v=this.visitTransition(f,t);r+=v.queryCount,i+=v.depCount,c.push(v)}else t.errors.push(function Vi(){return new m.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(v=>{Ns(v).forEach(D=>{c.hasOwnProperty(D)||u.add(D)})})}),u.size&&(Br(u.values()),t.errors.push(function As(n,e){return new m.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ps(this,xt(e.animation),t);return{type:1,matchers:Cm(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ic(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ps(this,r,t)),options:Ic(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Ps(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:Ic(e.options)}}visitAnimate(e,t){const r=function Am(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return uu(E(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=uu(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=E(t,e);return uu(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:Ss({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const D={};r.easing&&(D.easing=r.easing),c=Ss(D)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(c,t);v.isEmptyStep=f,i=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===os?r.push(f):t.errors.push(new m.vHH(3002,!1)):r.push(P(f));let u=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!u))for(let v of f.values())if(v.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,v)=>{const D=t.collectedStyles.get(t.currentQuerySelector),C=D.get(v);let M=!0;C&&(u!=i&&u>=C.startTime&&i<=C.endTime&&(t.errors.push(function Ih(n,e,t,r,i){return new m.vHH(3010,!1)}()),M=!1),u=C.startTime),M&&D.set(v,{startTime:u,endTime:i}),t.options&&function _i(n,e,t){const r=e.params||{},i=Ns(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function oc(n){return new m.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ac(){return new m.vHH(3011,!1)}()),r;let u=0;const c=[];let f=!1,v=!1,D=0;const C=e.steps.map(He=>{const rt=this._makeStyleAst(He,t);let ot=null!=rt.offset?rt.offset:function Wv(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(rt.styles),ht=0;return null!=ot&&(u++,ht=rt.offset=ot),v=v||ht<0||ht>1,f=f||ht<D,D=ht,c.push(ht),rt});v&&t.errors.push(function iu(){return new m.vHH(3012,!1)}()),f&&t.errors.push(function yo(){return new m.vHH(3200,!1)}());const M=e.steps.length;let L=0;u>0&&u<M?t.errors.push(function Sr(){return new m.vHH(3202,!1)}()):0==u&&(L=1/(M-1));const $=M-1,Z=t.currentTime,he=t.currentAnimateTimings,_e=he.duration;return C.forEach((He,rt)=>{const ot=L>0?rt==$?1:L*rt:c[rt],ht=ot*_e;t.currentTime=Z+he.delay+ht,he.duration=ht,this._validateStyleAst(He,t),He.offset=ot,r.styles.push(He)}),r}visitReference(e,t){return{type:8,animation:Ps(this,xt(e.animation),t),options:Ic(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ic(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ic(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function Gv(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(hp,"")),n=n.replace(/@\*/g,_c).replace(/@\w+/g,t=>_c+"-"+t.slice(1)).replace(/:animating/g,jl),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Xr(t.collectedStyles,t.currentQuerySelector,new Map);const f=Ps(this,xt(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Ic(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Rl(){return new m.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:E(e.timings,t.errors,!0);return{type:12,animation:Ps(this,xt(e.animation),t),timings:r,options:null}}}class qv{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ic(n){return n?(n=x(n)).params&&(n.params=function fp(n){return n?x(n):null}(n.params)):n={},n}function uu(n,e,t){return{duration:n,delay:e,easing:t}}function Wl(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class Kl{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const gp=new RegExp(":enter","g"),Rm=new RegExp(":leave","g");function cu(n,e,t,r,i,u=new Map,c=new Map,f,v,D=[]){return(new Nm).buildKeyframes(n,e,t,r,i,u,c,f,v,D)}class Nm{buildKeyframes(e,t,r,i,u,c,f,v,D,C=[]){D=D||new Kl;const M=new Zl(e,t,D,i,u,C,[]);M.options=v;const L=v.delay?Rs(v.delay):0;M.currentTimeline.delayNextStep(L),M.currentTimeline.setStyles([c],null,M.errors,v),Ps(this,r,M);const $=M.timelines.filter(Z=>Z.containsAnimation());if($.length&&f.size){let Z;for(let he=$.length-1;he>=0;he--){const _e=$[he];if(_e.element===t){Z=_e;break}}Z&&!Z.allowOnlyTimelineStyles()&&Z.setStyles([f],null,M.errors,v)}return $.length?$.map(Z=>Z.buildKeyframes()):[Wl(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const c="number"==typeof u?u:Rs(Ar(u,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Rs(r.duration):null,f=null!=r.delay?Rs(r.delay):null;return 0!==c&&e.forEach(v=>{const D=t.appendInstructionToTimeline(v,c,f);u=Math.max(u,D.duration+D.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Ps(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Rh);const c=Rs(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Ps(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Rs(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Ps(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return E(t.params?Ar(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(v=>{f.forwardTime((v.offset||0)*u),f.setStyles(v.styles,v.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Rs(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Rh);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let v=null;f.forEach((D,C)=>{t.currentQueryIndex=C;const M=t.createSubContext(e.options,D);u&&M.delayNextStep(u),D===t.element&&(v=M.currentTimeline),Ps(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let v=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=f-v;break;case"full":v=r.currentStaggerTime}const C=t.currentTimeline;v&&C.delayNextStep(v);const M=C.currentTime;Ps(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const Rh={};class Zl{constructor(e,t,r,i,u,c,f,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new da(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Rs(r.duration)),null!=r.delay&&(i.delay=Rs(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=Ar(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new Zl(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=Rh,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new Pm(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(gp,"."+this._enterClassName)).replace(Rm,"."+this._leaveClassName);let D=this._driver.query(this.element,e,1!=r);0!==r&&(D=r<0?D.slice(D.length+r,D.length):D.slice(0,r)),f.push(...D)}return!u&&0==f.length&&c.push(function Vn(n){return new m.vHH(3014,!1)}()),f}}class da{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new da(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||os),this._currentKeyframe.set(t,os);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function Kv(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,os)}else de(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,v]of c){const D=Ar(v,u,r);this._pendingStyles.set(f,D),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??os),this._updateStyle(f,D)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,v)=>{const D=de(f,new Map,this._backFill);D.forEach((C,M)=>{"!"===C?e.add(M):C===os&&t.add(M)}),r||D.set("offset",v/this.duration),i.push(D)});const u=e.size?Br(e.values()):[],c=t.size?Br(t.values()):[];if(r){const f=i[0],v=new Map(f);f.set("offset",0),v.set("offset",1),i=[f,v]}return Wl(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class Pm extends da{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,v=de(e[0]);v.set("offset",0),u.push(v);const D=de(e[0]);D.set("offset",ha(f)),u.push(D);const C=e.length-1;for(let M=1;M<=C;M++){let L=de(e[M]);const $=L.get("offset");L.set("offset",ha((t+$*r)/c)),u.push(L)}r=c,t=0,i="",e=u}return Wl(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function ha(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Dc{}const yp=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Nh extends Dc{normalizePropertyName(e,t){return Ei(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(yp.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function oa(n,e){return new m.vHH(3005,!1)}())}return c+u}}function us(n,e,t,r,i,u,c,f,v,D,C,M,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:v,preStyleProps:D,postStyleProps:C,totalTime:M,errors:L}}const Ph={};class Ql{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Zv(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,f,v,D,C){const M=[],L=this.ast.options&&this.ast.options.params||Ph,Z=this.buildStyles(r,f&&f.params||Ph,M),he=v&&v.params||Ph,_e=this.buildStyles(i,he,M),He=new Set,rt=new Map,ot=new Map,ht="void"===i,jt={params:km(he,L),delay:this.ast.options?.delay},$t=C?[]:cu(e,t,this.ast.animation,u,c,Z,_e,jt,D,M);let wn=0;if($t.forEach(xa=>{wn=Math.max(xa.duration+xa.delay,wn)}),M.length)return us(t,this._triggerName,r,i,ht,Z,_e,[],[],rt,ot,wn,M);$t.forEach(xa=>{const Hd=xa.element,yN=Xr(rt,Hd,new Set);xa.preStyleProps.forEach(pm=>yN.add(pm));const eE=Xr(ot,Hd,new Set);xa.postStyleProps.forEach(pm=>eE.add(pm)),Hd!==t&&He.add(Hd)});const Yi=Br(He.values());return us(t,this._triggerName,r,i,ht,Z,_e,$t,Yi,rt,ot,wn)}}function km(n,e){const t=x(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Tc{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=x(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,f)=>{c&&(c=Ar(c,i,t));const v=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,v,c,t),r.set(v,c)})}),r}}class vp{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Tc(i.style,i.options&&i.options.params||{},r))}),wp(this.states,"true","1"),wp(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Ql(e,i,this.states))}),this.fallbackTransition=function _p(n,e,t){return new Ql(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function wp(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Ep=new Kl;class Ip{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=Gl(this._driver,t,r,[]);if(r.length)throw function cc(n){return new m.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=Fl(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const f=new Map;if(u?(c=cu(this._driver,t,u,To,ji,new Map,new Map,r,Ep,i),c.forEach(C=>{const M=Xr(f,C.element,new Map);C.postStyleProps.forEach(L=>M.set(L,null))})):(i.push(function bh(){return new m.vHH(3300,!1)}()),c=[]),i.length)throw function _o(n){return new m.vHH(3504,!1)}();f.forEach((C,M)=>{C.forEach((L,$)=>{C.set($,this._driver.computeStyle(M,$,os))})});const D=eo(c.map(C=>{const M=f.get(C.element);return this._buildPlayer(C,new Map,M)}));return this._playersById.set(e,D),D.onDestroy(()=>this.destroy(e)),this.players.push(D),D}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function kl(n){return new m.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=hc(t,"","","");return dc(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Dp="ng-animate-queued",fa="ng-animate-disabled",Tp=[],du={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bc={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},cs="__ng_removed";class bo{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Jl(n){return n??null}(r?e.value:e),r){const u=x(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const hu="void",bp=new bo(hu);class Jv{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ti(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function aa(n,e){return new m.vHH(3302,!1)}();if(null==r||0==r.length)throw function Ch(n){return new m.vHH(3303,!1)}();if(!function e_(n){return"start"==n||"done"==n}(r))throw function cp(n,e){return new m.vHH(3400,!1)}();const u=Xr(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Xr(this._engine.statesByElement,e,new Map);return f.has(t)||(ti(e,vc),ti(e,vc+"-"+t),f.set(t,bp)),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(c);v>=0&&u.splice(v,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function wo(n){return new m.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new Yl(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(ti(e,vc),ti(e,vc+"-"+t),this._engine.statesByElement.set(e,f=new Map));let v=f.get(t);const D=new bo(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&D.absorbOptions(v.options),f.set(t,D),v||(v=bp),D.value!==hu&&v.value===D.value){if(!function cE(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,D.params)){const he=[],_e=u.matchStyles(v.value,v.params,he),He=u.matchStyles(D.value,D.params,he);he.length?this._engine.reportError(he):this._engine.afterFlush(()=>{Tt(e,_e),Je(e,He)})}return}const L=Xr(this._engine.playersByElement,e,[]);L.forEach(he=>{he.namespaceId==this.id&&he.triggerName==t&&he.queued&&he.destroy()});let $=u.matchTransition(v.value,D.value,e,D.params),Z=!1;if(!$){if(!i)return;$=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:$,fromState:v,toState:D,player:c,isFallbackTransition:Z}),Z||(ti(e,Dp),c.onStart(()=>{ed(e,Dp)})),c.onDone(()=>{let he=this.players.indexOf(c);he>=0&&this.players.splice(he,1);const _e=this._engine.playersByElement.get(e);if(_e){let He=_e.indexOf(c);He>=0&&_e.splice(He,1)}}),this.players.push(c),L.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,_c,!0);r.forEach(i=>{if(i[cs])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(u.forEach((v,D)=>{if(c.set(D,v.value),this._triggers.has(D)){const C=this.trigger(e,D,hu,i);C&&f.push(C)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&eo(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const v=this._triggers.get(c).fallbackTransition,D=r.get(c)||bp,C=new bo(hu),M=new Yl(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:v,fromState:D,toState:C,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[cs];(!u||u===du)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ti(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const v=hc(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,dc(r.player,f.phase,v,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Xv{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Jv(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const v=i.get(f);if(v){const D=r.indexOf(v);r.splice(D+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(Cc(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Cc(t))return;const u=t[cs];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ti(e,fa)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ed(e,fa))}removeNode(e,t,r,i){if(Cc(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[cs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return Cc(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,_c,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,jl,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return eo(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[cs];if(t&&t.setForRemoval){if(e[cs]=du,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(fa)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ti(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?eo(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function lc(n){return new m.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new Kl,i=[],u=new Map,c=[],f=new Map,v=new Map,D=new Map,C=new Set;this.disabledNodes.forEach(yt=>{C.add(yt);const Nt=this.driver.query(yt,".ng-animate-queued",!0);for(let Ft=0;Ft<Nt.length;Ft++)C.add(Nt[Ft])});const M=this.bodyNode,L=Array.from(this.statesByElement.keys()),$=Fm(L,this.collectedEnterElements),Z=new Map;let he=0;$.forEach((yt,Nt)=>{const Ft=To+he++;Z.set(Nt,Ft),yt.forEach(mn=>ti(mn,Ft))});const _e=[],He=new Set,rt=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const Nt=this.collectedLeaveElements[yt],Ft=Nt[cs];Ft&&Ft.setForRemoval&&(_e.push(Nt),He.add(Nt),Ft.hasAnimation?this.driver.query(Nt,".ng-star-inserted",!0).forEach(mn=>He.add(mn)):rt.add(Nt))}const ot=new Map,ht=Fm(L,Array.from(He));ht.forEach((yt,Nt)=>{const Ft=ji+he++;ot.set(Nt,Ft),yt.forEach(mn=>ti(mn,Ft))}),e.push(()=>{$.forEach((yt,Nt)=>{const Ft=Z.get(Nt);yt.forEach(mn=>ed(mn,Ft))}),ht.forEach((yt,Nt)=>{const Ft=ot.get(Nt);yt.forEach(mn=>ed(mn,Ft))}),_e.forEach(yt=>{this.processLeaveNode(yt)})});const jt=[],$t=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(Ft=>{const mn=Ft.player,xi=Ft.element;if(jt.push(mn),this.collectedEnterElements.length){const ms=xi[cs];if(ms&&ms.setForMove){if(ms.previousTriggersValues&&ms.previousTriggersValues.has(Ft.triggerName)){const gm=ms.previousTriggersValues.get(Ft.triggerName),Ma=this.statesByElement.get(Ft.element);if(Ma&&Ma.has(Ft.triggerName)){const xb=Ma.get(Ft.triggerName);xb.value=gm,Ma.set(Ft.triggerName,xb)}}return void mn.destroy()}}const il=!M||!this.driver.containsElement(M,xi),Vo=ot.get(xi),jf=Z.get(xi),lr=this._buildInstruction(Ft,r,jf,Vo,il);if(lr.errors&&lr.errors.length)return void $t.push(lr);if(il)return mn.onStart(()=>Tt(xi,lr.fromStyles)),mn.onDestroy(()=>Je(xi,lr.toStyles)),void i.push(mn);if(Ft.isFallbackTransition)return mn.onStart(()=>Tt(xi,lr.fromStyles)),mn.onDestroy(()=>Je(xi,lr.toStyles)),void i.push(mn);const wN=[];lr.timelines.forEach(ms=>{ms.stretchStartingKeyframe=!0,this.disabledNodes.has(ms.element)||wN.push(ms)}),lr.timelines=wN,r.append(xi,lr.timelines),c.push({instruction:lr,player:mn,element:xi}),lr.queriedElements.forEach(ms=>Xr(f,ms,[]).push(mn)),lr.preStyleProps.forEach((ms,gm)=>{if(ms.size){let Ma=v.get(gm);Ma||v.set(gm,Ma=new Set),ms.forEach((xb,GA)=>Ma.add(GA))}}),lr.postStyleProps.forEach((ms,gm)=>{let Ma=D.get(gm);Ma||D.set(gm,Ma=new Set),ms.forEach((xb,GA)=>Ma.add(GA))})});if($t.length){const yt=[];$t.forEach(Nt=>{yt.push(function Sh(n,e){return new m.vHH(3505,!1)}())}),jt.forEach(Nt=>Nt.destroy()),this.reportError(yt)}const wn=new Map,Yi=new Map;c.forEach(yt=>{const Nt=yt.element;r.has(Nt)&&(Yi.set(Nt,Nt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,wn))}),i.forEach(yt=>{const Nt=yt.element;this._getPreviousPlayers(Nt,!1,yt.namespaceId,yt.triggerName,null).forEach(mn=>{Xr(wn,Nt,[]).push(mn),mn.destroy()})});const xa=_e.filter(yt=>Um(yt,v,D)),Hd=new Map;Xl(Hd,this.driver,rt,D,os).forEach(yt=>{Um(yt,v,D)&&xa.push(yt)});const eE=new Map;$.forEach((yt,Nt)=>{Xl(eE,this.driver,new Set(yt),v,"!")}),xa.forEach(yt=>{const Nt=Hd.get(yt),Ft=eE.get(yt);Hd.set(yt,new Map([...Array.from(Nt?.entries()??[]),...Array.from(Ft?.entries()??[])]))});const pm=[],vN=[],_N={};c.forEach(yt=>{const{element:Nt,player:Ft,instruction:mn}=yt;if(r.has(Nt)){if(C.has(Nt))return Ft.onDestroy(()=>Je(Nt,mn.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(mn.totalTime),void i.push(Ft);let xi=_N;if(Yi.size>1){let Vo=Nt;const jf=[];for(;Vo=Vo.parentNode;){const lr=Yi.get(Vo);if(lr){xi=lr;break}jf.push(Vo)}jf.forEach(lr=>Yi.set(lr,xi))}const il=this._buildAnimation(Ft.namespaceId,mn,wn,u,eE,Hd);if(Ft.setRealPlayer(il),xi===_N)pm.push(Ft);else{const Vo=this.playersByElement.get(xi);Vo&&Vo.length&&(Ft.parentPlayer=eo(Vo)),i.push(Ft)}}else Tt(Nt,mn.fromStyles),Ft.onDestroy(()=>Je(Nt,mn.toStyles)),vN.push(Ft),C.has(Nt)&&i.push(Ft)}),vN.forEach(yt=>{const Nt=u.get(yt.element);if(Nt&&Nt.length){const Ft=eo(Nt);yt.setRealPlayer(Ft)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<_e.length;yt++){const Nt=_e[yt],Ft=Nt[cs];if(ed(Nt,ji),Ft&&Ft.hasAnimation)continue;let mn=[];if(f.size){let il=f.get(Nt);il&&il.length&&mn.push(...il);let Vo=this.driver.query(Nt,jl,!0);for(let jf=0;jf<Vo.length;jf++){let lr=f.get(Vo[jf]);lr&&lr.length&&mn.push(...lr)}}const xi=mn.filter(il=>!il.destroyed);xi.length?Lm(this,Nt,xi):this.processLeaveNode(Nt)}return _e.length=0,pm.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const Nt=this.players.indexOf(yt);this.players.splice(Nt,1)}),yt.play()}),pm}elementContainsData(e,t){let r=!1;const i=t[cs];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const v=!u||u==hu;f.forEach(D=>{D.queued||!v&&D.triggerName!=i||c.push(D)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const D=v.element,C=D!==u,M=Xr(r,D,[]);this._getPreviousPlayers(D,C,c,f,t.toState).forEach($=>{const Z=$.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),$.destroy(),M.push($)})}Tt(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,v=t.element,D=[],C=new Set,M=new Set,L=t.timelines.map(Z=>{const he=Z.element;C.add(he);const _e=he[cs];if(_e&&_e.removedBeforeQueried)return new as(Z.duration,Z.delay);const He=he!==v,rt=function uE(n){const e=[];return t_(n,e),e}((r.get(he)||Tp).map(wn=>wn.getRealPlayer())).filter(wn=>!!wn.element&&wn.element===he),ot=u.get(he),ht=c.get(he),jt=Fl(0,this._normalizer,0,Z.keyframes,ot,ht),$t=this._buildPlayer(Z,jt,rt);if(Z.subTimeline&&i&&M.add(he),He){const wn=new Yl(e,f,he);wn.setRealPlayer($t),D.push(wn)}return $t});D.forEach(Z=>{Xr(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function ei(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Z.element,Z))}),C.forEach(Z=>ti(Z,Bl));const $=eo(L);return $.onDestroy(()=>{C.forEach(Z=>ed(Z,Bl)),Je(v,t.toStyles)}),M.forEach(Z=>{Xr(i,Z,[]).push($)}),$}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new as(e.duration,e.delay)}}class Yl{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new as,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>dc(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Xr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Cc(n){return n&&1===n.nodeType}function ls(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Xl(n,e,t,r,i){const u=[];t.forEach(v=>u.push(ls(v)));const c=[];r.forEach((v,D)=>{const C=new Map;v.forEach(M=>{const L=e.computeStyle(D,M,i);C.set(M,L),(!L||0==L.length)&&(D[cs]=bc,c.push(D))}),n.set(D,C)});let f=0;return t.forEach(v=>ls(v,u[f++])),c}function Fm(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let v=u.get(f);if(v)return v;const D=f.parentNode;return v=t.has(D)?D:i.has(D)?1:c(D),u.set(f,v),v}return e.forEach(f=>{const v=c(f);1!==v&&t.get(v).push(f)}),t}function ti(n,e){n.classList?.add(e)}function ed(n,e){n.classList?.remove(e)}function Lm(n,e,t){eo(t).onDone(()=>n.processLeaveNode(e))}function t_(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof eu?t_(r.players,e):e.push(r)}}function Um(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class y{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new Xv(e,t,r),this._timelineEngine=new Ip(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const v=[],C=Gl(this._driver,u,v,[]);if(v.length)throw function Nl(n,e){return new m.vHH(3404,!1)}();f=function Om(n,e,t){return new vp(n,e,t)}(i,C,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=fc(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=fc(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let p=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Je(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Je(this._element,this._initialStyles),this._endStyles&&(Je(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Tt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Tt(this._element,this._endStyles),this._endStyles=null),Je(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function w(n){let e=null;return n.forEach((t,r)=>{(function S(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class R{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:wc(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class B{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return gc(e,t)}getParentElement(e){return Do(e)}query(e,t,r){return mc(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const v={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(v.easing=u);const D=new Map,C=c.filter($=>$ instanceof R);(function bm(n,e){return 0===n||0===e})(r,i)&&C.forEach($=>{$.currentSnapshot.forEach((Z,he)=>D.set(he,Z))});let M=function G(n){return n.length?n[0]instanceof Map?n:n.map(e=>P(e)):[]}(t).map($=>de($));M=function rE(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(f=>c.set(f,wc(n,f)))}}return e}(e,M,D);const L=function h(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=w(e[0]),e.length>1&&(r=w(e[e.length-1]))):e instanceof Map&&(t=w(e)),t||r?new p(n,t,r):null}(e,M);return new R(e,M,v,L)}}let Q=(()=>{class n extends tc{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Xa(t):t;return tt(this._renderer,null,r,"register",[i]),new Ae(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(fe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ae extends class Ja{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Be(this._id,e,t||{},this._renderer)}}class Be{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return tt(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function tt(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Sn="@.disabled";let ks=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=c?.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(u);return C||(C=new td("",u,this.engine),this._rendererCache.set(u,C)),C}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const v=C=>{Array.isArray(C)?C.forEach(v):this.engine.registerTrigger(c,f,t,C.name,C)};return r.data.animation.forEach(v),new Vm(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(y),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class td{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Sn?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Vm extends td{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Sn?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Cp(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function kh(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let Bm=(()=>{class n extends y{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe),m.LFG(yc),m.LFG(Dc),m.LFG(m.z2F))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Oh=[{provide:tc,useClass:Q},{provide:Dc,useFactory:function Sp(){return new Nh}},{provide:y,useClass:Bm},{provide:m.FYo,useFactory:function jm(n,e,t){return new ks(n,e,t)},deps:[El,y,m.R0b]}],nd=[{provide:yc,useFactory:()=>new B},{provide:m.QbO,useValue:"BrowserAnimations"},...Oh],Ap=[{provide:yc,useClass:xs},{provide:m.QbO,useValue:"NoopAnimations"},...Oh];let ni=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Ap:nd}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:nd,imports:[Tl]}),n})();var xr=F(8421),Os=F(9751),ri=F(5577),Mb=F(1144),pa=F(576),Ut=F(4004);const{isArray:Rb}=Array;function hE(n){return(0,Ut.U)(e=>function dE(n,e){return Rb(e)?n(...e):n(e)}(n,e))}const fE=["addListener","removeListener"],Nb=["addEventListener","removeEventListener"],Pb=["on","off"];function r_(n,e,t,r){if((0,pa.m)(t)&&(r=t,t=void 0),r)return r_(n,e,t).pipe(hE(r));const[i,u]=function fu(n){return(0,pa.m)(n.addEventListener)&&(0,pa.m)(n.removeEventListener)}(n)?Nb.map(c=>f=>n[c](e,f,t)):function kb(n){return(0,pa.m)(n.addListener)&&(0,pa.m)(n.removeListener)}(n)?fE.map(pE(n,e)):function Lh(n){return(0,pa.m)(n.on)&&(0,pa.m)(n.off)}(n)?Pb.map(pE(n,e)):[];if(!i&&(0,Mb.z)(n))return(0,ri.z)(c=>r_(c,e,t))((0,xr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Os.y(c=>{const f=(...v)=>c.next(1<v.length?v:v[0]);return i(f),()=>u(f)})}function pE(n,e){return t=>r=>n[t](e,r)}var rd=F(515),Hi=F(4482),ds=F(5403);function xp(n){return n<=0?()=>rd.E:(0,Hi.e)((e,t)=>{let r=0;e.subscribe((0,ds.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}var gE=F(4986),Zn=F(8996),hs=F(7669);function mt(...n){const e=(0,hs.yG)(n);return(0,Zn.D)(n,e)}var Mr=F(4976),Mp=F(8189);function i_(...n){return function mE(){return(0,Mp.J)(1)}()((0,Zn.D)(n,(0,hs.yG)(n)))}function Sc(...n){const e=(0,hs.yG)(n);return(0,Hi.e)((t,r)=>{(e?i_(n,t,e):i_(n,t)).subscribe(r)})}function s_(){return(0,Hi.e)((n,e)=>{let t,r=!1;n.subscribe((0,ds.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Ob(n,e,t,r,i){return(u,c)=>{let f=t,v=e,D=0;u.subscribe((0,ds.x)(c,C=>{const M=D++;v=f?n(v,C,M):(f=!0,C),r&&c.next(v)},i&&(()=>{f&&c.next(v),c.complete()})))}}function id(n,e){return(0,Hi.e)(Ob(n,e,arguments.length>=2,!0))}var sd=F(4671);function qA(n,e){return n===e}function Ii(n,e){return(0,Hi.e)((t,r)=>{let i=0;t.subscribe((0,ds.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Xe,Fs=F(2011),Lb=(F(2644),F(3942)),Ee=F(5861),od=F(6881),$m=F(4859),Ac=F(1877),ln=F(2090),Ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Co={},Rp=Rp||{},Vt=Ub||self;function Uh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Np(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Hm="closure_uid_"+(1e9*Math.random()>>>0),vE=0;function ad(n,e,t){return n.call.apply(n.bind,arguments)}function _E(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ii(n,e,t){return(ii=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ad:_E).apply(null,arguments)}function zm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function si(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function So(){this.s=this.s,this.o=this.o}So.prototype.s=!1,So.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Vb(n){Object.prototype.hasOwnProperty.call(n,Hm)&&n[Hm]||(n[Hm]=++vE)}(this)},So.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const o_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Gm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function a_(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Uh(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function jr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}jr.prototype.h=function(){this.defaultPrevented=!0};var wE=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",()=>{},e),Vt.removeEventListener("test",()=>{},e)}catch{}return n}();function xc(n){return/^[\s\xa0]*$/.test(n)}function ud(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function Ao(n){return-1!=ud().indexOf(n)}function Pp(n){return Pp[" "](n),n}Pp[" "]=function(){};var kp,n,u_=Ao("Opera"),ga=Ao("Trident")||Ao("MSIE"),IE=Ao("Edge"),qm=IE||ga,DE=Ao("Gecko")&&!(-1!=ud().toLowerCase().indexOf("webkit")&&!Ao("Edge"))&&!(Ao("Trident")||Ao("MSIE"))&&!Ao("Edge"),jb=-1!=ud().toLowerCase().indexOf("webkit")&&!Ao("Edge");function c_(){var n=Vt.document;return n?n.documentMode:void 0}e:{var Wm="",TE=(n=ud(),DE?/rv:([^\);]+)(\)|;)/.exec(n):IE?/Edge\/([\d\.]+)/.exec(n):ga?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jb?/WebKit\/(\S+)/.exec(n):u_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(TE&&(Wm=TE?TE[1]:""),ga){var Km=c_();if(null!=Km&&Km>parseFloat(Wm)){kp=String(Km);break e}}kp=Wm}var $b=Vt.document&&ga&&(c_()||parseInt(kp,10))||void 0;function Op(n,e){if(jr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(DE){e:{try{Pp(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xo[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Op.$.h.call(this)}}si(Op,jr);var xo={2:"touch",3:"pen",4:"mouse"};Op.prototype.h=function(){Op.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fp="closure_listenable_"+(1e6*Math.random()|0),bE=0;function Hb(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++bE,this.fa=this.ia=!1}function Zm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function h_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function f_(n){const e={};for(const t in n)e[t]=n[t];return e}const CE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<CE.length;u++)t=CE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Qm(n){this.src=n,this.g={},this.h=0}function Bt(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=o_(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Zm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ym(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}Qm.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Ym(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new Hb(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var Jm="closure_lm_"+(1e6*Math.random()|0),Xm={};function AE(n,e,t,r,i){if(r&&r.once)return RE(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)AE(n,e[u],t,r,i);return null}return t=pu(t),n&&n[Fp]?n.O(e,t,Np(r)?!!r.capture:!!r,i):xE(n,e,t,!1,r,i)}function xE(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Np(i)?!!i.capture:!!i,f=ey(n);if(f||(n[Jm]=f=new Qm(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function ME(){const e=WA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wE||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(NE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function RE(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)RE(n,e[u],t,r,i);return null}return t=pu(t),n&&n[Fp]?n.P(e,t,Np(r)?!!r.capture:!!r,i):xE(n,e,t,!0,r,i)}function p_(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)p_(n,e[u],t,r,i);else r=Np(r)?!!r.capture:!!r,t=pu(t),n&&n[Fp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ym(u=n.g[e],t,r,i))&&(Zm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=ey(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ym(e,t,r,i)),(t=-1<n?e[n]:null)&&g_(t))}function g_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Fp])Bt(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(NE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ey(e))?(Bt(t,n),0==t.h&&(t.src=null,e[Jm]=null)):Zm(n)}}}function NE(n){return n in Xm?Xm[n]:Xm[n]="on"+n}function WA(n,e){if(n.fa)n=!0;else{e=new Op(e,this);var t=n.listener,r=n.la||n.src;n.ia&&g_(n),n=t.call(r,e)}return n}function ey(n){return(n=n[Jm])instanceof Qm?n:null}var ty="__closure_events_fn_"+(1e9*Math.random()>>>0);function pu(n){return"function"==typeof n?n:(n[ty]||(n[ty]=function(e){return n.handleEvent(e)}),n[ty])}function $r(){So.call(this),this.i=new Qm(this),this.S=this,this.J=null}function Rr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new jr(e,n);else if(e instanceof jr)e.target=e.target||n;else{var i=e;SE(e=new jr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Vh(c,r,!0,e)&&i}if(i=Vh(c=e.g=n,r,!0,e)&&i,i=Vh(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Vh(c=e.g=t[u],r,!1,e)&&i}function Vh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var f=c.listener,v=c.la||c.src;c.ia&&Bt(n.i,c),i=!1!==f.call(v,r)&&i}}return i&&!r.defaultPrevented}si($r,So),$r.prototype[Fp]=!0,$r.prototype.removeEventListener=function(n,e,t,r){p_(this,n,e,t,r)},$r.prototype.N=function(){if($r.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zm(t[r]);delete n.g[e],n.h--}}this.J=null},$r.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},$r.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var m_=Vt.JSON.stringify;function ZA(){var n=ny;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var PE=new class KA{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new kE,n=>n.reset());class kE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function YA(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Gb(n){Vt.setTimeout(()=>{throw n},0)}let ma,Lp=!1,ny=new class QA{constructor(){this.h=this.g=null}add(e,t){const r=PE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Up=()=>{const n=Vt.Promise.resolve(void 0);ma=()=>{n.then(qb)}};var qb=()=>{for(var n;n=ZA();){try{n.h.call(n.g)}catch(t){Gb(t)}var e=PE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Lp=!1};function Vp(n,e){$r.call(this),this.h=n||1,this.g=e||Vt,this.j=ii(this.qb,this),this.l=Date.now()}function y_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function v_(n,e,t){if("function"==typeof n)t&&(n=ii(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ii(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function OE(n){n.g=v_(()=>{n.g=null,n.i&&(n.i=!1,OE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}si(Vp,$r),(Xe=Vp.prototype).ga=!1,Xe.T=null,Xe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Rr(this,"tick"),this.ga&&(y_(this),this.start()))}},Xe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.N=function(){Vp.$.N.call(this),y_(this),delete this.g};class Wb extends So{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:OE(this)}N(){super.N(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bp(n){So.call(this),this.h=n,this.g={}}si(Bp,So);var __=[];function FE(n,e,t,r){Array.isArray(t)||(t&&(__[0]=t.toString()),t=__);for(var i=0;i<t.length;i++){var u=AE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function w_(n){h_(n.g,function(e,t){this.g.hasOwnProperty(t)&&g_(e)},n),n.g={}}function jp(){this.g=!0}function Mc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function XA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return m_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Bp.prototype.N=function(){Bp.$.N.call(this),w_(this)},Bp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jp.prototype.Ea=function(){this.g=!1},jp.prototype.info=function(){};var no={},I_=null;function $p(){return I_=I_||new $r}function Hp(n){jr.call(this,no.Ta,n)}function zi(n){const e=$p();Rr(e,new Hp(e))}function D_(n,e){jr.call(this,no.STAT_EVENT,n),this.stat=e}function Gi(n){const e=$p();Rr(e,new D_(e,n))}function ry(n,e){jr.call(this,no.Ua,n),this.size=e}function Ls(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}no.Ta="serverreachability",si(Hp,jr),no.STAT_EVENT="statevent",si(D_,jr),no.Ua="timingevent",si(ry,jr);var Bh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},T_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zp(){}function b_(){}zp.prototype.h=null;var Gp,iy={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jh(){jr.call(this,"d")}function $h(){jr.call(this,"c")}function Hh(){}function cd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Bp(this),this.P=Yb,this.V=new Vp(n=qm?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qb}function Qb(){this.i=null,this.g="",this.h=!1}si(jh,jr),si($h,jr),si(Hh,zp),Hh.prototype.g=function(){return new XMLHttpRequest},Hh.prototype.i=function(){return{}},Gp=new Hh;var Yb=45e3,C_={},sy={};function S_(n,e,t){n.L=1,n.v=qp(Rc(e)),n.s=t,n.S=!0,A_(n,null)}function A_(n,e){n.G=Date.now(),zh(n),n.A=Rc(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),hd(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Qb,n.g=my(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Wb(ii(n.Pa,n,n.g),n.O)),FE(n.U,n.g,"readystatechange",n.nb),e=n.I?f_(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),zi(),function E_(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),v=0;v<f.length;v++){var D=f[v].split("=");if(1<D.length){var C=D[0];D=D[1];var M=C.split("_");c=2<=M.length&&"type"==M[1]?c+(C+"=")+D+"&":c+(C+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Jb(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function LE(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=ex(n,t),i==sy){4==e&&(n.o=4,Gi(14),r=!1),Mc(n.j,n.m,null,"[Incomplete Response]");break}if(i==C_){n.o=4,Gi(15),Mc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Mc(n.j,n.m,i,null),UE(n,i)}Jb(n)&&i!=sy&&i!=C_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Yh(e),e.M=!0,Gi(11))):(Mc(n.j,n.m,t,"[Invalid Chunked Response]"),Gh(n),ld(n))}function ex(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sy:(t=Number(e.substring(t,r)),isNaN(t)?C_:(r+=1)+t>e.length?sy:(e=e.slice(r,r+t),n.C=r+t,e))}function zh(n){n.Y=Date.now()+n.P,x_(n,n.P)}function x_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ls(ii(n.lb,n),e)}function oy(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function ld(n){0==n.l.H||n.J||hC(n.l,n)}function Gh(n){oy(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,y_(n.V),w_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function UE(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Zp(t.i,n)))if(!n.K&&Zp(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Jh(t),eg(t)}rg(t),Gi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ls(ii(t.ib,t),6e3));if(1>=uy(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Oc(t,11)}else if((n.K||t.g==n)&&Jh(t),!xc(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let D=i[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const C=D[3];null!=C&&(t.ra=C,t.l.info("VER="+t.ra));const M=D[4];null!=M&&(t.Ga=M,t.l.info("SVER="+t.Ga));const L=D[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Z=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.i;u.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(cy(u,u.h),u.h=null))}if(r.F){const he=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;he&&(r.Da=he,jn(r.I,r.F,he))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=j_(r,r.J?r.pa:null,r.Y),c.K){ly(r.i,c);var f=c,v=r.L;v&&f.setTimeout(v),f.B&&(oy(f),zh(f)),r.g=c}else ng(r);0<t.j.length&&py(t)}else"stop"!=D[0]&&"close"!=D[0]||Oc(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Oc(t,7):KE(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}zi()}catch{}}function Xb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Uh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function nx(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Uh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function tx(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Uh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(Xe=cd.prototype).setTimeout=function(n){this.P=n},Xe.nb=function(n){n=n.target;const e=this.M;e&&3==Ro(n)?e.l():this.Pa(n)},Xe.Pa=function(n){try{if(n==this.g)e:{const C=Ro(this.g);var e=this.g.Ia();if(this.g.da(),!(3>C)&&(3!=C||qm||this.g&&(this.h.h||this.g.ja()||U_(this.g)))){this.J||4!=C||7==e||zi(),oy(this);var t=this.g.da();this.ca=t;t:if(Jb(this)){var r=U_(this.g);n="";var i=r.length,u=4==Ro(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gh(this),ld(this);var c="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function JA(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,C,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,v=this.g;if((f=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xc(f)){var D=f;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Gi(12),Gh(this),ld(this);break e}Mc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,UE(this,t)}this.S?(LE(this,C,c),qm&&this.i&&3==C&&(FE(this.U,this.V,"tick",this.mb),this.V.start())):(Mc(this.j,this.m,c,null),UE(this,c)),4==C&&Gh(this),this.i&&!this.J&&(4==C?hC(this.l,this):(this.i=!1,zh(this)))}else(function cC(n){const e={};n=(n.g&&2<=Ro(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(xc(n[r]))continue;var t=YA(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function zb(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Gi(12)):(this.o=0,Gi(13)),Gh(this),ld(this)}}}catch{}},Xe.mb=function(){if(this.g){var n=Ro(this.g),e=this.g.ja();this.C<e.length&&(oy(this),LE(this,n,e),this.i&&4!=n&&zh(this))}},Xe.cancel=function(){this.J=!0,Gh(this)},Xe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Kb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(zi(),Gi(17)),Gh(this),this.o=2,ld(this)):x_(this,this.Y-n)};var eC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qh(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof qh){this.h=n.h,M_(this,n.j),this.s=n.s,this.g=n.g,Mo(this,n.m),this.l=n.l;var e=n.i,t=new Kh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ay(this,t),this.o=n.o}else n&&(e=String(n).match(eC))?(this.h=!1,M_(this,e[1]||"",!0),this.s=dd(e[2]||""),this.g=dd(e[3]||"",!0),Mo(this,e[4]),this.l=dd(e[5]||"",!0),ay(this,e[6]||"",!0),this.o=dd(e[7]||"")):(this.h=!1,this.i=new Kh(null,this.h))}function Rc(n){return new qh(n)}function M_(n,e,t){n.j=t?dd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Mo(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ay(n,e,t){e instanceof Kh?(n.i=e,function Zh(n,e){e&&!n.j&&(Pc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(jE(this,r),hd(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Wh(e,tC)),n.i=new Kh(e,n.h))}function jn(n,e,t){n.i.set(e,t)}function qp(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function dd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Wh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,R_),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function R_(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Wh(e,VE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Wh(e,VE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Wh(t,"/"==t.charAt(0)?BE:Nc,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Wh(t,nC)),n.join("")};var VE=/[#\/\?@]/g,Nc=/[#\?:]/g,BE=/[#\?]/g,tC=/[#\?@]/g,nC=/#/g;function Kh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pc(n){n.g||(n.g=new Map,n.h=0,n.i&&function rx(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jE(n,e){Pc(n),e=kc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Wp(n,e){return Pc(n),e=kc(n,e),n.g.has(e)}function hd(n,e,t){jE(n,e),0<t.length&&(n.i=null,n.g.set(kc(n,e),Gm(t)),n.h+=t.length)}function kc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Kp(n){this.l=n||$E,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ka&&Vt.g.Ka()&&Vt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Kh.prototype).add=function(n,e){Pc(this),this.i=null,n=kc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Pc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Xe.ta=function(){Pc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},Xe.Z=function(n){Pc(this);let e=[];if("string"==typeof n)Wp(this,n)&&(e=e.concat(this.g.get(kc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Xe.set=function(n,e){return Pc(this),this.i=null,Wp(this,n=kc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var $E=10;function P_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uy(n){return n.h?1:n.g?n.g.size:0}function Zp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cy(n,e){n.g?n.g.add(e):n.h=e}function ly(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HE(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Gm(n.i)}function rC(){this.g=new class{stringify(n){return Vt.JSON.stringify(n,void 0)}parse(n){return Vt.JSON.parse(n,void 0)}}}function zE(n,e,t){const r=t||"";try{Xb(n,function(i,u){let c=i;Np(i)&&(c=m_(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Qp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Qh(n){this.l=n.fc||null,this.j=n.ob||!1}function dy(n,e){$r.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=qi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kp.prototype.cancel=function(){if(this.i=HE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},si(Qh,zp),Qh.prototype.g=function(){return new dy(this.l,this.j)},Qh.prototype.i=function(n){return function(){return n}}({}),si(dy,$r);var qi=0;function k_(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Yp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hy(n)}function hy(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=dy.prototype).open=function(n,e){if(this.readyState!=qi)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hy(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Vt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yp(this)),this.readyState=qi},Xe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hy(this)),this.g&&(this.readyState=3,hy(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;k_(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Xe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yp(this):hy(this),3==this.readyState&&k_(this)}},Xe.Za=function(n){this.g&&(this.response=this.responseText=n,Yp(this))},Xe.Ya=function(n){this.g&&(this.response=n,Yp(this))},Xe.ka=function(){this.g&&Yp(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sC=Vt.JSON.parse;function Hn(n){$r.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=O_,this.L=this.M=!1}si(Hn,$r);var O_="",oC=/^https?$/i,aC=["POST","PUT"];function F_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,GE(n),fy(n)}function GE(n){n.F||(n.F=!0,Rr(n,"complete"),Rr(n,"error"))}function L_(n){if(n.h&&typeof Rp<"u"&&(!n.C[1]||4!=Ro(n)||2!=n.da()))if(n.v&&4==Ro(n))v_(n.La,0,n);else if(Rr(n,"readystatechange"),4==Ro(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(eC)[1]||null;!i&&Vt.self&&Vt.self.location&&(i=Vt.self.location.protocol.slice(0,-1)),r=!oC.test(i?i.toLowerCase():"")}t=r}if(t)Rr(n,"complete"),Rr(n,"success");else{n.m=6;try{var u=2<Ro(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",GE(n)}}finally{fy(n)}}}function fy(n,e){if(n.g){qE(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Rr(n,"ready");try{t.onreadystatechange=r}catch{}}}function qE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Ro(n){return n.g?n.g.readyState:0}function U_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case O_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function No(n){let e="";return h_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Jp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=No(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function Xp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function WE(n){this.Ga=0,this.j=[],this.l=new jp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xp("baseRetryDelayMs",5e3,n),this.hb=Xp("retryDelaySeedMs",1e4,n),this.eb=Xp("forwardChannelMaxRetries",2,n),this.xa=Xp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Kp(n&&n.concurrentRequestLimit),this.Ja=new rC,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function KE(n){if(ZE(n),3==n.H){var e=n.W++,t=Rc(n.I);if(jn(t,"SID",n.K),jn(t,"RID",e),jn(t,"TYPE","terminate"),tg(n,t),(e=new cd(n,n.l,e)).L=2,e.v=qp(Rc(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon)try{t=Vt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=my(e.l,null),e.g.ha(e.v)),e.G=Date.now(),zh(e)}B_(n)}function eg(n){n.g&&(Yh(n),n.g.cancel(),n.g=null)}function ZE(n){eg(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),Jh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function py(n){if(!P_(n.i)&&!n.m){n.m=!0;var e=n.Na;ma||Up(),Lp||(ma(),Lp=!0),ny.add(e,n),n.C=0}}function gy(n,e){var t;t=e?e.m:n.W++;const r=Rc(n.I);jn(r,"SID",n.K),jn(r,"RID",t),jn(r,"AID",n.V),tg(n,r),n.o&&n.s&&Jp(r,n.o,n.s),t=new cd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=QE(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),cy(n.i,t),S_(t,r,e)}function tg(n,e){n.na&&h_(n.na,function(t,r){jn(e,r,t)}),n.h&&Xb({},function(t,r){jn(e,r,t)})}function QE(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ii(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let v=0;v<t;v++){let D=i[v].g;const C=i[v].map;if(D-=u,0>D)u=Math.max(0,i[v].g-100),f=!1;else try{zE(C,c,"req"+D+"_")}catch{r&&r(C)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function ng(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;ma||Up(),Lp||(ma(),Lp=!0),ny.add(e,n),n.A=0}}function rg(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ls(ii(n.Ma,n),V_(n,n.A)),n.A++,0))}function Yh(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function dC(n){n.g=new cd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Rc(n.wa);jn(e,"RID","rpc"),jn(e,"SID",n.K),jn(e,"AID",n.V),jn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&jn(e,"TO",n.qa),jn(e,"TYPE","xmlhttp"),tg(n,e),n.o&&n.s&&Jp(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=qp(Rc(e)),t.s=null,t.S=!0,A_(t,n)}function Jh(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function hC(n,e){var t=null;if(n.g==e){Jh(n),Yh(n),n.g=null;var r=2}else{if(!Zp(n.i,e))return;t=e.F,ly(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Rr(r=$p(),new ry(r,t)),py(n)}else ng(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function lC(n,e){return!(uy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ls(ii(n.Na,n,e),V_(n,n.C)),n.C++,0)))}(n,e)||2==r&&rg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Oc(n,5);break;case 4:Oc(n,10);break;case 3:Oc(n,6);break;default:Oc(n,2)}}function V_(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Oc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ii(n.pb,n);t||(t=new qh("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||M_(t,"https"),qp(t)),function iC(n,e){const t=new jp;if(Vt.Image){const r=new Image;r.onload=zm(Qp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=zm(Qp,t,r,"TestLoadImage: error",!1,e),r.onabort=zm(Qp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=zm(Qp,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Gi(2);n.H=0,n.h&&n.h.za(e),B_(n),ZE(n)}function B_(n){if(n.H=0,n.ma=[],n.h){const e=HE(n.i);(0!=e.length||0!=n.j.length)&&(a_(n.ma,e),a_(n.ma,n.j),n.i.i.length=0,Gm(n.j),n.j.length=0),n.h.ya()}}function j_(n,e,t){var r=t instanceof qh?Rc(t):new qh(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Mo(r,r.m);else{var i=Vt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new qh(null);r&&M_(u,r),e&&(u.g=e),i&&Mo(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&jn(r,t,e),jn(r,"VER",n.ra),tg(n,r),r}function my(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hn(t&&n.Ha&&!n.va?new Qh({ob:!0}):n.va)).Oa(n.J),e}function ya(){}function fd(){if(ga&&!(10<=Number($b)))throw Error("Environmental error: no available transport.")}function Di(n,e){$r.call(this),this.g=new WE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!xc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xc(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fc(this)}function Xh(n){jh.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function YE(){$h.call(this),this.status=1}function Fc(n){this.g=n}function Po(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function $_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=u+((c=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function un(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(Xe=Hn.prototype).Oa=function(n){this.M=n},Xe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gp.g(),this.C=function Zb(n){return n.h||(n.h=n.i())}(this.u?this.u:Gp),this.g.onreadystatechange=ii(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void F_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Vt.FormData&&n instanceof Vt.FormData,!(0<=o_(aC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qE(this),0<this.B&&((this.L=function uC(n){return ga&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ii(this.ua,this)):this.A=v_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){F_(this,u)}},Xe.ua=function(){typeof Rp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Rr(this,"complete"),Rr(this,"abort"),fy(this))},Xe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fy(this,!0)),Hn.$.N.call(this)},Xe.La=function(){this.s||(this.G||this.v||this.l?L_(this):this.kb())},Xe.kb=function(){L_(this)},Xe.isActive=function(){return!!this.g},Xe.da=function(){try{return 2<Ro(this)?this.g.status:-1}catch{return-1}},Xe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sC(e)}},Xe.Ia=function(){return this.m},Xe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=WE.prototype).ra=8,Xe.H=1,Xe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new cd(this,this.l,n);let u=this.s;if(this.U&&(u?(u=f_(u),SE(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=QE(this,i,e),jn(t=Rc(this.I),"RID",n),jn(t,"CVER",22),this.F&&jn(t,"X-HTTP-Session-Id",this.F),tg(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(No(u)))+"&"+e:this.o&&Jp(t,this.o,u)),cy(this.i,i),this.bb&&jn(t,"TYPE","init"),this.P?(jn(t,"$req",e),jn(t,"SID","null"),i.aa=!0,S_(i,t,null)):S_(i,t,e),this.H=2}}else 3==this.H&&(n?gy(this,n):0==this.j.length||P_(this.i)||gy(this))},Xe.Ma=function(){if(this.u=null,dC(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Ls(ii(this.jb,this),n)}},Xe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gi(10),eg(this),dC(this))},Xe.ib=function(){null!=this.v&&(this.v=null,eg(this),rg(this),Gi(19))},Xe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Gi(2)):(this.l.info("Failed to ping google.com"),Gi(1))},Xe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xe=ya.prototype).Ba=function(){},Xe.Aa=function(){},Xe.za=function(){},Xe.ya=function(){},Xe.isActive=function(){return!0},Xe.Va=function(){},fd.prototype.g=function(n,e){return new Di(n,e)},si(Di,$r),Di.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Gi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=j_(n,null,n.Y),py(n)},Di.prototype.close=function(){KE(this.g)},Di.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=m_(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&py(e)},Di.prototype.N=function(){this.g.h=null,delete this.j,KE(this.g),delete this.g,Di.$.N.call(this)},si(Xh,jh),si(YE,$h),si(Fc,ya),Fc.prototype.Ba=function(){Rr(this.g,"a")},Fc.prototype.Aa=function(n){Rr(this.g,new Xh(n))},Fc.prototype.za=function(n){Rr(this.g,new YE)},Fc.prototype.ya=function(){Rr(this.g,"b")},si(Po,function JE(){this.blockSize=-1}),Po.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Po.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)$_(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){$_(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){$_(this,r),i=0;break}}this.h=i,this.i+=e},Po.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var fC={};function XE(n){return-128<=n&&128>n?function EE(n,e){var t=fC;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new un([0|e],0>e?-1:0)}):new un([0|n],0>n?-1:0)}function va(n){if(isNaN(n)||!isFinite(n))return ef;if(0>n)return Nr(va(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=H_;return new un(e,0)}var H_=4294967296,ef=XE(0),z_=XE(1),G_=XE(16777216);function _a(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ro(n){return-1==n.h}function Nr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new un(t,~n.h).add(z_)}function yy(n,e){return n.add(Nr(e))}function vy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ig(n,e){this.g=n,this.h=e}function _y(n,e){if(_a(e))throw Error("division by zero");if(_a(n))return new ig(ef,ef);if(ro(n))return e=_y(Nr(n),e),new ig(Nr(e.g),Nr(e.h));if(ro(e))return e=_y(n,Nr(e)),new ig(Nr(e.g),e.h);if(30<n.g.length){if(ro(n)||ro(e))throw Error("slowDivide_ only works with positive integers.");for(var t=z_,r=e;0>=r.X(n);)t=eI(t),r=eI(r);var i=tf(t,1),u=tf(r,1);for(r=tf(r,2),t=tf(t,2);!_a(r);){var c=u.add(r);0>=c.X(n)&&(i=i.add(t),u=c),r=tf(r,1),t=tf(t,1)}return e=yy(n,i.R(e)),new ig(i,e)}for(i=ef;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=va(t)).R(e);ro(c)||0<c.X(n);)c=(u=va(t-=r)).R(e);_a(u)&&(u=z_),i=i.add(u),n=yy(n,c)}return new ig(i,n)}function eI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new un(t,n.h)}function tf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new un(i,n.h)}(Xe=un.prototype).ea=function(){if(ro(this))return-Nr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:H_+r)*e,e*=H_}return n},Xe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(_a(this))return"0";if(ro(this))return"-"+Nr(this).toString(n);for(var e=va(Math.pow(n,6)),t=this,r="";;){var i=_y(t,e).g,u=((0<(t=yy(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(_a(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Xe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Xe.X=function(n){return ro(n=yy(this,n))?-1:_a(n)?0:1},Xe.abs=function(){return ro(this)?Nr(this):this},Xe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),c=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(u&=65535)}return new un(t,-2147483648&t[t.length-1]?-1:0)},Xe.R=function(n){if(_a(this)||_a(n))return ef;if(ro(this))return ro(n)?Nr(this).R(Nr(n)):Nr(Nr(this).R(n));if(ro(n))return Nr(this.R(Nr(n)));if(0>this.X(G_)&&0>n.X(G_))return va(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,v=65535&n.D(i);t[2*r+2*i]+=c*v,vy(t,2*r+2*i),t[2*r+2*i+1]+=u*v,vy(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,vy(t,2*r+2*i+1),t[2*r+2*i+2]+=u*f,vy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new un(t,0)},Xe.gb=function(n){return _y(this,n).h},Xe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new un(t,this.h&n.h)},Xe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new un(t,this.h|n.h)},Xe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new un(t,this.h^n.h)},fd.prototype.createWebChannel=fd.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,Bh.NO_ERROR=0,Bh.TIMEOUT=8,Bh.HTTP_ERROR=6,T_.COMPLETE="complete",b_.EventType=iy,iy.OPEN="a",iy.CLOSE="b",iy.ERROR="c",iy.MESSAGE="d",$r.prototype.listen=$r.prototype.O,Hn.prototype.listenOnce=Hn.prototype.P,Hn.prototype.getLastError=Hn.prototype.Sa,Hn.prototype.getLastErrorCode=Hn.prototype.Ia,Hn.prototype.getStatus=Hn.prototype.da,Hn.prototype.getResponseJson=Hn.prototype.Wa,Hn.prototype.getResponseText=Hn.prototype.ja,Hn.prototype.send=Hn.prototype.ha,Hn.prototype.setWithCredentials=Hn.prototype.Oa,Po.prototype.digest=Po.prototype.l,Po.prototype.reset=Po.prototype.reset,Po.prototype.update=Po.prototype.j,un.prototype.add=un.prototype.add,un.prototype.multiply=un.prototype.R,un.prototype.modulo=un.prototype.gb,un.prototype.compare=un.prototype.X,un.prototype.toNumber=un.prototype.ea,un.prototype.toString=un.prototype.toString,un.prototype.getBits=un.prototype.D,un.fromNumber=va,un.fromString=function pC(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Nr(pC(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=va(Math.pow(e,8)),r=ef,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+u),e);8>u?(u=va(Math.pow(e,u)),r=r.R(u).add(va(c))):r=(r=r.R(t)).add(va(c))}return r};var wy=Co.createWebChannelTransport=function(){return new fd},pd=Co.getStatEventTarget=function(){return $p()},tI=Co.ErrorCode=Bh,sg=Co.EventType=T_,gC=Co.Event=no,nI=Co.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},q_=Co.FetchXmlHttpFactory=Qh,Ey=Co.WebChannel=b_,wa=Co.XhrIo=Hn,og=Co.Md5=Po,ur=Co.Integer=un;const Lc="@firebase/firestore";class cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");let oi="9.23.0";const Ea=new Ac.Yd("@firebase/firestore");function Uc(){return Ea.logLevel}function Pe(n,...e){if(Ea.logLevel<=Ac.in.DEBUG){const t=e.map(Vc);Ea.debug(`Firestore (${oi}): ${n}`,...t)}}function Pn(n,...e){if(Ea.logLevel<=Ac.in.ERROR){const t=e.map(Vc);Ea.error(`Firestore (${oi}): ${n}`,...t)}}function ai(n,...e){if(Ea.logLevel<=Ac.in.WARN){const t=e.map(Vc);Ea.warn(`Firestore (${oi}): ${n}`,...t)}}function Vc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${oi}) INTERNAL ASSERTION FAILED: `+n;throw Pn(e),new Error(e)}function lt(n,e){n||et()}function Qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends ln.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class W_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cr.UNAUTHENTICATED))}shutdown(){}}class iI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sI{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=D=>this.i!==i?(i=this.i,t(D)):Promise.resolve();let c=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new _r,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const D=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},v=D=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(D=>v(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?v(D):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new _r)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt("string"==typeof r.accessToken),new W_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lt(null===e||"string"==typeof e),new cr(e)}}class oI{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class mC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new oI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uI{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.T;return this.T=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt("string"==typeof t.token),this.T=t.token,new aI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Iy{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=cI(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function sf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ag(n){return n+"\0"}class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new An(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ft(e)}static min(){return new ft(new An(0,0))}static max(){return new ft(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ug{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ug.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ug?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends ug{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const Dy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends ug{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return Dy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ce(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ce(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Ce(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Ce(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(Kt.fromString(e))}static fromName(e){return new Ke(Kt.fromString(e).popFirst(5))}static empty(){return new Ke(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new Kt(e.slice()))}}class af{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ty(n){return n.fields.find(e=>2===e.kind)}function Bc(n){return n.fields.filter(e=>2!==e.kind)}af.UNKNOWN_ID=-1;class cg{constructor(e,t){this.fieldPath=e,this.kind=t}}class uf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new uf(0,fs.min())}}function Z_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(1e9===r?new An(t+1,0):new An(t,r));return new fs(i,Ke.empty(),e)}function Q_(n){return new fs(n.readTime,n.key,-1)}class fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fs(ft.min(),Ke.empty(),-1)}static max(){return new fs(ft.max(),Ke.empty(),-1)}}function Y_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}const lI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function gu(n){return lg.apply(this,arguments)}function lg(){return lg=(0,Ee.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==lI)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),lg.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},v=>r(v))}),c=!0,u===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const u=e.length,c=new Array(u);let f=0;for(let v=0;v<u;v++){const D=v;t(e[D]).next(C=>{c[D]=C,++f,f===u&&r(c)},C=>i(C))}})}static doWhile(e,t){return new se((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class dg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new _r,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new cf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=J_(r.target.error);this.v.reject(new cf(e,i))}}static open(e,t,r,i){try{return new dg(t,e.transaction(i,r))}catch(u){throw new cf(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fI(t)}}class io{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===io.S((0,ln.z$)())&&Pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),jc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ln.hl)())return!1;if(io.C())return!0;const e=(0,ln.z$)(),t=io.S(e),r=0<t&&t<10,i=io.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new cf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Ce(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ce(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new cf(e,f))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.$(e);const v=dg.open(u.db,e,c?"readonly":"readwrite",r),D=i(v).next(C=>(v.P(),C)).catch(C=>(v.abort(C),se.reject(C))).toPromise();return D.catch(()=>{}),yield v.R,D}catch(v){const D=v,C="FirebaseError"!==D.name&&f<3;if(Pe("SimpleDb","Transaction failed with error:",D.message,"Retrying:",C),u.close(),!C)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hI{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return jc(this.L.delete())}}class cf extends Ce{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mu(n){return"IndexedDbTransactionError"===n.name}class fI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jc(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),jc(this.store.add(e))}get(e){return jc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),jc(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),jc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new se((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=u=>{const c=J_(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new se((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const v=new hI(f),D=t(f.primaryKey,f.value,v);if(D instanceof se){const C=D.catch(M=>(v.done(),se.reject(M)));r.push(C)}v.isDone?i():null===v.K?f.continue():f.continue(v.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jc(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=J_(r.target.error);t(i)}})}let vC=!1;function J_(n){const e=io.S((0,ln.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vC||(vC=!0,setTimeout(()=>{throw r},0)),r}}return n}class _C{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){mu(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield gu(r)}yield t.et(6e4)}))}}class pI{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return se.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Pe("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,u)).next(f=>(Pe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=Q_(u);Y_(c,r)>0&&(r=c)}),new fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Us=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Yn(n){return null==n}function lf(n){return 0===n&&1/n==-1/0}function gI(n){return"number"==typeof n&&Number.isInteger(n)&&!lf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yI(e)),e=mI(n.get(t),e);return yI(e)}function mI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function yI(n){return n+"\x01\x01"}function ko(n){const e=n.length;if(lt(e>=2),2===e)return lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&et(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let v;0===i.length?v=f:(i+=f,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:et()}u=c+2}return new Kt(r)}const X_=["userId","batchId"];function yu(n,e){return[n,Ti(e)]}function vI(n,e,t){return[n,Ti(e),t]}const wC={},_I=["prefixPath","collectionGroup","readTime","documentId"],EC=["prefixPath","collectionGroup","documentId"],wI=["collectionGroup","readTime","prefixPath","documentId"],ox=["canonicalId","targetId"],EI=["targetId","path"],II=["path","targetId"],Ia=["collectionId","parent"],IC=["indexId","uid"],DC=["uid","sequenceNumber"],Da=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Oo=["indexId","uid","orderedDocumentKey"],Fo=["userId","collectionPath","documentId"],DI=["userId","collectionPath","largestBatchId"],TI=["userId","collectionGroup","largestBatchId"],bI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TC=[...bI,"documentOverlays"],CI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SI=CI,e0=[...SI,"indexConfiguration","indexState","indexEntries"];class gd extends dI{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=Qe(n);return io.M(t.ht,e)}function t0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $c(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function n0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??ui.RED,this.left=i??ui.EMPTY,this.right=u??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ui(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new r0(this.data.getIterator())}getIteratorFrom(e){return new r0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class r0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yd(n){return n.hasNext()?n.getNext():void 0}class ci{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new ci([])}unionWith(e){let t=new kn(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class by extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new by("Invalid base64 string: "+i):i}}(e);return new wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const xI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vu(n){if(lt(!!n),"string"==typeof n){let e=0;const t=xI.exec(n);if(lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jn(n.seconds),nanos:Jn(n.nanos)}}function Jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ta(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function hg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Cy(n){const e=n.mapValue.fields.__previous_value__;return hg(e)?Cy(e):e}function fg(n){const e=vu(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}class bC{constructor(e,t,r,i,u,c,f,v,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=v,this.useFetchStreams=D}}class Hc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hc&&e.projectId===this.projectId&&e.database===this.database}}const zc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sy={nullValue:"NULL_VALUE"};function Gc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hg(n)?4:u0(n)?9007199254740991:10:et()}function ba(n,e){if(n===e)return!0;const t=Gc(n);if(t!==Gc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fg(n).isEqual(fg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=vu(r.timestampValue),c=vu(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ta(n.bytesValue).isEqual(Ta(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Jn(r.geoPointValue.latitude)===Jn(i.geoPointValue.latitude)&&Jn(r.geoPointValue.longitude)===Jn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Jn(r.integerValue)===Jn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Jn(r.doubleValue),c=Jn(i.doubleValue);return u===c?lf(u)===lf(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return sf(n.arrayValue.values||[],e.arrayValue.values||[],ba);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(t0(u)!==t0(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!ba(u[f],c[f])))return!1;return!0}(n,e);default:return et()}var i}function pg(n,e){return void 0!==(n.values||[]).find(t=>ba(t,e))}function qc(n,e){if(n===e)return 0;const t=Gc(n),r=Gc(e);if(t!==r)return Ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Jn(i.integerValue||i.doubleValue),f=Jn(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return MI(n.timestampValue,e.timestampValue);case 4:return MI(fg(n),fg(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Ta(i),f=Ta(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let v=0;v<c.length&&v<f.length;v++){const D=Ot(c[v],f[v]);if(0!==D)return D}return Ot(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Ot(Jn(i.latitude),Jn(u.latitude));return 0!==c?c:Ot(Jn(i.longitude),Jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let v=0;v<c.length&&v<f.length;++v){const D=qc(c[v],f[v]);if(D)return D}return Ot(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===zc.mapValue&&u===zc.mapValue)return 0;if(i===zc.mapValue)return 1;if(u===zc.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),v=u.fields||{},D=Object.keys(v);f.sort(),D.sort();for(let C=0;C<f.length&&C<D.length;++C){const M=Ot(f[C],D[C]);if(0!==M)return M;const L=qc(c[f[C]],v[D[C]]);if(0!==L)return L}return Ot(f.length,D.length)}(n.mapValue,e.mapValue);default:throw et()}}function MI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=vu(n),r=vu(e),i=Ot(t.seconds,r.seconds);return 0!==i?i:Ot(t.nanos,r.nanos)}function df(n){return s0(n)}function s0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=vu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ta(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=s0(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${s0(r.fields[f])}`;return u+"}"}(n.mapValue):et();var e}function vd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function o0(n){return!!n&&"integerValue"in n}function gg(n){return!!n&&"arrayValue"in n}function RI(n){return!!n&&"nullValue"in n}function a0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mg(n){return!!n&&"mapValue"in n}function hf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $c(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function u0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function NI(n){return"nullValue"in n?Sy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vd(Hc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function PI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vd(Hc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?zc:et()}function c0(n,e){const t=qc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function l0(n,e){const t=qc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hf(t)}setAll(e){let t=Qn.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=hf(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());mg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];mg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$c(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new zr(hf(this.value))}}function d0(n){const e=[];return $c(n.fields,(t,r)=>{const i=new Qn([t]);if(mg(r)){const u=d0(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new ci(e)}class On{constructor(e,t,r,i,u,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=c,this.documentState=f}static newInvalidDocument(e){return new On(e,0,ft.min(),ft.min(),ft.min(),zr.empty(),0)}static newFoundDocument(e,t,r,i){return new On(e,1,t,ft.min(),r,i,0)}static newNoDocument(e,t){return new On(e,2,t,ft.min(),ft.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new On(e,3,t,ft.min(),ft.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ps{constructor(e,t){this.position=e,this.inclusive=t}}function kI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(c.referenceValue),t.key):qc(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function OI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ba(n.position[t],e.position[t]))return!1;return!0}class Lo{constructor(e,t="asc"){this.field=e,this.dir=t}}function ax(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class xy{}class nn extends xy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new My(e,t,r):"array-contains"===t?new BI(e,r):"in"===t?new f0(e,r):"not-in"===t?new SC(e,r):"array-contains-any"===t?new jI(e,r):new nn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Ry(e,r):new ir(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qc(t,this.value)):null!==t&&Gc(this.value)===Gc(t)&&this.matchesComparison(qc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _n extends xy{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new _n(e,t)}matches(e){return _d(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function _d(n){return"and"===n.op}function FI(n){return"or"===n.op}function St(n){return LI(n)&&_d(n)}function LI(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function h0(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+df(n.value);if(St(n))return n.filters.map(e=>h0(e)).join(",");{const e=n.filters.map(t=>h0(t)).join(",");return`${n.op}(${e})`}}function UI(n,e){return n instanceof nn?(t=n,(r=e)instanceof nn&&t.op===r.op&&t.field.isEqual(r.field)&&ba(t.value,r.value)):n instanceof _n?function(t,r){return r instanceof _n&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,c)=>i&&UI(u,r.filters[c]),!0)}(n,e):void et();var t,r}function wd(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function VI(n){return n instanceof nn?`${(e=n).field.canonicalString()} ${e.op} ${df(e.value)}`:n instanceof _n?function(e){return e.op.toString()+" {"+e.getFilters().map(VI).join(" ,")+"}"}(n):"Filter";var e}class My extends nn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ry extends nn{constructor(e,t){super(e,"in",t),this.keys=CC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ir extends nn{constructor(e,t){super(e,"not-in",t),this.keys=CC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class BI extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gg(t)&&pg(t.arrayValue,this.value)}}class f0 extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pg(this.value.arrayValue,t)}}class SC extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(pg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pg(this.value.arrayValue,t)}}class jI extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pg(this.value.arrayValue,r))}}class $I{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.dt=null}}function Ny(n,e=null,t=[],r=[],i=null,u=null,c=null){return new $I(n,e,t,r,i,u,c)}function Wc(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>h0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Yn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>df(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>df(r)).join(",")),e.dt=t}return e.dt}function yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ax(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OI(n.startAt,e.startAt)&&OI(n.endAt,e.endAt)}function Py(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ky(n,e){return n.filters.filter(t=>t instanceof nn&&t.field.isEqual(e))}function ff(n,e,t){let r=Sy,i=!0;for(const u of ky(n,e)){let c=Sy,f=!0;switch(u.op){case"<":case"<=":c=NI(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=Sy}c0({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];c0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function HI(n,e,t){let r=zc,i=!0;for(const u of ky(n,e)){let c=zc,f=!0;switch(u.op){case">=":case">":c=PI(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=zc}l0({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];l0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class _u{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=v,this.wt=null,this._t=null}}function zI(n,e,t,r,i,u,c,f){return new _u(n,e,t,r,i,u,c,f)}function wu(n){return new _u(n)}function p0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Oy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vg(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function g0(n){return null!==n.collectionGroup}function Uo(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=vg(e),r=Oy(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Lo(t)),e.wt.push(new Lo(Qn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Lo(Qn.keyField(),u))}}}return e.wt}function Pr(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=Ny(e.path,e.collectionGroup,Uo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Uo(e))t.push(new Lo(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ps(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ps(e.startAt.position,e.startAt.inclusive):null;e._t=Ny(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function m0(n,e){e.getFirstInequalityField(),vg(n);const t=n.filters.concat([e]);return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fy(n,e,t){return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _g(n,e){return yg(Pr(n),Pr(e))&&n.limitType===e.limitType}function y0(n){return`${Wc(Pr(n))}|lt:${n.limitType}`}function Ly(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>VI(r)).join(", ")}]`),Yn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>df(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>df(r)).join(",")),`Target(${t})`}(Pr(n))}; limitType=${n.limitType})`}function pf(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Uo(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=kI(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,Uo(t),r)||t.endAt&&!function(i,u,c){const f=kI(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,Uo(t),r)));var t,r}function GI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v0(n){return(e,t)=>{let r=!1;for(const i of Uo(n)){const u=AC(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function AC(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),v=c.data.field(i);return null!==f&&null!==v?qc(f,v):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class Eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$c(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return n0(this.inner)}size(){return this.innerSize}}const ux=new xn(Ke.comparator);function Vs(){return ux}const xC=new xn(Ke.comparator);function Uy(...n){let e=xC;for(const t of n)e=e.insert(t.key,t);return e}function _0(n){let e=xC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bs(){return wg()}function qI(){return wg()}function wg(){return new Eu(n=>n.toString(),(n,e)=>n.isEqual(e))}const WI=new xn(Ke.comparator),Eg=new kn(Ke.comparator);function zt(...n){let e=Eg;for(const t of n)e=e.add(t);return e}const MC=new kn(Ot);function w0(){return MC}function KI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lf(e)?"-0":e}}function ZI(n){return{integerValue:""+n}}function E0(n,e){return gI(e)?ZI(e):KI(n,e)}class Vy{constructor(){this._=void 0}}function RC(n,e,t){return n instanceof Ed?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&hg(i)&&(i=Cy(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Id?I0(n,e):n instanceof Dd?D0(n,e):function(r,i){const u=QI(r,i),c=By(u)+By(r.gt);return o0(u)&&o0(r.gt)?ZI(c):KI(r.serializer,c)}(n,e)}function Ig(n,e,t){return n instanceof Id?I0(n,e):n instanceof Dd?D0(n,e):t}function QI(n,e){return n instanceof gf?o0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ed extends Vy{}class Id extends Vy{constructor(e){super(),this.elements=e}}function I0(n,e){const t=YI(e);for(const r of n.elements)t.some(i=>ba(i,r))||t.push(r);return{arrayValue:{values:t}}}class Dd extends Vy{constructor(e){super(),this.elements=e}}function D0(n,e){let t=YI(e);for(const r of n.elements)t=t.filter(i=>!ba(i,r));return{arrayValue:{values:t}}}class gf extends Vy{constructor(e,t){super(),this.serializer=e,this.gt=t}}function By(n){return Jn(n.integerValue||n.doubleValue)}function YI(n){return gg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mf{constructor(e,t){this.field=e,this.transform=t}}class NC{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yf{}function XI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Td(n.key,zn.none()):new vf(n.key,n.data,zn.none());{const t=n.data,r=zr.empty();let i=new kn(Qn.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new Iu(n.key,r,new ci(i.toArray()),zn.none())}}function eD(n,e,t){n instanceof vf?function(r,i,u){const c=r.value.clone(),f=rD(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Iu?function(r,i,u){if(!jy(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=rD(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(nD(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dg(n,e,t,r){return n instanceof vf?function(i,u,c,f){if(!jy(i.precondition,u))return c;const v=i.value.clone(),D=iD(i.fieldTransforms,f,u);return v.setAll(D),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Iu?function(i,u,c,f){if(!jy(i.precondition,u))return c;const v=iD(i.fieldTransforms,f,u),D=u.data;return D.setAll(nD(i)),D.setAll(v),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,jy(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function PC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=QI(r.transform,i||null);null!=u&&(null===t&&(t=zr.empty()),t.set(r.field,u))}return t||null}function tD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sf(t,r,(i,u)=>function JI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Id&&r instanceof Id||t instanceof Dd&&r instanceof Dd?sf(t.elements,r.elements,ba):t instanceof gf&&r instanceof gf?ba(t.gt,r.gt):t instanceof Ed&&r instanceof Ed);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vf extends yf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Iu extends yf{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function rD(n,e,t){const r=new Map;lt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,Ig(c,f,t[i]))}return r}function iD(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,RC(u,c,e))}return r}class Td extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $y extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class T0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&eD(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qI();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let f=this.applyToLocalView(c,u.mutatedFields);f=t.has(i.key)?null:f;const v=XI(c,f);null!==v&&r.set(i.key,v),c.isValidDocument()||c.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&sf(this.mutations,e.mutations,(t,r)=>tD(t,r))&&sf(this.baseMutations,e.baseMutations,(t,r)=>tD(t,r))}}class b0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){lt(e.mutations.length===r.length);let i=WI;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new b0(e,t,r,i)}}class Hy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class OC{constructor(e,t){this.count=e,this.unchangedNames=t}}var Er,Yt;function zy(n){switch(n){default:return et();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function C0(n){if(void 0===n)return Pn("GRPC error has no .code"),le.UNKNOWN;switch(n){case Er.OK:return le.OK;case Er.CANCELLED:return le.CANCELLED;case Er.UNKNOWN:return le.UNKNOWN;case Er.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Er.INTERNAL:return le.INTERNAL;case Er.UNAVAILABLE:return le.UNAVAILABLE;case Er.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Er.NOT_FOUND:return le.NOT_FOUND;case Er.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Er.ABORTED:return le.ABORTED;case Er.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Er.DATA_LOSS:return le.DATA_LOSS;default:return et()}}(Yt=Er||(Er={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class Tg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Gy}static getOrCreateInstance(){return null===Gy&&(Gy=new Tg),Gy}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Gy=null;function sD(){return new TextEncoder}const S0=new ur([4294967295,4294967295],0);function oD(n){const e=sD().encode(n),t=new og;return t.update(e),new Uint8Array(t.digest())}function aD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ur([t,r],0),new ur([i,u],0)]}class Kc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _f(`Invalid padding: ${t}`);if(r<0)throw new _f(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new _f(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new _f(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ur.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(ur.fromNumber(r)));return 1===i.compare(S0)&&(i=new ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=oD(e),[r,i]=aD(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Kc(u,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=oD(e),[r,i]=aD(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class _f extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bg{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,qy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bg(ft.min(),i,new xn(Ot),Vs(),zt())}}class qy{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qy(r,t,zt(),zt(),zt())}}class Cg{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class Wy{constructor(e,t){this.targetId=e,this.Vt=t}}class uD{constructor(e,t,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ky{constructor(){this.St=0,this.Dt=Zy(),this.Ct=wr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=zt(),t=zt(),r=zt();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new qy(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Zy()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class FC{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Vs(),this.zt=A0(),this.Wt=new xn(Ot)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const c=u.target;if(Py(c))if(0===i){const f=new Ke(c.path);this.Yt(r,f,On.newNoDocument(f,ft.min()))}else lt(1===i);else{const f=this.ie(r);if(f!==i){const v=this.re(e,f);0!==v&&(this.ee(r),this.Wt=this.Wt.insert(r,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Tg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,C,M){var L,$,Z,he,_e,He;const rt={localCacheCount:C,existenceFilterCount:M.count},ot=M.unchangedNames;return ot&&(rt.bloomFilter={applied:0===D,hashCount:null!==(L=ot?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(he=null===(Z=null===($=ot?.bits)||void 0===$?void 0:$.bitmap)||void 0===Z?void 0:Z.length)&&void 0!==he?he:0,padding:null!==(He=null===(_e=ot?.bits)||void 0===_e?void 0:_e.padding)&&void 0!==He?He:0}),rt}(v,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:c=0},hashCount:f=0}=r;let v,D;try{v=Ta(u).toUint8Array()}catch(C){if(C instanceof by)return ai("Decoding the base64 bloom filter in existence filter failed ("+C.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw C}try{D=new Kc(v,c,f)}catch(C){return ai(C instanceof _f?"BloomFilter error: ":"Applying bloom filter failed: ",C),1}return 0===D.It?1:i!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.vt(f)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,c)=>{const f=this.se(c);if(f){if(u.current&&Py(f.target)){const v=new Ke(f.target.path);null!==this.jt.get(v)||this.ae(c,v)||this.Yt(c,v,On.newNoDocument(v,e))}u.Mt&&(t.set(c,u.Ot()),u.Ft())}});let r=zt();this.zt.forEach((u,c)=>{let f=!0;c.forEachWhile(v=>{const D=this.se(v);return!D||"TargetPurposeLimboResolution"===D.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.jt.forEach((u,c)=>c.setReadTime(e));const i=new bg(e,t,this.Wt,this.jt,r);return this.jt=Vs(),this.zt=A0(),this.Wt=new xn(Ot),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Ky,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new kn(Ot),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ky),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function A0(){return new xn(Ke.comparator)}function Zy(){return new xn(Ke.comparator)}const cD={asc:"ASCENDING",desc:"DESCENDING"},lD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dD={and:"AND",or:"OR"};class hD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function x0(n,e){return n.useProto3Json||Yn(e)?e:{value:e}}function wf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LC(n,e){return wf(n,e.toTimestamp())}function sr(n){return lt(!!n),ft.fromTimestamp(function(e){const t=vu(e);return new An(t.seconds,t.nanos)}(n))}function pD(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function M0(n){const e=Kt.fromString(n);return lt(k0(e)),e}function Sg(n,e){return pD(n.databaseId,e.path)}function Ca(n,e){const t=M0(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(mD(t))}function gD(n,e){return pD(n.databaseId,e)}function UC(n){const e=M0(n);return 4===e.length?Kt.emptyPath():mD(e)}function Ag(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mD(n){return lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yD(n,e,t){return{name:Sg(n,e),fields:t.value.mapValue.fields}}function vD(n,e,t){const r=Ca(n,e.name),i=sr(e.updateTime),u=e.createTime?sr(e.createTime):ft.min(),c=new zr({mapValue:{fields:e.fields}}),f=On.newFoundDocument(r,i,u,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function xg(n,e){let t;if(e instanceof vf)t={update:yD(n,e.key,e.value)};else if(e instanceof Td)t={delete:Sg(n,e.key)};else if(e instanceof Iu)t={update:yD(n,e.key,e.data),updateMask:cx(e.fieldMask)};else{if(!(e instanceof $y))return et();t={verify:Sg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Ed)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Id)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gf)return{fieldPath:u.field.canonicalString(),increment:c.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:LC(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function R0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?zn.updateTime(sr(i.updateTime)):void 0!==i.exists?zn.exists(i.exists):zn.none():zn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(lt("REQUEST_TIME"===c.setToServerValue),f=new Ed):"appendMissingElements"in c?f=new Id(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Dd(c.removeAllFromArray.values||[]):"increment"in c?f=new gf(u,c.increment):et();const v=Qn.fromServerFormat(c.fieldPath);return new mf(v,f)}(n,i)):[];var i;if(e.update){const i=Ca(n,e.update.name),u=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ci((e.updateMask.fieldPaths||[]).map(D=>Qn.fromServerFormat(D)));return new Iu(i,u,c,t,r)}return new vf(i,u,t,r)}if(e.delete){const i=Ca(n,e.delete);return new Td(i,t)}if(e.verify){const i=Ca(n,e.verify);return new $y(i,t)}return et()}function _D(n,e){return{documents:[gD(n,e.path)]}}function N0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=gD(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gD(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0!==v.length)return TD(_n.create(v,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(v){if(0!==v.length)return v.map(D=>{return{field:Du((C=D).field),direction:ED(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=x0(n,e.limit);var f,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function wD(n){let e=UC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){lt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let u=[];t.where&&(u=function(C){const M=P0(C);return M instanceof _n&&St(M)?M.getFilters():[M]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new Lo(bd((M=C).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(C){let M;return M="object"==typeof C?C.value:C,Yn(M)?null:M}(t.limit));let v=null;var C;t.startAt&&(v=new ps((C=t.startAt).values||[],!!C.before));let D=null;return t.endAt&&(D=function(C){return new ps(C.values||[],!C.before)}(t.endAt)),zI(e,i,c,u,f,"F",v,D)}function P0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bd(e.unaryFilter.field);return nn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=bd(e.unaryFilter.field);return nn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bd(e.unaryFilter.field);return nn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bd(e.unaryFilter.field);return nn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?nn.create(bd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return _n.create(e.compositeFilter.filters.map(t=>P0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function ED(n){return cD[n]}function ID(n){return lD[n]}function DD(n){return dD[n]}function Du(n){return{fieldPath:n.canonicalString()}}function bd(n){return Qn.fromServerFormat(n.fieldPath)}function TD(n){return n instanceof nn?function(e){if("=="===e.op){if(a0(e.value))return{unaryFilter:{field:Du(e.field),op:"IS_NAN"}};if(RI(e.value))return{unaryFilter:{field:Du(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(a0(e.value))return{unaryFilter:{field:Du(e.field),op:"IS_NOT_NAN"}};if(RI(e.value))return{unaryFilter:{field:Du(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(e.field),op:ID(e.op),value:e.value}}}(n):n instanceof _n?function(e){const t=e.getFilters().map(r=>TD(r));return 1===t.length?t[0]:{compositeFilter:{op:DD(e.op),filters:t}}}(n):et()}function cx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function k0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Tu{constructor(e,t,r,i,u=ft.min(),c=ft.min(),f=wr.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=v}withSequenceNumber(e){return new Tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bD{constructor(e){this.fe=e}}function CD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sg(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:wf(i,u.version.toTimestamp()),createTime:wf(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cd(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Cd(e.version)}}var i,u;return r}function Zc(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bu(n){const e=new An(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function bi(n,e){const t=(e.baseMutations||[]).map(u=>R0(n.fe,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>R0(n.fe,u)),i=An.fromMillis(e.localWriteTimeMs);return new T0(e.batchId,i,t,r)}function Rg(n){const e=bu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bu(n.lastLimboFreeSnapshotVersion):ft.min();let r;var i;return void 0!==n.query.documents?(lt(1===(i=n.query).documents.length),r=Pr(wu(UC(i.documents[0])))):r=Pr(wD(n.query)),new Tu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function Qy(n,e){const t=Cd(e.snapshotVersion),r=Cd(e.lastLimboFreeSnapshotVersion);let i;i=Py(e.target)?_D(n.fe,e.target):N0(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Sd(n){const e=wD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Fy(e,e.limit,"L"):e}function O0(n,e){return new Hy(e.largestBatchId,R0(n.fe,e.overlayMutation))}function SD(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}function AD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Cd(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class Yy{getBundleMetadata(e,t){return Ng(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:bu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Ng(e).put({bundleId:(r=t).id,createTime:Cd(sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return xD(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Sd(i.bundledQuery),readTime:bu(i.readTime)};var i})}saveNamedQuery(e,t){return xD(e).put({name:(r=t).name,readTime:Cd(sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ng(n){return Hr(n,"bundles")}function xD(n){return Hr(n,"namedQueries")}class Jy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Jy(e,t.uid||"")}getOverlay(e,t){return Ef(e).get(SD(this.userId,t)).next(r=>r?O0(this.serializer,r):null)}getOverlays(e,t){const r=Bs();return se.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new Hy(t,c);i.push(this.we(e,f))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ti(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Ef(e).J("collectionPathOverlayIndex",f))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Bs(),u=Ti(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ef(e).j("collectionPathOverlayIndex",c).next(f=>{for(const v of f){const D=O0(this.serializer,v);i.set(D.getKey(),D)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Bs();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ef(e).X({index:"collectionGroupOverlayIndex",range:f},(v,D,C)=>{const M=O0(this.serializer,D);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):C.done()}).next(()=>u)}we(e,t){return Ef(e).put(function(r,i,u){const[c,f,v]=SD(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:xg(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Ef(n){return Hr(n,"documentOverlays")}class Qc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Jn(e.integerValue));else if("doubleValue"in e){const r=Jn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),lf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ta(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?u0(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function F0(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function L0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=F0(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Qc.Ve=new Qc;class HC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=L0(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=L0(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zC{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class lx{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Ad{constructor(){this.je=new HC,this.ze=new zC(this.je),this.We=new lx(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Cu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cu(this.indexId,this.documentKey,this.arrayValue,r)}}function Su(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xy(n.arrayValue,e.arrayValue),0!==t?t:(t=Xy(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function Xy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class U0{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){lt(e.collectionGroup===this.collectionId);const t=Ty(e);if(void 0!==t&&!this.en(t))return!1;const r=Bc(e);let i=new Set,u=0,c=0;for(;u<r.length&&this.en(r[u]);++u)i=i.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[u];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++u}for(;u<r.length;++u){const f=r[u];if(c>=this.Ye.length||!this.sn(this.Ye[c++],f))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function MD(n){var e,t;if(lt(n instanceof nn||n instanceof _n),n instanceof nn){if(n instanceof f0){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>nn.create(n.field,"==",u)))||[];return _n.create(i,"or")}return n}const r=n.filters.map(i=>MD(i));return _n.create(r,n.op)}function GC(n){if(0===n.getFilters().length)return[];const e=Pg(MD(n));return lt(j0(e)),V0(e)||B0(e)?[e]:e.getFilters()}function V0(n){return n instanceof nn}function B0(n){return n instanceof _n&&St(n)}function j0(n){return V0(n)||B0(n)||function(e){if(e instanceof _n&&FI(e)){for(const t of e.getFilters())if(!V0(t)&&!B0(t))return!1;return!0}return!1}(n)}function Pg(n){if(lt(n instanceof nn||n instanceof _n),n instanceof nn)return n;if(1===n.filters.length)return Pg(n.filters[0]);const e=n.filters.map(r=>Pg(r));let t=_n.create(e,n.op);return t=kg(t),j0(t)?t:(lt(t instanceof _n),lt(_d(t)),lt(t.filters.length>1),t.filters.reduce((r,i)=>ev(r,i)))}function ev(n,e){let t;return lt(n instanceof nn||n instanceof _n),lt(e instanceof nn||e instanceof _n),t=n instanceof nn?e instanceof nn?_n.create([n,e],"and"):RD(n,e):e instanceof nn?RD(e,n):function(r,i){if(lt(r.filters.length>0&&i.filters.length>0),_d(r)&&_d(i))return wd(r,i.getFilters());const u=FI(r)?r:i,c=FI(r)?i:r,f=u.filters.map(v=>ev(v,c));return _n.create(f,"or")}(n,e),kg(t)}function RD(n,e){if(_d(e))return wd(e,n.getFilters());{const t=e.filters.map(r=>ev(n,r));return _n.create(t,"or")}}function kg(n){if(lt(n instanceof nn||n instanceof _n),n instanceof nn)return n;const e=n.getFilters();if(1===e.length)return kg(e[0]);if(LI(n))return n;const t=e.map(i=>kg(i)),r=[];return t.forEach(i=>{i instanceof nn?r.push(i):i instanceof _n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:_n.create(r,n.op)}class ND{constructor(){this.rn=new $0}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(fs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class $0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kn(Kt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kn(Kt.comparator)).toArray()}}const Og=new Uint8Array(0);class PD{constructor(e,t){this.user=e,this.databaseId=t,this.on=new $0,this.un=new Eu(r=>Wc(r),(r,i)=>yg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Ti(i)};return kD(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ag(t),""],!1,!0);return kD(e).j(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ko(c.parent))}return r})}addFieldIndex(e,t){const r=Fg(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=kr(e);return u.next(f=>{c.put(AD(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Fg(e),i=kr(e),u=If(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=If(e);let i=!0;const u=new Map;return se.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=zt();const f=[];return se.forEach(u,(v,D)=>{var C;Pe("IndexedDbIndexManager",`Using index ${C=v,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ot=>`${ot.fieldPath}:${ot.kind}`).join(",")}`} to execute ${Wc(t)}`);const M=function(ot,ht){const jt=Ty(ht);if(void 0===jt)return null;for(const $t of ky(ot,jt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(D,v),L=function(ot,ht){const jt=new Map;for(const $t of Bc(ht))for(const wn of ky(ot,$t.fieldPath))switch(wn.op){case"==":case"in":jt.set($t.fieldPath.canonicalString(),wn.value);break;case"not-in":case"!=":return jt.set($t.fieldPath.canonicalString(),wn.value),Array.from(jt.values())}return null}(D,v),$=function(ot,ht){const jt=[];let $t=!0;for(const wn of Bc(ht)){const Yi=0===wn.kind?ff(ot,wn.fieldPath,ot.startAt):HI(ot,wn.fieldPath,ot.startAt);jt.push(Yi.value),$t&&($t=Yi.inclusive)}return new ps(jt,$t)}(D,v),Z=function(ot,ht){const jt=[];let $t=!0;for(const wn of Bc(ht)){const Yi=0===wn.kind?HI(ot,wn.fieldPath,ot.endAt):ff(ot,wn.fieldPath,ot.endAt);jt.push(Yi.value),$t&&($t=Yi.inclusive)}return new ps(jt,$t)}(D,v),he=this.hn(v,D,$),_e=this.hn(v,D,Z),He=this.ln(v,D,L),rt=this.fn(v.indexId,M,he,$.inclusive,_e,Z.inclusive,He);return se.forEach(rt,ot=>r.H(ot,t.limit).next(ht=>{ht.forEach(jt=>{const $t=Ke.fromSegments(jt.documentKey);c.has($t)||(c=c.add($t),f.push($t))})}))}).next(()=>f)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:GC(_n.create(e.filters,"and")).map(r=>Ny(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,c,f){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),D=v/(null!=t?t.length:1),C=[];for(let M=0;M<v;++M){const L=t?this.dn(t[M/D]):Og,$=this.wn(e,L,r[M%D],i),Z=this._n(e,L,u[M%D],c),he=f.map(_e=>this.wn(e,L,_e,!0));C.push(...this.createRange($,Z,he))}return C}wn(e,t,r,i){const u=new Cu(e,Ke.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new Cu(e,Ke.empty(),t,r);return i?u.Je():u}an(e,t){const r=new U0(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return se.forEach(i,u=>this.an(e,u).next(c=>{c?0!==r&&c.fields.length<function(f){let v=new kn(Qn.comparator),D=!1;for(const C of f.filters)for(const M of C.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?D=!0:v=v.add(M.field));for(const C of f.orderBy)C.field.isKeyField()||(v=v.add(C.field));return v.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Ad;for(const i of Bc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.He(i.kind);Qc.Ve._e(u,c)}return r.Qe()}dn(e){const t=new Ad;return Qc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Ad;return Qc.Ve._e(vd(this.databaseId,t),r.He(function(i){const u=Bc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Ad);let u=0;for(const c of Bc(e)){const f=r[u++];for(const v of i)if(this.yn(t,c.fieldPath)&&gg(f))i=this.pn(i,c,f);else{const D=v.He(c.kind);Qc.Ve._e(f,D)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const v=new Ad;v.seed(f.Qe()),Qc.Ve._e(c,v.He(t.kind)),u.push(v)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof nn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Fg(e),i=kr(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const c=[];return se.forEach(u,f=>i.get([f.indexId,this.uid]).next(v=>{c.push(function(D,C){const M=C?new uf(C.sequenceNumber,new fs(bu(C.readTime),new Ke(ko(C.documentKey)),C.largestBatchId)):uf.empty(),L=D.fields.map(([$,Z])=>new cg(Qn.fromServerFormat($),Z));return new af(D.indexId,D.collectionGroup,L,M)}(f,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ot(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Fg(e),u=kr(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>se.forEach(f,v=>u.put(AD(v.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),se.forEach(f,v=>this.En(e,i,v).next(D=>{const C=this.An(u,v);return D.isEqual(C)?se.resolve():this.vn(e,u,v,D,C)}))))})}Rn(e,t,r,i){return If(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return If(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=If(e);let u=new kn(Su);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{u=u.add(new Cu(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}An(e,t){let r=new kn(Su);const i=this.mn(t,e);if(null==i)return r;const u=Ty(t);if(null!=u){const c=e.data.field(u.fieldPath);if(gg(c))for(const f of c.arrayValue.values||[])r=r.add(new Cu(t.indexId,e.key,this.dn(f),i))}else r=r.add(new Cu(t.indexId,e.key,Og,i));return r}vn(e,t,r,i,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,v,D,C,M){const L=f.getIterator(),$=v.getIterator();let Z=yd(L),he=yd($);for(;Z||he;){let _e=!1,He=!1;if(Z&&he){const rt=D(Z,he);rt<0?He=!0:rt>0&&(_e=!0)}else null!=Z?He=!0:_e=!0;_e?(C(he),he=yd($)):He?(M(Z),Z=yd(L)):(Z=yd(L),he=yd($))}}(i,u,Su,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),se.waitFor(c)}Tn(e){let t=1;return kr(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Su(c,f)).filter((c,f,v)=>!f||0!==Su(c,v[f-1]));const i=[];i.push(e);for(const c of r){const f=Su(c,e),v=Su(c,t);if(0===f)i[0]=e.Je();else if(f>0&&v<0)i.push(c),i.push(c.Je());else if(v>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Og,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Og,[]]))}return u}bn(e,t){return Su(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xd)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(xd)}}function kD(n){return Hr(n,"collectionParents")}function If(n){return Hr(n,"indexEntries")}function Fg(n){return Hr(n,"indexConfiguration")}function kr(n){return Hr(n,"indexState")}function xd(n){lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Y_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}const OD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ci{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ci(e,Ci.DEFAULT_COLLECTION_PERCENTILE,Ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qC(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const v=r.X({range:c},(C,M,L)=>(f++,L.delete()));u.push(v.next(()=>{lt(1===f)}));const D=[];for(const C of t.mutations){const M=vI(e,C.key.path,t.batchId);u.push(i.delete(M)),D.push(C.key)}return se.waitFor(u).next(()=>D)}function H0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Ci.DEFAULT_COLLECTION_PERCENTILE=10,Ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ci.DEFAULT=new Ci(41943040,Ci.DEFAULT_COLLECTION_PERCENTILE,Ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ci.DISABLED=new Ci(-1,0,0);class Lg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){lt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Lg(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return so(e).X({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Df(e),c=so(e);return c.add({}).next(f=>{lt("number"==typeof f);const v=new T0(f,t,r,i),D=function(L,$,Z){const he=Z.baseMutations.map(He=>xg(L.fe,He)),_e=Z.mutations.map(He=>xg(L.fe,He));return{userId:$,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:he,mutations:_e}}(this.serializer,this.userId,v),C=[];let M=new kn((L,$)=>Ot(L.canonicalString(),$.canonicalString()));for(const L of i){const $=vI(this.userId,L.key.path,f);M=M.add(L.key.path.popLast()),C.push(c.put(D)),C.push(u.put($,wC))}return M.forEach(L=>{C.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[f]=v.keys()}),se.waitFor(C).next(()=>v)})}lookupMutationBatch(e,t){return so(e).get(t).next(r=>r?(lt(r.userId===this.userId),bi(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return so(e).X({index:"userMutationsIndex",range:i},(c,f,v)=>{f.userId===this.userId&&(lt(f.batchId>=r),u=bi(this.serializer,f)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return so(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return so(e).j("userMutationsIndex",t).next(r=>r.map(i=>bi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Df(e).X({range:i},(c,f,v)=>{const[D,C,M]=c,L=ko(C);if(D===this.userId&&t.path.isEqual(L))return so(e).get(M).next($=>{if(!$)throw et();lt($.userId===this.userId),u.push(bi(this.serializer,$))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Ot);const i=[];return t.forEach(u=>{const c=yu(this.userId,u.path),f=IDBKeyRange.lowerBound(c),v=Df(e).X({range:f},(D,C,M)=>{const[L,$,Z]=D,he=ko($);L===this.userId&&u.path.isEqual(he)?r=r.add(Z):M.done()});i.push(v)}),se.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=yu(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new kn(Ot);return Df(e).X({range:c},(v,D,C)=>{const[M,L,$]=v,Z=ko(L);M===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(f=f.add($)):C.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(so(e).get(u).next(c=>{if(null===c)throw et();lt(c.userId===this.userId),r.push(bi(this.serializer,c))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return qC(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Df(e).X({range:r},(u,c,f)=>{if(u[0]===this.userId){const v=ko(u[1]);i.push(v)}else f.done()}).next(()=>{lt(0===i.length)})})}containsKey(e,t){return z0(e,this.userId,t)}xn(e){return tv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function z0(n,e,t){const r=yu(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Df(n).X({range:u,Y:!0},(f,v,D)=>{const[C,M,L]=f;C===e&&M===i&&(c=!0),D.done()}).next(()=>c)}function so(n){return Hr(n,"mutations")}function Df(n){return Hr(n,"documentMutations")}function tv(n){return Hr(n,"mutationQueues")}class Md{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Md(0)}static Mn(){return new Md(-1)}}class FD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Md(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ft.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tf(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(lt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Tf(e).X((c,f)=>{const v=Rg(f);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Tf(e).X((r,i)=>{const u=Rg(i);t(u)})}$n(e){return LD(e).get("targetGlobalKey").next(t=>(lt(null!==t),t))}On(e,t){return LD(e).put("targetGlobalKey",t)}Fn(e,t){return Tf(e).put(Qy(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Tf(e).X({range:i,index:"queryTargetsIndex"},(c,f,v)=>{const D=Rg(f);yg(t,D.target)&&(u=D,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Yc(e);return t.forEach(c=>{const f=Ti(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Yc(e);return se.forEach(t,u=>{const c=Ti(u.path);return se.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Yc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Yc(e);let u=zt();return i.X({range:r,Y:!0},(c,f,v)=>{const D=ko(c[1]),C=new Ke(D);u=u.add(C)}).next(()=>u)}containsKey(e,t){const r=Ti(t.path),i=IDBKeyRange.bound([r],[ag(r)],!1,!0);let u=0;return Yc(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],v,D)=>{0!==c&&(u++,D.done())}).next(()=>u>0)}le(e,t){return Tf(e).get(t).next(r=>r?Rg(r):null)}}function Tf(n){return Hr(n,"targets")}function LD(n){return Hr(n,"targetGlobal")}function Yc(n){return Hr(n,"targetDocuments")}function nv([n,e],[t,r]){const i=Ot(n,t);return 0===i?Ot(e,r):i}class UD{constructor(e){this.Ln=e,this.buffer=new kn(nv),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){mu(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gu(r)}yield t.Qn(3e5)}))}}class rv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Us.ct);const r=new UD(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(OD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OD):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,c,f,v,D;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(D=Date.now(),Uc()<=Ac.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(v-f)+`ms\n\tRemoved ${M} documents in `+(D-v)+`ms\nTotal Duration: ${D-C}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class dx{constructor(e,t){this.db=e,this.garbageCollector=function iv(n,e){return new rv(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Ug(e,r)}removeReference(e,t,r){return Ug(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ug(e,t)}Xn(e,t){return function(r,i){let u=!1;return tv(r).Z(c=>z0(r,c,i).next(f=>(f&&(u=!0),se.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(c,f)=>{if(f<=t){const v=this.Xn(e,c).next(D=>{if(!D)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,ft.min()),Yc(e).delete([0,Ti(c.path)])))});i.push(v)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ug(e,t)}Yn(e,t){const r=Yc(e);let i,u=Us.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:v,sequenceNumber:D})=>{0===c?(u!==Us.ct&&t(new Ke(ko(i)),u),u=D,i=v):u=Us.ct}).next(()=>{u!==Us.ct&&t(new Ke(ko(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ug(n,e){return Yc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class VD{constructor(){this.changes=new Eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Au(e).put(r)}removeEntry(e,t,r){return Au(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Zc(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=On.newInvalidDocument(t);return Au(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sv(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:On.newInvalidDocument(t)};return Au(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sv(t))},(i,u)=>{r={document:this.ts(t,u),size:H0(u)}}).next(()=>r)}getEntries(e,t){let r=Vs();return this.ns(e,t,(i,u)=>{const c=this.ts(i,u);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Vs(),i=new xn(Ke.comparator);return this.ns(e,t,(u,c)=>{const f=this.ts(u,c);r=r.insert(u,f),i=i.insert(u,H0(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let i=new kn(KC);t.forEach(v=>i=i.add(v));const u=IDBKeyRange.bound(sv(i.first()),sv(i.last())),c=i.getIterator();let f=c.getNext();return Au(e).X({index:"documentKeyIndex",range:u},(v,D,C)=>{const M=Ke.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;f&&KC(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,D),f=c.hasNext()?c.getNext():null),f?C.G(sv(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),Zc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Au(e).j(IDBKeyRange.bound(c,f,!0)).next(v=>{let D=Vs();for(const C of v){const M=this.ts(Ke.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);M.isFoundDocument()&&(pf(t,M)||i.has(M.key))&&(D=D.insert(M.key,M))}return D})}getAllFromCollectionGroup(e,t,r,i){let u=Vs();const c=jD(t,r),f=jD(t,fs.max());return Au(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(v,D,C)=>{const M=this.ts(Ke.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(M.key,M),u.size===i&&C.done()}).next(()=>u)}newChangeBuffer(e){return new WC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return q0(e).get("remoteDocumentGlobalKey").next(t=>(lt(!!t),t))}Zn(e,t){return q0(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function $C(n,e){let t;if(e.document)t=vD(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=bu(e.noDocument.readTime);t=On.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ke.fromSegments(e.unknownDocument.path),i=bu(e.unknownDocument.version);t=On.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new An(r[0],r[1]);return ft.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ft.min()))return r}return On.newInvalidDocument(e)}}function Rd(n){return new BD(n)}class WC extends VD{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Eu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new kn((u,c)=>Ot(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.us.get(u);if(t.push(this.os.removeEntry(e,u,f.readTime)),c.isValidDocument()){const v=CD(this.os.serializer,c);i=i.add(u.path.popLast()),r+=H0(v)-f.size,t.push(this.os.addEntry(e,u,v))}else if(r-=f.size,this.trackRemovals){const v=CD(this.os.serializer,c.convertToNoDocument(ft.min()));t.push(this.os.addEntry(e,u,v))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,c)=>{this.us.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function q0(n){return Hr(n,"remoteDocumentGlobal")}function Au(n){return Hr(n,"remoteDocumentsV14")}function sv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jD(n,e){const t=e.documentKey.path.toArray();return[n,Zc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function KC(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Ot(t[u],r[u]),i)return i;return i=Ot(t.length,r.length),i||(i=Ot(t[t.length-2],r[r.length-2]),i||Ot(t[t.length-1],r[r.length-1]))}class ZC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $D{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Dg(r.mutation,i,ci.empty(),An.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zt()){const i=Bs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Uy();return u.forEach((f,v)=>{c=c.insert(f,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Bs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let u=Vs();const c=wg(),f=wg();return t.forEach((v,D)=>{const C=r.get(D.key);i.has(D.key)&&(void 0===C||C.mutation instanceof Iu)?u=u.insert(D.key,D):void 0!==C?(c.set(D.key,C.mutation.getFieldMask()),Dg(C.mutation,D,C.mutation.getFieldMask(),An.now())):c.set(D.key,ci.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((D,C)=>c.set(D,C)),t.forEach((D,C)=>{var M;return f.set(D,new ZC(C,null!==(M=c.get(D))&&void 0!==M?M:null))}),f))}recalculateAndSaveOverlays(e,t){const r=wg();let i=new xn((c,f)=>c-f),u=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(v=>{const D=t.get(v);if(null===D)return;let C=r.get(v)||ci.empty();C=f.applyToLocalView(D,C),r.set(v,C);const M=(i.get(f.batchId)||zt()).add(v);i=i.insert(f.batchId,M)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const v=f.getNext(),D=v.key,C=v.value,M=qI();C.forEach(L=>{if(!u.has(L)){const $=XI(t.get(L),r.get(L));null!==$&&M.set(L,$),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,D,M))}return se.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):g0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):se.resolve(Bs());let f=-1,v=u;return c.next(D=>se.forEach(D,(C,M)=>(f<M.largestBatchId&&(f=M.largestBatchId),u.get(C)?se.resolve():this.remoteDocumentCache.getEntry(e,C).next(L=>{v=v.insert(C,L)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,v,D,zt())).next(C=>({batchId:f,changes:_0(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Uy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Uy();return this.indexManager.getCollectionParents(e,i).next(c=>se.forEach(c,f=>{const v=(D=t,C=f.child(i),new _u(C,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,C;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(D=>{D.forEach((C,M)=>{u=u.insert(C,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((f,v)=>{const D=v.getKey();null===u.get(D)&&(u=u.insert(D,On.newInvalidDocument(D)))});let c=Uy();return u.forEach((f,v)=>{const D=i.get(f);void 0!==D&&Dg(D.mutation,v,ci.empty(),An.now()),pf(t,v)&&(c=c.insert(f,v))}),c})}}class QC{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:sr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Sd(r.bundledQuery),readTime:sr(r.readTime)}),se.resolve();var r}}class HD{constructor(){this.overlays=new xn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bs();return se.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=Bs(),u=t.length+1,c=new Ke(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const v=f.getNext().value,D=v.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&v.largestBatchId>r&&i.set(v.getKey(),v)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new xn((D,C)=>D-C);const c=this.overlays.getIterator();for(;c.hasNext();){const D=c.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let C=u.get(D.largestBatchId);null===C&&(C=Bs(),u=u.insert(D.largestBatchId,C)),C.set(D.getKey(),D)}}const f=Bs(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((D,C)=>f.set(D,C)),!(f.size()>=i)););return se.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Hy(t,r));let u=this.ls.get(t);void 0===u&&(u=zt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class ov{constructor(){this.fs=new kn(Gr.ds),this.ws=new kn(Gr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Gr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Gr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new Kt([])),r=new Gr(t,e),i=new Gr(t,e+1),u=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),u.push(c.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new Kt([])),r=new Gr(t,e),i=new Gr(t,e+1);let u=zt();return this.ws.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Gr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Ot(e.As,t.As)}static _s(e,t){return Ot(e.As,t.As)||Ke.comparator(e.key,t.key)}}class zD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new kn(Gr.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const c=new T0(u,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new Gr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gr(t,0),i=new Gr(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);u.push(f)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Ot);return t.forEach(i=>{const u=new Gr(i,0),c=new Gr(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,c],f=>{r=r.add(f.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const c=new Gr(new Ke(u),0);let f=new kn(Ot);return this.Rs.forEachWhile(v=>{const D=v.key.path;return!!r.isPrefixOf(D)&&(D.length===i&&(f=f.add(v.As)),!0)},c),se.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){lt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,i=>{const u=new Gr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Gr(t,0),i=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GD{constructor(e){this.Ds=e,this.docs=new xn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():On.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():On.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=Vs();const c=t.path,f=new Ke(c.child("")),v=this.docs.getIteratorFrom(f);for(;v.hasNext();){const{key:D,value:{document:C}}=v.getNext();if(!c.isPrefixOf(D.path))break;D.path.length>c.length+1||Y_(Q_(C),r)<=0||(i.has(C.key)||pf(t,C))&&(u=u.insert(C.key,C.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YC(this)}getSize(e){return se.resolve(this.size)}}class YC extends VD{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class JC{constructor(e){this.persistence=e,this.xs=new Eu(t=>Wc(t),yg),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ov,this.targetCount=0,this.Ms=Md.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Md(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),se.waitFor(u).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class av{constructor(e,t){this.$s={},this.overlays={},this.Os=new Us(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new JC(this),this.indexManager=new ND,this.remoteDocumentCache=new GD(r=>this.referenceDelegate.Ls(r)),this.serializer=new bD(t),this.qs=new QC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new zD(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new XC(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class XC extends dI{constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.Qs=new ov,this.js=null}static zs(e){return new Vg(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const i=Ke.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,ft.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class qD{constructor(e){this.serializer=e}O(e,t,r,i){const u=new dg("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X_,{unique:!0}),f.createObjectStore("documentMutations"),W0(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=se.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),W0(e)),c=c.next(()=>function(f){const v=f.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",D)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,v){return v.store("mutations").j().next(D=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X_,{unique:!0});const C=v.store("mutations"),M=D.map(L=>C.put(L));return se.waitFor(M)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(u))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const v=f.createObjectStore("documentOverlays",{keyPath:Fo});v.createIndex("collectionPathOverlayIndex",DI,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",TI,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const v=f.createObjectStore("remoteDocumentsV14",{keyPath:_I});v.createIndex("documentKeyIndex",EC),v.createIndex("collectionGroupIndex",wI)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,u))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:IC}).createIndex("sequenceNumberIndex",DC,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Da}).createIndex("documentKeyIndex",Oo,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=H0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>se.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>se.forEach(f,v=>{lt(v.userId===u.userId);const D=bi(this.serializer,v);return qC(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((c,f)=>{const v=new Kt(c),D=[0,Ti(v)];u.push(t.get(D).next(C=>C?se.resolve():t.put({targetId:0,path:Ti(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Ia});const r=t.store("collectionParents"),i=new $0,u=c=>{if(i.add(c)){const f=c.lastSegment(),v=c.popLast();return r.put({collectionId:f,parent:Ti(v)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const v=new Kt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,v],D)=>{const C=ko(f);return u(C.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=Rg(i),c=Qy(this.serializer,u);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,c)=>{const f=t.store("remoteDocumentsV14"),v=(D=c,D.document?new Ke(Kt.fromString(D.document.name).popFirst(5)):D.noDocument?Ke.fromSegments(D.noDocument.path):D.unknownDocument?Ke.fromSegments(D.unknownDocument.path):et()).path.toArray();var D;const C={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(C))}).next(()=>se.waitFor(i))}si(e,t){const r=t.store("mutations"),i=Rd(this.serializer),u=new av(Vg.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(v=>{var D;let C=null!==(D=f.get(v.userId))&&void 0!==D?D:zt();bi(this.serializer,v).keys().forEach(M=>C=C.add(M)),f.set(v.userId,C)}),se.forEach(f,(v,D)=>{const C=new cr(D),M=Jy.de(this.serializer,C),L=u.getIndexManager(C),$=Lg.de(C,this.serializer,L,u.referenceDelegate);return new $D(i,$,M,L).recalculateAndSaveOverlaysForDocumentKeys(new gd(t,Us.ct),v).next()})})}}function W0(n){n.createObjectStore("targetDocuments",{keyPath:EI}).createIndex("documentTargetsIndex",II,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ox,{unique:!0}),n.createObjectStore("targetGlobal")}const K0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Z0{constructor(e,t,r,i,u,c,f,v,D,C,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=c,this.document=f,this.ri=D,this.oi=C,this.ui=M,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!Z0.D())throw new Ce(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dx(this,i),this.di=t+"main",this.serializer=new bD(v),this.wi=new io(this.di,this.ui,new qD(this.serializer)),this.Bs=new FD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rd(this.serializer),this.qs=new Yy,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===C&&Pn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(le.FAILED_PRECONDITION,K0);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Us(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(mu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return uv(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return jg(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Hr(r,"clientMetadata");return i.j().next(u=>{const c=e.Si(u,18e5),f=u.filter(v=>-1===c.indexOf(v));return se.forEach(f,v=>i.delete(v.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):uv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ce(le.FAILED_PRECONDITION,K0);return!1}}return!(!this.networkEnabled||!this.inForeground)||jg(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new gd(t,Us.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>jg(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Lg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new PD(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Jy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.ui)?e0:14===c?SI:13===c?CI:12===c?TC:11===c?bI:void et();var c;let f;return this.wi.runTransaction(e,i,u,v=>(f=new gd(v,this.Os?this.Os.next():Us.ct),"readwrite-primary"===t?this.Ti(f).next(D=>!!D||this.Ei(f)).next(D=>{if(!D)throw Pn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ce(le.FAILED_PRECONDITION,lI);return r(f)}).next(D=>this.vi(f).next(()=>D)):this.Oi(f).next(()=>r(f)))).then(v=>(f.raiseOnCommittedEvent(),v))}Oi(e){return uv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(le.FAILED_PRECONDITION,K0)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uv(e).put("owner",t)}static D(){return io.D()}Ai(e){const t=uv(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ln.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Pn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uv(n){return Hr(n,"owner")}function jg(n){return Hr(n,"clientMetadata")}function WD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class KD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=zt(),i=zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new KD(e,t.fromCache,r,i)}}class eS{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(p0(t))return se.resolve(null);let r=Pr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Fy(t,null,"F"),r=Pr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=zt(...u);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(v=>{const D=this.ji(t,f);return this.zi(t,D,c,v.readTime)?this.Ki(e,Fy(t,null,"F")):this.Wi(e,D,t,v)}))})))}Gi(e,t,r,i){return p0(t)||i.isEqual(ft.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const c=this.ji(t,u);return this.zi(t,c,r,i)?this.Qi(e,t):(Uc()<=Ac.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ly(t)),this.Wi(e,c,t,Z_(i,-1)))})}ji(e,t){let r=new kn(v0(e));return t.forEach((i,u)=>{pf(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return Uc()<=Ac.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Ly(t)),this.Ui.getDocumentsMatchingQuery(e,t,fs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class hx{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new xn(Ot),this.Yi=new Eu(u=>Wc(u),yg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $D(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function tS(n,e,t,r){return new hx(n,e,t,r)}function nS(n,e){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,Ee.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let v=zt();for(const D of i){c.push(D.batchId);for(const C of D.mutations)v=v.add(C.key)}for(const D of u){f.push(D.batchId);for(const C of D.mutations)v=v.add(C.key)}return t.localDocuments.getDocuments(r,v).next(D=>({er:D,removedBatchIds:c,addedBatchIds:f}))})})}),ZD.apply(this,arguments)}function fx(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,v,D){const C=v.batch,M=C.keys();let L=se.resolve();return M.forEach($=>{L=L.next(()=>D.getEntry(f,$)).next(Z=>{const he=v.docVersions.get($);lt(null!==he),Z.version.compareTo(he)<0&&(C.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),D.addEntry(Z)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(f,C))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=zt();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(f=f.add(c.batch.mutations[v].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $g(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function px(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((C,M)=>{const L=i.get(M);if(!L)return;f.push(t.Bs.removeMatchingKeys(u,C.removedDocuments,M).next(()=>t.Bs.addMatchingKeys(u,C.addedDocuments,M)));let $=L.withSequenceNumber(u.currentSequenceNumber);var Z,he,_e;null!==e.targetMismatches.get(M)?$=$.withResumeToken(wr.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):C.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(C.resumeToken,r)),i=i.insert(M,$),he=$,_e=C,(0===(Z=L).resumeToken.approximateByteSize()||he.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(u,$))});let v=Vs(),D=zt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),f.push(Q0(u,c,e.documentUpdates).next(C=>{v=C.nr,D=C.sr})),!r.isEqual(ft.min())){const C=t.Bs.getLastRemoteSnapshotVersion(u).next(M=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(C)}return se.waitFor(f).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,D)).next(()=>v)}).then(u=>(t.Ji=i,u))}function Q0(n,e,t){let r=zt(),i=zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Vs();return t.forEach((f,v)=>{const D=u.get(f);v.isFoundDocument()!==D.isFoundDocument()&&(i=i.add(f)),v.isNoDocument()&&v.version.isEqual(ft.min())?(e.removeEntry(f,v.readTime),c=c.insert(f,v)):!D.isValidDocument()||v.version.compareTo(D.version)>0||0===v.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(v),c=c.insert(f,v)):Pe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",D.version," Watch version:",v.version)}),{nr:c,sr:i}})}function cv(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nd(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,se.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new Tu(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Pd(n,e,t){return QD.apply(this,arguments)}function QD(){return QD=(0,Ee.Z)(function*(n,e,t){const r=Qe(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!mu(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),QD.apply(this,arguments)}function bf(n,e,t){const r=Qe(n);let i=ft.min(),u=zt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,v,D){const C=Qe(f),M=C.Yi.get(D);return void 0!==M?se.resolve(C.Ji.get(M)):C.Bs.getTargetData(v,D)}(r,c,Pr(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(v=>{u=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:ft.min(),t?u:zt())).next(f=>(J0(r,GI(e),f),{documents:f,ir:u})))}function Y0(n,e){const t=Qe(n),r=Qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(c=>c?c.target:null))}function YD(n,e){const t=Qe(n),r=t.Xi.get(e)||ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Z_(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(J0(t,e,i),i))}function J0(n,e,t){let r=n.Xi.get(e)||ft.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function X0(){return X0=(0,Ee.Z)(function*(n,e,t,r){const i=Qe(n);let u=zt(),c=Vs();for(const D of t){const C=e.rr(D.metadata.name);D.document&&(u=u.add(C));const M=e.ur(D);M.setReadTime(e.cr(D.metadata.readTime)),c=c.insert(C,M)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),v=yield Nd(i,(D=r,Pr(wu(Kt.fromString(`__bundle__/docs/${D}`)))));var D;return i.persistence.runTransaction("Apply bundle documents","readwrite",D=>Q0(D,f,c).next(C=>(f.apply(D),C)).next(C=>i.Bs.removeMatchingKeysForTargetId(D,v.targetId).next(()=>i.Bs.addMatchingKeys(D,u,v.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(D,C.nr,C.sr)).next(()=>C.nr)))}),X0.apply(this,arguments)}function rS(n,e){return ew.apply(this,arguments)}function ew(){return ew=(0,Ee.Z)(function*(n,e,t=zt()){const r=yield Nd(n,Pr(Sd(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=sr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(u,e);const f=r.withResumeToken(wr.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(u,f).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),ew.apply(this,arguments)}function Hg(n,e){return`firestore_clients_${n}_${e}`}function JD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function XD(n,e){return`firestore_targets_${n}_${e}`}class tw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Ce(i.error.code,i.error.message))),c?new tw(e,t,i.state,u):(Pn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Ce(r.error.code,r.error.message))),u?new lv(e,r.state,i):(Pn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=w0();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=gI(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new dv(e,u):(Pn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nw{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nw(t.clientId,t.onlineState):(Pn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rw{constructor(){this.activeTargetIds=w0()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eT{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new xn(Ot),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=Hg(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new rw),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(Hg(e.persistenceKey,i));if(u){const c=dv.ar(i,u);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(XD(this.persistenceKey,e));if(r){const i=lv.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(XD(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Pn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let c=Us.ct;if(null!=u)try{const f=JSON.parse(u);lt("number"==typeof f),c=f}catch(f){Pn("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Us.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new tw(this.currentUser,e,t,r),u=JD(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=JD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=XD(this.persistenceKey,e),u=new lv(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return dv.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return tw.ar(new cr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return lv.ar(i,t)}br(e){return nw.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),c=[],f=[];return u.forEach(v=>{i.has(v)||c.push(v)}),i.forEach(v=>{u.has(v)||f.push(v)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=w0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tT{constructor(){this.Hr=new rw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new rw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nT{Yr(e){}shutdown(){}}class iw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sw=null;function js(){return null===sw?sw=268435456+Math.round(2147483648*Math.random()):sw++,"0x"+sw.toString(16)}const iS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ow{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Si="WebChannelConnection";class oo extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const c=js(),f=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const v={};return this.Eo(v,i,u),this.Ao(e,f,v,r).then(D=>(Pe("RestConnection",`Received RPC '${e}' ${c}: `,D),D),D=>{throw ai("RestConnection",`RPC '${e}' ${c} failed with error: `,D,"url: ",f,"request:",r),D})}vo(e,t,r,i,u,c){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+oi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${iS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=js();return new Promise((c,f)=>{const v=new wa;v.setWithCredentials(!0),v.listenOnce(sg.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case tI.NO_ERROR:const C=v.getResponseJson();Pe(Si,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(C)),c(C);break;case tI.TIMEOUT:Pe(Si,`RPC '${e}' ${u} timed out`),f(new Ce(le.DEADLINE_EXCEEDED,"Request time out"));break;case tI.HTTP_ERROR:const M=v.getStatus();if(Pe(Si,`RPC '${e}' ${u} failed with status:`,M,"response text:",v.getResponseText()),M>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L?.error;if($&&$.status&&$.message){const Z=function(he){const _e=he.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(_e)>=0?_e:le.UNKNOWN}($.status);f(new Ce(Z,$.message))}else f(new Ce(le.UNKNOWN,"Server responded with status "+v.getStatus()))}else f(new Ce(le.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Pe(Si,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(i);Pe(Si,`RPC '${e}' ${u} sending request:`,i),v.send(t,"POST",D,r,15)})}Ro(e,t,r){const i=js(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=wy(),f=pd(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(v.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(v.xmlHttpFactory=new q_({})),this.Eo(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const C=u.join("");Pe(Si,`Creating RPC '${e}' stream ${i}: ${C}`,v);const M=c.createWebChannel(C,v);let L=!1,$=!1;const Z=new ow({ro:_e=>{$?Pe(Si,`Not sending because RPC '${e}' stream ${i} is closed:`,_e):(L||(Pe(Si,`Opening RPC '${e}' stream ${i} transport.`),M.open(),L=!0),Pe(Si,`RPC '${e}' stream ${i} sending:`,_e),M.send(_e))},oo:()=>M.close()}),he=(_e,He,rt)=>{_e.listen(He,ot=>{try{rt(ot)}catch(ht){setTimeout(()=>{throw ht},0)}})};return he(M,Ey.EventType.OPEN,()=>{$||Pe(Si,`RPC '${e}' stream ${i} transport opened.`)}),he(M,Ey.EventType.CLOSE,()=>{$||($=!0,Pe(Si,`RPC '${e}' stream ${i} transport closed`),Z.wo())}),he(M,Ey.EventType.ERROR,_e=>{$||($=!0,ai(Si,`RPC '${e}' stream ${i} transport errored:`,_e),Z.wo(new Ce(le.UNAVAILABLE,"The operation could not be completed")))}),he(M,Ey.EventType.MESSAGE,_e=>{var He;if(!$){const rt=_e.data[0];lt(!!rt);const ot=rt,ht=ot.error||(null===(He=ot[0])||void 0===He?void 0:He.error);if(ht){Pe(Si,`RPC '${e}' stream ${i} received error:`,ht);const jt=ht.status;let $t=function(Yi){const xa=Er[Yi];if(void 0!==xa)return C0(xa)}(jt),wn=ht.message;void 0===$t&&($t=le.INTERNAL,wn="Unknown error status: "+jt+" with message "+ht.message),$=!0,Z.wo(new Ce($t,wn)),M.close()}else Pe(Si,`RPC '${e}' stream ${i} received:`,rt),Z._o(rt)}}),he(f,gC.STAT_EVENT,_e=>{_e.stat===nI.PROXY?Pe(Si,`RPC '${e}' stream ${i} detected buffering proxy`):_e.stat===nI.NOPROXY&&Pe(Si,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function rT(){return typeof window<"u"?window:null}function Cf(){return typeof document<"u"?document:null}function zg(n){return new hD(n,!0)}class aw{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class hv{constructor(e,t,r,i,u,c,f,v){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new aw(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Pn(t.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ce(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iT extends hv{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function BC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:et(),i=e.targetChange.targetIds||[],u=function(v,D){return v.useProto3Json?(lt(void 0===D||"string"==typeof D),wr.fromBase64String(D||"")):(lt(void 0===D||D instanceof Uint8Array),wr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(v){const D=void 0===v.code?le.UNKNOWN:C0(v.code);return new Ce(D,v.message||"")}(c);t=new uD(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ca(n,r.document.name),u=sr(r.document.updateTime),c=r.document.createTime?sr(r.document.createTime):ft.min(),f=new zr({mapValue:{fields:r.document.fields}}),v=On.newFoundDocument(i,u,c,f);t=new Cg(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,i=Ca(n,r.document),u=r.readTime?sr(r.readTime):ft.min(),c=On.newNoDocument(i,u);t=new Cg([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ca(n,r.document);t=new Cg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:u}=r,c=new OC(i,u);t=new Wy(r.targetId,c)}}var v;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ft.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?ft.min():u.readTime?sr(u.readTime):ft.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Ag(this.serializer),t.addTarget=function(i,u){let c;const f=u.target;if(c=Py(f)?{documents:_D(i,f)}:{query:N0(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=fD(i,u.resumeToken);const v=x0(i,u.expectedCount);null!==v&&(c.expectedCount=v)}else if(u.snapshotVersion.compareTo(ft.min())>0){c.readTime=wf(i,u.snapshotVersion.toTimestamp());const v=x0(i,u.expectedCount);null!==v&&(c.expectedCount=v)}return c}(this.serializer,e);const r=function Mg(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Ag(this.serializer),t.removeTarget=e,this.Wo(t)}}class sT extends hv{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jC(n,e){return n&&n.length>0?(lt(void 0!==e),n.map(t=>function(r,i){let u=sr(r.updateTime?r.updateTime:i);return u.isEqual(ft.min())&&(u=sr(i)),new NC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.cu(r,t)}return lt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ag(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xg(this.serializer,r))};this.Wo(t)}}class sS extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ce(le.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ce(le.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.vo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(le.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class oS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Pn(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class aT{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(f=>{r.enqueueAndForget((0,Ee.Z)(function*(){var v;Jc(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Ee.Z)(function*(D){const C=Qe(D);C.vu.add(4),yield $s(C),C.bu.set("Unknown"),C.vu.delete(4),yield Gg(C)}),function(D){return v.apply(this,arguments)})(c))}))}),this.bu=new oS(r,i)}}function Gg(n){return qg.apply(this,arguments)}function qg(){return qg=(0,Ee.Z)(function*(n){if(Jc(n))for(const e of n.Ru)yield e(!0)}),qg.apply(this,arguments)}function $s(n){return pv.apply(this,arguments)}function pv(){return pv=(0,Ee.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),pv.apply(this,arguments)}function Sf(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),lw(t)?cw(t):Kg(t).Ko()&&uw(t,e))}function Hs(n,e){const t=Qe(n),r=Kg(t);t.Au.delete(e),r.Ko()&&aS(t,e),0===t.Au.size&&(r.Ko()?r.jo():Jc(t)&&t.bu.set("Unknown"))}function uw(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Kg(n).su(e)}function aS(n,e){n.Vu.qt(e),Kg(n).iu(e)}function cw(n){n.Vu=new FC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Kg(n).start(),n.bu.gu()}function lw(n){return Jc(n)&&!Kg(n).Uo()&&n.Au.size>0}function Jc(n){return 0===Qe(n).vu.size}function uT(n){n.Vu=void 0}function cT(n){return lT.apply(this,arguments)}function lT(){return lT=(0,Ee.Z)(function*(n){n.Au.forEach((e,t)=>{uw(n,e)})}),lT.apply(this,arguments)}function dT(n,e){return dw.apply(this,arguments)}function dw(){return dw=(0,Ee.Z)(function*(n,e){uT(n),lw(n)?(n.bu.Iu(e),cw(n)):n.bu.set("Unknown")}),dw.apply(this,arguments)}function hT(n,e,t){return fT.apply(this,arguments)}function fT(){return fT=(0,Ee.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof uD&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Af(n,r)}else if(e instanceof Cg?n.Vu.Ht(e):e instanceof Wy?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ft.min()))try{const r=yield $g(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.Vu.ce(u);return c.targetChanges.forEach((f,v)=>{if(f.resumeToken.approximateByteSize()>0){const D=i.Au.get(v);D&&i.Au.set(v,D.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach((f,v)=>{const D=i.Au.get(f);if(!D)return;i.Au.set(f,D.withResumeToken(wr.EMPTY_BYTE_STRING,D.snapshotVersion)),aS(i,f);const C=new Tu(D.target,f,v,D.sequenceNumber);uw(i,C)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Af(n,r)}var r}),fT.apply(this,arguments)}function Af(n,e,t){return gv.apply(this,arguments)}function gv(){return gv=(0,Ee.Z)(function*(n,e,t){if(!mu(e))throw e;n.vu.add(1),yield $s(n),n.bu.set("Offline"),t||(t=()=>$g(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Gg(n)}))}),gv.apply(this,arguments)}function hw(n,e){return e().catch(t=>Af(n,t,e))}function kd(n){return mv.apply(this,arguments)}function mv(){return mv=(0,Ee.Z)(function*(n){const e=Qe(n),t=Od(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;pT(e);)try{const i=yield cv(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,yv(e,i)}catch(i){yield Af(e,i)}Wg(e)&&fw(e)}),mv.apply(this,arguments)}function pT(n){return Jc(n)&&n.Eu.length<10}function yv(n,e){n.Eu.push(e);const t=Od(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Wg(n){return Jc(n)&&!Od(n).Uo()&&n.Eu.length>0}function fw(n){Od(n).start()}function uS(n){return vv.apply(this,arguments)}function vv(){return vv=(0,Ee.Z)(function*(n){Od(n).hu()}),vv.apply(this,arguments)}function gT(n){return pw.apply(this,arguments)}function pw(){return pw=(0,Ee.Z)(function*(n){const e=Od(n);for(const t of n.Eu)e.uu(t.mutations)}),pw.apply(this,arguments)}function cS(n,e,t){return mT.apply(this,arguments)}function mT(){return mT=(0,Ee.Z)(function*(n,e,t){const r=n.Eu.shift(),i=b0.from(r,e,t);yield hw(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield kd(n)}),mT.apply(this,arguments)}function mx(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,Ee.Z)(function*(n,e){var t;e&&Od(n).ou&&(yield(t=(0,Ee.Z)(function*(r,i){if(zy(u=i.code)&&u!==le.ABORTED){const c=r.Eu.shift();Od(r).Qo(),yield hw(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield kd(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),Wg(n)&&fw(n)}),_v.apply(this,arguments)}function yT(n,e){return gw.apply(this,arguments)}function gw(){return gw=(0,Ee.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Jc(t);t.vu.add(3),yield $s(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Gg(t)}),gw.apply(this,arguments)}function mw(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,Ee.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield Gg(t)):e||(t.vu.add(2),yield $s(t),t.bu.set("Unknown"))}),vT.apply(this,arguments)}function Kg(n){return n.Su||(n.Su=function(e,t,r){const i=Qe(e);return i.fu(),new iT(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:cT.bind(null,n),ao:dT.bind(null,n),nu:hT.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Su.Qo(),lw(n)?cw(n):n.bu.set("Unknown")):(yield n.Su.stop(),uT(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Od(n){return n.Du||(n.Du=function(e,t,r){const i=Qe(e);return i.fu(),new sT(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:uS.bind(null,n),ao:mx.bind(null,n),au:gT.bind(null,n),cu:cS.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Du.Qo(),yield kd(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class _T{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new _T(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zg(n,e){if(Pn("AsyncQueue",`${e}: ${n}`),mu(n))return new Ce(le.UNAVAILABLE,`${e}: ${n}`);throw n}class xf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Uy(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new xf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new xf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Qg{constructor(){this.Cu=new xn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Mf{constructor(e,t,r,i,u,c,f,v,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=v,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Mf(e,t,xf.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_g(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class lS{constructor(){this.Nu=void 0,this.listeners=[]}}class wT{constructor(){this.queries=new Eu(e=>y0(e),_g),this.onlineState="Unknown",this.ku=new Set}}function xu(n,e){return wv.apply(this,arguments)}function wv(){return wv=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new lS),i)try{u.Nu=yield t.onListen(r)}catch(c){const f=Zg(c,`Initialization of query '${Ly(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&Xg(t)}),wv.apply(this,arguments)}function Yg(n,e){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Jg.apply(this,arguments)}function dS(n,e){const t=Qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&Xg(t)}function yw(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function Xg(n){n.ku.forEach(e=>{e.next()})}class Rf{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Mf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Mf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class yx{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class hS{constructor(e){this.serializer=e}rr(e){return Ca(this.serializer,e)}ur(e){return e.metadata.exists?vD(this.serializer,e.document,!1):On.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return sr(e)}}class vx{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fS(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Kt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new hS(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||zt()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function gx(n,e,t,r){return X0.apply(this,arguments)}(e.localStore,new hS(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield rS(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function fS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vw{constructor(e){this.key=e}}class ET{constructor(e){this.key=e}}class IT{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=zt(),this.mutatedKeys=zt(),this.tc=v0(e),this.ec=new xf(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Qg,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const v="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,D="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,M)=>{const L=i.get(C),$=pf(this.query,M)?M:null,Z=!!L&&this.mutatedKeys.has(L.key),he=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let _e=!1;L&&$?L.data.isEqual($.data)?Z!==he&&(r.track({type:3,doc:$}),_e=!0):this.rc(L,$)||(r.track({type:2,doc:$}),_e=!0,(v&&this.tc($,v)>0||D&&this.tc($,D)<0)&&(f=!0)):!L&&$?(r.track({type:0,doc:$}),_e=!0):L&&!$&&(r.track({type:1,doc:L}),_e=!0,(v||D)&&(f=!0)),_e&&($?(c=c.add($),u=he?u.add(C):u.delete(C)):(c=c.delete(C),u=u.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),u=u.delete(C.key),r.track({type:1,doc:C})}return{ec:c,ic:r,zi:f,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,C)=>function(M,L){const $=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return $(M)-$(L)}(D.type,C.type)||this.tc(D.doc,C.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,v=f!==this.Xu;return this.Xu=f,0!==u.length||v?{snapshot:new Mf(this.query,e.ec,i,u,e.mutatedKeys,0===f,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Qg,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=zt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new ET(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new vw(r))}),t}hc(e){this.Yu=e.ir,this.Zu=zt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Mf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class pS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gS{constructor(e){this.key=e,this.fc=!1}}class DT{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Eu(f=>y0(f),_g),this._c=new Map,this.mc=new Set,this.gc=new xn(Ke.comparator),this.yc=new Map,this.Ic=new ov,this.Tc={},this.Ec=new Map,this.Ac=Md.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function TT(n,e){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,Ee.Z)(function*(n,e){const t=xe(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const c=yield Nd(t.localStore,Pr(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield _w(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&Sf(t.remoteStore,c)}return i}),Ev.apply(this,arguments)}function _w(n,e,t,r,i){return ww.apply(this,arguments)}function ww(){return ww=(0,Ee.Z)(function*(n,e,t,r,i){n.Rc=(M,L,$)=>{return(Z=(0,Ee.Z)(function*(he,_e,He,rt){let ot=_e.view.sc(He);ot.zi&&(ot=yield bf(he.localStore,_e.query,!1).then(({documents:$t})=>_e.view.sc($t,ot)));const ht=rt&&rt.targetChanges.get(_e.targetId),jt=_e.view.applyChanges(ot,he.isPrimaryClient,ht);return NT(he,_e.targetId,jt.cc),jt.snapshot}),function(he,_e,He,rt){return Z.apply(this,arguments)})(n,M,L,$);var Z};const u=yield bf(n.localStore,e,!0),c=new IT(e,u.ir),f=c.sc(u.documents),v=qy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),D=c.applyChanges(f,n.isPrimaryClient,v);NT(n,t,D.cc);const C=new pS(e,t,c);return n.wc.set(e,C),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),ww.apply(this,arguments)}function bT(n,e){return em.apply(this,arguments)}function em(){return em=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!_g(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Pd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hs(t.remoteStore,r.targetId),Nf(t,r.targetId)}).catch(gu))):(Nf(t,r.targetId),yield Pd(t.localStore,r.targetId,!0))}),em.apply(this,arguments)}function Iv(){return Iv=(0,Ee.Z)(function*(n,e,t){const r=Mt(n);try{const i=yield function(u,c){const f=Qe(u),v=An.now(),D=c.reduce((L,$)=>L.add($.key),zt());let C,M;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let $=Vs(),Z=zt();return f.Zi.getEntries(L,D).next(he=>{$=he,$.forEach((_e,He)=>{He.isValidDocument()||(Z=Z.add(_e))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,$)).next(he=>{C=he;const _e=[];for(const He of c){const rt=PC(He,C.get(He.key).overlayedDocument);null!=rt&&_e.push(new Iu(He.key,rt,d0(rt.value.mapValue),zn.exists(!0)))}return f.mutationQueue.addMutationBatch(L,v,_e,c)}).next(he=>{M=he;const _e=he.applyToLocalDocumentSet(C,Z);return f.documentOverlayCache.saveOverlays(L,he.batchId,_e)})}).then(()=>({batchId:M.batchId,changes:_0(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let v=u.Tc[u.currentUser.toKey()];v||(v=new xn(Ot)),v=v.insert(c,f),u.Tc[u.currentUser.toKey()]=v}(r,i.batchId,t),yield Xc(r,i.changes),yield kd(r.remoteStore)}catch(i){const u=Zg(i,"Failed to persist write");t.reject(u)}}),Iv.apply(this,arguments)}function Dv(n,e){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,Ee.Z)(function*(n,e){const t=Qe(n);try{const r=yield px(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.yc.get(u);c&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?lt(c.fc):i.removedDocuments.size>0&&(lt(c.fc),c.fc=!1))}),yield Xc(t,r,e)}catch(r){yield gu(r)}}),Ew.apply(this,arguments)}function CT(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=Qe(u);f.onlineState=c;let v=!1;f.queries.forEach((D,C)=>{for(const M of C.listeners)M.Mu(c)&&(v=!0)}),v&&Xg(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wx(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,Ee.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let c=new xn(Ke.comparator);c=c.insert(u,On.newNoDocument(u,ft.min()));const f=zt().add(u),v=new bg(ft.min(),new Map,new xn(Ot),c,f);yield Dv(r,v),r.gc=r.gc.remove(u),r.yc.delete(e),PT(r)}else yield Pd(r.localStore,e,!1).then(()=>Nf(r,e,t)).catch(gu)}),ST.apply(this,arguments)}function mS(n,e){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield fx(t.localStore,e);RT(t,r,null),MT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xc(t,i)}catch(i){yield gu(i)}}),Iw.apply(this,arguments)}function yS(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,Ee.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(u,c){const f=Qe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let D;return f.mutationQueue.lookupMutationBatch(v,c).next(C=>(lt(null!==C),D=C.keys(),f.mutationQueue.removeMutationBatch(v,C))).next(()=>f.mutationQueue.performConsistencyCheck(v)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(v,D,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,D)).next(()=>f.localDocuments.getDocuments(v,D))})}(r.localStore,e);RT(r,e,t),MT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xc(r,i)}catch(i){yield gu(i)}}),AT.apply(this,arguments)}function xT(){return xT=(0,Ee.Z)(function*(n,e){const t=Qe(n);Jc(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Zg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),xT.apply(this,arguments)}function MT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function RT(n,e,t){const r=Qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Nf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||vS(n,r)})}function vS(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Hs(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),PT(n))}function NT(n,e,t){for(const r of t)r instanceof vw?(n.Ic.addReference(r.key,e),Ix(n,r)):r instanceof ET?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||vS(n,r.key)):et()}function Ix(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(r),PT(n))}function PT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(Kt.fromString(e)),r=n.Ac.next();n.yc.set(r,new gS(t)),n.gc=n.gc.insert(t,r),Sf(n.remoteStore,new Tu(Pr(wu(t.path)),r,"TargetPurposeLimboResolution",Us.ct))}}function Xc(n,e,t){return kT.apply(this,arguments)}function kT(){return kT=(0,Ee.Z)(function*(n,e,t){const r=Qe(n),i=[],u=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,v)=>{c.push(r.Rc(v,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,D?.fromCache?"not-current":"current"),D){i.push(D);const C=KD.Li(v.targetId,D);u.push(C)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,Ee.Z)(function*(v,D){const C=Qe(v);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>se.forEach(D,L=>se.forEach(L.Fi,$=>C.persistence.referenceDelegate.addReference(M,L.targetId,$)).next(()=>se.forEach(L.Bi,$=>C.persistence.referenceDelegate.removeReference(M,L.targetId,$)))))}catch(M){if(!mu(M))throw M;Pe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of D){const L=M.targetId;if(!M.fromCache){const $=C.Ji.get(L),he=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);C.Ji=C.Ji.insert(L,he)}}}),function(v,D){return f.apply(this,arguments)})(r.localStore,u))}),kT.apply(this,arguments)}function s(n,e){return o.apply(this,arguments)}function o(){return o=(0,Ee.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield nS(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Ce(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xc(t,r.er)}var i}),o.apply(this,arguments)}function a(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return zt().add(r.key);{let i=zt();const u=t._c.get(e);if(!u)return i;for(const c of u){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function l(n,e){return d.apply(this,arguments)}function d(){return d=(0,Ee.Z)(function*(n,e){const t=Qe(n),r=yield bf(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&NT(t,e.targetId,i.cc),i}),d.apply(this,arguments)}function g(n,e){return _.apply(this,arguments)}function _(){return _=(0,Ee.Z)(function*(n,e){const t=Qe(n);return YD(t.localStore,e).then(r=>Xc(t,r))}),_.apply(this,arguments)}function I(n,e,t,r){return b.apply(this,arguments)}function b(){return b=(0,Ee.Z)(function*(n,e,t,r){const i=Qe(n),u=yield function(c,f){const v=Qe(c),D=Qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",C=>D.Sn(C,f).next(M=>M?v.localDocuments.getDocuments(C,M):se.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield kd(i.remoteStore):"acknowledged"===t||"rejected"===t?(RT(i,e,r||null),MT(i,e),f=e,Qe(Qe(i.localStore).mutationQueue).Cn(f)):et(),yield Xc(i,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),b.apply(this,arguments)}function N(){return N=(0,Ee.Z)(function*(n,e){const t=Qe(n);if(xe(t),Mt(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield k(t,r.toArray());t.vc=!0,yield mw(t.remoteStore,!0);for(const u of i)Sf(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Nf(t,c),Pd(t.localStore,c,!0))),Hs(t.remoteStore,c)}),yield i,yield k(t,r),function(u){const c=Qe(u);c.yc.forEach((f,v)=>{Hs(c.remoteStore,v)}),c.Ic.Ts(),c.yc=new Map,c.gc=new xn(Ke.comparator)}(t),t.vc=!1,yield mw(t.remoteStore,!1)}}),N.apply(this,arguments)}function k(n,e,t){return z.apply(this,arguments)}function z(){return z=(0,Ee.Z)(function*(n,e,t){const r=Qe(n),i=[],u=[];for(const c of e){let f;const v=r._c.get(c);if(v&&0!==v.length){f=yield Nd(r.localStore,Pr(v[0]));for(const D of v){const C=r.wc.get(D),M=yield l(r,C);M.snapshot&&u.push(M.snapshot)}}else{const D=yield Y0(r.localStore,c);f=yield Nd(r.localStore,D),yield _w(r,J(D),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(u),i}),z.apply(this,arguments)}function J(n){return zI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Te(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function Ue(n,e,t,r){return We.apply(this,arguments)}function We(){return We=(0,Ee.Z)(function*(n,e,t,r){const i=Qe(n);if(i.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield YD(i.localStore,GI(u[0])),f=bg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wr.EMPTY_BYTE_STRING);yield Xc(i,c,f);break}case"rejected":yield Pd(i.localStore,e,!0),Nf(i,e,r);break;default:et()}}),We.apply(this,arguments)}function dt(n,e,t){return bt.apply(this,arguments)}function bt(){return bt=(0,Ee.Z)(function*(n,e,t){const r=xe(n);if(r.vc){for(const i of e){if(r._c.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const u=yield Y0(r.localStore,i),c=yield Nd(r.localStore,u);yield _w(r,J(u),c.targetId,!1,c.resumeToken),Sf(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield Pd(r.localStore,i,!1).then(()=>{Hs(r.remoteStore,i),Nf(r,i)}).catch(gu))}}),bt.apply(this,arguments)}function xe(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wx.bind(null,e),e.dc.nu=dS.bind(null,e.eventManager),e.dc.Pc=yw.bind(null,e.eventManager),e}function Mt(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yS.bind(null,e),e}class Tn{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=zg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return tS(this.persistence,new eS,e.initialUser,this.serializer)}createPersistence(e){return new av(Vg.zs,this.serializer)}createSharedClientState(e){return new tT}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tm extends Tn{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Mt(r.Vc.syncEngine),yield kd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return tS(this.persistence,new eS,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new G0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new pI(t,this.persistence);return new _C(e.asyncQueue,r)}createPersistence(e){const t=WD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ci.withCacheSize(this.cacheSizeBytes):Ci.DEFAULT;return new Z0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rT(),Cf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tT}}class Tv extends tm{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof eT&&(r.sharedClientState.syncEngine={jr:I.bind(null,i),zr:Ue.bind(null,i),Wr:dt.bind(null,i),$i:Te.bind(null,i),Qr:g.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ee.Z)(function*(c){yield function A(n,e){return N.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=rT();if(!eT.D(t))throw new Ce(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=WD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class el{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CT(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=s.bind(null,r.syncEngine),yield mw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wT}createDatastore(e){const t=zg(e.databaseInfo.databaseId),r=new oo(e.databaseInfo);return new sS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>CT(this.syncEngine,f,0),c=iw.D()?new iw:new nT,new aT(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,v,D){const C=new DT(r,i,u,c,f,v);return D&&(C.vc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Qe(t);Pe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield $s(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bv(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Dw{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new _r,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new yx(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Tw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(u,c){const f=Qe(u),v=Ag(f.serializer)+"/documents",D={documents:c.map($=>Sg(f.serializer,$))},C=yield f.vo("BatchGetDocuments",v,D,c.length),M=new Map;C.forEach($=>{const Z=function VC(n,e){return"found"in e?function(t,r){lt(!!r.found);const i=Ca(t,r.found.name),u=sr(r.found.updateTime),c=r.found.createTime?sr(r.found.createTime):ft.min(),f=new zr({mapValue:{fields:r.found.fields}});return On.newFoundDocument(i,u,c,f)}(n,e):"missing"in e?function(t,r){lt(!!r.missing),lt(!!r.readTime);const i=Ca(t,r.missing),u=sr(r.readTime);return On.newNoDocument(i,u)}(n,e):et()}(f.serializer,$);M.set(Z.key.toString(),Z)});const L=[];return c.forEach($=>{const Z=M.get($.toString());lt(!!Z),L.push(Z)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Td(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ke.fromPath(i);e.mutations.push(new $y(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(i,u){const c=Qe(i),f=Ag(c.serializer)+"/documents",v={writes:u.map(D=>xg(c.serializer,D))};yield c.Io("Commit",f,v)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ce(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ft.min())?zn.exists(!1):zn.updateTime(t):zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new Ce(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zn.updateTime(t)}return zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bw{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new aw(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const t=new Tw(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Yn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zy(t)}return!1}}class Cw{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cr.UNAUTHENTICATED,this.clientId=Iy.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(f){Pe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zg(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function OT(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield nS(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),_S.apply(this,arguments)}function wS(n,e){return ES.apply(this,arguments)}function ES(){return ES=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield IS(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>yT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>yT(e.remoteStore,u)),n._onlineComponents=e}),ES.apply(this,arguments)}function Dx(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function IS(n){return DS.apply(this,arguments)}function DS(){return DS=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield OT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Dx(t))throw t;ai("Error using user provided cache. Falling back to memory cache: "+t),yield OT(n,new Tn)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield OT(n,new Tn);return n._offlineComponents}),DS.apply(this,arguments)}function FT(n){return TS.apply(this,arguments)}function TS(){return TS=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield wS(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield wS(n,new el))),n._onlineComponents}),TS.apply(this,arguments)}function Tx(n){return IS(n).then(e=>e.persistence)}function LT(n){return IS(n).then(e=>e.localStore)}function bx(n){return FT(n).then(e=>e.remoteStore)}function bS(n){return FT(n).then(e=>e.syncEngine)}function Cv(n){return CS.apply(this,arguments)}function CS(){return CS=(0,Ee.Z)(function*(n){const e=yield FT(n),t=e.eventManager;return t.onListen=TT.bind(null,e.syncEngine),t.onUnlisten=bT.bind(null,e.syncEngine),t}),CS.apply(this,arguments)}function Sx(n,e,t={}){const r=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,f,v){const D=new Pf({next:M=>{u.enqueueAndForget(()=>Yg(i,C));const L=M.docs.has(c);!L&&M.fromCache?v.reject(new Ce(le.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&f&&"server"===f.source?v.reject(new Ce(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),C=new Rf(wu(c.path),D,{includeMetadataChanges:!0,Ku:!0});return xu(i,C)}(yield Cv(n),n.asyncQueue,e,t,r)})),r.promise}function Ax(n,e,t={}){const r=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,f,v){const D=new Pf({next:M=>{u.enqueueAndForget(()=>Yg(i,C)),M.fromCache&&"server"===f.source?v.reject(new Ce(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),C=new Rf(c,D,{includeMetadataChanges:!0,Ku:!0});return xu(i,C)}(yield Cv(n),n.asyncQueue,e,t,r)})),r.promise}function xx(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Mx=new Map;function SS(n,e,t){if(!t)throw new Ce(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Rx(n,e,t,r){if(!0===e&&!0===r)throw new Ce(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nx(n){if(!Ke.isDocumentKey(n))throw new Ce(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Px(n){if(Ke.isDocumentKey(n))throw new Ce(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=UT(n);throw new Ce(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kx(n,e){if(e<=0)throw new Ce(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Ox{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=xx(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ox({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ce(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ox(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rI;switch(t.type){case"firstParty":return new mC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ce(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mx.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),Mx.delete(e),t.terminate())}(this),Promise.resolve()}}class Xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}}class Wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class tl extends Wi{constructor(e,t,r){super(e,t,wu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Ke(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function Lx(n,e,...t){if(n=(0,ln.m9)(n),SS("collection","path",e),n instanceof Sw){const r=Kt.fromString(e,...t);return Px(r),new tl(n,null,r)}{if(!(n instanceof Xn||n instanceof tl))throw new Ce(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return Px(r),new tl(n.firestore,null,r)}}function VT(n,e,...t){if(n=(0,ln.m9)(n),1===arguments.length&&(e=Iy.A()),SS("doc","path",e),n instanceof Sw){const r=Kt.fromString(e,...t);return Nx(r),new Xn(n,null,new Ke(r))}{if(!(n instanceof Xn||n instanceof tl))throw new Ce(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return Nx(r),new Xn(n.firestore,n instanceof tl?n.converter:null,new Ke(r))}}function Ux(n,e){return n=(0,ln.m9)(n),e=(0,ln.m9)(e),(n instanceof Xn||n instanceof tl)&&(e instanceof Xn||e instanceof tl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function AS(n,e){return n=(0,ln.m9)(n),e=(0,ln.m9)(e),n instanceof Wi&&e instanceof Wi&&n.firestore===e.firestore&&_g(n._query,e._query)&&n.converter===e.converter}class MN{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new aw(this,"async_queue_retry"),this.Xc=()=>{const t=Cf();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Cf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Cf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new _r;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!mu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Pn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=_T.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function xS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class RN{constructor(){this._progressObserver={},this._taskCompletionResolver=new _r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends Sw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new MN,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vx(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||Vx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Vx(n){var e,t,r;const i=n._freezeSettings(),u=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bC(n._databaseId,f,n._persistenceKey,(D=i).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,xx(D.experimentalLongPollingOptions),D.useFetchStreams));var f,D;n._firestoreClient=new Cw(n._authCredentials,n._appCheckCredentials,n._queue,u),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Bx(n,e,t){const r=new _r;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield OT(n,t),yield wS(n,e),r.resolve()}catch(i){const u=i;if(!Dx(u))throw u;ai("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function jx(n){if(n._initialized||n._terminated)throw new Ce(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nl(wr.fromBase64String(e))}catch(t){throw new Ce(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nl(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ld{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nm{constructor(e){this._methodName=e}}class BT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const $N=/^__.*__$/;class HN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Iu(e,this.data,this.fieldMask,t,this.fieldTransforms):new vf(e,this.data,t,this.fieldTransforms)}}class $x{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Iu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class jT{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new jT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return zT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Hx(this.ca)&&$N.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class zN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zg(e)}ya(e,t,r,i=!1){return new jT({ca:e,methodName:t,ga:r,path:Qn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rm(n){const e=n._freezeSettings(),t=zg(n._databaseId);return new zN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $T(n,e,t,r,i,u={}){const c=n.ya(u.merge||u.mergeFields?2:0,e,t,i);PS("Data must be an object, but it was:",c,r);const f=qx(r,c);let v,D;if(u.merge)v=new ci(c.fieldMask),D=c.fieldTransforms;else if(u.mergeFields){const C=[];for(const M of u.mergeFields){const L=Mw(e,M,t);if(!c.contains(L))throw new Ce(le.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);Kx(C,L)||C.push(L)}v=new ci(C),D=c.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,D=c.fieldTransforms;return new HN(new zr(f),v,D)}class xw extends nm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xw}}function zx(n,e,t){return new jT({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class MS extends nm{_toFieldTransform(e){return new mf(e.path,new Ed)}isEqual(e){return e instanceof MS}}class GN extends nm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zx(this,e,!0),r=this.pa.map(u=>im(u,t)),i=new Id(r);return new mf(e.path,i)}isEqual(e){return this===e}}class qN extends nm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zx(this,e,!0),r=this.pa.map(u=>im(u,t)),i=new Dd(r);return new mf(e.path,i)}isEqual(e){return this===e}}class WN extends nm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new gf(e.serializer,E0(e.serializer,this.Ia));return new mf(e.path,t)}isEqual(e){return this===e}}function RS(n,e,t,r){const i=n.ya(1,e,t);PS("Data must be an object, but it was:",i,r);const u=[],c=zr.empty();$c(r,(v,D)=>{const C=HT(e,v,t);D=(0,ln.m9)(D);const M=i.da(C);if(D instanceof xw)u.push(C);else{const L=im(D,M);null!=L&&(u.push(C),c.set(C,L))}});const f=new ci(u);return new $x(c,f,i.fieldTransforms)}function NS(n,e,t,r,i,u){const c=n.ya(1,e,t),f=[Mw(e,r,t)],v=[i];if(u.length%2!=0)throw new Ce(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)f.push(Mw(e,u[L])),v.push(u[L+1]);const D=[],C=zr.empty();for(let L=f.length-1;L>=0;--L)if(!Kx(D,f[L])){const $=f[L];let Z=v[L];Z=(0,ln.m9)(Z);const he=c.da($);if(Z instanceof xw)D.push($);else{const _e=im(Z,he);null!=_e&&(D.push($),C.set($,_e))}}const M=new ci(D);return new $x(C,M,c.fieldTransforms)}function Gx(n,e,t,r=!1){return im(t,n.ya(r?4:3,e))}function im(n,e){if(Wx(n=(0,ln.m9)(n)))return PS("Unsupported field value:",e,n),qx(n,e);if(n instanceof nm)return function(t,r){if(!Hx(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=im(c,r.wa(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ln.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return E0(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=An.fromDate(t);return{timestampValue:wf(r.serializer,i)}}if(t instanceof An){const i=new An(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wf(r.serializer,i)}}if(t instanceof BT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nl)return{bytesValue:fD(r.serializer,t._byteString)};if(t instanceof Xn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pD(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${UT(t)}`)}(n,e)}function qx(n,e){const t={};return n0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$c(n,(r,i)=>{const u=im(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Wx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof An||n instanceof BT||n instanceof nl||n instanceof Xn||n instanceof nm)}function PS(n,e,t){if(!Wx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=UT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Mw(n,e,t){if((e=(0,ln.m9)(e))instanceof Ld)return e._internalPath;if("string"==typeof e)return HT(n,e);throw zT("Field path arguments must be of type string or ",n,!1,void 0,t)}const KN=new RegExp("[~\\*/\\[\\]]");function HT(n,e,t){if(e.search(KN)>=0)throw zT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ld(...e.split("."))._internalPath}catch{throw zT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zT(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${i}`),v+=")"),new Ce(le.INVALID_ARGUMENT,f+n+v)}function Kx(n,e){return n.some(t=>t.isEqual(e))}class Rw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ZN extends Rw{data(){return super.data()}}function GT(n,e){return"string"==typeof e?HT(n,e):e instanceof Ld?e._internalPath:e._delegate._internalPath}function Zx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kS{}class Nw extends kS{}function kf(n,e,...t){let r=[];e instanceof kS&&r.push(e),r=r.concat(t),function(i){const u=i.filter(f=>f instanceof Sv).length,c=i.filter(f=>f instanceof Pw).length;if(u>1||u>0&&c>0)throw new Ce(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Pw extends Nw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Pw(e,t,r)}_apply(e){const t=this._parse(e);return Xx(e._query,t),new Wi(e.firestore,e.converter,m0(e._query,t))}_parse(e){const t=rm(e.firestore);return function(i,u,c,f,v,D,C){let M;if(v.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ce(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){Jx(C,D);const L=[];for(const $ of C)L.push(Yx(f,i,$));M={arrayValue:{values:L}}}else M=Yx(f,i,C)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||Jx(C,D),M=Gx(c,"where",C,"in"===D||"not-in"===D);return nn.create(v,D,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Sv extends kS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const c=i.getFlattenedFilters();for(const f of c)Xx(u,f),u=m0(u,f)}(e._query,t),new Wi(e.firestore,e.converter,m0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class OS extends Nw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new OS(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ce(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ce(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Lo(i,u);return function(f,v){if(null===Oy(f)){const D=vg(f);null!==D&&eM(0,D,v.field)}}(r,c),c}(e._query,this._field,this._direction);return new Wi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new _u(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qT extends Nw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new qT(e,t,r)}_apply(e){return new Wi(e.firestore,e.converter,Fy(e._query,this._limit,this._limitType))}}class WT extends Nw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new WT(e,t,r)}_apply(e){const t=Qx(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class KT extends Nw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new KT(e,t,r)}_apply(e){const t=Qx(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Qx(n,e,t,r){if(t[0]=(0,ln.m9)(t[0]),t[0]instanceof Rw)return function(i,u,c,f,v){if(!f)throw new Ce(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const D=[];for(const C of Uo(i))if(C.field.isKeyField())D.push(vd(u,f.key));else{const M=f.data.field(C.field);if(hg(M))throw new Ce(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=C.field.canonicalString();throw new Ce(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}D.push(M)}return new ps(D,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=rm(n.firestore);return function(u,c,f,v,D,C){const M=u.explicitOrderBy;if(D.length>M.length)throw new Ce(le.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let $=0;$<D.length;$++){const Z=D[$];if(M[$].field.isKeyField()){if("string"!=typeof Z)throw new Ce(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Z}`);if(!g0(u)&&-1!==Z.indexOf("/"))throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Z}' contains a slash.`);const he=u.path.child(Kt.fromString(Z));if(!Ke.isDocumentKey(he))throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${he}' is not because it contains an odd number of segments.`);const _e=new Ke(he);L.push(vd(c,_e))}else{const he=Gx(f,v,Z);L.push(he)}}return new ps(L,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Yx(n,e,t){if("string"==typeof(t=(0,ln.m9)(t))){if(""===t)throw new Ce(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g0(e)&&-1!==t.indexOf("/"))throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!Ke.isDocumentKey(r))throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vd(n,new Ke(r))}if(t instanceof Xn)return vd(n,t._key);throw new Ce(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${UT(t)}.`)}function Jx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xx(n,e){if(e.isInequality()){const r=vg(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ce(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=Oy(n);null!==u&&eM(0,i,u)}const t=function(r,i){for(const u of r)for(const c of u.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ce(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function eM(n,e,t){if(!t.isEqual(e))throw new Ce(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class FS{convertValue(e,t="none"){switch(Gc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $c(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new BT(Jn(e.latitude),Jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fg(e));default:return null}}convertTimestamp(e){const t=vu(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);lt(k0(r));const i=new Hc(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return i.isEqual(t)||Pn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ZT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iP extends FS{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}class sm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ud extends Rw{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class kw extends Ud{data(e={}){return super.data(e)}}class Of{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kw(this._firestore,this._userDataWriter,r.key,r,new sm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new kw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new sm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new kw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new sm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,D=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),D=u.indexOf(c.doc.key)),{type:oP(c.type),doc:f,oldIndex:v,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function nM(n,e){return n instanceof Ud&&e instanceof Ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Of&&e instanceof Of&&n._firestore===e._firestore&&AS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ff extends FS{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}function rM(n,e,t){n=on(n,Xn);const r=on(n.firestore,er),i=ZT(n.converter,e,t);return Av(r,[$T(rm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,zn.none())])}function iM(n,e,t,...r){n=on(n,Xn);const i=on(n.firestore,er),u=rm(i);let c;return c="string"==typeof(e=(0,ln.m9)(e))||e instanceof Ld?NS(u,"updateDoc",n._key,e,t,r):RS(u,"updateDoc",n._key,e),Av(i,[c.toMutation(n._key,zn.exists(!0))])}function sM(n,...e){var t,r,i;n=(0,ln.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||xS(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(xS(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let v,D,C;if(n instanceof Xn)D=on(n.firestore,er),C=wu(n._key.path),v={next:M=>{e[c]&&e[c](LS(D,n,M))},error:e[c+1],complete:e[c+2]};else{const M=on(n,Wi);D=on(M.firestore,er),C=M._query;const L=new Ff(D);v={next:$=>{e[c]&&e[c](new Of(D,L,M,$))},error:e[c+1],complete:e[c+2]},Zx(n._query)}return function(M,L,$,Z){const he=new Pf(Z),_e=new Rf(L,he,$);return M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return xu(yield Cv(M),_e)})),()=>{he.Dc(),M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Yg(yield Cv(M),_e)}))}}(Or(D),C,f,v)}function Av(n,e){return function(t,r){const i=new _r;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function _x(n,e,t){return Iv.apply(this,arguments)}(yield bS(t),r,i)})),i.promise}(Or(n),e)}function LS(n,e,t){const r=t.docs.get(e._key),i=new Ff(n);return new Ud(n,i,e._key,r,new sm(t.hasPendingWrites,t.fromCache),e.converter)}const TP={maxAttempts:5};class oM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rm(e)}set(e,t,r){this._verifyNotCommitted();const i=Lf(e,this._firestore),u=ZT(i.converter,t,r),c=$T(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,zn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Lf(e,this._firestore);let c;return c="string"==typeof(t=(0,ln.m9)(t))||t instanceof Ld?NS(this._dataReader,"WriteBatch.update",u._key,t,r,i):RS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lf(e,this._firestore);return this._mutations=this._mutations.concat(new Td(t._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lf(n,e){if((n=(0,ln.m9)(n)).firestore!==e)throw new Ce(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rm(e)}get(e){const t=Lf(e,this._firestore),r=new iP(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const u=i[0];if(u.isFoundDocument())return new Rw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Rw(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=Lf(e,this._firestore),u=ZT(i.converter,t,r),c=$T(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Lf(e,this._firestore);let c;return c="string"==typeof(t=(0,ln.m9)(t))||t instanceof Ld?NS(this._dataReader,"Transaction.update",u._key,t,r,i):RS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Lf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lf(e,this._firestore),r=new Ff(this._firestore);return super.get(e).then(i=>new Ud(this._firestore,r,t._key,i._document,new sm(!1,!1),t.converter))}}function US(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function uM(){if(typeof Uint8Array>"u")throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function cM(){if(!function AI(){return typeof atob<"u"}())throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){oi=od.SDK_VERSION,(0,od._registerComponent)(new $m.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new er(new sI(t.getProvider("auth-internal")),new uI(t.getProvider("app-check-internal")),function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ce(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hc(f.options.projectId,v)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,od.registerVersion)(Lc,"3.13.0",n),(0,od.registerVersion)(Lc,"3.13.0","esm2017")}();class Ow{constructor(e){this._delegate=e}static fromBase64String(e){return cM(),new Ow(nl.fromBase64String(e))}static fromUint8Array(e){return uM(),new Ow(nl.fromUint8Array(e))}toBase64(){return cM(),this._delegate.toBase64()}toUint8Array(){return uM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VS(n){return function kP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class OP{enableIndexedDbPersistence(e,t){return function PN(n,e){jx(n=on(n,er));const t=Or(n);if(t._uninitializedComponentsProvider)throw new Ce(le.FAILED_PRECONDITION,"SDK cache is already specified.");ai("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new el;return Bx(t,i,new tm(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function kN(n){jx(n=on(n,er));const e=Or(n);if(e._uninitializedComponentsProvider)throw new Ce(le.FAILED_PRECONDITION,"SDK cache is already specified.");ai("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new el;return Bx(e,r,new Tv(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ON(n){if(n._initialized&&!n._terminated)throw new Ce(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!io.D())return Promise.resolve();const i=r+"main";yield io.delete(i)}),function(r){return t.apply(this,arguments)})(WD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ai("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Fx(n,e,t,r={}){var i;const u=(n=on(n,Sw))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let f,v;if("string"==typeof r.mockUserToken)f=r.mockUserToken,v=cr.MOCK_USER;else{f=(0,ln.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new Ce(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new cr(D)}n._authCredentials=new iI(new W_(f,v))}}(this._delegate,e,t,r)}enableNetwork(){return function LN(n){return function EN(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Tx(n),t=yield bx(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.vu.delete(0),Gg(i)}(t)}))}(Or(n=on(n,er)))}(this._delegate)}disableNetwork(){return function UN(n){return function IN(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Tx(n),t=yield bx(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const u=Qe(i);u.vu.add(0),yield $s(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Or(n=on(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Rx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function FN(n){return function(e){const t=new _r;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function Ex(n,e){return xT.apply(this,arguments)}(yield bS(e),t)})),t.promise}(Or(n=on(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function gP(n,e){return function bN(n,e){const t=new Pf(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Cv(n),i=t,Qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Cv(n),i=t,void Qe(r).ku.delete(i);var r,i}))}}(Or(n=on(n,er)),xS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xv(this,Lx(this._delegate,e))}catch(t){throw zs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,VT(this._delegate,e))}catch(t){throw zs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gs(this,function xN(n,e){if(n=on(n,Sw),SS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wi(n,null,(t=e,new _u(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw zs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function CP(n,e,t){n=on(n,er);const r=Object.assign(Object.assign({},TP),t);return function(i){if(i.maxAttempts<1)throw new Ce(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const f=new _r;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const v=yield function Cx(n){return FT(n).then(e=>e.datastore)}(i);new bw(i.asyncQueue,v,c,u,f).run()})),f.promise}(Or(n),i=>e(new bP(n,i)),r)}(this._delegate,t=>e(new dM(this,t)))}batch(){return Or(this._delegate),new hM(new oM(this._delegate,e=>Av(this._delegate,e)))}loadBundle(e){return function VN(n,e){const t=Or(n=on(n,er)),r=new RN;return function CN(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?sD().encode(u):u,v=function(v,D){if(v instanceof Uint8Array)return bv(v,D);if(v instanceof ArrayBuffer)return bv(new Uint8Array(v),D);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Dw(v,c);var v}(t,zg(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function gn(n,e,t){const r=Qe(n);var i;(i=(0,Ee.Z)(function*(u,c,f){try{const v=yield c.getMetadata();if(yield function(L,$){const Z=Qe(L),he=sr($.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",_e=>Z.qs.getBundleMetadata(_e,$.id)).then(_e=>!!_e&&_e.createTime.compareTo(he)>=0)}(u.localStore,v))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(fS(v));const D=new vx(v,u.localStore,c.serializer);let C=yield c.bc();for(;C;){const L=yield D.zu(C);L&&f._updateProgress(L),C=yield c.bc()}const M=yield D.complete();return yield Xc(u,M.Ju,void 0),yield function(L,$){const Z=Qe(L);return Z.persistence.runTransaction("Save bundle","readwrite",he=>Z.qs.saveBundleMetadata(he,$))}(u.localStore,v),f._completeWith(M.progress),Promise.resolve(M.Hu)}catch(v){return ai("SyncEngine",`Loading bundle failed with ${v}`),f._failWith(v),Promise.resolve(new Set)}var L}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield bS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function BN(n,e){return function SN(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield LT(n),e)}))}(Or(n=on(n,er)),e).then(t=>t?new Wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Gs(this,t):null)}}class QT extends FS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ow(new nl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class dM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new QT(e)}get(e){const t=am(e);return this._delegate.get(t).then(r=>new Fw(this._firestore,new Ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=am(e);return r?(US("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=am(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=am(e);return this._delegate.delete(t),this}}class hM{constructor(e){this._delegate=e}set(e,t,r){const i=am(e);return r?(US("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=am(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=am(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class om{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=om.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new om(e,new QT(e),t),i.set(t,u)),u}}om.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new Xn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Sa(t,new Xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xv(this.firestore,Lx(this._delegate,e))}catch(t){throw zs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ln.m9)(e))instanceof Xn&&Ux(this._delegate,e)}set(e,t){t=US("DocumentReference.set",t);try{return t?rM(this._delegate,e,t):rM(this._delegate,e)}catch(r){throw zs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iM(this._delegate,e):iM(this._delegate,e,t,...r)}catch(i){throw zs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function fP(n){return Av(on(n.firestore,er),[new Td(n._key,zn.none())])}(this._delegate)}onSnapshot(...e){const t=fM(e),r=pM(e,i=>new Fw(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function uP(n){n=on(n,Xn);const e=on(n.firestore,er),t=Or(e),r=new Ff(e);return function DN(n,e){const t=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const f=yield function(v,D){const C=Qe(v);return C.persistence.runTransaction("read document","readonly",M=>C.localDocuments.getDocument(M,D))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Ce(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const v=Zg(f,`Failed to get document '${u} from cache`);c.reject(v)}}),function(i,u,c){return r.apply(this,arguments)})(yield LT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ud(e,r,n._key,i,new sm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function cP(n){n=on(n,Xn);const e=on(n.firestore,er);return Sx(Or(e),n._key,{source:"server"}).then(t=>LS(e,n,t))}(this._delegate):function aP(n){n=on(n,Xn);const e=on(n.firestore,er);return Sx(Or(e),n._key).then(t=>LS(e,n,t))}(this._delegate),t.then(r=>new Fw(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?om.getInstance(this.firestore,e):null))}}function zs(n,e,t){return n.message=n.message.replace(e,t),n}function fM(n){for(const e of n)if("object"==typeof e&&!VS(e))return e;return{}}function pM(n,e){var t,r;let i;return i=VS(n[0])?n[0]:VS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Fw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nM(this._delegate,e._delegate)}}class Lw extends Fw{data(e){const t=this._delegate.data(e);return function rf(n,e){n||et()}(void 0!==t),t}}class Gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QT(e)}where(e,t,r){try{return new Gs(this.firestore,kf(this._delegate,function QN(n,e,t){const r=e,i=GT("where",n);return Pw._create(i,r,t)}(e,t,r)))}catch(i){throw zs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gs(this.firestore,kf(this._delegate,function YN(n,e="asc"){const t=e,r=GT("orderBy",n);return OS._create(r,t)}(e,t)))}catch(r){throw zs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gs(this.firestore,kf(this._delegate,function JN(n){return kx("limit",n),qT._create("limit",n,"F")}(e)))}catch(t){throw zs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gs(this.firestore,kf(this._delegate,function XN(n){return kx("limitToLast",n),qT._create("limitToLast",n,"L")}(e)))}catch(t){throw zs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gs(this.firestore,kf(this._delegate,function eP(...n){return WT._create("startAt",n,!0)}(...e)))}catch(t){throw zs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gs(this.firestore,kf(this._delegate,function tP(...n){return WT._create("startAfter",n,!1)}(...e)))}catch(t){throw zs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gs(this.firestore,kf(this._delegate,function nP(...n){return KT._create("endBefore",n,!1)}(...e)))}catch(t){throw zs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gs(this.firestore,kf(this._delegate,function rP(...n){return KT._create("endAt",n,!0)}(...e)))}catch(t){throw zs(t,"endAt()","Query.endAt()")}}isEqual(e){return AS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function dP(n){n=on(n,Wi);const e=on(n.firestore,er),t=Or(e),r=new Ff(e);return function TN(n,e){const t=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const f=yield bf(i,u,!0),v=new IT(u,f.ir),D=v.sc(f.documents),C=v.applyChanges(D,!1);c.resolve(C.snapshot)}catch(f){const v=Zg(f,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(i,u,c){return r.apply(this,arguments)})(yield LT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Of(e,r,n,i))}(this._delegate):"server"===e?.source?function hP(n){n=on(n,Wi);const e=on(n.firestore,er),t=Or(e),r=new Ff(e);return Ax(t,n._query,{source:"server"}).then(i=>new Of(e,r,n,i))}(this._delegate):function lP(n){n=on(n,Wi);const e=on(n.firestore,er),t=Or(e),r=new Ff(e);return Zx(n._query),Ax(t,n._query).then(i=>new Of(e,r,n,i))}(this._delegate),t.then(r=>new BS(this.firestore,new Of(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fM(e),r=pM(e,i=>new BS(this.firestore,new Of(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sM(this._delegate,t,r)}withConverter(e){return new Gs(this.firestore,this._delegate.withConverter(e?om.getInstance(this.firestore,e):null))}}class LP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new LP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Lw(this._firestore,r))})}isEqual(e){return nM(this._delegate,e._delegate)}}class xv extends Gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?VT(this._delegate):VT(this._delegate,e))}catch(t){throw zs(t,"doc()","CollectionReference.doc()")}}add(e){return function pP(n,e){const t=on(n.firestore,er),r=VT(n),i=ZT(n.converter,e);return Av(t,[$T(rm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return Ux(this._delegate,e._delegate)}withConverter(e){return new xv(this.firestore,this._delegate.withConverter(e?om.getInstance(this.firestore,e):null))}}function am(n){return on(n,Xn)}class jS{constructor(...e){this._delegate=new Ld(...e)}static documentId(){return new jS(Qn.keyField().canonicalString())}isEqual(e){return(e=(0,ln.m9)(e))instanceof Ld&&this._delegate._internalPath.isEqual(e._internalPath)}}class um{constructor(e){this._delegate=e}static serverTimestamp(){const e=function AP(){return new MS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new um(e)}static delete(){const e=function SP(){return new xw("deleteField")}();return e._methodName="FieldValue.delete",new um(e)}static arrayUnion(...e){const t=function xP(...n){return new GN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new um(t)}static arrayRemove(...e){const t=function MP(...n){return new qN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new um(t)}static increment(e){const t=function RP(n){return new WN("increment",n)}(e);return t._methodName="FieldValue.increment",new um(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const UP={Firestore:lM,GeoPoint:BT,Timestamp:An,Blob:Ow,Transaction:dM,WriteBatch:hM,DocumentReference:Sa,DocumentSnapshot:Fw,Query:Gs,QueryDocumentSnapshot:Lw,QuerySnapshot:BS,CollectionReference:xv,FieldPath:jS,FieldValue:um,setLogLevel:function FP(n){!function nf(n){Ea.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function BP(n){(function VP(n,e){n.INTERNAL.registerComponent(new $m.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},UP)))})(n,(e,t)=>new lM(e,t,new OP)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Lb.Z);var Vd=F(7579),jP=F(6451),YT=F(5363);function Ai(n,e){return(0,Hi.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,ds.x)(r,v=>{i?.unsubscribe();let D=0;const C=u++;(0,xr.Xf)(n(v,C)).subscribe(i=(0,ds.x)(r,M=>r.next(e?e(v,M,C,D++):M),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var $P=F(6063);class HP extends Vd.x{constructor(e=1/0,t=1/0,r=$P.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)f=v;f&&r.splice(0,f+1)}}}var zP=F(3099);function gM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,zP.B)({connector:()=>new HP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const JT=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function XT(n){return(0,Hi.e)((e,t)=>{let r=!1;e.subscribe((0,ds.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mM(n=qP){return(0,Hi.e)((e,t)=>{let r=!1;e.subscribe((0,ds.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qP(){return new JT}function Bd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,u)=>n(i,u,r)):sd.y,xp(1),t?XT(e):mM(()=>new JT))}function yM(n,e){return(0,pa.m)(e)?Ai(()=>n,e):Ai(()=>n)}var $S=F(9468);F(259);const zS=new Map,_M={activated:!1,tokenObservers:[]},YP={initialized:!1,enabled:!1};function Ir(n){return zS.get(n)||Object.assign({},_M)}function tb(){return YP}class r1{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new ln.BH,yield function i1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ln.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ki=new ln.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qS(n){if(!Ir(n).activated)throw Ki.create("use-before-activation",{appName:n.name})}function ib(n,e){return KS.apply(this,arguments)}function KS(){return KS=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(M){throw Ki.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==c.status)throw Ki.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw Ki.create("fetch-parse-error",{originalErrorMessage:M?.message})}const v=f.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const D=1e3*Number(v[1]),C=Date.now();return{token:f.token,expireTimeMillis:C+D,issuedAtTimeMillis:C}}),KS.apply(this,arguments)}function EM(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Uw="firebase-app-check-store";let sb=null;function DM(){return sb||(sb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ki.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Uw,{keyPath:"compositeKey"})}}catch(t){e(Ki.create("storage-open",{originalErrorMessage:t?.message}))}}),sb)}function ZS(){return ZS=(0,Ee.Z)(function*(n,e){const r=(yield DM()).transaction(Uw,"readwrite"),u=r.objectStore(Uw).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var D;f(Ki.create("storage-set",{originalErrorMessage:null===(D=v.target.error)||void 0===D?void 0:D.message}))}})}),ZS.apply(this,arguments)}const Vw=new Ac.Yd("@firebase/app-check");function JS(n,e){return(0,ln.hl)()?function d1(n,e){return function TM(n,e){return ZS.apply(this,arguments)}(function CM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function eA(){return tb().enabled}function tA(){return nA.apply(this,arguments)}function nA(){return nA=(0,Ee.Z)(function*(){const n=tb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),nA.apply(this,arguments)}const y1={error:"UNKNOWN_ERROR"};function v1(n){return ln.US.encodeString(JSON.stringify(n),!1)}function ob(n){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n,e=!1){const t=n.app;qS(t);const r=Ir(t);let u,i=r.token;if(i&&!Mv(i)&&(r.token=void 0,i=void 0),!i){const v=yield r.cachedTokenPromise;v&&(Mv(v)?i=v:yield JS(t,void 0))}if(!e&&i&&Mv(i))return{token:i.token};let f,c=!1;if(eA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ib(EM(t,yield tA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const v=yield r.exchangeTokenPromise;return yield JS(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Ir(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Vw.warn(v.message):Vw.error(v),u=v}return i?u?f=Mv(i)?{token:i.token,internalError:u}:MM(u):(f={token:i.token},r.token=i,yield JS(t,i)):f=MM(u),c&&xM(t,f),f}),rA.apply(this,arguments)}function iA(){return iA=(0,Ee.Z)(function*(n){const e=n.app;qS(e);const{provider:t}=Ir(e);if(eA()){const r=yield tA(),{token:i}=yield ib(EM(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),iA.apply(this,arguments)}function oA(n,e){const t=Ir(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function AM(n){const{app:e}=n,t=Ir(e);let r=t.tokenRefresher;r||(r=function _1(n){const{app:e}=n;return new r1((0,Ee.Z)(function*(){let r;if(r=Ir(e).token?yield ob(n,!0):yield ob(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ir(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xM(n,e){const t=Ir(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Mv(n){return n.expireTimeMillis-Date.now()>0}function MM(n){return{token:v1(y1),error:n}}class w1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ir(this.app);for(const t of e)oA(this.app,t.next);return Promise.resolve()}}const UM="app-check-internal";!function k1(){(0,od._registerComponent)(new $m.wA("app-check",n=>function E1(n,e){return new w1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(UM).initialize()})),(0,od._registerComponent)(new $m.wA(UM,n=>function I1(n){return{getToken:e=>ob(n,e),getLimitedUseToken:()=>function SM(n){return iA.apply(this,arguments)}(n),addTokenListener:e=>function sA(n,e,t,r){const{app:i}=n,u=Ir(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Mv(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),AM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>AM(n))}(n,"INTERNAL",e),removeTokenListener:e=>oA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,od.registerVersion)("@firebase/app-check","0.8.0")}();class lA{constructor(){return(0,Mr.vb)("app-check")}}typeof window<"u"&&window;var V1=F(9260);const BM=new m.OlP("angularfire2.auth.use-emulator"),jM=new m.OlP("angularfire2.auth.settings"),$M=new m.OlP("angularfire2.auth.tenant-id"),HM=new m.OlP("angularfire2.auth.langugage-code"),zM=new m.OlP("angularfire2.auth.use-device-language"),GM=new m.OlP("angularfire.auth.persistence"),qM=(n,e,t,r,i,u,c,f)=>(0,Fs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,u&&v.useDeviceLanguage(),c)for(const[D,C]of Object.entries(c))v.settings[D]=C;return f&&v.setPersistence(f),v},[t,r,i,u,c,f]);let WM=(()=>{class n{constructor(t,r,i,u,c,f,v,D,C,M,L,$){const Z=new Vd.x,he=mt(void 0).pipe((0,YT.Q)(c.outsideAngular),Ai(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,2644)))),(0,Ut.U)(()=>(0,Fs.on)(t,u,r)),(0,Ut.U)(_e=>qM(_e,u,f,D,C,M,v,L)),gM({bufferSize:1,refCount:!1}));if(Lu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{he.pipe(Bd()).subscribe();const He=he.pipe(Ai(ht=>ht.getRedirectResult().then(jt=>jt,()=>null)),Mr.iC,gM({bufferSize:1,refCount:!1})),rt=he.pipe(Ai(ht=>new Os.y(jt=>({unsubscribe:u.runOutsideAngular(()=>ht.onAuthStateChanged($t=>jt.next($t),$t=>jt.error($t),()=>jt.complete()))})))),ot=he.pipe(Ai(ht=>new Os.y(jt=>({unsubscribe:u.runOutsideAngular(()=>ht.onIdTokenChanged($t=>jt.next($t),$t=>jt.error($t),()=>jt.complete()))}))));this.authState=He.pipe(yM(rt),(0,$S.R)(c.outsideAngular),(0,YT.Q)(c.insideAngular)),this.user=He.pipe(yM(ot),(0,$S.R)(c.outsideAngular),(0,YT.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ai(ht=>ht?(0,Zn.D)(ht.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Ai(ht=>ht?(0,Zn.D)(ht.getIdTokenResult()):mt(null))),this.credential=(0,jP.T)(He,Z,this.authState.pipe(Ii(ht=>!ht))).pipe((0,Ut.U)(ht=>ht?.user?ht:null),(0,$S.R)(c.outsideAngular),(0,YT.Q)(c.insideAngular))}return(0,Fs.pX)(this,he,u,{spy:{apply:(_e,He,rt)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&rt.then(ot=>Z.next(ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fs.Dh),m.LFG(Fs.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Mr.HU),m.LFG(BM,8),m.LFG(jM,8),m.LFG($M,8),m.LFG(HM,8),m.LFG(zM,8),m.LFG(GM,8),m.LFG(lA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function KM(n,e){return function j1(n,e=gE.z){return new Os.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function hA(n,e){return KM(n,e).pipe((0,Ut.U)(t=>({payload:t,type:"query"})))}function ub(n,e){return hA(n,e).pipe(Sc(void 0),s_(),(0,Ut.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const v=i.find(C=>C.doc.ref.isEqual(c.ref)),D=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&D&&JSON.stringify(D.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function ZM(n,e,t){return ub(n,t).pipe(id((r,i)=>function H1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function z1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return fA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return fA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function yE(n,e=sd.y){return n=n??qA,(0,Hi.e)((t,r)=>{let i,u=!0;t.subscribe((0,ds.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Ut.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function fA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function QM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class YM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ub(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ut.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Sc(void 0),s_(),Ii(([r,i])=>i.length>0||!r),(0,Ut.U)(([r,i])=>i),Mr.iC)}auditTrail(e){return this.stateChanges(e).pipe(id((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QM(e);return ZM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return hA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Mr.iC)}get(e){return(0,Zn.D)(this.query.get(e)).pipe(Mr.iC)}add(e){return this.ref.add(e)}doc(e){return new JM(this.ref.doc(e),this.afs)}}class JM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=tR(r,t);return new YM(i,u,this.afs)}snapshotChanges(){return function $1(n,e){return KM(n,e).pipe(Sc(void 0),s_(),(0,Ut.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zn.D)(this.ref.get(e)).pipe(Mr.iC)}}class G1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ub(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ii(t=>t.length>0),Mr.iC):ub(this.query,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}auditTrail(e){return this.stateChanges(e).pipe(id((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QM(e);return ZM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mr.iC)}valueChanges(e={}){return hA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Mr.iC)}get(e){return(0,Zn.D)(this.query.get(e)).pipe(Mr.iC)}}const XM=new m.OlP("angularfire2.enableFirestorePersistence"),eR=new m.OlP("angularfire2.firestore.persistenceSettings"),q1=new m.OlP("angularfire2.firestore.settings"),W1=new m.OlP("angularfire2.firestore.use-emulator");function tR(n,e=(t=>t)){return{query:e(n),ref:n}}let nR=(()=>{class n{constructor(t,r,i,u,c,f,v,D,C,M,L,$,Z,he,_e,He,rt){this.schedulers=v;const ot=(0,Fs.on)(t,f,r),ht=C;M&&qM(ot,f,L,Z,he,_e,$,He),[this.firestore,this.persistenceEnabled$]=(0,Fs.cc)(`${ot.name}.firestore`,"AngularFirestore",ot.name,()=>{const jt=f.runOutsideAngular(()=>ot.firestore());if(u&&jt.settings(u),ht&&jt.useEmulator(...ht),i&&!Lu(c)){const $t=()=>{try{return(0,Zn.D)(jt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(wn){return typeof console<"u"&&console.warn(wn),mt(!1)}};return[jt,f.runOutsideAngular($t)]}return[jt,mt(!1)]},[u,ht,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=tR(i,r),f=this.schedulers.ngZone.run(()=>u);return new YM(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new G1(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new JM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fs.Dh),m.LFG(Fs.xv,8),m.LFG(XM,8),m.LFG(q1,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Mr.HU),m.LFG(eR,8),m.LFG(W1,8),m.LFG(WM,8),m.LFG(BM,8),m.LFG(jM,8),m.LFG($M,8),m.LFG(HM,8),m.LFG(zM,8),m.LFG(GM,8),m.LFG(lA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),K1=(()=>{class n{constructor(){V1.Z.registerVersion("angularfire",Mr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:XM,useValue:!0},{provide:eR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[nR]}),n})(),rR=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="certifications"}getAlbum(){return this.firestore.collection(this.collectionName).valueChanges({idField:"id"}).pipe(xp(1))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(nR))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Mu extends Vd.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Z1}=Array,{getPrototypeOf:Q1,prototype:Y1,keys:J1}=Object;var nk=F(9672);function iR(...n){const e=(0,hs.yG)(n),t=(0,hs.jO)(n),{args:r,keys:i}=function X1(n){if(1===n.length){const e=n[0];if(Z1(e))return{args:e,keys:null};if(function ek(n){return n&&"object"==typeof n&&Q1(n)===Y1}(e)){const t=J1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Zn.D)([],e);const u=new Os.y(function rk(n,e,t=sd.y){return r=>{sR(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let v=0;v<i;v++)sR(e,()=>{const D=(0,Zn.D)(n[v],e);let C=!1;D.subscribe((0,ds.x)(r,M=>{u[v]=M,C||(C=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function tk(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):sd.y));return t?u.pipe(hE(t)):u}function sR(n,e,t){n?(0,nk.f)(t,n,e):e()}function oR(n){return new Os.y(e=>{(0,xr.Xf)(n()).subscribe(e)})}var ik=F(9635);function Bw(n,e){const t=(0,pa.m)(n)?n:()=>n,r=i=>i.error(t());return new Os.y(e?i=>e.schedule(r,0,i):r)}var aR=F(727);function pA(){return(0,Hi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ds.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uR extends Os.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new aR.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ds.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=aR.w0.EMPTY)}return e}refCount(){return pA()(this)}}function cm(n,e){return(0,pa.m)(e)?(0,ri.z)(n,e,1):(0,ri.z)(n,1)}var gs=F(8505);function Uf(n){return(0,Hi.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,ds.x)(t,void 0,void 0,c=>{u=(0,xr.Xf)(n(c,Uf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function gA(n){return n<=0?()=>rd.E:(0,Hi.e)((e,t)=>{let r=[];e.subscribe((0,ds.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,u)=>n(i,u,r)):sd.y,gA(1),t?XT(e):mM(()=>new JT))}function mA(n){return(0,Hi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",jw=Symbol("RouteTitle");class ak{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Rv(n){return new ak(n)}function uk(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function rl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!lR(n[i],e[i]))return!1;return!0}function lR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function dR(n){return Array.prototype.concat.apply([],n)}function hR(n){return n.length>0?n[n.length-1]:null}function Zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Vf(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Zn.D)(Promise.resolve(n)):mt(n)}const dk={exact:function gR(n,e,t){if(!dm(n.segments,e.segments)||!cb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!gR(n.children[r],e.children[r],t))return!1;return!0},subset:mR},fR={exact:function hk(n,e){return rl(n,e)},subset:function fk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lR(n[t],e[t]))},ignored:()=>!0};function pR(n,e,t){return dk[t.paths](n.root,e.root,t.matrixParams)&&fR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function mR(n,e,t){return yR(n,e,e.segments,t)}function yR(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!dm(i,t)||e.hasChildren()||!cb(i,t,r))}if(n.segments.length===t.length){if(!dm(n.segments,t)||!cb(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!mR(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(dm(n.segments,i)&&cb(n.segments,i,r)&&n.children[Zt])&&yR(n.children[Zt],e,u,r)}}function cb(n,e,t){return e.every((r,i)=>fR[t](n[i].parameters,r.parameters))}class lm{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rv(this.queryParams)),this._queryParamMap}toString(){return mk.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Zi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lb(this)}}class $w{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Rv(this.parameters)),this._parameterMap}toString(){return ER(this)}}function dm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let vR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new vA},providedIn:"root"}),n})();class vA{parse(e){const t=new bk(e);return new lm(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hw(e.root,!0)}`,r=function _k(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${db(t)}=${db(i)}`).join("&"):`${db(t)}=${db(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function yk(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const mk=new vA;function lb(n){return n.segments.map(e=>ER(e)).join("/")}function Hw(n,e){if(!n.hasChildren())return lb(n);if(e){const t=n.children[Zt]?Hw(n.children[Zt],!1):"",r=[];return Zi(n.children,(i,u)=>{u!==Zt&&r.push(`${u}:${Hw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function gk(n,e){let t=[];return Zi(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),Zi(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[Hw(n.children[Zt],!1)]:[`${i}:${Hw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${lb(n)}/${t[0]}`:`${lb(n)}/(${t.join("//")})`}}function _R(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function db(n){return _R(n).replace(/%3B/gi,";")}function _A(n){return _R(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hb(n){return decodeURIComponent(n)}function wR(n){return hb(n.replace(/\+/g,"%20"))}function ER(n){return`${_A(n.path)}${function vk(n){return Object.keys(n).map(e=>`;${_A(e)}=${_A(n[e])}`).join("")}(n.parameters)}`}const wk=/^[^\/()?;=#]+/;function fb(n){const e=n.match(wk);return e?e[0]:""}const Ek=/^[^=?&#]+/,Dk=/^[^&#]+/;class bk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Jt(e,t)),r}parseSegment(){const e=fb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new $w(hb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fb(this.remaining);i&&(r=i,this.capture(r))}e[hb(t)]=hb(r)}parseQueryParam(e){const t=function Ik(n){const e=n.match(Ek);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Tk(n){const e=n.match(Dk);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=wR(t),u=wR(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Zt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Zt]:new Jt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function wA(n){return n.segments.length>0?new Jt([],{[Zt]:n}):n}function pb(n){const e={};for(const r of Object.keys(n.children)){const u=pb(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ck(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}function hm(n){return n instanceof lm}function xk(n,e,t,r,i){if(0===t.length)return Nv(e.root,e.root,e.root,r,i);const u=function TR(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new DR(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Zi(u.outlets,(v,D)=>{f[D]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,v)=>{0==v&&"."===f||(0==v&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new DR(t,e,r)}(t);return u.toRoot()?Nv(e.root,e.root,new Jt([],{}),r,i):function c(v){const D=function Rk(n,e,t,r){if(n.isAbsolute)return new Pv(e.root,!0,0);if(-1===r)return new Pv(t,t===e.root,0);return function bR(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new Pv(r,!1,i-u)}(t,r+(zw(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),C=D.processChildren?qw(D.segmentGroup,D.index,u.commands):IA(D.segmentGroup,D.index,u.commands);return Nv(e.root,D.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function zw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Gw(n){return"object"==typeof n&&null!=n&&n.outlets}function Nv(n,e,t,r,i){let c,u={};r&&Zi(r,(v,D)=>{u[D]=Array.isArray(v)?v.map(C=>`${C}`):`${v}`}),c=n===e?t:IR(n,e,t);const f=wA(pb(c));return new lm(f,u,i)}function IR(n,e,t){const r={};return Zi(n.children,(i,u)=>{r[u]=i===e?t:IR(i,e,t)}),new Jt(n.segments,r)}class DR{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zw(r[0]))throw new m.vHH(4003,!1);const i=r.find(Gw);if(i&&i!==hR(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function IA(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return qw(n,e,t);const r=function Pk(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(Gw(f))break;const v=`${f}`,D=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&D&&"object"==typeof D&&void 0===D.outlets){if(!SR(v,D,c))return u;r+=2}else{if(!SR(v,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Jt(n.segments.slice(0,r.pathIndex),{});return u.children[Zt]=new Jt(n.segments.slice(r.pathIndex),n.children),qw(u,0,i)}return r.match&&0===i.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?DA(n,e,t):r.match?qw(n,0,i):DA(n,e,t)}function qw(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function Nk(n){return Gw(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};return Zi(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=IA(n.children[c],e,u))}),Zi(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Jt(n.segments,i)}}function DA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Gw(u)){const v=kk(u.outlets);return new Jt(r,v)}if(0===i&&zw(t[0])){r.push(new $w(n.segments[e].path,CR(t[0]))),i++;continue}const c=Gw(u)?u.outlets[Zt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&zw(f)?(r.push(new $w(c,CR(f))),i+=2):(r.push(new $w(c,{})),i++)}return new Jt(r,{})}function kk(n){const e={};return Zi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=DA(new Jt([],{}),0,t))}),e}function CR(n){const e={};return Zi(n,(t,r)=>e[r]=`${t}`),e}function SR(n,e,t){return n==t.path&&rl(e,t.parameters)}class jd{constructor(e,t){this.id=e,this.url=t}}class TA extends jd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fm extends jd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gb extends jd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class AR extends jd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ok extends jd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fk extends jd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lk extends jd{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uk extends jd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vk extends jd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bk{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jk{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $k{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hk{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zk{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gk{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xR{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class MR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=bA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=bA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=CA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return CA(e,this._root).map(t=>t.value)}}function bA(n,e){if(n===e.value)return e;for(const t of e.children){const r=bA(n,t);if(r)return r}return null}function CA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=CA(n,t);if(r.length)return r.unshift(e),r}return[]}class $d{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function kv(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RR extends MR{constructor(e,t){super(e),this.snapshot=t,SA(this,e)}toString(){return this.snapshot.toString()}}function NR(n,e){const t=function Wk(n,e){const c=new mb([],{},{},"",{},Zt,e,null,n.root,-1,{});return new kR("",new $d(c,[]))}(n,e),r=new Mu([new $w("",{})]),i=new Mu({}),u=new Mu({}),c=new Mu({}),f=new Mu(""),v=new Bf(r,i,c,f,u,Zt,e,t.root);return v.snapshot=t.root,new RR(new $d(v,[]),t)}class Bf{constructor(e,t,r,i,u,c,f,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,Ut.U)(D=>D[jw]))??mt(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ut.U)(e=>Rv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ut.U)(e=>Rv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PR(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Kk(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mb{constructor(e,t,r,i,u,c,f,v,D,C,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.[jw],this.routeConfig=v,this._urlSegment=D,this._lastPathIndex=C,this._correctedLastPathIndex=L??C,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Rv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kR extends MR{constructor(e,t){super(t),this.url=e,SA(this,t)}toString(){return OR(this._root)}}function SA(n,e){e.value._routerState=n,e.children.forEach(t=>SA(n,t))}function OR(n){const e=n.children.length>0?` { ${n.children.map(OR).join(", ")} } `:"";return`${n.value}${e}`}function AA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,rl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),rl(e.params,t.params)||n.params.next(t.params),function ck(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!rl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),rl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function xA(n,e){const t=rl(n.params,e.params)&&function pk(n,e){return dm(n,e)&&n.every((t,r)=>rl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xA(n.parent,e.parent))}function Ww(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Qk(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ww(n,r,i);return Ww(n,r)})}(n,e,t);return new $d(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Ww(n,f)),c}}const r=function Yk(n){return new Bf(new Mu(n.url),new Mu(n.params),new Mu(n.queryParams),new Mu(n.fragment),new Mu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ww(n,u));return new $d(r,i)}}const MA="ngNavigationCancelingError";function FR(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=hm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LR(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function LR(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[MA]=!0,r.cancellationCode=e,t&&(r.url=t),r}function UR(n){return VR(n)&&hm(n.url)}function VR(n){return n&&n[MA]}class Jk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Kw,this.attachRef=null}}let Kw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Jk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yb=!1;let BR=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||Zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,yb);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,yb);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,yb);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,yb);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,v=new Xk(t,f,i.injector);if(r&&function eO(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(c);this.activated=i.createComponent(D,i.length,v)}else this.activated=i.createComponent(c,{index:i.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Kw),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Xk{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bf?this.route:e===Kw?this.childContexts:this.parent.get(e,t)}}let RA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[BR],encapsulation:2}),n})();function jR(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function PA(n){const e=n.children&&n.children.map(PA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=RA),t}function Aa(n){return n.outlet||Zt}function $R(n,e){const t=n.filter(r=>Aa(r)===e);return t.push(...n.filter(r=>Aa(r)!==e)),t}function Zw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class sO{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=kv(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Zi(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=kv(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=kv(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=kv(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Gk(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Hk(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(AA(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),AA(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=Zw(i.snapshot),v=f?.get(m._Vd)??null;c.attachRef=null,c.route=i,c.resolver=v,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class HR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vb{constructor(e,t){this.component=e,this.route=t}}function oO(n,e,t){const r=n._root;return Qw(r,e?e._root:null,t,[r.value])}function Ov(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function Qw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=kv(e);return n.children.forEach(c=>{(function uO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function cO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dm(n.url,e.url)||!rl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xA(n,e)||!rl(n.queryParams,e.queryParams);default:return!xA(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new HR(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Qw(n,e,u.component?f?f.children:null:t,r,i),v&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new vb(f.outlet.component,c))}else c&&Yw(e,f,i),i.canActivateChecks.push(new HR(r)),Qw(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Zi(u,(c,f)=>Yw(c,t.getContext(f),i)),i}function Yw(n,e,t){const r=kv(n),i=n.value;Zi(r,(u,c)=>{Yw(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new vb(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Jw(n){return"function"==typeof n}function kA(n){return n instanceof JT||"EmptyError"===n?.name}const _b=Symbol("INITIAL_VALUE");function Fv(){return Ai(n=>iR(n.map(e=>e.pipe(xp(1),Sc(_b)))).pipe((0,Ut.U)(e=>{for(const t of e)if(!0!==t){if(t===_b)return _b;if(!1===t||t instanceof lm)return t}return!0}),Ii(e=>e!==_b),xp(1)))}function zR(n){return(0,ik.z)((0,gs.b)(e=>{if(hm(e))throw FR(0,e)}),(0,Ut.U)(e=>!0===e))}const OA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GR(n,e,t,r,i){const u=FA(n,e,t);return u.matched?function CO(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?mt(i.map(c=>{const f=Ov(c,n);return Vf(function gO(n){return n&&Jw(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Fv(),zR()):mt(!0)}(r=jR(e,r),e,t).pipe((0,Ut.U)(c=>!0===c?u:{...OA})):mt(u)}function FA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...OA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||uk)(t,n,e);if(!i)return{...OA};const u={};Zi(i.posParams,(f,v)=>{u[v]=f.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function wb(n,e,t,r,i="corrected"){if(t.length>0&&function xO(n,e,t){return t.some(r=>Eb(n,e,r)&&Aa(r)!==Zt)}(n,t,r)){const c=new Jt(e,function AO(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Aa(u)!==Zt){const c=new Jt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Aa(u)]=c}return i}(n,e,r,new Jt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function MO(n,e,t){return t.some(r=>Eb(n,e,r))}(n,t,r)){const c=new Jt(n.segments,function SO(n,e,t,r,i,u){const c={};for(const f of r)if(Eb(n,t,f)&&!i[Aa(f)]){const v=new Jt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Aa(f)]=v}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Jt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Eb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qR(n,e,t,r){return!!(Aa(n)===r||r!==Zt&&Eb(e,t,n))&&("**"===n.path||FA(e,n,t).matched)}function WR(n,e,t){return 0===e.length&&!n.children[t]}const Ib=!1;class Db{constructor(e){this.segmentGroup=e||null}}class KR{constructor(e){this.urlTree=e}}function Xw(n){return Bw(new Db(n))}function ZR(n){return Bw(new KR(n))}class kO{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=wb(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Zt).pipe((0,Ut.U)(u=>this.createUrlTree(pb(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Uf(u=>{if(u instanceof KR)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Db?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Zt).pipe((0,Ut.U)(i=>this.createUrlTree(pb(i),e.queryParams,e.fragment))).pipe(Uf(i=>{throw i instanceof Db?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,Ib)}createUrlTree(e,t,r){const i=wA(e);return new lm(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ut.U)(u=>new Jt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Zn.D)(i).pipe(cm(u=>{const c=r.children[u],f=$R(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Ut.U)(v=>({segment:v,outlet:u})))}),id((u,c)=>(u[c.outlet]=c.segment,u),{}),cR())}expandSegment(e,t,r,i,u,c){return(0,Zn.D)(r).pipe(cm(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(Uf(D=>{if(D instanceof Db)return mt(null);throw D}))),Bd(f=>!!f),Uf((f,v)=>{if(kA(f))return WR(t,i,u)?mt(new Jt([],{})):Xw(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return qR(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Xw(t):Xw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ZR(u):this.lineralizeSegments(r,u).pipe((0,ri.z)(c=>{const f=new Jt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:v,remainingSegments:D,positionalParamSegments:C}=FA(t,i,u);if(!f)return Xw(t);const M=this.applyRedirectCommands(v,i.redirectTo,C);return i.redirectTo.startsWith("/")?ZR(M):this.lineralizeSegments(i,M).pipe((0,ri.z)(L=>this.expandSegment(e,t,r,L.concat(D),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=jR(r,e),r.loadChildren?(r._loadedRoutes?mt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ut.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Jt(i,{})))):mt(new Jt(i,{}))):GR(t,r,i,e).pipe(Ai(({matched:c,consumedSegments:f,remainingSegments:v})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ri.z)(C=>{const M=C.injector??e,L=C.routes,{segmentGroup:$,slicedSegments:Z}=wb(t,f,v,L),he=new Jt($.segments,$.children);if(0===Z.length&&he.hasChildren())return this.expandChildren(M,L,he).pipe((0,Ut.U)(ot=>new Jt(f,ot)));if(0===L.length&&0===Z.length)return mt(new Jt(f,{}));const _e=Aa(r)===u;return this.expandSegment(M,he,L,Z,_e?Zt:u,!0).pipe((0,Ut.U)(rt=>new Jt(f.concat(rt.segments),rt.children)))})):Xw(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function bO(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?mt(!0):mt(i.map(c=>{const f=Ov(c,n);return Vf(function dO(n){return n&&Jw(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Fv(),zR())}(e,t,r).pipe((0,ri.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,gs.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function NO(n){return Bw(LR(Ib,3))}())):mt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Zt])return Bw(new m.vHH(4e3,Ib));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new lm(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Zi(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Zi(t.children,(f,v)=>{c[v]=this.createSegmentGroup(e,f,r,i)}),new Jt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,Ib);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class FO{}class VO{constructor(e,t,r,i,u,c,f,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=v}recognize(){const e=wb(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe((0,Ut.U)(t=>{if(null===t)return null;const r=new mb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $d(r,t),u=new kR(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=PR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Zn.D)(Object.keys(r.children)).pipe(cm(i=>{const u=r.children[i],c=$R(t,i);return this.processSegmentGroup(e,c,u,i)}),id((i,u)=>i&&u?(i.push(...u),i):null),function sk(n,e=!1){return(0,Hi.e)((t,r)=>{let i=0;t.subscribe((0,ds.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),XT(null),cR(),(0,Ut.U)(i=>{if(null===i)return null;const u=QR(i);return function BO(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,Zn.D)(t).pipe(cm(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),Bd(c=>!!c),Uf(c=>{if(kA(c))return WR(r,i,u)?mt([]):mt(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!qR(t,r,i,u))return mt(null);let c;if("**"===t.path){const f=i.length>0?hR(i).parameters:{},v=JR(r)+i.length;c=mt({snapshot:new mb(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eN(t),Aa(t),t.component??t._loadedComponent??null,t,YR(r),v,tN(t),v),consumedSegments:[],remainingSegments:[]})}else c=GR(r,t,i,e).pipe((0,Ut.U)(({matched:f,consumedSegments:v,remainingSegments:D,parameters:C})=>{if(!f)return null;const M=JR(r)+v.length;return{snapshot:new mb(v,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eN(t),Aa(t),t.component??t._loadedComponent??null,t,YR(r),M,tN(t),M),consumedSegments:v,remainingSegments:D}}));return c.pipe(Ai(f=>{if(null===f)return mt(null);const{snapshot:v,consumedSegments:D,remainingSegments:C}=f;e=t._injector??e;const M=t._loadedInjector??e,L=function jO(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:$,slicedSegments:Z}=wb(r,D,C,L.filter(_e=>void 0===_e.redirectTo),this.relativeLinkResolution);if(0===Z.length&&$.hasChildren())return this.processChildren(M,L,$).pipe((0,Ut.U)(_e=>null===_e?null:[new $d(v,_e)]));if(0===L.length&&0===Z.length)return mt([new $d(v,[])]);const he=Aa(t)===u;return this.processSegment(M,L,$,Z,he?Zt:u).pipe((0,Ut.U)(_e=>null===_e?null:[new $d(v,_e)]))}))}}function $O(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QR(n){const e=[],t=new Set;for(const r of n){if(!$O(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=QR(r.children);e.push(new $d(r.value,i))}return e.filter(r=>!t.has(r))}function YR(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function JR(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function eN(n){return n.data||{}}function tN(n){return n.resolve||{}}function nN(n){return"string"==typeof n.title||null===n.title}function LA(n){return Ai(e=>{const t=n(e);return t?(0,Zn.D)(t).pipe((0,Ut.U)(()=>e)):mt(e)})}let rN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[jw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(iN)},providedIn:"root"}),n})(),iN=(()=>{class n extends rN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Za))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QO{}class JO extends class YO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bb=new m.OlP("",{providedIn:"root",factory:()=>({})}),UA=new m.OlP("ROUTES");let VA=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Vf(t.loadComponent()).pipe((0,gs.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),mA(()=>{this.componentLoaders.delete(t)})),i=new uR(r,()=>new Vd.x).pipe(pA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ut.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,D,C=!1;Array.isArray(f)?D=f:(v=f.create(t).injector,D=dR(v.get(UA,[],m.XFs.Self|m.XFs.Optional)));return{routes:D.map(PA),injector:v}}),mA(()=>{this.childrenLoaders.delete(r)})),c=new uR(u,()=>new Vd.x).pipe(pA());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Vf(t()).pipe((0,ri.z)(r=>r instanceof m.YKP||Array.isArray(r)?mt(r):(0,Zn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eF{}class tF{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function nF(n){throw n}function rF(n,e,t){return e.parse("/")}const iF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function oN(){const n=(0,m.f3M)(vR),e=(0,m.f3M)(Kw),t=(0,m.f3M)(Oe),r=(0,m.f3M)(m.zs3),i=(0,m.f3M)(m.Sil),u=(0,m.f3M)(UA,{optional:!0})??[],c=(0,m.f3M)(bb,{optional:!0})??{},f=(0,m.f3M)(iN),v=(0,m.f3M)(rN,{optional:!0}),D=(0,m.f3M)(eF,{optional:!0}),C=(0,m.f3M)(QO,{optional:!0}),M=new Qi(null,n,e,t,r,i,dR(u));return D&&(M.urlHandlingStrategy=D),C&&(M.routeReuseStrategy=C),M.titleStrategy=v??f,function oF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let Qi=(()=>{class n{constructor(t,r,i,u,c,f,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Vd.x,this.errorHandler=nF,this.malformedUriErrorHandler=rF,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mt(void 0),this.urlHandlingStrategy=new tF,this.routeReuseStrategy=new JO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(VA),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new jk(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new Bk(L)),this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const M=c.get(m.R0b);this.isNgZoneEnabled=M instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function lk(){return new lm(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NR(this.currentUrlTree,this.rootComponentType),this.transitions=new Mu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ii(i=>0!==i.id),(0,Ut.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ai(i=>{let u=!1,c=!1;return mt(i).pipe((0,gs.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ai(f=>{const v=this.browserUrlTree.toString(),D=!this.navigated||f.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return aN(f.source)&&(this.browserUrlTree=f.extractedUrl),mt(f).pipe(Ai(M=>{const L=this.transitions.getValue();return r.next(new TA(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?rd.E:Promise.resolve(M)}),function OO(n,e,t,r){return Ai(i=>function PO(n,e,t,r,i){return new kO(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ut.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,gs.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},i.urlAfterRedirects=M.urlAfterRedirects}),function zO(n,e,t,r,i,u){return(0,ri.z)(c=>function UO(n,e,t,r,i,u,c="emptyOnly",f="legacy"){return new VO(n,e,t,r,i,c,f,u).recognize().pipe(Ai(v=>null===v?function LO(n){return new Os.y(e=>e.error(n))}(new FO):mt(v)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,Ut.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,gs.b)(M=>{if(i.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl($,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new Ok(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:$,source:Z,restoredState:he,extras:_e}=f,He=new TA(L,this.serializeUrl($),Z,he);r.next(He);const rt=NR($,this.rootComponentType).snapshot;return mt(i={...f,targetSnapshot:rt,urlAfterRedirects:$,extras:{..._e,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),rd.E}),(0,gs.b)(f=>{const v=new Fk(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(v)}),(0,Ut.U)(f=>i={...f,guards:oO(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function yO(n,e){return(0,ri.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?mt({...t,guardsResult:!0}):function vO(n,e,t,r){return(0,Zn.D)(n).pipe((0,ri.z)(i=>function TO(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?mt(u.map(f=>{const v=Zw(e)??i,D=Ov(f,v);return Vf(function pO(n){return n&&Jw(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):v.runInContext(()=>D(n,e,t,r))).pipe(Bd())})).pipe(Fv()):mt(!0)}(i.component,i.route,t,e,r)),Bd(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ri.z)(f=>f&&function lO(n){return"boolean"==typeof n}(f)?function _O(n,e,t,r){return(0,Zn.D)(e).pipe(cm(i=>i_(function EO(n,e){return null!==n&&e&&e(new $k(n)),mt(!0)}(i.route.parent,r),function wO(n,e){return null!==n&&e&&e(new zk(n)),mt(!0)}(i.route,r),function DO(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function aO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>oR(()=>mt(c.guards.map(v=>{const D=Zw(c.node)??t,C=Ov(v,D);return Vf(function fO(n){return n&&Jw(n.canActivateChild)}(C)?C.canActivateChild(r,n):D.runInContext(()=>C(r,n))).pipe(Bd())})).pipe(Fv())));return mt(u).pipe(Fv())}(n,i.path,t),function IO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(u=>oR(()=>{const c=Zw(e)??t,f=Ov(u,c);return Vf(function hO(n){return n&&Jw(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(Bd())}));return mt(i).pipe(Fv())}(n,i.route,t))),Bd(i=>!0!==i,!0))}(r,u,n,e):mt(f)),(0,Ut.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,gs.b)(f=>{if(i.guardsResult=f.guardsResult,hm(f.guardsResult))throw FR(0,f.guardsResult);const v=new Lk(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(v)}),Ii(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),LA(f=>{if(f.guards.canActivateChecks.length)return mt(f).pipe((0,gs.b)(v=>{const D=new Uk(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}),Ai(v=>{let D=!1;return mt(v).pipe(function GO(n,e){return(0,ri.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let u=0;return(0,Zn.D)(i).pipe(cm(c=>function qO(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!nN(i)&&(u[jw]=i.title),function WO(n,e,t,r){const i=function KO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return mt({});const u={};return(0,Zn.D)(i).pipe((0,ri.z)(c=>function ZO(n,e,t,r){const i=Zw(e)??r,u=Ov(n,i);return Vf(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(Bd(),(0,gs.b)(f=>{u[c]=f}))),gA(1),function ok(n){return(0,Ut.U)(()=>n)}(u),Uf(c=>kA(c)?rd.E:Bw(c)))}(u,n,e,r).pipe((0,Ut.U)(c=>(n._resolvedData=c,n.data=PR(n,t).resolve,i&&nN(i)&&(n.data[jw]=i.title),null)))}(c.route,r,n,e)),(0,gs.b)(()=>u++),gA(1),(0,ri.z)(c=>u===i.length?mt(t):rd.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,gs.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,gs.b)(v=>{const D=new Vk(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}))}),LA(f=>{const v=D=>{const C=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,gs.b)(M=>{D.component=M}),(0,Ut.U)(()=>{})));for(const M of D.children)C.push(...v(M));return C};return iR(v(f.targetSnapshot.root)).pipe(XT(),xp(1))}),LA(()=>this.afterPreactivation()),(0,Ut.U)(f=>{const v=function Zk(n,e,t){const r=Ww(n,e._root,t?t._root:void 0);return new RR(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:v}}),(0,gs.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Ut.U)(r=>(new sO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,gs.b)({next(){u=!0},complete(){u=!0}}),mA(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Uf(f=>{if(c=!0,VR(f)){UR(f)||(this.navigated=!0,this.restoreHistory(i,!0));const v=new gb(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(v),UR(f)){const D=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aN(i.source)};this.scheduleNavigation(D,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const v=new AR(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(v);try{i.resolve(this.errorHandler(f))}catch(D){i.reject(D)}}return rd.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const f={...u};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(PA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:v}=r,D=i||this.routerState.root,C=v?this.currentUrlTree.fragment:c;let M=null;switch(f){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),xk(D,this.currentUrlTree,t,M,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=hm(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function aF(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...iF}:!1===r?{...sF}:r,hm(t))return pR(this.currentUrlTree,t,i);const u=this.parseUrl(t);return pR(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new fm(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let f,v,D;c?(f=c.resolve,v=c.reject,D=c.promise):D=new Promise((L,$)=>{f=L,v=$});const C=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),M=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:C,targetPageId:M,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:f,reject:v,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new gb(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return oN()},providedIn:"root"}),n})();function aN(n){return"imperative"!==n}class uN{}let lF=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ii(t=>t instanceof fm),cm(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,f=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,Zn.D)(i).pipe((0,Mp.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const u=i.pipe((0,ri.z)(c=>null===c?mt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Zn.D)([u,c]).pipe((0,Mp.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qi),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(uN),m.LFG(VA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $A=new m.OlP("");let cN=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof TA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fm&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Lv(n,e){return{\u0275kind:n,\u0275providers:e}}function HA(n){return[{provide:UA,multi:!0,useValue:n}]}function dN(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Qi),i=n.get(hN);1===n.get(zA)&&r.initialNavigation(),n.get(fN,null,m.XFs.Optional)?.setUpPreloading(),n.get($A,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const hN=new m.OlP("",{factory:()=>new Vd.x}),zA=new m.OlP("",{providedIn:"root",factory:()=>1});const fN=new m.OlP("");function pF(n){return Lv(0,[{provide:fN,useExisting:lF},{provide:uN,useExisting:n}])}const pN=new m.OlP("ROUTER_FORROOT_GUARD"),gF=[Oe,{provide:vR,useClass:vA},{provide:Qi,useFactory:oN},Kw,{provide:Bf,useFactory:function lN(n){return n.routerState.root},deps:[Qi]},VA];function mF(){return new m.PXZ("Router",Qi)}let yF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[gF,[],HA(t),{provide:pN,useFactory:EF,deps:[[Qi,new m.FiY,new m.tp0]]},{provide:bb,useValue:r||{}},r?.useHash?{provide:ye,useClass:wt}:{provide:ye,useClass:pt},{provide:$A,useFactory:()=>{const n=(0,m.f3M)(Qi),e=(0,m.f3M)(_s),t=(0,m.f3M)(bb);return t.scrollOffset&&e.setOffset(t.scrollOffset),new cN(n,e,t)}},r?.preloadingStrategy?pF(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:mF},r?.initialNavigation?IF(r):[],[{provide:gN,useFactory:dN},{provide:m.tb,multi:!0,useExisting:gN}]]}}static forChild(t){return{ngModule:n,providers:[HA(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pN,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[RA]}),n})();function EF(n){return"guarded"}function IF(n){return["disabled"===n.initialNavigation?Lv(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Qi);return()=>{e.setUpLocationChangeListener()}}},{provide:zA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Lv(2,[{provide:zA,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(Qi),f=e.get(hN);(function i(u){e.get(Qi).events.pipe(Ii(f=>f instanceof fm||f instanceof gb||f instanceof AR),(0,Ut.U)(f=>f instanceof fm||f instanceof gb&&(0===f.code||1===f.code)&&null),Ii(f=>null!==f),xp(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||f.closed?mt(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const gN=new m.OlP("");function TF(n,e){if(1&n&&(m.TgZ(0,"option",16),m._uU(1),m.ALo(2,"uppercase"),m.qZA()),2&n){const t=e.$implicit,r=m.oxw();m.Q6J("value",t),m.xp6(1),m.AsE(" ",m.lcZ(2,3,t)," (",r.certifications[t].length,") ")}}function bF(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",23)(1,"img",24),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().$implicit,u=m.oxw(3);return m.KtG(u.openPreview(i))}),m.qZA()()}if(2&n){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("src",t.image,m.LSH)}}function CF(n,e){if(1&n&&(m.ynx(0),m.YNc(1,bF,2,1,"div",22),m.BQk()),2&n){const t=e.$implicit,r=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",t.date.startsWith(r))}}function SF(n,e){if(1&n&&(m.TgZ(0,"div",4)(1,"h2",18),m._uU(2),m.qZA(),m._UZ(3,"hr",19),m.TgZ(4,"div",20),m.YNc(5,CF,2,1,"ng-container",21),m.qZA()()),2&n){const t=e.$implicit,r=m.oxw(2);m.xp6(2),m.AsE(" ",t," (",r.filteredCertificationsByYear[t].length,") "),m.xp6(3),m.Q6J("ngForOf",r.filteredCertificationsByYear[t])}}function AF(n,e){if(1&n&&(m.ynx(0),m.YNc(1,SF,6,3,"div",17),m.BQk()),2&n){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.years)}}function xF(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",25)(1,"button",26),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.fetchCertifications())}),m._uU(2," Reload certifications "),m.qZA()()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("disabled",t.loading)}}function MF(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",27),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.closePreview())}),m.TgZ(1,"img",28),m.NdJ("click",function(i){return i.stopPropagation()}),m.qZA(),m._UZ(2,"button",29),m.qZA()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("title",t.certification.id)("src",t.certification.image,m.LSH)}}function RF(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",30),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.scrollToTop())}),m._UZ(1,"img",31),m.qZA()}2&n&&m.Q6J("@inOutAnimation",void 0)}function NF(n,e){1&n&&(m.TgZ(0,"div",32)(1,"div",33)(2,"span",34),m._uU(3,"Loading..."),m.qZA()()())}let PF=(()=>{class n{constructor(t,r,i){this.galleryService=t,this.route=r,this.location=i,this.loading=!1,this.filteredCertifications=[],this.filteredCertificationsByYear={},this.filter="",this.preview=!1,this.showScrollToTop=!1,this.categories=[],this.certifications={},this.years=[]}ngOnInit(){this.fetchCertifications(),r_(document,"scroll").subscribe(()=>this.showScrollToTop=window.scrollY/window.screen.height>.5)}filterCertifications(t){this.filteredCertifications=t&&this.categories.includes(t)?this.certifications[t]:[...this.certifications.all],this.years=[...new Set(this.filteredCertifications.map(r=>r.date.slice(0,4)))],this.years.forEach(r=>this.filteredCertificationsByYear[r]=this.filteredCertifications.filter(i=>i.date.startsWith(r)))}openPreview(t){document.body.style.overflowY="hidden",this.preview=!0,this.certification=t}closePreview(){document.body.style.overflowY="",this.preview=!1}scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}fetchCertifications(){this.loading=!0,this.galleryService.getAlbum().subscribe({next:t=>{this.certifications.all=t.sort((r,i)=>i.date.localeCompare(r.date)),this.categories=[...new Set(this.certifications.all.map(({category:r})=>r))],this.categories.forEach(r=>this.certifications[r]=this.certifications.all.filter(i=>i.category===r)),this.filter=this.route.snapshot.queryParamMap.get("filter")||"",this.location.replaceState(""),this.filterCertifications(this.filter),this.loading=!1},error:()=>this.loading=!1})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(rR),m.Y36(Bf),m.Y36(Oe))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:22,vars:8,consts:[[1,"navbar","navbar-dark","bg-primary","mb-4","shadow-sm"],[1,"container"],[1,"navbar-brand","mx-auto"],[1,"min-vh-100"],[1,"container","mb-4"],[1,"form-select","clickable","shadow-sm",3,"value","change"],["categorySelect",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["reloadCertifications",""],[1,"bg-white","text-center","py-3","shadow-sm"],["href","https://jpin730.github.io/","target","_blank"],["class","d-flex vh-100 vw-100 position-fixed top-0 start-0 bg-dark bg-opacity-75 px-md-5",3,"click",4,"ngIf"],["title","Go to top","class","scroll-to-top bg-primary clickable position-fixed bottom-0 end-0 p-3 m-3 m-lg-5 rounded",3,"click",4,"ngIf"],["class","position-fixed top-0 start-0 d-flex bg-dark bg-opacity-75 min-vh-100 min-vw-100",4,"ngIf"],[3,"value"],["class","container mb-4",4,"ngFor","ngForOf"],[1,"d-inline-block","top-0","my-0"],[1,"m-0","mt-1","pb-2"],[1,"row","row-cols-1","row-cols-md-2","row-cols-xl-3"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["loading","lazy","title","Click to preview image",1,"clickable","w-100","shadow-sm",3,"src","click"],[1,"container","text-center"],["type","button",1,"btn","btn-primary","btn-lg","m-5",3,"disabled","click"],[1,"d-flex","vh-100","vw-100","position-fixed","top-0","start-0","bg-dark","bg-opacity-75","px-md-5",3,"click"],[1,"preview-img","m-auto",3,"title","src","click"],["type","button",1,"btn-close","btn-close-white","position-fixed","top-0","end-0","m-3"],["title","Go to top",1,"scroll-to-top","bg-primary","clickable","position-fixed","bottom-0","end-0","p-3","m-3","m-lg-5","rounded",3,"click"],["loading","eager","src","assets/top-arrow.svg","width","24","height","24"],[1,"position-fixed","top-0","start-0","d-flex","bg-dark","bg-opacity-75","min-vh-100","min-vw-100"],[1,"spinner-grow","text-light","m-auto",2,"width","10rem","height","10rem"],[1,"visually-hidden"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"nav",0)(1,"div",1)(2,"h1",2),m._uU(3,"Jaime's Certifications Gallery"),m.qZA()()(),m.TgZ(4,"div",3)(5,"div",4)(6,"select",5,6),m.NdJ("change",function(){m.CHM(i);const c=m.MAs(7);return m.KtG(r.filterCertifications(c.value))}),m.TgZ(8,"option",7),m._uU(9),m.qZA(),m.YNc(10,TF,3,5,"option",8),m.qZA()(),m.YNc(11,AF,2,1,"ng-container",9),m.YNc(12,xF,3,1,"ng-template",null,10,m.W1O),m.qZA(),m.TgZ(14,"footer",11)(15,"a",12),m._uU(16,"Jaime Pineda"),m.qZA(),m.TgZ(17,"span"),m._uU(18,"\xa0\xa9\xa02022"),m.qZA()(),m.YNc(19,MF,3,2,"div",13),m.YNc(20,RF,2,1,"div",14),m.YNc(21,NF,4,0,"div",15)}if(2&t){const i=m.MAs(13);m.xp6(6),m.Q6J("value",r.filter),m.xp6(3),m.hij(" ALL (",r.certifications.all&&r.certifications.all.length,") "),m.xp6(1),m.Q6J("ngForOf",r.categories),m.xp6(1),m.Q6J("ngIf",r.certifications.all&&0!==r.certifications.all.length)("ngIfElse",i),m.xp6(8),m.Q6J("ngIf",r.preview),m.xp6(1),m.Q6J("ngIf",r.showScrollToTop&&!r.preview),m.xp6(1),m.Q6J("ngIf",r.loading)}},dependencies:[yn,mr,ka],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.preview-img[_ngcontent-%COMP%]{max-height:100vh;max-width:100%}.scroll-to-top[_ngcontent-%COMP%]{opacity:.5;transition:opacity .3s}.scroll-to-top[_ngcontent-%COMP%]:hover{opacity:.75}"],data:{animation:[sp("inOutAnimation",[nc(":enter",[Ss({opacity:0}),Wn("300ms ease-out",Ss({opacity:.5}))]),nc(":leave",[Ss({opacity:.5}),Wn("300ms ease-in",Ss({opacity:0}))])])]}}),n})();const mN_firebase={projectId:"portfolio-jpin730",appId:"1:733714402019:web:a1301af4562abe9ecc53d6",storageBucket:"portfolio-jpin730.appspot.com",apiKey:"AIzaSyCUOML6rLU4b0uImZsqoGSpcIdponc0qA8",authDomain:"portfolio-jpin730.firebaseapp.com",messagingSenderId:"733714402019"};let kF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[PF]}),n.\u0275inj=m.cJS({providers:[rR],imports:[Tl,ni,yF.forRoot([]),Fs.hO.initializeApp(mN_firebase),K1]}),n})();(0,m.G48)(),fo().bootstrapModule(kF).catch(n=>console.error(n))},9751:(vt,Me,F)=>{F.d(Me,{y:()=>Ie});var m=F(2961),X=F(727),O=F(8822),ae=F(9635),oe=F(2416),pe=F(576),fe=F(2806);let Ie=(()=>{class W{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const be=new W;return be.source=this,be.operator=Re,be}subscribe(Re,be,at){const ye=function H(W){return W&&W instanceof m.Lv||function j(W){return W&&(0,pe.m)(W.next)&&(0,pe.m)(W.error)&&(0,pe.m)(W.complete)}(W)&&(0,X.Nn)(W)}(Re)?Re:new m.Hp(Re,be,at);return(0,fe.x)(()=>{const{operator:we,source:pt}=this;ye.add(we?we.call(ye,pt):pt?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Re){try{return this._subscribe(Re)}catch(be){Re.error(be)}}forEach(Re,be){return new(be=me(be))((at,ye)=>{const we=new m.Hp({next:pt=>{try{Re(pt)}catch(wt){ye(wt),we.unsubscribe()}},error:ye,complete:at});this.subscribe(we)})}_subscribe(Re){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Re)}[O.L](){return this}pipe(...Re){return(0,ae.U)(Re)(this)}toPromise(Re){return new(Re=me(Re))((be,at)=>{let ye;this.subscribe(we=>ye=we,we=>at(we),()=>be(ye))})}}return W.create=je=>new W(je),W})();function me(W){var je;return null!==(je=W??oe.v.Promise)&&void 0!==je?je:Promise}},7579:(vt,Me,F)=>{F.d(Me,{x:()=>fe});var m=F(9751),X=F(727);const ae=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=F(8737),pe=F(2806);let fe=(()=>{class me extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const W=new Ie(this,this);return W.operator=H,W}_throwIfClosed(){if(this.closed)throw new ae}next(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(H)}})}error(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:W}=this;for(;W.length;)W.shift().error(H)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:W,isStopped:je,observers:Re}=this;return W||je?X.Lc:(this.currentObservers=null,Re.push(H),new X.w0(()=>{this.currentObservers=null,(0,oe.P)(Re,H)}))}_checkFinalizedStatuses(H){const{hasError:W,thrownError:je,isStopped:Re}=this;W?H.error(je):Re&&H.complete()}asObservable(){const H=new m.y;return H.source=this,H}}return me.create=(j,H)=>new Ie(j,H),me})();class Ie extends fe{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,W;null===(W=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===W||W.call(H,j)}error(j){var H,W;null===(W=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===W||W.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,W;return null!==(W=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==W?W:X.Lc}}},2961:(vt,Me,F)=>{F.d(Me,{Hp:()=>at,Lv:()=>W});var m=F(576),X=F(727),O=F(2416),ae=F(7849);function oe(){}const pe=me("C",void 0,void 0);function me(Oe,De,ve){return{kind:Oe,value:De,error:ve}}var j=F(3410),H=F(2806);class W extends X.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,X.Nn)(De)&&De.add(this)):this.destination=wt}static create(De,ve,Ge){return new at(De,ve,Ge)}next(De){this.isStopped?pt(function Ie(Oe){return me("N",Oe,void 0)}(De),this):this._next(De)}error(De){this.isStopped?pt(function fe(Oe){return me("E",void 0,Oe)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?pt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Re(Oe,De){return je.call(Oe,De)}class be{constructor(De){this.partialObserver=De}next(De){const{partialObserver:ve}=this;if(ve.next)try{ve.next(De)}catch(Ge){ye(Ge)}}error(De){const{partialObserver:ve}=this;if(ve.error)try{ve.error(De)}catch(Ge){ye(Ge)}else ye(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(ve){ye(ve)}}}class at extends W{constructor(De,ve,Ge){let Ve;if(super(),(0,m.m)(De)||!De)Ve={next:De??void 0,error:ve??void 0,complete:Ge??void 0};else{let st;this&&O.v.useDeprecatedNextContext?(st=Object.create(De),st.unsubscribe=()=>this.unsubscribe(),Ve={next:De.next&&Re(De.next,st),error:De.error&&Re(De.error,st),complete:De.complete&&Re(De.complete,st)}):Ve=De}this.destination=new be(Ve)}}function ye(Oe){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Oe):(0,ae.h)(Oe)}function pt(Oe,De){const{onStoppedNotification:ve}=O.v;ve&&j.z.setTimeout(()=>ve(Oe,De))}const wt={closed:!0,next:oe,error:function we(Oe){throw Oe},complete:oe}},727:(vt,Me,F)=>{F.d(Me,{Lc:()=>pe,w0:()=>oe,Nn:()=>fe});var m=F(576);const O=(0,F(3888).d)(me=>function(H){me(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((W,je)=>`${je+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ae=F(8737);class oe{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Re of H)Re.remove(this);else H.remove(this);const{initialTeardown:W}=this;if((0,m.m)(W))try{W()}catch(Re){j=Re instanceof O?Re.errors:[Re]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Re of je)try{Ie(Re)}catch(be){j=j??[],be instanceof O?j=[...j,...be.errors]:j.push(be)}}if(j)throw new O(j)}}add(j){var H;if(j&&j!==this)if(this.closed)Ie(j);else{if(j instanceof oe){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,ae.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,ae.P)(H,j),j instanceof oe&&j._removeParent(this)}}oe.EMPTY=(()=>{const me=new oe;return me.closed=!0,me})();const pe=oe.EMPTY;function fe(me){return me instanceof oe||me&&"closed"in me&&(0,m.m)(me.remove)&&(0,m.m)(me.add)&&(0,m.m)(me.unsubscribe)}function Ie(me){(0,m.m)(me)?me():me.unsubscribe()}},2416:(vt,Me,F)=>{F.d(Me,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(vt,Me,F)=>{F.d(Me,{E:()=>X});const X=new(F(9751).y)(oe=>oe.complete())},8996:(vt,Me,F)=>{F.d(Me,{D:()=>De});var m=F(8421),X=F(5363),O=F(9468),pe=F(9751),Ie=F(2202),me=F(576),j=F(9672);function W(ve,Ge){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(Ve=>{(0,j.f)(Ve,Ge,()=>{const st=ve[Symbol.asyncIterator]();(0,j.f)(Ve,Ge,()=>{st.next().then(ne=>{ne.done?Ve.complete():Ve.next(ne.value)})},0,!0)})})}var je=F(3670),Re=F(8239),be=F(1144),at=F(6495),ye=F(2206),we=F(4532),pt=F(3260);function De(ve,Ge){return Ge?function Oe(ve,Ge){if(null!=ve){if((0,je.c)(ve))return function ae(ve,Ge){return(0,m.Xf)(ve).pipe((0,O.R)(Ge),(0,X.Q)(Ge))}(ve,Ge);if((0,be.z)(ve))return function fe(ve,Ge){return new pe.y(Ve=>{let st=0;return Ge.schedule(function(){st===ve.length?Ve.complete():(Ve.next(ve[st++]),Ve.closed||this.schedule())})})}(ve,Ge);if((0,Re.t)(ve))return function oe(ve,Ge){return(0,m.Xf)(ve).pipe((0,O.R)(Ge),(0,X.Q)(Ge))}(ve,Ge);if((0,ye.D)(ve))return W(ve,Ge);if((0,at.T)(ve))return function H(ve,Ge){return new pe.y(Ve=>{let st;return(0,j.f)(Ve,Ge,()=>{st=ve[Ie.h](),(0,j.f)(Ve,Ge,()=>{let ne,re;try{({value:ne,done:re}=st.next())}catch(ee){return void Ve.error(ee)}re?Ve.complete():Ve.next(ne)},0,!0)}),()=>(0,me.m)(st?.return)&&st.return()})}(ve,Ge);if((0,pt.L)(ve))return function wt(ve,Ge){return W((0,pt.Q)(ve),Ge)}(ve,Ge)}throw(0,we.z)(ve)}(ve,Ge):(0,m.Xf)(ve)}},8421:(vt,Me,F)=>{F.d(Me,{Xf:()=>je});var m=F(655),X=F(1144),O=F(8239),ae=F(9751),oe=F(3670),pe=F(2206),fe=F(4532),Ie=F(6495),me=F(3260),j=F(576),H=F(7849),W=F(8822);function je(Oe){if(Oe instanceof ae.y)return Oe;if(null!=Oe){if((0,oe.c)(Oe))return function Re(Oe){return new ae.y(De=>{const ve=Oe[W.L]();if((0,j.m)(ve.subscribe))return ve.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Oe);if((0,X.z)(Oe))return function be(Oe){return new ae.y(De=>{for(let ve=0;ve<Oe.length&&!De.closed;ve++)De.next(Oe[ve]);De.complete()})}(Oe);if((0,O.t)(Oe))return function at(Oe){return new ae.y(De=>{Oe.then(ve=>{De.closed||(De.next(ve),De.complete())},ve=>De.error(ve)).then(null,H.h)})}(Oe);if((0,pe.D)(Oe))return we(Oe);if((0,Ie.T)(Oe))return function ye(Oe){return new ae.y(De=>{for(const ve of Oe)if(De.next(ve),De.closed)return;De.complete()})}(Oe);if((0,me.L)(Oe))return function pt(Oe){return we((0,me.Q)(Oe))}(Oe)}throw(0,fe.z)(Oe)}function we(Oe){return new ae.y(De=>{(function wt(Oe,De){var ve,Ge,Ve,st;return(0,m.mG)(this,void 0,void 0,function*(){try{for(ve=(0,m.KL)(Oe);!(Ge=yield ve.next()).done;)if(De.next(Ge.value),De.closed)return}catch(ne){Ve={error:ne}}finally{try{Ge&&!Ge.done&&(st=ve.return)&&(yield st.call(ve))}finally{if(Ve)throw Ve.error}}De.complete()})})(Oe,De).catch(ve=>De.error(ve))})}},6451:(vt,Me,F)=>{F.d(Me,{T:()=>pe});var m=F(8189),X=F(8421),O=F(515),ae=F(7669),oe=F(8996);function pe(...fe){const Ie=(0,ae.yG)(fe),me=(0,ae._6)(fe,1/0),j=fe;return j.length?1===j.length?(0,X.Xf)(j[0]):(0,m.J)(me)((0,oe.D)(j,Ie)):O.E}},5403:(vt,Me,F)=>{F.d(Me,{x:()=>X});var m=F(2961);function X(ae,oe,pe,fe,Ie){return new O(ae,oe,pe,fe,Ie)}class O extends m.Lv{constructor(oe,pe,fe,Ie,me,j){super(oe),this.onFinalize=me,this.shouldUnsubscribe=j,this._next=pe?function(H){try{pe(H)}catch(W){oe.error(W)}}:super._next,this._error=Ie?function(H){try{Ie(H)}catch(W){oe.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(H){oe.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(vt,Me,F)=>{F.d(Me,{U:()=>O});var m=F(4482),X=F(5403);function O(ae,oe){return(0,m.e)((pe,fe)=>{let Ie=0;pe.subscribe((0,X.x)(fe,me=>{fe.next(ae.call(oe,me,Ie++))}))})}},8189:(vt,Me,F)=>{F.d(Me,{J:()=>O});var m=F(5577),X=F(4671);function O(ae=1/0){return(0,m.z)(X.y,ae)}},5577:(vt,Me,F)=>{F.d(Me,{z:()=>Ie});var m=F(4004),X=F(8421),O=F(4482),ae=F(9672),oe=F(5403),fe=F(576);function Ie(me,j,H=1/0){return(0,fe.m)(j)?Ie((W,je)=>(0,m.U)((Re,be)=>j(W,Re,je,be))((0,X.Xf)(me(W,je))),H):("number"==typeof j&&(H=j),(0,O.e)((W,je)=>function pe(me,j,H,W,je,Re,be,at){const ye=[];let we=0,pt=0,wt=!1;const Oe=()=>{wt&&!ye.length&&!we&&j.complete()},De=Ge=>we<W?ve(Ge):ye.push(Ge),ve=Ge=>{Re&&j.next(Ge),we++;let Ve=!1;(0,X.Xf)(H(Ge,pt++)).subscribe((0,oe.x)(j,st=>{je?.(st),Re?De(st):j.next(st)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(we--;ye.length&&we<W;){const st=ye.shift();be?(0,ae.f)(j,be,()=>ve(st)):ve(st)}Oe()}catch(st){j.error(st)}}))};return me.subscribe((0,oe.x)(j,De,()=>{wt=!0,Oe()})),()=>{at?.()}}(W,je,me,H)))}},5363:(vt,Me,F)=>{F.d(Me,{Q:()=>ae});var m=F(9672),X=F(4482),O=F(5403);function ae(oe,pe=0){return(0,X.e)((fe,Ie)=>{fe.subscribe((0,O.x)(Ie,me=>(0,m.f)(Ie,oe,()=>Ie.next(me),pe),()=>(0,m.f)(Ie,oe,()=>Ie.complete(),pe),me=>(0,m.f)(Ie,oe,()=>Ie.error(me),pe)))})}},3099:(vt,Me,F)=>{F.d(Me,{B:()=>oe});var m=F(8421),X=F(7579),O=F(2961),ae=F(4482);function oe(fe={}){const{connector:Ie=(()=>new X.x),resetOnError:me=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=fe;return W=>{let je,Re,be,at=0,ye=!1,we=!1;const pt=()=>{Re?.unsubscribe(),Re=void 0},wt=()=>{pt(),je=be=void 0,ye=we=!1},Oe=()=>{const De=je;wt(),De?.unsubscribe()};return(0,ae.e)((De,ve)=>{at++,!we&&!ye&&pt();const Ge=be=be??Ie();ve.add(()=>{at--,0===at&&!we&&!ye&&(Re=pe(Oe,H))}),Ge.subscribe(ve),!je&&at>0&&(je=new O.Hp({next:Ve=>Ge.next(Ve),error:Ve=>{we=!0,pt(),Re=pe(wt,me,Ve),Ge.error(Ve)},complete:()=>{ye=!0,pt(),Re=pe(wt,j),Ge.complete()}}),(0,m.Xf)(De).subscribe(je))})(W)}}function pe(fe,Ie,...me){if(!0===Ie)return void fe();if(!1===Ie)return;const j=new O.Hp({next:()=>{j.unsubscribe(),fe()}});return Ie(...me).subscribe(j)}},9468:(vt,Me,F)=>{F.d(Me,{R:()=>X});var m=F(4482);function X(O,ae=0){return(0,m.e)((oe,pe)=>{pe.add(O.schedule(()=>oe.subscribe(pe),ae))})}},8505:(vt,Me,F)=>{F.d(Me,{b:()=>oe});var m=F(576),X=F(4482),O=F(5403),ae=F(4671);function oe(pe,fe,Ie){const me=(0,m.m)(pe)||fe||Ie?{next:pe,error:fe,complete:Ie}:pe;return me?(0,X.e)((j,H)=>{var W;null===(W=me.subscribe)||void 0===W||W.call(me);let je=!0;j.subscribe((0,O.x)(H,Re=>{var be;null===(be=me.next)||void 0===be||be.call(me,Re),H.next(Re)},()=>{var Re;je=!1,null===(Re=me.complete)||void 0===Re||Re.call(me),H.complete()},Re=>{var be;je=!1,null===(be=me.error)||void 0===be||be.call(me,Re),H.error(Re)},()=>{var Re,be;je&&(null===(Re=me.unsubscribe)||void 0===Re||Re.call(me)),null===(be=me.finalize)||void 0===be||be.call(me)}))}):ae.y}},4408:(vt,Me,F)=>{F.d(Me,{o:()=>oe});var m=F(727);class X extends m.w0{constructor(fe,Ie){super()}schedule(fe,Ie=0){return this}}const O={setInterval(pe,fe,...Ie){const{delegate:me}=O;return me?.setInterval?me.setInterval(pe,fe,...Ie):setInterval(pe,fe,...Ie)},clearInterval(pe){const{delegate:fe}=O;return(fe?.clearInterval||clearInterval)(pe)},delegate:void 0};var ae=F(8737);class oe extends X{constructor(fe,Ie){super(fe,Ie),this.scheduler=fe,this.work=Ie,this.pending=!1}schedule(fe,Ie=0){var me;if(this.closed)return this;this.state=fe;const j=this.id,H=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(H,j,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(H,this.id,Ie),this}requestAsyncId(fe,Ie,me=0){return O.setInterval(fe.flush.bind(fe,this),me)}recycleAsyncId(fe,Ie,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return Ie;null!=Ie&&O.clearInterval(Ie)}execute(fe,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(fe,Ie);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,Ie){let j,me=!1;try{this.work(fe)}catch(H){me=!0,j=H||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:fe,scheduler:Ie}=this,{actions:me}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(me,this),null!=fe&&(this.id=this.recycleAsyncId(Ie,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(vt,Me,F)=>{F.d(Me,{v:()=>O});var m=F(6063);class X{constructor(oe,pe=X.now){this.schedulerActionCtor=oe,this.now=pe}schedule(oe,pe=0,fe){return new this.schedulerActionCtor(this,oe).schedule(fe,pe)}}X.now=m.l.now;class O extends X{constructor(oe,pe=X.now){super(oe,pe),this.actions=[],this._active=!1}flush(oe){const{actions:pe}=this;if(this._active)return void pe.push(oe);let fe;this._active=!0;do{if(fe=oe.execute(oe.state,oe.delay))break}while(oe=pe.shift());if(this._active=!1,fe){for(;oe=pe.shift();)oe.unsubscribe();throw fe}}}},4986:(vt,Me,F)=>{F.d(Me,{z:()=>O});var m=F(4408);const O=new(F(7565).v)(m.o)},6063:(vt,Me,F)=>{F.d(Me,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(vt,Me,F)=>{F.d(Me,{z:()=>m});const m={setTimeout(X,O,...ae){const{delegate:oe}=m;return oe?.setTimeout?oe.setTimeout(X,O,...ae):setTimeout(X,O,...ae)},clearTimeout(X){const{delegate:O}=m;return(O?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(vt,Me,F)=>{F.d(Me,{h:()=>X});const X=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(vt,Me,F)=>{F.d(Me,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(vt,Me,F)=>{F.d(Me,{_6:()=>pe,jO:()=>ae,yG:()=>oe});var m=F(576);function O(fe){return fe[fe.length-1]}function ae(fe){return(0,m.m)(O(fe))?fe.pop():void 0}function oe(fe){return function X(fe){return fe&&(0,m.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function pe(fe,Ie){return"number"==typeof O(fe)?fe.pop():Ie}},8737:(vt,Me,F)=>{function m(X,O){if(X){const ae=X.indexOf(O);0<=ae&&X.splice(ae,1)}}F.d(Me,{P:()=>m})},3888:(vt,Me,F)=>{function m(X){const ae=X(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(Me,{d:()=>m})},2806:(vt,Me,F)=>{F.d(Me,{O:()=>ae,x:()=>O});var m=F(2416);let X=null;function O(oe){if(m.v.useDeprecatedSynchronousErrorHandling){const pe=!X;if(pe&&(X={errorThrown:!1,error:null}),oe(),pe){const{errorThrown:fe,error:Ie}=X;if(X=null,fe)throw Ie}}else oe()}function ae(oe){m.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=oe)}},9672:(vt,Me,F)=>{function m(X,O,ae,oe=0,pe=!1){const fe=O.schedule(function(){ae(),pe?X.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(X.add(fe),!pe)return fe}F.d(Me,{f:()=>m})},4671:(vt,Me,F)=>{function m(X){return X}F.d(Me,{y:()=>m})},1144:(vt,Me,F)=>{F.d(Me,{z:()=>m});const m=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(vt,Me,F)=>{F.d(Me,{D:()=>X});var m=F(576);function X(O){return Symbol.asyncIterator&&(0,m.m)(O?.[Symbol.asyncIterator])}},576:(vt,Me,F)=>{function m(X){return"function"==typeof X}F.d(Me,{m:()=>m})},3670:(vt,Me,F)=>{F.d(Me,{c:()=>O});var m=F(8822),X=F(576);function O(ae){return(0,X.m)(ae[m.L])}},6495:(vt,Me,F)=>{F.d(Me,{T:()=>O});var m=F(2202),X=F(576);function O(ae){return(0,X.m)(ae?.[m.h])}},8239:(vt,Me,F)=>{F.d(Me,{t:()=>X});var m=F(576);function X(O){return(0,m.m)(O?.then)}},3260:(vt,Me,F)=>{F.d(Me,{L:()=>ae,Q:()=>O});var m=F(655),X=F(576);function O(oe){return(0,m.FC)(this,arguments,function*(){const fe=oe.getReader();try{for(;;){const{value:Ie,done:me}=yield(0,m.qq)(fe.read());if(me)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(Ie)}}finally{fe.releaseLock()}})}function ae(oe){return(0,X.m)(oe?.getReader)}},4482:(vt,Me,F)=>{F.d(Me,{A:()=>X,e:()=>O});var m=F(576);function X(ae){return(0,m.m)(ae?.lift)}function O(ae){return oe=>{if(X(oe))return oe.lift(function(pe){try{return ae(pe,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(vt,Me,F)=>{F.d(Me,{U:()=>O,z:()=>X});var m=F(4671);function X(...ae){return O(ae)}function O(ae){return 0===ae.length?m.y:1===ae.length?ae[0]:function(pe){return ae.reduce((fe,Ie)=>Ie(fe),pe)}}},7849:(vt,Me,F)=>{F.d(Me,{h:()=>O});var m=F(2416),X=F(3410);function O(ae){X.z.setTimeout(()=>{const{onUnhandledError:oe}=m.v;if(!oe)throw ae;oe(ae)})}},4532:(vt,Me,F)=>{function m(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Me,{z:()=>m})},655:(vt,Me,F)=>{function ae(re,ee){var ge={};for(var ue in re)Object.prototype.hasOwnProperty.call(re,ue)&&ee.indexOf(ue)<0&&(ge[ue]=re[ue]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Ze=0;for(ue=Object.getOwnPropertySymbols(re);Ze<ue.length;Ze++)ee.indexOf(ue[Ze])<0&&Object.prototype.propertyIsEnumerable.call(re,ue[Ze])&&(ge[ue[Ze]]=re[ue[Ze]])}return ge}function Ie(re,ee,ge,ue){return new(ge||(ge=Promise))(function(Le,Lt){function Qt(or){try{Ye(ue.next(or))}catch(Ji){Lt(Ji)}}function rn(or){try{Ye(ue.throw(or))}catch(Ji){Lt(Ji)}}function Ye(or){or.done?Le(or.value):function Ze(Le){return Le instanceof ge?Le:new ge(function(Lt){Lt(Le)})}(or.value).then(Qt,rn)}Ye((ue=ue.apply(re,ee||[])).next())})}function ye(re){return this instanceof ye?(this.v=re,this):new ye(re)}function we(re,ee,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ze,ue=ge.apply(re,ee||[]),Le=[];return Ze={},Lt("next"),Lt("throw"),Lt("return"),Ze[Symbol.asyncIterator]=function(){return this},Ze;function Lt(At){ue[At]&&(Ze[At]=function(It){return new Promise(function(Fn,bn){Le.push([At,It,Fn,bn])>1||Qt(At,It)})})}function Qt(At,It){try{!function rn(At){At.value instanceof ye?Promise.resolve(At.value.v).then(Ye,or):Ji(Le[0][2],At)}(ue[At](It))}catch(Fn){Ji(Le[0][3],Fn)}}function Ye(At){Qt("next",At)}function or(At){Qt("throw",At)}function Ji(At,It){At(It),Le.shift(),Le.length&&Qt(Le[0][0],Le[0][1])}}function wt(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ee=re[Symbol.asyncIterator];return ee?ee.call(re):(re=function W(re){var ee="function"==typeof Symbol&&Symbol.iterator,ge=ee&&re[ee],ue=0;if(ge)return ge.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&ue>=re.length&&(re=void 0),{value:re&&re[ue++],done:!re}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ge={},ue("next"),ue("throw"),ue("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ue(Le){ge[Le]=re[Le]&&function(Lt){return new Promise(function(Qt,rn){!function Ze(Le,Lt,Qt,rn){Promise.resolve(rn).then(function(Ye){Le({value:Ye,done:Qt})},Lt)}(Qt,rn,(Lt=re[Le](Lt)).done,Lt.value)})}}}F.d(Me,{FC:()=>we,KL:()=>wt,_T:()=>ae,mG:()=>Ie,qq:()=>ye})},4650:(vt,Me,F)=>{F.d(Me,{$8M:()=>na,$Z:()=>I_,AFp:()=>Nd,ALo:()=>bd,AaK:()=>Ie,AsE:()=>by,BQk:()=>Dy,CHM:()=>fl,CRH:()=>ND,CZH:()=>cv,CqO:()=>Bc,D6c:()=>yS,EJc:()=>JD,EpF:()=>Ke,F4k:()=>Ty,FYo:()=>hu,FiY:()=>_o,G48:()=>cS,GfV:()=>Yl,JOm:()=>hs,KtG:()=>pl,LFG:()=>Vn,LSH:()=>Gl,Lbi:()=>YD,Lck:()=>bg,MAs:()=>cI,MMx:()=>Ky,NdJ:()=>K_,OlP:()=>vn,PXZ:()=>lw,Q6J:()=>Iy,QGY:()=>af,QP$:()=>Ct,QbO:()=>X0,Qsj:()=>bp,R0b:()=>oo,RDi:()=>Dm,Rgc:()=>Sd,SBq:()=>bc,Sil:()=>nw,Suo:()=>kg,TTD:()=>pi,TgZ:()=>ag,W1O:()=>Fg,X6Q:()=>pw,XFs:()=>ct,Xpm:()=>Mn,Xts:()=>Wl,Y36:()=>no,YKP:()=>_f,YNc:()=>uI,Yjl:()=>q,Yz7:()=>It,Z0I:()=>li,ZZ4:()=>em,_UZ:()=>ft,_Vd:()=>lu,_c5:()=>mS,_uU:()=>r0,aQg:()=>Dv,c2e:()=>rS,cJS:()=>bn,cg1:()=>xy,dDg:()=>oS,dqk:()=>dn,eFA:()=>dT,eoX:()=>aT,f3M:()=>uc,g9A:()=>Y0,h0i:()=>Kc,hGG:()=>Iw,hij:()=>ci,iGM:()=>ev,ifc:()=>_t,ip1:()=>Q0,jDz:()=>A0,kL8:()=>_n,lG2:()=>U,lcZ:()=>k0,lqb:()=>us,lri:()=>oT,oAB:()=>Wr,oxw:()=>fs,q4F:()=>ei,qLn:()=>Ae,qZA:()=>An,rWj:()=>fv,sBO:()=>yT,sIi:()=>sg,s_b:()=>Ng,soG:()=>Hg,tb:()=>J0,tp0:()=>aa,uIk:()=>Ea,vHH:()=>be,vpe:()=>bi,wAp:()=>St,xp6:()=>Ym,ynx:()=>Kt,z2F:()=>yv,zSh:()=>mp,zs3:()=>pu});var m=F(7579),X=F(727),O=F(9751),ae=F(6451),oe=F(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function Ie(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ie).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=pe({__forward_ref__:pe});function H(s){return s.__forward_ref__=H,s.toString=function(){return Ie(this())},s}function W(s){return function je(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===H}(s)?s():s}class be extends Error{constructor(o,a){super(function at(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s,o){throw new be(-201,!1)}function rn(s,o){null==s&&function Ye(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function It(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function bn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Dr(s){return di(s,es)||di(s,Na)}function li(s){return null!==Dr(s)}function di(s,o){return s.hasOwnProperty(o)?s[o]:null}function Xi(s){return s&&(s.hasOwnProperty(Mi)||s.hasOwnProperty(jo))?s[Mi]:null}const es=pe({\u0275prov:pe}),Mi=pe({\u0275inj:pe}),Na=pe({ngInjectableDef:pe}),jo=pe({ngInjectorDef:pe});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let Fr;function Lr(s){const o=Fr;return Fr=s,o}function $o(s,o,a){const l=Dr(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ct.Optional?null:void 0!==o?o:void De(Ie(s))}function tr(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),_t=(()=>{return(s=_t||(_t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",_t;var s})();const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gn={},Dt=[],dr=pe({\u0275cmp:pe}),cn=pe({\u0275dir:pe}),Ho=pe({\u0275pipe:pe}),en=pe({\u0275mod:pe}),nr=pe({\u0275fac:pe}),hr=pe({__NG_ELEMENT_ID__:pe});let Ni=0;function Mn(s){return tr(()=>{const a=!0===s.standalone,l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||_t.Emulated,id:"c"+Ni++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,_=s.features;return d.inputs=V(s.inputs,l),d.outputs=V(s.outputs),_&&_.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(ns).filter(Ln):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(ze).filter(Ln):null,d})}function ns(s){return ce(s)||Y(s)}function Ln(s){return null!==s}function Wr(s){return tr(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function V(s,o){if(null==s)return Gn;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const U=Mn;function q(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ce(s){return s[dr]||null}function Y(s){return s[cn]||null}function ze(s){return s[Ho]||null}function Ct(s){const o=ce(s)||Y(s)||ze(s);return null!==o&&o.standalone}function Pt(s,o){const a=s[en]||null;if(!a&&!0===o)throw new Error(`Type ${Ie(s)} does not have '\u0275mod' property.`);return a}function rr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Vr(s){return Array.isArray(s)&&!0===s[1]}function Go(s){return 0!=(8&s.flags)}function Pu(s){return 2==(2&s.flags)}function ys(s){return 1==(1&s.flags)}function ki(s){return null!==s.template}function qo(s){return 0!=(256&s[2])}function vs(s,o){return s.hasOwnProperty(nr)?s[nr]:null}class qf{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function pi(){return eh}function eh(s){return s.type.prototype.ngOnChanges&&(s.setInput=ll),Oa}function Oa(){const s=Wf(this),o=s?.current;if(o){const a=s.previous;if(a===Gn)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function ll(s,o,a,l){const d=Wf(s)||function dl(s,o){return s[Ou]=o}(s,{previous:Gn,current:null}),g=d.current||(d.current={}),_=d.previous,I=this.declaredInputs[a],b=_[I];g[I]=new qf(b&&b.currentValue,o,_===Gn),s[l]=o}pi.ngInherit=!0;const Ou="__ngSimpleChanges__";function Wf(s){return s[Ou]||null}function Un(s){for(;Array.isArray(s);)s=s[0];return s}function Zr(s,o){return Un(o[s.index])}function Bu(s,o){return s.data[o]}function Wo(s,o){return s[o]}function qt(s,o){const a=o[s];return rr(a)?a:a[0]}function ws(s){return 64==(64&s[2])}function Qr(s,o){return null==o?null:s[o]}function Fa(s){s[18]=0}function yr(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Rt={lFrame:yl(null),bindingsEnabled:!0};function La(){return Rt.bindingsEnabled}function Se(){return Rt.lFrame.lView}function Ht(){return Rt.lFrame.tView}function fl(s){return Rt.lFrame.contextLView=s,s[8]}function pl(s){return Rt.lFrame.contextLView=null,s}function Rn(){let s=ju();for(;null!==s&&64===s.type;)s=s.parent;return s}function ju(){return Rt.lFrame.currentTNode}function Yr(s,o){const a=Rt.lFrame;a.currentTNode=s,a.isParent=o}function Va(){return Rt.lFrame.isParent}function gl(){Rt.lFrame.isParent=!1}function Es(){return Rt.lFrame.bindingIndex++}function _m(s,o){const a=Rt.lFrame;a.bindingIndex=a.bindingRootIndex=s,ah(o)}function ah(s){Rt.lFrame.currentDirectiveIndex=s}function Yf(){return Rt.lFrame.currentQueryIndex}function Li(s){Rt.lFrame.currentQueryIndex=s}function Gu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ja(s,o,a){if(a&ct.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&ct.Host||(d=Gu(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=Rt.lFrame=$a();return l.currentTNode=o,l.lView=s,!0}function ml(s){const o=$a(),a=s[1];Rt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function $a(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?yl(s):o}function yl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ha(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const uh=Ha;function co(){const s=Ha();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Wt(){return Rt.lFrame.selectedIndex}function is(s){Rt.lFrame.selectedIndex=s}function In(){const s=Rt.lFrame;return Bu(s.tView,s.selectedIndex)}function Ds(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:N}=g;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),I&&((s.contentHooks||(s.contentHooks=[])).push(a,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(a,N)}}function Yo(s,o,a){Ks(s,o,3,a)}function ss(s,o,a,l){(3&s[2])===a&&Ks(s,o,a,l)}function Wu(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Ks(s,o,a,l){const g=l??-1,_=o.length-1;let I=0;for(let b=void 0!==l?65535&s[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=l&&I>=l)break}else o[b]<0&&(s[18]+=65536),(I<g||-1==g)&&(Ku(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Ku(s,o,a,l){const d=a[l]<0,g=a[l+1],I=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class lo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Xo(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const g=a[l++],_=a[l++],I=a[l++];s.setAttribute(o,_,I,g)}else{const g=d,_=a[++l];dh(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),l++}}return l}function Xf(s){return 3===s||4===s||6===s}function dh(s){return 64===s.charCodeAt(0)}function ea(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||hh(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function hh(s,o,a,l,d){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){_=-1;break}if(I>o){_=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function Il(s){return-1!==s}function Ga(s){return 32767&s}function ho(s,o){let a=function fh(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let ph=!0;function Zs(s){const o=ph;return ph=s,o}let Qu=0;const Ts={};function Wa(s,o){const a=Ys(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Dl(l.data,s),Dl(o,null),Dl(l.blueprint,null));const d=fo(s,o),g=s.injectorIndex;if(Il(d)){const _=Ga(d),I=ho(d,o),b=I[1].data;for(let A=0;A<8;A++)o[g+A]=I[_+A]|b[_+A]}return o[g+8]=d,g}function Dl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ys(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function fo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Xu(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ta(s,o,a){!function mh(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(hr)&&(l=a[hr]),null==l&&(l=a[hr]=Qu++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Yu(s,o,a){if(a&ct.Optional||void 0!==s)return s;De()}function Tl(s,o,a,l){if(a&ct.Optional&&void 0===l&&(l=null),0==(a&(ct.Self|ct.Host))){const d=s[9],g=Lr(void 0);try{return d?d.get(o,l,a&ct.Optional):$o(o,l,a&ct.Optional)}finally{Lr(g)}}return Yu(l,0,a)}function yh(s,o,a,l=ct.Default,d){if(null!==s){if(1024&o[2]){const _=function Sl(s,o,a,l,d){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[2]&&!(256&_[2]);){const I=Ju(g,_,a,l|ct.Self,Ts);if(I!==Ts)return I;let b=g.parent;if(!b){const A=_[21];if(A){const N=A.get(a,Ts,l);if(N!==Ts)return N}b=Xu(_),_=_[15]}g=b}return d}(s,o,a,l,Ts);if(_!==Ts)return _}const g=Ju(s,o,a,l,Ts);if(g!==Ts)return g}return Tl(o,a,l,d)}function Ju(s,o,a,l,d){const g=function po(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(hr)?s[hr]:void 0;return"number"==typeof o?o>=0?255&o:tp:o}(a);if("function"==typeof g){if(!ja(o,s,l))return l&ct.Host?Yu(d,0,l):Tl(o,a,l,d);try{const _=g(l);if(null!=_||l&ct.Optional)return _;De()}finally{uh()}}else if("number"==typeof g){let _=null,I=Ys(s,o),b=-1,A=l&ct.Host?o[16][6]:null;for((-1===I||l&ct.SkipSelf)&&(b=-1===I?fo(s,o):o[I+8],-1!==b&&bl(l,!1)?(_=o[1],I=Ga(b),o=ho(b,o)):I=-1);-1!==I;){const N=o[1];if(ep(g,I,N.data)){const k=Uv(I,o,a,_,l,A);if(k!==Ts)return k}b=o[I+8],-1!==b&&bl(l,o[1].data[I+8]===A)&&ep(g,I,o)?(_=N,I=Ga(b),o=ho(b,o)):I=-1}}return d}function Uv(s,o,a,l,d,g){const _=o[1],I=_.data[s+8],N=bs(I,_,a,null==l?Pu(I)&&ph:l!=_&&0!=(3&I.type),d&ct.Host&&g===I);return null!==N?Za(o,_,N,I):Ts}function bs(s,o,a,l,d){const g=s.providerIndexes,_=o.data,I=1048575&g,b=s.directiveStart,N=g>>20,z=d?I+N:s.directiveEnd;for(let J=l?I:I+N;J<z;J++){const Te=_[J];if(J<b&&a===Te||J>=b&&Te.type===a)return J}if(d){const J=_[b];if(J&&ki(J)&&J.type===a)return b}return null}function Za(s,o,a,l){let d=s[a];const g=o.data;if(function za(s){return s instanceof lo}(d)){const _=d;_.resolving&&function pt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new be(-200,`Circular dependency in DI detected for ${s}${a}`)}(function we(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(g[a]));const I=Zs(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Lr(_.injectImpl):null;ja(s,l,ct.Default);try{d=s[a]=_.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Qo(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const _=eh(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==b&&Lr(b),Zs(I),_.resolving=!1,uh()}}return d}function ep(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function bl(s,o){return!(s&ct.Self||s&ct.Host&&o)}class Js{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return yh(this._tNode,this._lView,o,l,a)}}function tp(){return new Js(Rn(),Se())}function Xu(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function na(s){return function Ka(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(Xf(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(Rn(),s)}const Nn="__parameters__";function mo(s,o,a){return tr(()=>{const l=function Qa(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const _=new d(...g);return I.annotation=_,I;function I(b,A,N){const k=b.hasOwnProperty(Nn)?b[Nn]:Object.defineProperty(b,Nn,{value:[]})[Nn];for(;k.length<=N;)k.push(null);return(k[N]=k[N]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class vn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=It({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Wn(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Wn(l,o)):o!==s&&o.push(l)}return o}function Cs(s,o){s.forEach(a=>Array.isArray(a)?Cs(a,o):o(a))}function Xa(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Ss(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Vi={},As="__NG_DI_FLAG__",Cr="ngTempTokenPath",Ih=/\n/gm,iu="__source";let yo;function Sr(s){const o=yo;return yo=s,o}function Rl(s,o=ct.Default){if(void 0===yo)throw new be(-203,!1);return null===yo?$o(s,void 0,o):yo.get(s,o&ct.Optional?null:void 0,o)}function Vn(s,o=ct.Default){return(function Ri(){return Fr}()||Rl)(W(s),o)}function uc(s,o=ct.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Vn(s,o)}function Th(s){const o=[];for(let a=0;a<s.length;a++){const l=W(s[a]);if(Array.isArray(l)){if(0===l.length)throw new be(900,!1);let d,g=ct.Default;for(let _=0;_<l.length;_++){const I=l[_],b=Nl(I);"number"==typeof b?-1===b?d=I.token:g|=b:d=I}o.push(Vn(d,g))}else o.push(Vn(l))}return o}function vo(s,o){return s[As]=o,s.prototype[As]=o,s}function Nl(s){return s[As]}const _o=vo(mo("Optional"),8),aa=vo(mo("SkipSelf"),4);let su;function Dm(s){su=s}class _c{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Bn=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function Gl(s){const o=function uu(){const s=Se();return s&&s[12]}();return o?o.sanitize(Kn.URL,s)||"":function x(s,o){const a=function P(s){return s instanceof _c&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?function T(s){return s instanceof _c?s.changingThisBreaksApplicationSecurity:s}(s):function Ns(s){return(s=String(s)).match(Bn)?s:"unsafe:"+s}(ye(s))}const Wl=new vn("ENVIRONMENT_INITIALIZER"),Kl=new vn("INJECTOR",-1),xm=new vn("INJECTOR_DEF_TYPES");class pp{get(o,a=Vi){if(a===Vi){const l=new Error(`NullInjectorError: No provider for ${Ie(o)}!`);throw l.name="NullInjectorError",l}return a}}function gp(...s){return{\u0275providers:Mm(0,s)}}function Mm(s,...o){const a=[],l=new Set;let d;return Cs(o,g=>{const _=g;cu(_,a,[],l)&&(d||(d=[]),d.push(_))}),void 0!==d&&Rm(d,a),a}function Rm(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];Cs(d,g=>{o.push(g)})}}function cu(s,o,a,l){if(!(s=W(s)))return!1;let d=null,g=Xi(s);const _=!g&&ce(s);if(g||_){if(_&&!_.standalone)return!1;d=s}else{const b=s.ngModule;if(g=Xi(b),!g)return!1;d=b}const I=l.has(d);if(_){if(I)return!1;if(l.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of b)cu(A,o,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let A;l.add(d);try{Cs(g.imports,N=>{cu(N,o,a,l)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&Rm(A,o)}if(!I){const A=vs(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Dt},{provide:xm,useValue:d,multi:!0},{provide:Wl,useValue:()=>Vn(d),multi:!0})}const b=g.providers;null==b||I||Cs(b,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}const Rh=pe({provide:String,useValue:pe});function Zl(s){return null!==s&&"object"==typeof s&&Rh in s}function ha(s){return"function"==typeof s}const mp=new vn("Set Injector scope."),Dc={},oE={};let yp;function Nh(){return void 0===yp&&(yp=new pp),yp}class us{}class Ph extends us{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ep(o,_=>this.processProvider(_)),this.records.set(Kl,Tc(void 0,this)),d.has("environment")&&this.records.set(us,Tc(void 0,this));const g=this.records.get(mp);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(xm.multi,Dt,ct.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Sr(this),l=Lr(void 0);try{return o()}finally{Sr(a),Lr(l)}}get(o,a=Vi,l=ct.Default){this.assertNotDestroyed();const d=Sr(this),g=Lr(void 0);try{if(!(l&ct.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function _p(s){return"function"==typeof s||"object"==typeof s&&s instanceof vn}(o)&&Dr(o);I=b&&this.injectableDefInScope(b)?Tc(Ql(o),Dc):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&ct.Self?Nh():this.parent).get(o,a=l&ct.Optional&&a===Vi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Cr]=_[Cr]||[]).unshift(Ie(o)),d)throw _;return function Pl(s,o,a,l){const d=s[Cr];throw o[iu]&&d.unshift(o[iu]),s.message=function cc(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=Ie(o);if(Array.isArray(o))d=o.map(Ie).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let I=o[_];g.push(_+":"+("string"==typeof I?JSON.stringify(I):Ie(I)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Ih,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Cr]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Lr(g),Sr(d)}}resolveInjectorInitializers(){const o=Sr(this),a=Lr(void 0);try{const l=this.get(Wl.multi,Dt,ct.Self);for(const d of l)d()}finally{Sr(o),Lr(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(Ie(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(o){let a=ha(o=W(o))?o:W(o&&o.provide);const l=function Zv(s){return Zl(s)?Tc(void 0,s.useValue):Tc(function km(s,o,a){let l;if(ha(s)){const d=W(s);return vs(d)||Ql(d)}if(Zl(s))l=()=>W(s.useValue);else if(function Pm(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Th(s.deps||[]));else if(function da(s){return!(!s||!s.useExisting)}(s))l=()=>Vn(W(s.useExisting));else{const d=W(s&&(s.useClass||s.provide));if(!function Om(s){return!!s.deps}(s))return vs(d)||Ql(d);l=()=>new d(...Th(s.deps))}return l}(s),Dc)}(o);if(ha(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Tc(void 0,Dc,!0),d.factory=()=>Th(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Dc&&(a.value=oE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function vp(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ql(s){const o=Dr(s),a=null!==o?o.factory:vs(s);if(null!==a)return a;if(s instanceof vn)throw new be(204,!1);if(s instanceof Function)return function aE(s){const o=s.length;if(o>0)throw function ia(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new be(204,!1);const a=function Bo(s){const o=s&&(s[es]||s[Na]);if(o){const a=function Ra(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new be(204,!1)}function Tc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function wp(s){return!!s.\u0275providers}function Ep(s,o){for(const a of s)Array.isArray(a)?Ep(a,o):wp(a)?Ep(a.\u0275providers,o):o(a)}class Dp{}class Yv{resolveComponentFactory(o){throw function $i(s){const o=Error(`No component factory found for ${Ie(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let lu=(()=>{class s{}return s.NULL=new Yv,s})();function Tp(){return du(Rn(),Se())}function du(s,o){return new bc(Zr(s,o))}let bc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Tp,s})();function cs(s){return s instanceof bc?s.nativeElement:s}class hu{}let bp=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Jv(){const s=Se(),a=qt(Rn().index,s);return(rr(a)?a:s)[11]}(),s})(),Xv=(()=>{class s{}return s.\u0275prov=It({token:s,providedIn:"root",factory:()=>null}),s})();class Yl{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const ei=new Yl("14.2.4"),Jl={};function Q(s){return s.ngOriginalError}class Ae{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Q(o);for(;a&&Q(a);)a=Q(a);return a||null}}const kh=new Map;let Bm=0;const lE="__ngContext__";function xr(s,o){rr(o)?(s[lE]=o[20],function jm(s){kh.set(s[20],s)}(o)):s[lE]=o}function fu(s){return s instanceof Function?s():s}var hs=(()=>((hs=hs||{})[hs.Important=1]="Important",hs[hs.DashCase=2]="DashCase",hs))();function Mr(s,o){return undefined(s,o)}function Sc(s){const o=s[3];return Vr(o)?o[3]:o}function id(s){return yE(s[13])}function sd(s){return yE(s[4])}function yE(s){for(;null!==s&&!Vr(s);)s=s[4];return s}function Ii(s,o,a,l,d){if(null!=l){let g,_=!1;Vr(l)?g=l:rr(l)&&(_=!0,l=l[0]);const I=Un(l);0===s&&null!==a?null==d?_E(o,a,I):ad(o,a,I,d||null,!0):1===s&&null!==a?ad(o,a,I,d||null,!0):2===s?function EE(s,o,a){const l=So(s,o);l&&function zm(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,I,_):3===s&&o.destroyNode(I),null!=g&&function DE(s,o,a,l,d){const g=a[7];g!==Un(a)&&Ii(o,s,l,g,d);for(let I=10;I<a.length;I++){const b=a[I];ga(b[1],b,s,o,l,g)}}(o,s,g,a,d)}}function Ee(s,o,a){return s.createElement(o,a)}function Xe(s,o){const a=s[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,yr(d,-1)),a.splice(l,1)}function Rp(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&Xe(d,l),o>0&&(s[a-1][4]=l[4]);const g=Ss(s,10+o);!function od(s,o){ga(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=g[19];null!==_&&_.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Vt(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&ga(s,o,a,3,null,null),function ln(s){let o=s[13];if(!o)return Uh(s[1],s);for(;o;){let a=null;if(rr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)rr(o)&&Uh(o[1],o),o=o[3];null===o&&(o=s),rr(o)&&Uh(o[1],o),a=o&&o[4]}o=a}}(o)}}function Uh(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Vb(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof lo)){const g=a[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const I=d[g[_]],b=g[_+1];try{b.call(I)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function Np(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],I="function"==typeof _?_(o):Un(o[_]),b=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?I.removeEventListener(a[g],b,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const _=l[d=a[g+1]];a[g].call(_)}if(null!==l){for(let g=d+1;g<l.length;g++)(0,l[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Vr(o[3])){a!==o[3]&&Xe(a,o);const l=o[19];null!==l&&l.detachView(s)}!function nd(s){kh.delete(s[20])}(o)}}function Hm(s,o,a){return function vE(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===_t.None||d===_t.Emulated)return null}return Zr(l,a)}(s,o.parent,a)}function ad(s,o,a,l,d){s.insertBefore(o,a,l,d)}function _E(s,o,a){s.appendChild(o,a)}function ii(s,o,a,l,d){null!==l?ad(s,o,a,l,d):_E(s,o,a)}function So(s,o){return s.parentNode(o)}let a_=function Gm(s,o,a){return 40&s.type?Zr(s,a):null};function xc(s,o,a,l){const d=Hm(s,l,o),g=o[11],I=function o_(s,o,a){return a_(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)ii(g,d,a[b],I,!1);else ii(g,d,a,I,!1)}function ud(s,o){if(null!==o){const a=o.type;if(3&a)return Zr(o,s);if(4&a)return Pp(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return ud(s,l);{const d=s[o.index];return Vr(d)?Pp(-1,d):Un(d)}}if(32&a)return Mr(o,s)()||Un(s[o.index]);{const l=Ao(s,o);return null!==l?Array.isArray(l)?l[0]:ud(Sc(s[16]),l):ud(s,o.next)}}return null}function Ao(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Pp(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return ud(l,d)}return o[7]}function u_(s,o,a,l,d,g,_){for(;null!=a;){const I=l[a.index],b=a.type;if(_&&0===o&&(I&&xr(Un(I),l),a.flags|=4),64!=(64&a.flags))if(8&b)u_(s,o,a.child,l,d,g,!1),Ii(o,s,d,I,g);else if(32&b){const A=Mr(a,l);let N;for(;N=A();)Ii(o,s,d,N,g);Ii(o,s,d,I,g)}else 16&b?qm(s,o,l,a,d,g):Ii(o,s,d,I,g);a=_?a.projectionNext:a.next}}function ga(s,o,a,l,d,g){u_(a,l,s.firstChild,o,d,g,!1)}function qm(s,o,a,l,d,g){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Ii(o,s,d,b[A],g);else u_(s,o,b,_[3],d,g,!0)}function c_(s,o,a){s.setAttribute(o,"style",a)}function kp(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function Wm(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const Km="ng-template";function l_(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==Wm(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function d_(s){return 4===s.type&&s.value!==Km}function $b(s,o,a){return o===(4!==s.type||a?s.value:Km)}function Op(s,o,a){let l=4;const d=s.attrs||[],g=function Zm(s){for(let o=0;o<s.length;o++)if(Xf(s[o]))return o;return s.length}(d);let _=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!$b(s,b,a)||""===b&&1===o.length){if(xo(l))return!1;_=!0}}else{const A=8&l?b:o[++I];if(8&l&&null!==s.attrs){if(!l_(s.attrs,A,a)){if(xo(l))return!1;_=!0}continue}const k=Fp(8&l?"class":b,d,d_(s),a);if(-1===k){if(xo(l))return!1;_=!0;continue}if(""!==A){let z;z=k>g?"":d[k+1].toLowerCase();const J=8&l?z:null;if(J&&-1!==Wm(J,A,0)||2&l&&A!==z){if(xo(l))return!1;_=!0}}}}else{if(!_&&!xo(l)&&!xo(b))return!1;if(_&&xo(b))continue;_=!1,l=b|1&l}}return xo(l)||_}function xo(s){return 0==(1&s)}function Fp(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function h_(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function bE(s,o,a=!1){for(let l=0;l<o.length;l++)if(Op(s,o[l],a))return!0;return!1}function f_(s,o){return s?":not("+o.trim()+")":o}function CE(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&l){const I=s[++a];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!xo(_)&&(o+=f_(g,d),d=""),l=_,g=g||!xo(l);a++}return""!==d&&(o+=f_(g,d)),o}const Bt={};function Ym(s){Jm(Ht(),Se(),Wt()+s,!1)}function Jm(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Yo(o,g,a)}else{const g=s.preOrderHooks;null!==g&&ss(o,g,0,a)}is(a)}function ey(s,o=null,a=null,l){const d=ty(s,o,a,l);return d.resolveInjectorInitializers(),d}function ty(s,o=null,a=null,l,d=new Set){const g=[a||Dt,gp(s)];return l=l||("object"==typeof s?void 0:Ie(s)),new Ph(g,o||Nh(),l||null,d)}let pu=(()=>{class s{static create(a,l){if(Array.isArray(a))return ey({name:""},l,a,"");{const d=a.name??"";return ey({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=Vi,s.NULL=new pp,s.\u0275prov=It({token:s,providedIn:"any",factory:()=>Vn(Kl)}),s.__NG_ELEMENT_ID__=-1,s})();function no(s,o=ct.Default){const a=Se();return null===a?Vn(s,o):yh(Rn(),a,W(s),o)}function I_(){throw new Error("invalid")}function Kh(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const _=s.data[g];Li(d),_.contentQueries(2,o[g],g)}}}function Wp(s,o,a,l,d,g,_,I,b,A,N){const k=o.blueprint.slice();return k[0]=d,k[2]=76|l,(null!==N||s&&1024&s[2])&&(k[2]|=1024),Fa(k),k[3]=k[15]=s,k[8]=a,k[10]=_||s&&s[10],k[11]=I||s&&s[11],k[12]=b||s&&s[12]||null,k[9]=A||s&&s[9]||null,k[6]=g,k[20]=function Sp(){return Bm++}(),k[21]=N,k[16]=2==o.type?s[16]:k,k}function hd(s,o,a,l,d){let g=s.data[o];if(null===g)g=function kc(s,o,a,l,d){const g=ju(),_=Va(),b=s.data[o]=function iC(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(s,o,a,l,d),function oh(){return Rt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const _=function Zo(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Yr(g,!0),g}function Zh(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function N_(s,o,a){ml(o);try{const l=s.viewQuery;null!==l&&Jh(1,l,a);const d=s.template;null!==d&&$E(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Kh(s,o),s.staticViewQueries&&Jh(2,s.viewQuery,a);const g=s.components;null!==g&&function jE(s,o){for(let a=0;a<o.length;a++)tg(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,co()}}function Kp(s,o,a,l){const d=o[2];if(128!=(128&d)){ml(o);try{Fa(o),function Jr(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&$E(s,o,a,2,l);const _=3==(3&d);if(_){const A=s.preOrderCheckHooks;null!==A&&Yo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&ss(o,A,0,null),Wu(o,0)}if(function py(s){for(let o=id(s);null!==o;o=sd(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(512&d[2])&&yr(g,1),d[2]|=512}}}(o),function ZE(s){for(let o=id(s);null!==o;o=sd(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ws(l)&&Kp(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&Kh(s,o),_){const A=s.contentCheckHooks;null!==A&&Yo(o,A)}else{const A=s.contentHooks;null!==A&&ss(o,A,1),Wu(o,1)}!function nC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)is(~d);else{const g=d,_=a[++l],I=a[++l];_m(_,g),I(2,o[g])}}}finally{is(-1)}}(s,o);const I=s.components;null!==I&&function Pc(s,o){for(let a=0;a<o.length;a++)lC(s,o[a])}(o,I);const b=s.viewQuery;if(null!==b&&Jh(2,b,l),_){const A=s.viewCheckHooks;null!==A&&Yo(o,A)}else{const A=s.viewHooks;null!==A&&ss(o,A,2),Wu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,yr(o[3],-1))}finally{co()}}}function $E(s,o,a,l,d){const g=Wt(),_=2&l;try{is(-1),_&&o.length>22&&Jm(s,o,22,!1),a(l,d)}finally{is(g)}}function P_(s,o,a){if(Go(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}function uy(s,o,a){!La()||(function aC(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||Wa(a,o),xr(l,o);const _=a.initialInputs;for(let I=d;I<g;I++){const b=s.data[I],A=ki(b);A&&cC(o,a,b);const N=Za(o,s,I,a);xr(N,o),null!==_&&Xp(0,I-d,N,b,0,_),A&&(qt(a.index,o)[8]=N)}}(s,o,a,Zr(a,o)),128==(128&a.flags)&&function uC(s,o,a){const l=a.directiveStart,d=a.directiveEnd,g=a.index,_=function zu(){return Rt.lFrame.currentDirectiveIndex}();try{is(g);for(let I=l;I<d;I++){const b=s.data[I],A=o[I];ah(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&F_(b,A)}}finally{is(-1),ah(_)}}(s,o,a))}function Zp(s,o,a=Zr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],I=-1===_?a(o,s):s[_];s[d++]=I}}}function cy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ly(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ly(s,o,a,l,d,g,_,I,b,A){const N=22+l,k=N+d,z=function HE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Bt);return a}(N,k),J="function"==typeof A?A():A;return z[1]={type:s,blueprint:z,template:a,queries:null,viewQuery:I,declTNode:o,data:z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:J,incompleteFirstPass:!1}}function zE(s,o,a,l){const d=V_(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&Oc(s).push(l,d.length-1))}function Qp(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Qh(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,_=[];let I=null,b=null;for(let A=o.directiveStart;A<l;A++){const N=d[A],k=N.inputs,z=null===g||d_(o)?null:WE(k,g);_.push(z),I=Qp(k,A,I),b=Qp(N.outputs,A,b)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=I,o.outputs=b}function k_(s,o){const a=qt(o,s);16&a[2]||(a[2]|=32)}function Hn(s,o,a,l){let d=!1;if(La()){const g=function GE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const _=l[g];bE(a,_.selectors,!1)&&(d||(d=[]),ta(Wa(a,o),s,_.type),ki(_)?(L_(s,a),d.unshift(_)):d.push(_))}return d}(s,o,a),_=null===l?null:{"":-1};if(null!==g){d=!0,Ro(a,s.data.length,g.length);for(let N=0;N<g.length;N++){const k=g[N];k.providersResolver&&k.providersResolver(k)}let I=!1,b=!1,A=Zh(s,o,g.length,null);for(let N=0;N<g.length;N++){const k=g[N];a.mergedAttrs=ea(a.mergedAttrs,k.hostAttrs),U_(s,a,o,A,k),qE(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const z=k.type.prototype;!I&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),I=!0),!b&&(z.ngOnChanges||z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),A++}Qh(s,a)}_&&function fy(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new be(-301,!1);l.push(o[d],g)}}}(a,l,_)}return a.mergedAttrs=ea(a.mergedAttrs,a.attrs),d}function O_(s,o,a,l,d,g){const _=g.hostBindings;if(_){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const b=~o.index;(function oC(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=b&&I.push(b),I.push(l,d,_)}}function F_(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function L_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function qE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;ki(o)&&(a[""]=s)}}function Ro(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function U_(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=vs(d.type)),_=new lo(g,ki(d),no);s.blueprint[l]=_,a[l]=_,O_(s,o,0,l,Zh(s,a,d.hostVars,Bt),d)}function cC(s,o,a){const l=Zr(o,s),d=cy(a),g=s[10],_=ng(s,Wp(s,d,null,a.onPush?32:16,l,o,g,g.createRenderer(l,a),null,null,null));s[o.index]=_}function No(s,o,a,l,d,g){const _=Zr(s,o);!function Jp(s,o,a,l,d,g,_){if(null==g)s.removeAttribute(o,d,a);else{const I=null==_?ye(g):_(g,l||"",d);s.setAttribute(o,d,I,a)}}(o[11],_,g,s.value,a,l,d)}function Xp(s,o,a,l,d,g){const _=g[o];if(null!==_){const I=l.setInput;for(let b=0;b<_.length;){const A=_[b++],N=_[b++],k=_[b++];null!==I?l.setInput(a,k,A,N):a[N]=k}}}function WE(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function eg(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function lC(s,o){const a=qt(o,s);if(ws(a)){const l=a[1];48&a[2]?Kp(l,a,l.template,a[8]):a[5]>0&&gy(a)}}function gy(s){for(let l=id(s);null!==l;l=sd(l))for(let d=10;d<l.length;d++){const g=l[d];if(ws(g))if(512&g[2]){const _=g[1];Kp(_,g,_.template,g[8])}else g[5]>0&&gy(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=qt(a[l],s);ws(d)&&d[5]>0&&gy(d)}}function tg(s,o){const a=qt(o,s),l=a[1];(function QE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),N_(l,a,a[8])}function ng(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function rg(s){for(;s;){s[2]|=32;const o=Sc(s);if(qo(s)&&!o)return s;s=o}return null}function Yh(s,o,a,l=!0){const d=o[10];d.begin&&d.begin();try{Kp(s,o,s.template,a)}catch(_){throw l&&j_(o,_),_}finally{d.end&&d.end()}}function Jh(s,o,a){Li(0),o(s,a)}function V_(s){return s[7]||(s[7]=[])}function Oc(s){return s.cleanup||(s.cleanup=[])}function j_(s,o){const a=s[9],l=a?a.get(Ae,null):null;l&&l.handleError(o)}function my(s,o,a,l,d){for(let g=0;g<a.length;){const _=a[g++],I=a[g++],b=o[_],A=s.data[_];null!==A.setInput?A.setInput(b,d,l,I):b[I]=d}}function ya(s,o,a){const l=function gi(s,o){return Un(o[s])}(o,s);!function Fb(s,o,a){s.setValue(o,a)}(s[11],l,a)}function fd(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const I=o[_];"number"==typeof I?g=I:1==g?d=me(d,I):2==g&&(l=me(l,I+": "+o[++_]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function Di(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(Un(g)),Vr(g))for(let I=10;I<g.length;I++){const b=g[I],A=b[1].firstChild;null!==A&&Di(b[1],b,A,l)}const _=a.type;if(8&_)Di(s,o,a.child,l);else if(32&_){const I=Mr(a,o);let b;for(;b=I();)l.push(b)}else if(16&_){const I=Ao(o,a);if(Array.isArray(I))l.push(...I);else{const b=Sc(o[16]);Di(b[1],b,I,l,!0)}}a=d?a.projectionNext:a.next}return l}class Xh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Di(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Rp(o,l),Ss(a,l))}this._attachedToViewContainer=!1}Vt(this._lView[1],this._lView)}onDestroy(o){zE(this._lView[1],this._lView,null,o)}markForCheck(){rg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Yh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ac(s,o){ga(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=o}}class YE extends Xh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Yh(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Fc extends lu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ce(o);return new un(a,this.ngModule)}}function JE(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class $_{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Jl,l);return d!==Jl||a===Jl?d:this.parentInjector.get(o,a,l)}}class un extends Dp{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function SE(s){return s.map(CE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return JE(this.componentDef.inputs)}get outputs(){return JE(this.componentDef.outputs)}create(o,a,l,d){let g=(d=d||this.ngModule)instanceof us?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new $_(o,g):o,I=_.get(hu,null);if(null===I)throw new be(407,!1);const b=_.get(Xv,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",k=l?function rC(s,o,a){return s.selectRootElement(o,a===_t.ShadowDom)}(A,l,this.componentDef.encapsulation):Ee(I.createRenderer(null,this.componentDef),N,function Po(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),z=this.componentDef.onPush?288:272,J=ly(0,null,null,1,0,null,null,null,null,null),Te=Wp(null,J,null,z,null,null,I,A,b,_,null);let Ue,We;ml(Te);try{const dt=function H_(s,o,a,l,d,g){const _=a[1];a[22]=s;const b=hd(_,22,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(fd(b,A,!0),null!==s&&(Xo(d,s,A),null!==b.classes&&kp(d,s,b.classes),null!==b.styles&&c_(d,s,b.styles)));const N=l.createRenderer(s,o),k=Wp(a,cy(o),null,o.onPush?32:16,a[22],b,l,N,g||null,null,null);return _.firstCreatePass&&(ta(Wa(b,a),_,o.type),L_(_,b),Ro(b,a.length,1)),ng(a,k),a[22]=k}(k,this.componentDef,Te,I,A);if(k)if(l)Xo(A,k,["ng-version",ei.full]);else{const{attrs:bt,classes:xe}=function Qm(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!xo(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);bt&&Xo(A,k,bt),xe&&xe.length>0&&kp(A,k,xe.join(" "))}if(We=Bu(J,22),void 0!==a){const bt=We.projection=[];for(let xe=0;xe<this.ngContentSelectors.length;xe++){const Mt=a[xe];bt.push(null!=Mt?Array.from(Mt):null)}}Ue=function ef(s,o,a,l){const d=a[1],g=function sC(s,o,a){const l=Rn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),U_(s,l,o,Zh(s,o,1,null),a),Qh(s,l));const d=Za(o,s,l.directiveStart,l);xr(d,o);const g=Zr(l,o);return g&&xr(g,o),d}(d,a,o);if(s[8]=a[8]=g,null!==l)for(const I of l)I(g,o);if(o.contentQueries){const I=Rn();o.contentQueries(1,g,I.directiveStart)}const _=Rn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(is(_.index),O_(a[1],_,0,_.directiveStart,_.directiveEnd,o),F_(o,g)),g}(dt,this.componentDef,Te,[z_]),N_(J,Te,null)}finally{co()}return new va(this.componentType,Ue,du(We,Te),Te,We)}}class va extends class Ip{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new YE(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const g=this._rootLView;my(g[1],g,d,o,a),k_(g,this._tNode.index)}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function z_(){const s=Rn();Ds(Se()[1],s)}let wy=null;function pd(){if(!wy){const s=dn.Symbol;if(s&&s.iterator)wy=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(wy=l)}}}return wy}function sg(s){return!!q_(s)&&(Array.isArray(s)||!(s instanceof Map)&&pd()in s)}function q_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ur(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Ea(s,o,a,l){const d=Se();return ur(d,Es(),o)&&(Ht(),No(In(),d,s,o,a,l)),Ea}function Pe(s,o,a,l,d,g){const I=function Lc(s,o,a,l){const d=ur(s,o,a);return ur(s,o+1,l)||d}(s,function br(){return Rt.lFrame.bindingIndex}(),a,d);return function mi(s){const o=Rt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2),I?o+ye(a)+l+ye(d)+g:Bt}function uI(s,o,a,l,d,g,_,I){const b=Se(),A=Ht(),N=s+22,k=A.firstCreatePass?function aI(s,o,a,l,d,g,_,I,b){const A=o.consts,N=hd(o,s,4,_||null,Qr(A,I));Hn(o,a,N,Qr(A,b)),Ds(o,N);const k=N.tViews=ly(2,N,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),k.queries=o.queries.embeddedTView(N)),N}(N,A,b,o,a,l,d,g,_):A.data[N];Yr(k,!1);const z=b[11].createComment("");xc(A,b,z,k),xr(z,b),ng(b,b[N]=eg(z,b,z,k)),ys(k)&&uy(A,b,k),null!=_&&Zp(b,k,I)}function cI(s){return Wo(function ih(){return Rt.lFrame.contextLView}(),22+s)}function Iy(s,o,a){const l=Se();return ur(l,Es(),o)&&function qi(s,o,a,l,d,g,_,I){const b=Zr(o,a);let N,A=o.inputs;!I&&null!=A&&(N=A[l])?(my(s,a,N,l,d),Pu(o)&&k_(a,o.index)):3&o.type&&(l=function dy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=_?_(d,o.value||"",l):d,g.setProperty(b,l,d))}(Ht(),In(),l,s,o,l[11],a,!1),Iy}function Ot(s,o,a,l,d){const _=d?"class":"style";my(s,a,o.inputs[_],_,l)}function ag(s,o,a,l){const d=Se(),g=Ht(),_=22+s,I=d[11],b=d[_]=Ee(I,o,function Ws(){return Rt.lFrame.currentNamespace}()),A=g.firstCreatePass?function sf(s,o,a,l,d,g,_){const I=o.consts,A=hd(o,s,2,d,Qr(I,g));return Hn(o,a,A,Qr(I,_)),null!==A.attrs&&fd(A,A.attrs,!1),null!==A.mergedAttrs&&fd(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(_,g,d,0,o,a,l):g.data[_];Yr(A,!0);const N=A.mergedAttrs;null!==N&&Xo(I,b,N);const k=A.classes;null!==k&&kp(I,b,k);const z=A.styles;return null!==z&&c_(I,b,z),64!=(64&A.flags)&&xc(g,d,b,A),0===function Ko(){return Rt.lFrame.elementDepthCount}()&&xr(b,d),function nh(){Rt.lFrame.elementDepthCount++}(),ys(A)&&(uy(g,d,A),P_(g,A,d)),null!==l&&Zp(d,A),ag}function An(){let s=Rn();Va()?gl():(s=s.parent,Yr(s,!1));const o=s;!function rh(){Rt.lFrame.elementDepthCount--}();const a=Ht();return a.firstCreatePass&&(Ds(a,s),Go(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Jo(s){return 0!=(16&s.flags)}(o)&&Ot(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function lh(s){return 0!=(32&s.flags)}(o)&&Ot(a,o,Se(),o.stylesWithoutHost,!1),An}function ft(s,o,a,l){return ag(s,o,a,l),An(),ft}function Kt(s,o,a){const l=Se(),d=Ht(),g=s+22,_=d.firstCreatePass?function ug(s,o,a,l,d){const g=o.consts,_=Qr(g,l),I=hd(o,s,8,"ng-container",_);return null!==_&&fd(I,_,!0),Hn(o,a,I,Qr(g,d)),null!==o.queries&&o.queries.elementStart(o,I),I}(g,d,l,o,a):d.data[g];Yr(_,!0);const I=l[g]=l[11].createComment("");return xc(d,l,I,_),xr(I,l),ys(_)&&(uy(d,l,_),P_(d,_,l)),null!=a&&Zp(l,_),Kt}function Dy(){let s=Rn();const o=Ht();return Va()?gl():(s=s.parent,Yr(s,!1)),o.firstCreatePass&&(Ds(o,s),Go(s)&&o.queries.elementEnd(s)),Dy}function Ke(){return Se()}function af(s){return!!s&&"function"==typeof s.then}function Ty(s){return!!s&&"function"==typeof s.subscribe}const Bc=Ty;function K_(s,o,a,l){const d=Se(),g=Ht(),_=Rn();return function uf(s,o,a,l,d,g,_,I){const b=ys(l),N=s.firstCreatePass&&Oc(s),k=o[8],z=V_(o);let J=!0;if(3&l.type||I){const We=Zr(l,o),dt=I?I(We):We,bt=z.length,xe=I?gn=>I(Un(gn[l.index])):l.index;let Mt=null;if(!I&&b&&(Mt=function yC(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===a&&d[g+1]===l){const I=o[7],b=d[g+2];return I.length>b?I[b]:null}"string"==typeof _&&(g+=2)}return null}(s,o,d,l.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=g,Mt.__ngLastListenerFn__=g,J=!1;else{g=Q_(l,o,k,g,!1);const gn=a.listen(dt,d,g);z.push(g,gn),N&&N.push(d,xe,bt,bt+1)}}else g=Q_(l,o,k,g,!1);const Te=l.outputs;let Ue;if(J&&null!==Te&&(Ue=Te[d])){const We=Ue.length;if(We)for(let dt=0;dt<We;dt+=2){const Tn=o[Ue[dt]][Ue[dt+1]].subscribe(g),Fd=z.length;z.push(g,Tn),N&&N.push(d,l.index,Fd,-(Fd+1))}}}(g,d,d[11],_,s,o,0,l),K_}function Z_(s,o,a,l){try{return!1!==a(l)}catch(d){return j_(s,d),!1}}function Q_(s,o,a,l,d){return function g(_){if(_===Function)return l;rg(2&s.flags?qt(s.index,o):o);let b=Z_(o,0,l,_),A=g.__ngNextListenerFn__;for(;A;)b=Z_(o,0,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function fs(s=1){return function Is(s){return(Rt.lFrame.contextLView=function Jf(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function r0(s,o=""){const a=Se(),l=Ht(),d=s+22,g=l.firstCreatePass?hd(l,d,1,o,null):l.data[d],_=a[d]=function Fs(s,o){return s.createText(o)}(a[11],o);xc(l,a,_,g),Yr(g,!1)}function ci(s,o,a){const l=Se(),d=function nf(s,o,a,l){return ur(s,Es(),a)?o+ye(a)+l:Bt}(l,s,o,a);return d!==Bt&&ya(l,Wt(),d),ci}function by(s,o,a,l,d){const g=Se(),_=Pe(g,s,o,a,l,d);return _!==Bt&&ya(g,Wt(),_),by}const ps=void 0;var OI=["en",[["a","p"],["AM","PM"],ps],[["AM","PM"],ps,ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ps,"{1} 'at' {0}",ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kI(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Lo={};function xy(s){const o=function LI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=_d(o);if(a)return a;const l=o.split("-")[0];if(a=_d(l),a)return a;if("en"===l)return OI;throw new be(701,!1)}function _n(s){return xy(s)[St.PluralCase]}function _d(s){return s in Lo||(Lo[s]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[s]),Lo[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const wd="en-US";let BI=wd;class Kc{}class _f{}function bg(s,o){return new Cg(s,o??null)}class Cg extends Kc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fc(this);const l=Pt(o);this._bootstrapComponents=fu(l.bootstrap),this._r3Injector=ty(o,a,[{provide:Kc,useValue:this},{provide:lu,useValue:this.componentFactoryResolver}],Ie(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Wy extends _f{constructor(o){super(),this.moduleType=o}create(o){return new Cg(this.moduleType,o)}}class uD extends Kc{constructor(o,a,l){super(),this.componentFactoryResolver=new Fc(this),this.instance=null;const d=new Ph([...o,{provide:Kc,useValue:this},{provide:lu,useValue:this.componentFactoryResolver}],a||Nh(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Ky(s,o,a=null){return new uD(s,o,a).injector}let FC=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=Mm(0,a.type),d=l.length>0?Ky([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=It({token:s,providedIn:"environment",factory:()=>new s(Vn(us))}),s})();function A0(s){s.getStandaloneInjector=o=>o.get(FC).getOrCreateStandaloneInjector(s)}function P0(s,o,a,l,d,g){const _=o+a;return ur(s,_,d)?function wa(s,o,a){return s[o]=a}(s,_+1,g?l.call(g,d):l(d)):function Mg(s,o){const a=s[o];return a===Bt?void 0:a}(s,_+1)}function bd(s,o){const a=Ht();let l;const d=s+22;a.firstCreatePass?(l=function TD(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=vs(l.type)),_=Lr(no);try{const I=Zs(!1),b=g();return Zs(I),function sx(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Se(),d,b),b}finally{Lr(_)}}function k0(s,o,a){const l=s+22,d=Se(),g=Wo(d,l);return function Zc(s,o){return s[1].data[o].pure}(d,l)?P0(d,function $n(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,g.transform,a,g):g.transform(a)}function bu(s){return o=>{setTimeout(s,void 0,o)}}const bi=class Cd extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,g=a||(()=>null),_=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),g=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(g=bu(g),d&&(d=bu(d)),_&&(_=bu(_)));const I=super.subscribe({next:d,error:g,complete:_});return o instanceof X.w0&&o.add(I),I}};function Rg(){return this._results[pd()]()}class Qy{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=pd(),l=Qy.prototype;l[a]||(l[a]=Rg)}get changes(){return this._changes||(this._changes=new bi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Wn(o);(this._changesDetected=!function sp(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sd=(()=>{class s{}return s.__NG_ELEMENT_ID__=AD,s})();const O0=Sd,SD=class extends O0{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Wp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),N_(l,d,o),new Xh(d)}};function AD(){return Yy(Rn(),Se())}function Yy(s,o){return 4&s.type?new SD(o,s,du(s,o)):null}let Ng=(()=>{class s{}return s.__NG_ELEMENT_ID__=xD,s})();function xD(){return L0(Rn(),Se())}const Jy=Ng,Ef=class extends Jy{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return du(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const o=fo(this._hostTNode,this._hostLView);if(Il(o)){const a=ho(o,this._hostLView),l=Ga(o);return new Js(a[1].data[l+8],a)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Qc(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const _=o.createEmbeddedView(a||{},g);return this.insert(_,d),_}createComponent(o,a,l,d,g){const _=o&&!function Ja(s){return"function"==typeof s}(o);let I;if(_)I=a;else{const k=a||{};I=k.index,l=k.injector,d=k.projectableNodes,g=k.environmentInjector||k.ngModuleRef}const b=_?o:new un(ce(o)),A=l||this.parentInjector;if(!g&&null==b.ngModule){const z=(_?A:this.parentInjector).get(us,null);z&&(g=z)}const N=b.create(A,d,void 0,g);return this.insert(N.hostView,I),N}insert(o,a){const l=o._lView,d=l[1];if(function th(s){return Vr(s[3])}(l)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const k=l[3],z=new Ef(k,k[6],k[3]);z.detach(z.indexOf(o))}}const g=this._adjustIndex(a),_=this._lContainer;!function Ub(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],Xa(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Co(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,l,_,g);const I=Pp(g,_),b=l[11],A=So(b,_[7]);return null!==A&&function $m(s,o,a,l,d,g){l[0]=d,l[6]=o,ga(s,l,a,1,d,g)}(d,_[6],b,l,A,I),o.attachToViewContainerRef(),Xa(F0(_),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Qc(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Rp(this._lContainer,a);l&&(Ss(F0(this._lContainer),a),Vt(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Rp(this._lContainer,a);return l&&null!=Ss(F0(this._lContainer),a)?new Xh(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function Qc(s){return s[8]}function F0(s){return s[8]||(s[8]=[])}function L0(s,o){let a;const l=o[s.index];if(Vr(l))a=l;else{let d;if(8&s.type)d=Un(l);else{const g=o[11];d=g.createComment("");const _=Zr(s,o);ad(g,So(g,_),d,function Bb(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=a=eg(l,o,d,s),ng(o,a)}return new Ef(a,s,o)}class Ad{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ad(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const _=a.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new Cu(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==If(o,a).matches&&this.queries[a].setDirty()}}class Su{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Xy{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Xy(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class U0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new U0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,MD(a,g)),this.matchTNodeWithReadOption(o,a,bs(a,o,g,!1,!1))}else l===Sd?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,bs(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===bc||d===Ng||d===Sd&&4&a.type)this.addMatch(a.index,-2);else{const g=bs(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function MD(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function V0(s,o,a,l){return-1===a?function GC(s,o){return 11&s.type?du(s,o):4&s.type?Yy(s,o):null}(o,s):-2===a?function B0(s,o,a){return a===bc?du(o,s):a===Sd?Yy(o,s):a===Ng?L0(o,s):void 0}(s,o,l):Za(s,s[1],a,o)}function j0(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,_=a.matches,I=[];for(let b=0;b<_.length;b+=2){const A=_[b];I.push(A<0?null:V0(o,g[A],_[b+1],a.metadata.read))}d.matches=I}return d.matches}function Pg(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const _=j0(s,o,d,a);for(let I=0;I<g.length;I+=2){const b=g[I];if(b>0)l.push(_[I/2]);else{const A=g[I+1],N=o[-b];for(let k=10;k<N.length;k++){const z=N[k];z[17]===z[3]&&Pg(z[1],z,A,l)}if(null!==N[9]){const k=N[9];for(let z=0;z<k.length;z++){const J=k[z];Pg(J[1],J,A,l)}}}}}return l}function ev(s){const o=Se(),a=Ht(),l=Yf();Li(l+1);const d=If(a,l);if(s.dirty&&function vm(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Pg(a,o,l,[]):j0(a,o,d,l);s.reset(g,cs),s.notifyOnChanges()}return!0}return!1}function kg(s,o,a,l){const d=Ht();if(d.firstCreatePass){const g=Rn();(function PD(s,o,a){null===s.queries&&(s.queries=new Xy),s.queries.track(new U0(o,a))})(d,new Su(o,a,l),g.index),function kD(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Og(s,o,a){const l=new Qy(4==(4&a));zE(s,o,l,l.destroy),null===o[19]&&(o[19]=new Cu),o[19].queries.push(new Ad(l))}(d,Se(),a)}function ND(){return function $0(s,o){return s[19].queries[o].queryList}(Se(),Yf())}function If(s,o){return s.queries.getByIndex(o)}function Fg(s,o){return Yy(s,o)}function $g(...s){}const Q0=new vn("Application Initializer");let cv=(()=>{class s{constructor(a){this.appInits=a,this.resolve=$g,this.reject=$g,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(af(g))a.push(g);else if(Bc(g)){const _=new Promise((I,b)=>{g.subscribe({complete:I,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Vn(Q0,8))},s.\u0275prov=It({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Nd=new vn("AppId",{providedIn:"root",factory:function Pd(){return`${bf()}${bf()}${bf()}`}});function bf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Y0=new vn("Platform Initializer"),YD=new vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),J0=new vn("appBootstrapListener"),X0=new vn("AnimationModuleType");let rS=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=It({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Hg=new vn("LocaleId",{providedIn:"root",factory:()=>uc(Hg,ct.Optional|ct.SkipSelf)||function ew(){return typeof $localize<"u"&&$localize.locale||wd}()}),JD=new vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class dv{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let nw=(()=>{class s{compileModuleSync(a){return new Wy(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=fu(Pt(a).declarations).reduce((_,I)=>{const b=ce(I);return b&&_.push(new un(b)),_},[]);return new dv(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=It({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const iS=(()=>Promise.resolve(0))();function ow(s){typeof Zone>"u"?iS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class oo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bi(!1),this.onMicrotaskEmpty=new bi(!1),this.onStable=new bi(!1),this.onError=new bi(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Si(){let s=dn.requestAnimationFrame,o=dn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function aw(s){const o=()=>{!function zg(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(dn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,hv(s),s.isCheckStableRunning=!0,Cf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),hv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,_,I)=>{try{return iT(s),a.invokeTask(d,g,_,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),sT(s)}},onInvoke:(a,l,d,g,_,I,b)=>{try{return iT(s),a.invoke(d,g,_,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),sT(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,hv(s),Cf(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oo.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(oo.isInAngularZone())throw new be(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,o,rT,$g,$g);try{return g.runTask(_,a,l)}finally{g.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const rT={};function Cf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function hv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function iT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function sT(s){s._nesting--,Cf(s)}class sS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bi,this.onMicrotaskEmpty=new bi,this.onStable=new bi,this.onError=new bi}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const oT=new vn(""),fv=new vn("");let qg,oS=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,qg||(function Gg(s){qg=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oo.assertNotInAngularZone(),ow(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ow(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Vn(oo),Vn(aT),Vn(fv))},s.\u0275prov=It({token:s,factory:s.\u0275fac}),s})(),aT=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return qg?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=It({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),$s=null;const pv=new vn("AllowMultipleToken"),Sf=new vn("PlatformDestroyListeners");class lw{constructor(o,a){this.name=o,this.token=a}}function dT(s,o,a=[]){const l=`Platform: ${o}`,d=new vn(l);return(g=[])=>{let _=Af();if(!_||_.injector.get(pv,!1)){const I=[...a,...g,{provide:d,useValue:!0}];s?s(I):function Jc(s){if($s&&!$s.get(pv,!1))throw new be(400,!1);$s=s;const o=s.get(gv);(function cT(s){const o=s.get(Y0,null);o&&o.forEach(a=>a())})(s)}(function hT(s=[],o){return pu.create({name:o,providers:[{provide:mp,useValue:"platform"},{provide:Sf,useValue:new Set([()=>$s=null])},...s]})}(I,l))}return function dw(s){const o=Af();if(!o)throw new be(401,!1);return o}()}}function Af(){return $s?.get(gv)??null}let gv=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function kd(s,o){let a;return a="noop"===s?new sS:("zone.js"===s?void 0:s)||new oo(o),a}(l?.ngZone,function hw(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:oo,useValue:d}];return d.run(()=>{const _=pu.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(_),b=I.injector.get(Ae,null);if(!b)throw new be(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:N=>{b.handleError(N)}});I.onDestroy(()=>{Wg(this._modules,I),A.unsubscribe()})}),function mv(s,o,a){try{const l=a();return af(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,d,()=>{const A=I.injector.get(cv);return A.runInitializers(),A.donePromise.then(()=>(function f0(s){rn(s,"Expected localeId to be defined"),"string"==typeof s&&(BI=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Hg,wd)||wd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,l=[]){const d=pT({},l);return function uw(s,o,a){const l=new Wy(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(yv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new be(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Sf,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Vn(pu))},s.\u0275prov=It({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function pT(s,o){return Array.isArray(o)?o.reduce(pT,s):{...s,...o}}let yv=(()=>{class s{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new O.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{oo.assertNotInAngularZone(),ow(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{oo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(g,_.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Dp;if(!this._injector.get(cv).done)throw!d&&Ct(a),new be(405,false);let _;_=d?a:this._injector.get(lu).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function cw(s){return s.isBoundToModule}(_)?void 0:this._injector.get(Kc),A=_.create(pu.NULL,[],l||_.selector,I),N=A.location.nativeElement,k=A.injector.get(oT,null);return k?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),Wg(this.components,A),k?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Wg(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(J0,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Wg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new be(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Vn(oo),Vn(us),Vn(Ae))},s.\u0275prov=It({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Wg(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let vv=!0,gT=!1;function pw(){return gT=!0,vv}function cS(){if(gT)throw new Error("Cannot enable prod mode after platform setup.");vv=!1}let yT=(()=>{class s{}return s.__NG_ELEMENT_ID__=gw,s})();function gw(s){return function mw(s,o,a){if(Pu(s)&&!a){const l=qt(s.index,o);return new Xh(l,l)}return 47&s.type?new Xh(o[16],o):null}(Rn(),Se(),16==(16&s))}class vw{constructor(){}supports(o){return sg(o)}create(o){return new IT(o)}}const ET=(s,o)=>o;class IT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ET}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const _=!l||a&&a.currentIndex<TT(l,d,g)?a:l,I=TT(_,d,g),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{g||(g=[]);const A=I-d,N=b-d;if(A!=N){for(let z=0;z<A;z++){const J=z<g.length?g[z]:g[z]=0,Te=J+z;N<=Te&&Te<A&&(g[z]=J+1)}g[_.previousIndex]=N-A}}I!==b&&o(_,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!sg(o))throw new be(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],_=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,g,_,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,I),l=!0),a=a._next}else d=0,function nI(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[pd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,I=>{_=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,I,_,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new pS(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new DT),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class pS{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class DT{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new gS,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TT(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Ev{constructor(){}supports(o){return o instanceof Map||q_(o)}create(){return new _w}}class _w{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||q_(o)))throw new be(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const l=new ww(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class ww{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bT(){return new em([new vw])}let em=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||bT()),deps:[[s,new aa,new _o]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new be(901,!1)}}return s.\u0275prov=It({token:s,providedIn:"root",factory:bT}),s})();function Iv(){return new Dv([new Ev])}let Dv=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Iv()),deps:[[s,new aa,new _o]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new be(901,!1)}}return s.\u0275prov=It({token:s,providedIn:"root",factory:Iv}),s})();const mS=dT(null,"core",[]);let Iw=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Vn(yv))},s.\u0275mod=Wr({type:s}),s.\u0275inj=bn({}),s})();function yS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(vt,Me,F)=>{F.d(Me,{Z:()=>be});var m=F(2090),X=F(4859),O=F(6881),ae=F(1877);class oe{constructor(ye,we){this._delegate=ye,this.firebase=we,(0,O._addComponent)(ye,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ye,we=O._DEFAULT_ENTRY_NAME){var pt;this._delegate.checkDestroyed();const wt=this._delegate.container.getProvider(ye);return!wt.isInitialized()&&"EXPLICIT"===(null===(pt=wt.getComponent())||void 0===pt?void 0:pt.instantiationMode)&&wt.initialize(),wt.getImmediate({identifier:we})}_removeServiceInstance(ye,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(we)}_addComponent(ye){(0,O._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,O._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function me(){const at=function Ie(at){const ye={},we={__esModule:!0,initializeApp:function Oe(Ve,st={}){const ne=O.initializeApp(Ve,st);if((0,m.r3)(ye,ne.name))return ye[ne.name];const re=new at(ne,we);return ye[ne.name]=re,re},app:wt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Ve){const st=Ve.name,ne=st.replace("-compat","");if(O._registerComponent(Ve)&&"PUBLIC"===Ve.type){const re=(ee=wt())=>{if("function"!=typeof ee[ne])throw fe.create("invalid-app-argument",{appName:st});return ee[ne]()};void 0!==Ve.serviceProps&&(0,m.ZB)(re,Ve.serviceProps),we[ne]=re,at.prototype[ne]=function(...ee){return this._getService.bind(this,st).apply(this,Ve.multipleInstances?ee:[])}}return"PUBLIC"===Ve.type?we[ne]:null},removeApp:function pt(Ve){delete ye[Ve]},useAsService:function Ge(Ve,st){return"serverAuth"===st?null:st},modularAPIs:O}};function wt(Ve){if(!(0,m.r3)(ye,Ve=Ve||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Ve});return ye[Ve]}return we.default=we,Object.defineProperty(we,"apps",{get:function De(){return Object.keys(ye).map(Ve=>ye[Ve])}}),wt.App=at,we}(oe);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ye(we){(0,m.ZB)(at,we)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),at}(),H=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=j;!function Re(at){(0,O.registerVersion)("@firebase/app-compat","0.2.13",at)}()},6881:(vt,Me,F)=>{F.r(Me),F.d(Me,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Ho,_DEFAULT_ENTRY_NAME:()=>hi,_addComponent:()=>it,_addOrOverwriteComponent:()=>_t,_apps:()=>Dn,_clearComponents:()=>Gn,_components:()=>Xt,_getProvider:()=>ts,_registerComponent:()=>dn,_removeServiceInstance:()=>qr,deleteApp:()=>Ni,getApp:()=>nr,getApps:()=>hr,initializeApp:()=>en,onLog:()=>ns,registerVersion:()=>fr,setLogLevel:()=>Ln});var m=F(5861),X=F(4859),O=F(1877),ae=F(2090);let pe,fe;const j=new WeakMap,H=new WeakMap,W=new WeakMap,je=new WeakMap,Re=new WeakMap;let ye={get(ie,te,Ne){if(ie instanceof IDBTransaction){if("done"===te)return H.get(ie);if("objectStoreNames"===te)return ie.objectStoreNames||W.get(ie);if("store"===te)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return Oe(ie[te])},set:(ie,te,Ne)=>(ie[te]=Ne,!0),has:(ie,te)=>ie instanceof IDBTransaction&&("done"===te||"store"===te)||te in ie};function wt(ie){return"function"==typeof ie?function pt(ie){return ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ie)?function(...te){return ie.apply(De(this),te),Oe(j.get(this))}:function(...te){return Oe(ie.apply(De(this),te))}:function(te,...Ne){const ke=ie.call(De(this),te,...Ne);return W.set(ke,te.sort?te.sort():[te]),Oe(ke)}}(ie):(ie instanceof IDBTransaction&&function at(ie){if(H.has(ie))return;const te=new Promise((Ne,ke)=>{const Et=()=>{ie.removeEventListener("complete",kt),ie.removeEventListener("error",tn),ie.removeEventListener("abort",tn)},kt=()=>{Ne(),Et()},tn=()=>{ke(ie.error||new DOMException("AbortError","AbortError")),Et()};ie.addEventListener("complete",kt),ie.addEventListener("error",tn),ie.addEventListener("abort",tn)});H.set(ie,te)}(ie),((ie,te)=>te.some(Ne=>ie instanceof Ne))(ie,function Ie(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ie,ye):ie)}function Oe(ie){if(ie instanceof IDBRequest)return function be(ie){const te=new Promise((Ne,ke)=>{const Et=()=>{ie.removeEventListener("success",kt),ie.removeEventListener("error",tn)},kt=()=>{Ne(Oe(ie.result)),Et()},tn=()=>{ke(ie.error),Et()};ie.addEventListener("success",kt),ie.addEventListener("error",tn)});return te.then(Ne=>{Ne instanceof IDBCursor&&j.set(Ne,ie)}).catch(()=>{}),Re.set(te,ie),te}(ie);if(je.has(ie))return je.get(ie);const te=wt(ie);return te!==ie&&(je.set(ie,te),Re.set(te,ie)),te}const De=ie=>Re.get(ie),Ve=["get","getKey","getAll","getAllKeys","count"],st=["put","add","delete","clear"],ne=new Map;function re(ie,te){if(!(ie instanceof IDBDatabase)||te in ie||"string"!=typeof te)return;if(ne.get(te))return ne.get(te);const Ne=te.replace(/FromIndex$/,""),ke=te!==Ne,Et=st.includes(Ne);if(!(Ne in(ke?IDBIndex:IDBObjectStore).prototype)||!Et&&!Ve.includes(Ne))return;const kt=function(){var tn=(0,m.Z)(function*(Cn,...Gt){const gr=this.transaction(Cn,Et?"readwrite":"readonly");let fi=gr.store;return ke&&(fi=fi.index(Gt.shift())),(yield Promise.all([fi[Ne](...Gt),Et&&gr.done]))[0]});return function(Gt){return tn.apply(this,arguments)}}();return ne.set(te,kt),kt}!function we(ie){ye=ie(ye)}(ie=>({...ie,get:(te,Ne,ke)=>re(te,Ne)||ie.get(te,Ne,ke),has:(te,Ne)=>!!re(te,Ne)||ie.has(te,Ne)}));class ee{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function ge(ie){return"VERSION"===ie.getComponent()?.type}(Ne)){const ke=Ne.getImmediate();return`${ke.library}/${ke.version}`}return null}).filter(Ne=>Ne).join(" ")}}const ue="@firebase/app",Le=new O.Yd("@firebase/app"),hi="[DEFAULT]",tr={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dn=new Map,Xt=new Map;function it(ie,te){try{ie.container.addComponent(te)}catch(Ne){Le.debug(`Component ${te.name} failed to register with FirebaseApp ${ie.name}`,Ne)}}function _t(ie,te){ie.container.addOrOverwriteComponent(te)}function dn(ie){const te=ie.name;if(Xt.has(te))return Le.debug(`There were multiple attempts to register component ${te}.`),!1;Xt.set(te,ie);for(const Ne of Dn.values())it(Ne,ie);return!0}function ts(ie,te){const Ne=ie.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),ie.container.getProvider(te)}function qr(ie,te,Ne=hi){ts(ie,te).clearInstance(Ne)}function Gn(){Xt.clear()}const dr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cn{constructor(te,Ne,ke){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=ke,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}const Ho="9.23.0";function en(ie,te={}){let Ne=ie;"object"!=typeof te&&(te={name:te});const ke=Object.assign({name:hi,automaticDataCollectionEnabled:!1},te),Et=ke.name;if("string"!=typeof Et||!Et)throw dr.create("bad-app-name",{appName:String(Et)});if(Ne||(Ne=(0,ae.aH)()),!Ne)throw dr.create("no-options");const kt=Dn.get(Et);if(kt){if((0,ae.vZ)(Ne,kt.options)&&(0,ae.vZ)(ke,kt.config))return kt;throw dr.create("duplicate-app",{appName:Et})}const tn=new X.H0(Et);for(const Gt of Xt.values())tn.addComponent(Gt);const Cn=new cn(Ne,ke,tn);return Dn.set(Et,Cn),Cn}function nr(ie=hi){const te=Dn.get(ie);if(!te&&ie===hi&&(0,ae.aH)())return en();if(!te)throw dr.create("no-app",{appName:ie});return te}function hr(){return Array.from(Dn.values())}function Ni(ie){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,m.Z)(function*(ie){const te=ie.name;Dn.has(te)&&(Dn.delete(te),yield Promise.all(ie.container.getProviders().map(Ne=>Ne.delete())),ie.isDeleted=!0)})).apply(this,arguments)}function fr(ie,te,Ne){var ke;let Et=null!==(ke=tr[ie])&&void 0!==ke?ke:ie;Ne&&(Et+=`-${Ne}`);const kt=Et.match(/\s|\//),tn=te.match(/\s|\//);if(kt||tn){const Cn=[`Unable to register library "${Et}" with version "${te}":`];return kt&&Cn.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),kt&&tn&&Cn.push("and"),tn&&Cn.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void Le.warn(Cn.join(" "))}dn(new X.wA(`${Et}-version`,()=>({library:Et,version:te}),"VERSION"))}function ns(ie,te){if(null!==ie&&"function"!=typeof ie)throw dr.create("invalid-log-argument");(0,O.Am)(ie,te)}function Ln(ie){(0,O.Ub)(ie)}const V="firebase-heartbeat-store";let U=null;function q(){return U||(U=function ve(ie,te,{blocked:Ne,upgrade:ke,blocking:Et,terminated:kt}={}){const tn=indexedDB.open(ie,te),Cn=Oe(tn);return ke&&tn.addEventListener("upgradeneeded",Gt=>{ke(Oe(tn.result),Gt.oldVersion,Gt.newVersion,Oe(tn.transaction),Gt)}),Ne&&tn.addEventListener("blocked",Gt=>Ne(Gt.oldVersion,Gt.newVersion,Gt)),Cn.then(Gt=>{kt&&Gt.addEventListener("close",()=>kt()),Et&&Gt.addEventListener("versionchange",gr=>Et(gr.oldVersion,gr.newVersion,gr))}).catch(()=>{}),Cn}("firebase-heartbeat-database",1,{upgrade:(ie,te)=>{0===te&&ie.createObjectStore(V)}}).catch(ie=>{throw dr.create("idb-open",{originalErrorMessage:ie.message})})),U}function Y(){return(Y=(0,m.Z)(function*(ie){try{return yield(yield q()).transaction(V).objectStore(V).get(Pt(ie))}catch(te){if(te instanceof ae.ZR)Le.warn(te.message);else{const Ne=dr.create("idb-get",{originalErrorMessage:te?.message});Le.warn(Ne.message)}}})).apply(this,arguments)}function ze(ie,te){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,m.Z)(function*(ie,te){try{const ke=(yield q()).transaction(V,"readwrite");yield ke.objectStore(V).put(te,Pt(ie)),yield ke.done}catch(Ne){if(Ne instanceof ae.ZR)Le.warn(Ne.message);else{const ke=dr.create("idb-set",{originalErrorMessage:Ne?.message});Le.warn(ke.message)}}})).apply(this,arguments)}function Pt(ie){return`${ie.name}!${ie.options.appId}`}class ut{constructor(te){this.container=te,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new pr(Ne),this._heartbeatsCachePromise=this._storage.read().then(ke=>(this._heartbeatsCache=ke,ke))}triggerHeartbeat(){var te=this;return(0,m.Z)(function*(){const ke=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=gt();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Et&&!te._heartbeatsCache.heartbeats.some(kt=>kt.date===Et))return te._heartbeatsCache.heartbeats.push({date:Et,agent:ke}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(kt=>{const tn=new Date(kt.date).valueOf();return Date.now()-tn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,m.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Ne=gt(),{heartbeatsToSend:ke,unsentEntries:Et}=function hn(ie,te=1024){const Ne=[];let ke=ie.slice();for(const Et of ie){const kt=Ne.find(tn=>tn.agent===Et.agent);if(kt){if(kt.dates.push(Et.date),fn(Ne)>te){kt.dates.pop();break}}else if(Ne.push({agent:Et.agent,dates:[Et.date]}),fn(Ne)>te){Ne.pop();break}ke=ke.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:ke}}(te._heartbeatsCache.heartbeats),kt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ke}));return te._heartbeatsCache.lastSentHeartbeatDate=Ne,Et.length>0?(te._heartbeatsCache.heartbeats=Et,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),kt})()}}function gt(){return(new Date).toISOString().substring(0,10)}class pr{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,m.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function ce(ie){return Y.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Ne=this;return(0,m.Z)(function*(){var ke;if(yield Ne._canUseIndexedDBPromise){const kt=yield Ne.read();return ze(Ne.app,{lastSentHeartbeatDate:null!==(ke=te.lastSentHeartbeatDate)&&void 0!==ke?ke:kt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Ne=this;return(0,m.Z)(function*(){var ke;if(yield Ne._canUseIndexedDBPromise){const kt=yield Ne.read();return ze(Ne.app,{lastSentHeartbeatDate:null!==(ke=te.lastSentHeartbeatDate)&&void 0!==ke?ke:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...te.heartbeats]})}})()}}function fn(ie){return(0,ae.L)(JSON.stringify({version:2,heartbeats:ie})).length}!function Pi(ie){dn(new X.wA("platform-logger",te=>new ee(te),"PRIVATE")),dn(new X.wA("heartbeat",te=>new ut(te),"PRIVATE")),fr(ue,"0.9.13",ie),fr(ue,"0.9.13","esm2017"),fr("fire-js","")}("")},4859:(vt,Me,F)=>{F.d(Me,{H0:()=>Ie,wA:()=>O});var m=F(5861),X=F(2090);class O{constructor(j,H,W){this.name=j,this.instanceFactory=H,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ae="[DEFAULT]";class oe{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const W=new X.BH;if(this.instancesDeferred.set(H,W),this.isInitialized(H)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:H});je&&W.resolve(je)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const W=this.normalizeInstanceIdentifier(j?.identifier),je=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Re){if(je)return null;throw Re}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function fe(me){return"EAGER"===me.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[H,W]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(H);try{const Re=this.getOrInitializeService({instanceIdentifier:je});W.resolve(Re)}catch{}}}}clearInstance(j=ae){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,m.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...H.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ae){return this.instances.has(j)}getOptions(j=ae){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,W=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:W,options:H});for(const[Re,be]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Re)&&be.resolve(je);return je}onInit(j,H){var W;const je=this.normalizeInstanceIdentifier(H),Re=null!==(W=this.onInitCallbacks.get(je))&&void 0!==W?W:new Set;Re.add(j),this.onInitCallbacks.set(je,Re);const be=this.instances.get(je);return be&&j(be,je),()=>{Re.delete(j)}}invokeOnInitCallbacks(j,H){const W=this.onInitCallbacks.get(H);if(W)for(const je of W)try{je(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let W=this.instances.get(j);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(me=j,me===ae?void 0:me),options:H}),this.instances.set(j,W),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(W,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,W)}catch{}var me;return W||null}normalizeInstanceIdentifier(j=ae){return this.component?this.component.multipleInstances?j:ae:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ie{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new oe(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(vt,Me,F)=>{F.d(Me,{Am:()=>me,Ub:()=>Ie,Yd:()=>fe,in:()=>X});const m=[];var X=(()=>{return(j=X||(X={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",X;var j})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,oe={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},pe=(j,H,...W)=>{if(H<j.logLevel)return;const je=(new Date).toISOString(),Re=oe[H];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Re](`[${je}]  ${j.name}:`,...W)};class fe{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function Ie(j){m.forEach(H=>{H.setLogLevel(j)})}function me(j,H){for(const W of m){let je=null;H&&H.level&&(je=O[H.level]),W.userLogHandler=null===j?null:(Re,be,...at)=>{const ye=at.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch{return null}}).filter(we=>we).join(" ");be>=(je??Re.logLevel)&&j({level:X[be].toLowerCase(),message:ye,args:at,type:Re.name})}}}},259:(vt,Me,F)=>{F.d(Me,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=F(6881);(0,m.registerVersion)("firebase","9.23.0","app")},9260:(vt,Me,F)=>{F.d(Me,{Z:()=>m.Z});var m=F(3942);m.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(vt,Me,F)=>{F.r(Me);var m=F(5861),X=F(3942),O=F(2090),ae=F(6881),oe=F(655),pe=F(1877),fe=F(4859);const be=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},at=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pt=new pe.Yd("@firebase/auth");function Oe(y,...h){pt.logLevel<=pe.in.ERROR&&pt.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw st(y,...h)}function ve(y,...h){return st(y,...h)}function Ge(y,h,p){const w=Object.assign(Object.assign({},at()),{[h]:p});return new O.LL("auth","Firebase",w).create(h,{appName:y.name})}function Ve(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),Ge(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(y,...h){if("string"!=typeof y){const p=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(p,...w)}return ye.create(y,...h)}function ne(y,h,...p){if(!y)throw st(h,...p)}function re(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Oe(h),new Error(h)}function ee(y,h){y||re(h)}function ge(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ue(){return"http:"===Ze()||"https:"===Ze()}function Ze(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Qt{constructor(h,p){this.shortDelay=h,this.longDelay=p,ee(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Le(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ue()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rn(y,h){ee(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Ye{static initialize(h,p,w){this.fetchImpl=h,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void re("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void re("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void re("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const or={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ji=new Qt(3e4,6e4);function At(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function It(y,h,p,w){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,m.Z)(function*(y,h,p,w,S={}){return bn(y,S,(0,m.Z)(function*(){let R={},B={};w&&("GET"===h?B=w:R={body:JSON.stringify(w)});const Q=(0,O.xO)(Object.assign({key:y.config.apiKey},B)).slice(1),Ae=yield y._getAdditionalHeaders();return Ae["Content-Type"]="application/json",y.languageCode&&(Ae["X-Firebase-Locale"]=y.languageCode),Ye.fetch()(Bo(y,y.config.apiHost,p,Q),Object.assign({method:h,headers:Ae,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function bn(y,h,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(y,h,p){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},or),h);try{const S=new Ra(y),R=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const B=yield R.json();if("needConfirmation"in B)throw Xi(y,"account-exists-with-different-credential",B);if(R.ok&&!("errorMessage"in B))return B;{const Q=R.ok?B.errorMessage:B.error.message,[Ae,Be]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ae)throw Xi(y,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ae)throw Xi(y,"email-already-in-use",B);if("USER_DISABLED"===Ae)throw Xi(y,"user-disabled",B);const tt=w[Ae]||Ae.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw Ge(y,tt,Be);De(y,tt)}}catch(S){if(S instanceof O.ZR)throw S;De(y,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function li(y,h,p,w){return di.apply(this,arguments)}function di(){return(di=(0,m.Z)(function*(y,h,p,w,S={}){const R=yield It(y,h,p,w,S);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Bo(y,h,p,w){const S=`${h}${p}?${w}`;return y.config.emulator?rn(y.config,S):`${y.config.apiScheme}://${S}`}class Ra{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(ve(this.auth,"network-request-failed")),Ji.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xi(y,h,p){const w={appName:y.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const S=ve(y,h,w);return S.customData._tokenResponse=p,S}function Mi(){return(Mi=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Na(y,h){return jo.apply(this,arguments)}function jo(){return(jo=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ct(y,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ri(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function hi(){return(hi=(0,m.Z)(function*(y,h=!1){const p=(0,O.m9)(y),w=yield p.getIdToken(h),S=Dn(w);ne(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,B=R?.sign_in_provider;return{claims:S,token:w,authTime:Ri(tr(S.auth_time)),issuedAtTime:Ri(tr(S.iat)),expirationTime:Ri(tr(S.exp)),signInProvider:B||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function tr(y){return 1e3*Number(y)}function Dn(y){const[h,p,w]=y.split(".");if(void 0===h||void 0===p||void 0===w)return Oe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(p);return S?JSON.parse(S):(Oe("Failed to decode base64 JWT payload"),null)}catch(S){return Oe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function it(y,h){return _t.apply(this,arguments)}function _t(){return(_t=(0,m.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(w){throw w instanceof O.ZR&&dn(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function dn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ts{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),w)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class qr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ri(this.lastLoginAt),this.creationTime=Ri(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gn(y){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,m.Z)(function*(y){var h;const p=y.auth,w=yield y.getIdToken(),S=yield it(y,ct(p,{idToken:w}));ne(S?.users.length,p,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const B=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?en(R.providerUserInfo):[],Q=Ho(y.providerData,B),tt=!!y.isAnonymous&&!(y.email&&R.passwordHash||Q?.length),nt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Q,metadata:new qr(R.createdAt,R.lastLoginAt),isAnonymous:tt};Object.assign(y,nt)})).apply(this,arguments)}function cn(){return(cn=(0,m.Z)(function*(y){const h=(0,O.m9)(y);yield Gn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ho(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function en(y){return y.map(h=>{var{providerId:p}=h,w=(0,oe._T)(h,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function hr(){return(hr=(0,m.Z)(function*(y,h){const p=yield bn(y,{},(0,m.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,B=Bo(y,S,"/v1/token",`key=${R}`),Q=yield y._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",Ye.fetch()(B,{method:"POST",headers:Q,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(typeof h.idToken<"u","internal-error"),ne(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Xt(y){const h=Dn(y);return ne(h,"internal-error"),ne(typeof h.exp<"u","internal-error"),ne(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var w=this;return(0,m.Z)(function*(){return ne(!w.accessToken||w.refreshToken,h,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var w=this;return(0,m.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:B}=yield function nr(y,h){return hr.apply(this,arguments)}(h,p);w.updateTokensAndExpiration(S,R,Number(B))})()}updateTokensAndExpiration(h,p,w){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,p){const{refreshToken:w,accessToken:S,expirationTime:R}=p,B=new Ni;return w&&(ne("string"==typeof w,"internal-error",{appName:h}),B.refreshToken=w),S&&(ne("string"==typeof S,"internal-error",{appName:h}),B.accessToken=S),R&&(ne("number"==typeof R,"internal-error",{appName:h}),B.expirationTime=R),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ni,this.toJSON())}_performRefresh(){return re("not implemented")}}function Mn(y,h){ne("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class fr{constructor(h){var{uid:p,auth:w,stsTokenManager:S}=h,R=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ts(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new qr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const w=yield it(p,p.stsTokenManager.getToken(p.auth,h));return ne(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(h){return function $o(y){return hi.apply(this,arguments)}(this,h)}reload(){return function dr(y){return cn.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new fr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var w=this;return(0,m.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Gn(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield it(h,function es(y,h){return Mi.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var w,S,R,B,Q,Ae,Be,tt;const nt=null!==(w=p.displayName)&&void 0!==w?w:void 0,Sn=null!==(S=p.email)&&void 0!==S?S:void 0,ks=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,td=null!==(B=p.photoURL)&&void 0!==B?B:void 0,Vm=null!==(Q=p.tenantId)&&void 0!==Q?Q:void 0,Cp=null!==(Ae=p._redirectEventId)&&void 0!==Ae?Ae:void 0,kh=null!==(Be=p.createdAt)&&void 0!==Be?Be:void 0,Bm=null!==(tt=p.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:Sp,emailVerified:jm,isAnonymous:Oh,providerData:nd,stsTokenManager:Ap}=p;ne(Sp&&Ap,h,"internal-error");const ni=Ni.fromJSON(this.name,Ap);ne("string"==typeof Sp,h,"internal-error"),Mn(nt,h.name),Mn(Sn,h.name),ne("boolean"==typeof jm,h,"internal-error"),ne("boolean"==typeof Oh,h,"internal-error"),Mn(ks,h.name),Mn(td,h.name),Mn(Vm,h.name),Mn(Cp,h.name),Mn(kh,h.name),Mn(Bm,h.name);const Fh=new fr({uid:Sp,auth:h,email:Sn,emailVerified:jm,displayName:nt,isAnonymous:Oh,photoURL:td,phoneNumber:ks,tenantId:Vm,stsTokenManager:ni,createdAt:kh,lastLoginAt:Bm});return nd&&Array.isArray(nd)&&(Fh.providerData=nd.map(n_=>Object.assign({},n_))),Cp&&(Fh._redirectEventId=Cp),Fh}static _fromIdTokenResponse(h,p,w=!1){return(0,m.Z)(function*(){const S=new Ni;S.updateFromServerResponse(p);const R=new fr({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield Gn(R),R})()}}const ns=new Map;function Ln(y){ee(y instanceof Function,"Expected a class definition");let h=ns.get(y);return h?(ee(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ns.set(y,h),h)}const Ur=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,w){var S=this;return(0,m.Z)(function*(){S.storage[p]=w})()}_get(p){var w=this;return(0,m.Z)(function*(){const S=w.storage[p];return void 0===S?null:S})()}_remove(p){var w=this;return(0,m.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return y.type="NONE",y})();function V(y,h,p){return`firebase:${y}:${h}:${p}`}class U{constructor(h,p,w){this.persistence=h,this.auth=p,this.userKey=w;const{config:S,name:R}=this.auth;this.fullUserKey=V(this.userKey,S.apiKey,R),this.fullPersistenceKey=V("persistence",S.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?fr._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,w="authUser"){return(0,m.Z)(function*(){if(!p.length)return new U(Ln(Ur),h,w);const S=(yield Promise.all(p.map(function(){var Be=(0,m.Z)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let R=S[0]||Ln(Ur);const B=V(w,h.config.apiKey,h.name);let Q=null;for(const Be of p)try{const tt=yield Be._get(B);if(tt){const nt=fr._fromJSON(h,tt);Be!==R&&(Q=nt),R=Be;break}}catch{}const Ae=S.filter(Be=>Be._shouldAllowMigration);return R._shouldAllowMigration&&Ae.length?(R=Ae[0],Q&&(yield R._set(B,Q.toJSON())),yield Promise.all(p.map(function(){var Be=(0,m.Z)(function*(tt){if(tt!==R)try{yield tt._remove(B)}catch{}});return function(tt){return Be.apply(this,arguments)}}())),new U(R,h,w)):new U(R,h,w)})()}}function q(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ct(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ce(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(an(h))return"Blackberry";if(Fe(h))return"Webos";if(Y(h))return"Safari";if((h.includes("chrome/")||ze(h))&&!h.includes("edge/"))return"Chrome";if(Pt(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function ce(y=(0,O.z$)()){return/firefox\//i.test(y)}function Y(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ze(y=(0,O.z$)()){return/crios\//i.test(y)}function Ct(y=(0,O.z$)()){return/iemobile/i.test(y)}function Pt(y=(0,O.z$)()){return/android/i.test(y)}function an(y=(0,O.z$)()){return/blackberry/i.test(y)}function Fe(y=(0,O.z$)()){return/webos/i.test(y)}function ut(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function fn(y=(0,O.z$)()){return ut(y)||Pt(y)||Fe(y)||an(y)||/windows phone/i.test(y)||Ct(y)}function ie(y,h=[]){let p;switch(y){case"Browser":p=q((0,O.z$)());break;case"Worker":p=`${q((0,O.z$)())}-${y}`;break;default:p=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${w}`}function Ne(){return(Ne=(0,m.Z)(function*(y){return(yield It(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ke(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,m.Z)(function*(y,h){return It(y,"GET","/v2/recaptchaConfig",At(y,h))})).apply(this,arguments)}function kt(y){return void 0!==y&&void 0!==y.getResponse}function tn(y){return void 0!==y&&void 0!==y.enterprise}class Cn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function gr(y){return new Promise((h,p)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const R=ve("internal-error");R.customData=S,p(R)},w.type="text/javascript",w.charset="UTF-8",function Gt(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function fi(y){return`__${y}${Math.floor(1e6*Math.random())}`}class pn{constructor(h){this.type="recaptcha-enterprise",this.auth=yn(h)}verify(h="verify",p=!1){var w=this;return(0,m.Z)(function*(){function R(){return R=(0,m.Z)(function*(Q){if(!p){if(null==Q.tenantId&&null!=Q._agentRecaptchaConfig)return Q._agentRecaptchaConfig.siteKey;if(null!=Q.tenantId&&void 0!==Q._tenantRecaptchaConfigs[Q.tenantId])return Q._tenantRecaptchaConfigs[Q.tenantId].siteKey}return new Promise(function(){var Ae=(0,m.Z)(function*(Be,tt){ke(Q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nt=>{if(void 0!==nt.recaptchaKey){const Sn=new Cn(nt);return null==Q.tenantId?Q._agentRecaptchaConfig=Sn:Q._tenantRecaptchaConfigs[Q.tenantId]=Sn,Be(Sn.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(nt=>{tt(nt)})});return function(Be,tt){return Ae.apply(this,arguments)}}())}),R.apply(this,arguments)}function B(Q,Ae,Be){const tt=window.grecaptcha;tn(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(Q,{action:h}).then(nt=>{Ae(nt)}).catch(()=>{Ae("NO_RECAPTCHA")})}):Be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Q,Ae)=>{(function S(Q){return R.apply(this,arguments)})(w.auth).then(Be=>{if(!p&&tn(window.grecaptcha))B(Be,Q,Ae);else{if(typeof window>"u")return void Ae(new Error("RecaptchaVerifier is only supported in browser"));gr("https://www.google.com/recaptcha/enterprise.js?render="+Be).then(()=>{B(Be,Q,Ae)}).catch(tt=>{Ae(tt)})}}).catch(Be=>{Ae(Be)})})})()}}function rs(y,h,p){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,m.Z)(function*(y,h,p,w=!1){const S=new pn(y);let R;try{R=yield S.verify(p)}catch{R=yield S.verify(p,!0)}const B=Object.assign({},h);return Object.assign(B,w?{captchaResp:R}:{captchaResponse:R}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class ao{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const w=R=>new Promise((B,Q)=>{try{B(h(R))}catch(Ae){Q(Ae)}});w.onAbort=p,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,m.Z)(function*(){if(p.auth.currentUser===h)return;const w=[];try{for(const S of p.queue)yield S(h),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const R of w)try{R()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class sl{constructor(h,p,w,S){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=w,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qs(this),this.idTokenSubscription=new qs(this),this.beforeStateQueue=new ao(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(h,p){var w=this;return p&&(this._popupRedirectResolver=Ln(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var S,R;if(!w._deleted&&(w.persistenceManager=yield U.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var w;const S=yield p.assertedPersistence.getCurrentUser();let R=S,B=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Q=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Ae=R?._redirectEventId,Be=yield p.tryRedirectSignIn(h);(!Q||Q===Ae)&&Be?.user&&(R=Be.user,B=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(B)try{yield p.beforeStateQueue.runMiddleware(R)}catch(Q){R=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Q))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){try{yield Gn(h)}catch(w){if("auth/network-request-failed"!==w?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Lt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const w=h?(0,O.m9)(h):null;return w&&ne(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(h,p=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return h&&ne(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(Ln(h))}))}initializeRecaptchaConfig(){var h=this;return(0,m.Z)(function*(){const p=yield ke(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new Cn(p);null==h.tenantId?h._agentRecaptchaConfig=w:h._tenantRecaptchaConfigs[h.tenantId]=w,w.emailPasswordEnabled&&new pn(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,w){return this.registerStateListener(this.authStateSubscription,h,p,w)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,w){return this.registerStateListener(this.idTokenSubscription,h,p,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var w=this;return(0,m.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const w=h&&Ln(h)||p._popupRedirectResolver;ne(w,p,"argument-error"),p.redirectPersistenceManager=yield U.create(p,[Ln(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var w,S;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,w,S){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),B=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(B,this,"internal-error"),B.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,w,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();S&&(w["X-Firebase-Client"]=S);const R=yield h._getAppCheckToken();return R&&(w["X-Firebase-AppCheck"]=R),w})()}_getAppCheckToken(){var h=this;return(0,m.Z)(function*(){var p;const w=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return w?.error&&function wt(y,...h){pt.logLevel<=pe.in.WARN&&pt.warn(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function yn(y){return(0,O.m9)(y)}class qs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Go(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ys{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return re("not implemented")}_getIdTokenResponse(h){return re("not implemented")}_linkToIdToken(h,p){return re("not implemented")}_getReauthenticationResolver(h){return re("not implemented")}}function ki(y,h){return qo.apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:resetPassword",At(y,h))})).apply(this,arguments)}function Gd(y,h){return ol.apply(this,arguments)}function ol(){return(ol=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qd(y,h){return $f.apply(this,arguments)}function $f(){return($f=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:update",At(y,h))})).apply(this,arguments)}function En(y,h){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signInWithPassword",At(y,h))})).apply(this,arguments)}function al(y,h){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:sendOobCode",At(y,h))})).apply(this,arguments)}function Hf(y,h){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,m.Z)(function*(y,h){return al(y,h)})).apply(this,arguments)}function ku(y,h){return zf.apply(this,arguments)}function zf(){return(zf=(0,m.Z)(function*(y,h){return al(y,h)})).apply(this,arguments)}function Qd(y,h){return ka.apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(y,h){return al(y,h)})).apply(this,arguments)}function mm(y,h){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,m.Z)(function*(y,h){return al(y,h)})).apply(this,arguments)}function ul(){return(ul=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signInWithEmailLink",At(y,h))})).apply(this,arguments)}function Gf(){return(Gf=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signInWithEmailLink",At(y,h))})).apply(this,arguments)}class cl extends ys{constructor(h,p,w,S=null){super("password",w),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new cl(h,p,"password")}static _fromEmailAndCode(h,p,w=null){return new cl(h,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){var w;switch(p.signInMethod){case"password":const S={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=h._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const R=yield rs(h,S,"signInWithPassword");return En(h,R)}return En(h,S).catch(function(){var R=(0,m.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Q=yield rs(h,S,"signInWithPassword");return En(h,Q)}return Promise.reject(B)});return function(B){return R.apply(this,arguments)}}());case"emailLink":return function Jd(y,h){return ul.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return Gd(h,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Xd(y,h){return Gf.apply(this,arguments)}(h,{idToken:p,email:w._email,oobCode:w._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Oi(y,h){return vs.apply(this,arguments)}function vs(){return(vs=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signInWithIdp",At(y,h))})).apply(this,arguments)}class pi extends ys{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new pi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=p,R=(0,oe._T)(p,["providerId","signInMethod"]);if(!w||!S)return null;const B=new pi(w,S);return B.idToken=R.idToken||void 0,B.accessToken=R.accessToken||void 0,B.secret=R.secret,B.nonce=R.nonce,B.pendingToken=R.pendingToken||null,B}_getIdTokenResponse(h){return Oi(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Oi(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Oi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function eh(y,h){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:sendVerificationCode",At(y,h))})).apply(this,arguments)}function Ou(){return(Ou=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,h))})).apply(this,arguments)}function dl(){return(dl=(0,m.Z)(function*(y,h){const p=yield li(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,h));if(p.temporaryProof)throw Xi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Fu={USER_NOT_FOUND:"user-not-found"};function ar(){return(ar=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Fu)})).apply(this,arguments)}class Tr extends ys{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Tr({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Tr({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function ll(y,h){return Ou.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Wf(y,h){return dl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Kf(y,h){return ar.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:w,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:R}=h;return w||p||S||R?new Tr({verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:R}):null}}class Uu{constructor(h){var p,w,S,R,B,Q;const Ae=(0,O.zd)((0,O.pd)(h)),Be=null!==(p=Ae.apiKey)&&void 0!==p?p:null,tt=null!==(w=Ae.oobCode)&&void 0!==w?w:null,nt=function ym(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ae.mode)&&void 0!==S?S:null);ne(Be&&tt&&nt,"argument-error"),this.apiKey=Be,this.operation=nt,this.code=tt,this.continueUrl=null!==(R=Ae.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(B=Ae.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Q=Ae.tenantId)&&void 0!==Q?Q:null}static parseLink(h){const p=function Lu(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||p||h||y}(h);try{return new Uu(p)}catch{return null}}}let Un=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,w){return cl._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const S=Uu.parseLink(w);return ne(S,"argument-error"),cl._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class _s{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Vu extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class gi extends Vu{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),pi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),pi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return gi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return gi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:R,nonce:B,providerId:Q}=h;if(!w&&!S&&!p&&!R||!Q)return null;try{return new gi(Q)._credential({idToken:p,accessToken:w,nonce:B,pendingToken:R})}catch{return null}}}let Zr=(()=>{class y extends Vu{constructor(){super("facebook.com")}static credential(p){return pi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),hl=(()=>{class y extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return pi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:S}=p;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Bu=(()=>{class y extends Vu{constructor(){super("github.com")}static credential(p){return pi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class qt extends ys{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Oi(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Oi(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Oi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:R}=p;return w&&S&&R&&w===S?new qt(w,R):null}static _create(h,p){return new qt(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ws extends _s{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ws.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ws.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=qt.fromJSON(h);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:w}=h;if(!p||!w)return null;try{return qt._create(w,p)}catch{return null}}}let th=(()=>{class y extends Vu{constructor(){super("twitter.com")}static credential(p,w){return pi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=p;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Qr(y,h){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signUp",At(y,h))})).apply(this,arguments)}class yr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,w,S=!1){return(0,m.Z)(function*(){const R=yield fr._fromIdTokenResponse(h,w,S),B=Rt(w);return new yr({user:R,providerId:B,_tokenResponse:w,operationType:p})})()}static _forOperation(h,p,w){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=Rt(w);return new yr({user:h,providerId:S,_tokenResponse:w,operationType:p})})()}}function Rt(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Qf(){return(Qf=(0,m.Z)(function*(y){var h;const p=yn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new yr({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield Qr(p,{returnSecureToken:!0}),S=yield yr._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ko extends O.ZR{constructor(h,p,w,S){var R;super(p.code,p.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,p,w,S){return new Ko(h,p,w,S)}}function nh(y,h,p,w){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ko._fromErrorAndOperation(y,R,h,w):R})}function rh(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Fi(){return(Fi=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);yield Ht(!0,p,h);const{providerUserInfo:w}=yield Na(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=rh(w||[]);return p.providerData=p.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ua(y,h){return Se.apply(this,arguments)}function Se(){return(Se=(0,m.Z)(function*(y,h,p=!1){const w=yield it(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return yr._forOperation(y,"link",w)})).apply(this,arguments)}function Ht(y,h,p){return fl.apply(this,arguments)}function fl(){return(fl=(0,m.Z)(function*(y,h,p){yield Gn(h);const S=!1===y?"provider-already-linked":"no-such-provider";ne(rh(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function pl(y,h){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,m.Z)(function*(y,h,p=!1){const{auth:w}=y,S="reauthenticate";try{const R=yield it(y,nh(w,S,h,y),p);ne(R.idToken,w,"internal-error");const B=Dn(R.idToken);ne(B,w,"internal-error");const{sub:Q}=B;return ne(y.uid===Q,w,"user-mismatch"),yr._forOperation(y,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&De(w,"user-mismatch"),R}})).apply(this,arguments)}function ju(y,h){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,m.Z)(function*(y,h,p=!1){const w="signIn",S=yield nh(y,w,h),R=yield yr._fromIdTokenResponse(y,w,S);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Yr(y,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(y,h){return ju(yn(y),h)})).apply(this,arguments)}function gl(y,h){return $u.apply(this,arguments)}function $u(){return($u=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Ht(!1,p,h.providerId),Ua(p,h)})).apply(this,arguments)}function ih(y,h){return sh.apply(this,arguments)}function sh(){return(sh=(0,m.Z)(function*(y,h){return pl((0,O.m9)(y),h)})).apply(this,arguments)}function Hu(y,h){return $n.apply(this,arguments)}function $n(){return($n=(0,m.Z)(function*(y,h){return li(y,"POST","/v1/accounts:signInWithCustomToken",At(y,h))})).apply(this,arguments)}function Jr(){return(Jr=(0,m.Z)(function*(y,h){const p=yn(y),w=yield Hu(p,{token:h,returnSecureToken:!0}),S=yield yr._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Es{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?mi._fromServerResponse(h,p):"totpInfo"in p?oh._fromServerResponse(h,p):De(h,"internal-error")}}class mi extends Es{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new mi(p)}}class oh extends Es{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new oh(p)}}function uo(y,h,p){var w;ne((null===(w=p.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),ne(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function zu(){return zu=(0,m.Z)(function*(y,h,p){var w;const S=yn(y),R={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const B=yield rs(S,R,"getOobCode",!0);p&&uo(S,B,p),yield ku(S,B)}else p&&uo(S,R,p),yield ku(S,R).catch(function(){var B=(0,m.Z)(function*(Q){if("auth/missing-recaptcha-token"!==Q.code)return Promise.reject(Q);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ae=yield rs(S,R,"getOobCode",!0);p&&uo(S,Ae,p),yield ku(S,Ae)}});return function(Q){return B.apply(this,arguments)}}())}),zu.apply(this,arguments)}function Ba(){return(Ba=(0,m.Z)(function*(y,h,p){yield ki((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Li(){return(Li=(0,m.Z)(function*(y,h){yield qd((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Gu(y,h){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),w=yield ki(p,{oobCode:h}),S=w.requestType;switch(ne(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(w.mfaInfo,p,"internal-error");default:ne(w.email,p,"internal-error")}let R=null;return w.mfaInfo&&(R=Es._fromServerResponse(yn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(y,h){const{data:p}=yield Gu((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Ha(){return Ha=(0,m.Z)(function*(y,h,p){var w;const S=yn(y),R={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Be=yield rs(S,R,"signUpPassword");B=Qr(S,Be)}else B=Qr(S,R).catch(function(){var Be=(0,m.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nt=yield rs(S,R,"signUpPassword");return Qr(S,nt)}return Promise.reject(tt)});return function(tt){return Be.apply(this,arguments)}}());const Q=yield B.catch(Be=>Promise.reject(Be)),Ae=yield yr._fromIdTokenResponse(S,"signIn",Q);return yield S._updateCurrentUser(Ae.user),Ae}),Ha.apply(this,arguments)}function Is(){return Is=(0,m.Z)(function*(y,h,p){var w;const S=yn(y),R={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function B(Q,Ae){ne(Ae.handleCodeInApp,S,"argument-error"),Ae&&uo(S,Q,Ae)}if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Q=yield rs(S,R,"getOobCode",!0);B(Q,p),yield Qd(S,Q)}else B(R,p),yield Qd(S,R).catch(function(){var Q=(0,m.Z)(function*(Ae){if("auth/missing-recaptcha-token"!==Ae.code)return Promise.reject(Ae);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Be=yield rs(S,R,"getOobCode",!0);B(Be,p),yield Qd(S,Be)}});return function(Ae){return Q.apply(this,arguments)}}())}),Is.apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),S=Un.credentialWithLink(h,p||ge());return ne(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Yr(w,S)})).apply(this,arguments)}function In(y,h){return vl.apply(this,arguments)}function vl(){return(vl=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:createAuthUri",At(y,h))})).apply(this,arguments)}function qu(){return(qu=(0,m.Z)(function*(y,h){const w={identifier:h,continueUri:ue()?ge():"http://localhost"},{signinMethods:S}=yield In((0,O.m9)(y),w);return S||[]})).apply(this,arguments)}function Ws(){return(Ws=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&uo(p.auth,S,h);const{email:R}=yield Hf(p.auth,S);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&uo(w.auth,R,p);const{email:B}=yield mm(w.auth,R);B!==y.email&&(yield y.reload())})).apply(this,arguments)}function Yo(y,h){return ss.apply(this,arguments)}function ss(){return(ss=(0,m.Z)(function*(y,h){return It(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ks(){return(Ks=(0,m.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const w=(0,O.m9)(y),R={idToken:yield w.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},B=yield it(w,Yo(w.auth,R));w.displayName=B.displayName||null,w.photoURL=B.photoUrl||null;const Q=w.providerData.find(({providerId:Ae})=>"password"===Ae);Q&&(Q.displayName=w.displayName,Q.photoURL=w.photoURL),yield w._updateTokensIfNecessary(B)})).apply(this,arguments)}function lo(y,h,p){return za.apply(this,arguments)}function za(){return(za=(0,m.Z)(function*(y,h,p){const{auth:w}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const B=yield it(y,Gd(w,R));yield y._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class yi{constructor(h,p,w={}){this.isNewUser=h,this.providerId=p,this.profile=w}}class Zu extends yi{constructor(h,p,w,S){super(h,p,w),this.username=S}}class Jo extends yi{constructor(h,p){super(h,"facebook.com",p)}}class lh extends Zu{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class wm extends yi{constructor(h,p){super(h,"google.com",p)}}class El extends Zu{constructor(h,p,w){super(h,"twitter.com",p,w)}}function Xo(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ch(y){var h,p;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const B=null===(p=null===(h=Dn(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(B)return new yi(R,"anonymous"!==B&&"custom"!==B?B:null)}if(!w)return null;switch(w){case"facebook.com":return new Jo(R,S);case"github.com":return new lh(R,S);case"google.com":return new wm(R,S);case"twitter.com":return new El(R,S,y.screenName||null);case"custom":case"anonymous":return new yi(R,null);default:return new yi(R,w,S)}}(p)}class Qs{constructor(h,p,w){this.type=h,this.credential=p,this.auth=w}static _fromIdtoken(h,p){return new Qs("enroll",h,p)}static _fromMfaPendingCredential(h){return new Qs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,w;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Qs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return Qs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class qa{constructor(h,p,w){this.session=h,this.hints=p,this.signInResolver=w}static _fromError(h,p){const w=yn(h),S=p.customData._serverResponse,R=(S.mfaInfo||[]).map(Q=>Es._fromServerResponse(w,Q));ne(S.mfaPendingCredential,w,"internal-error");const B=Qs._fromMfaPendingCredential(S.mfaPendingCredential);return new qa(B,R,function(){var Q=(0,m.Z)(function*(Ae){const Be=yield Ae._process(w,B);delete S.mfaInfo,delete S.mfaPendingCredential;const tt=Object.assign(Object.assign({},S),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(p.operationType){case"signIn":const nt=yield yr._fromIdTokenResponse(w,p.operationType,tt);return yield w._updateCurrentUser(nt.user),nt;case"reauthenticate":return ne(p.user,w,"internal-error"),yr._forOperation(p.user,p.operationType,tt);default:De(w,"internal-error")}});return function(Ae){return Q.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function Qu(y,h){return It(y,"POST","/v2/accounts/mfaEnrollment:start",At(y,h))}class Ys{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Es._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Ys(h)}getSession(){var h=this;return(0,m.Z)(function*(){return Qs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var w=this;return(0,m.Z)(function*(){const S=h,R=yield w.getSession(),B=yield it(w.user,S._process(w.user.auth,R,p));return yield w.user._updateTokensIfNecessary(B),w.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){const w="string"==typeof h?h:h.uid,S=yield p.user.getIdToken();try{const R=yield it(p.user,function Dl(y,h){return It(y,"POST","/v2/accounts/mfaEnrollment:withdraw",At(y,h))}(p.user.auth,{idToken:S,mfaEnrollmentId:w}));p.enrolledFactors=p.enrolledFactors.filter(({uid:B})=>B!==w),yield p.user._updateTokensIfNecessary(R),yield p.user.reload()}catch(R){throw R}})()}}const fo=new WeakMap,Ka="__sak";class Yu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ka,"1"),this.storage.removeItem(Ka),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const bs=(()=>{class y extends Yu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Tl(){const y=(0,O.z$)();return Y(y)||ut(y)}()&&function Pi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),R=this.localCache[w];S!==R&&p(w,R,S)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((Q,Ae,Be)=>{this.notifyListeners(Q,Be)});const S=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(S);if(p.newValue!==Q)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!w)return}const R=()=>{const Q=this.storage.getItem(S);!w&&this.localCache[S]===Q||this.notifyListeners(S,Q)},B=this.storage.getItem(S);!function pr(){return(0,O.w1)()&&10===document.documentMode}()||B===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var S=()=>super._set,R=this;return(0,m.Z)(function*(){yield S().call(R,p,w),R.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,S=this;return(0,m.Z)(function*(){const R=yield w().call(S,p);return S.localCache[p]=JSON.stringify(R),R})()}_remove(p){var w=()=>super._remove,S=this;return(0,m.Z)(function*(){yield w().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),po=(()=>{class y extends Yu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return y.type="SESSION",y})();let bl=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(R=>R.isListeningto(p));if(w)return w;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,m.Z)(function*(){const S=p,{eventId:R,eventType:B,data:Q}=S.data,Ae=w.handlersMap[B];if(!Ae?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:B});const Be=Array.from(Ae).map(function(){var nt=(0,m.Z)(function*(Sn){return Sn(S.origin,Q)});return function(Sn){return nt.apply(this,arguments)}}()),tt=yield function ep(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return h.apply(this,arguments)}}()))}(Be);S.ports[0].postMessage({status:"done",eventId:R,eventType:B,response:tt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Js(y="",h=10){let p="";for(let w=0;w<h;w++)p+=Math.floor(10*Math.random());return y+p}class tp{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,w=50){var S=this;return(0,m.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let B,Q;return new Promise((Ae,Be)=>{const tt=Js("",20);R.port1.start();const nt=setTimeout(()=>{Be(new Error("unsupported_event"))},w);Q={messageChannel:R,onMessage(Sn){const ks=Sn;if(ks.data.eventId===tt)switch(ks.data.status){case"ack":clearTimeout(nt),B=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Ae(ks.data.response);break;default:clearTimeout(nt),clearTimeout(B),Be(new Error("invalid_response"))}}},S.handlers.add(Q),R.port1.addEventListener("message",Q.onMessage),S.target.postMessage({eventType:h,eventId:tt,data:p},[R.port2])}).finally(()=>{Q&&S.removeMessageHandler(Q)})})()}}function sn(){return window}function Sl(){return typeof sn().WorkerGlobalScope<"u"&&"function"==typeof sn().importScripts}function na(){return(na=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ra="firebaseLocalStorageDb",Qa="firebaseLocalStorage",mo="fbase_key";class Al{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function xl(y,h){return y.transaction([Qa],h?"readwrite":"readonly").objectStore(Qa)}function vh(){const y=indexedDB.open(ra,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Qa,{keyPath:mo})}catch(S){p(S)}}),y.addEventListener("success",(0,m.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Qa)?h(w):(w.close(),yield function vn(){const y=indexedDB.deleteDatabase(ra);return new Al(y).toPromise()}(),h(yield vh()))}))})}function _h(y,h,p){return np.apply(this,arguments)}function np(){return(np=(0,m.Z)(function*(y,h,p){const w=xl(y,!0).put({[mo]:h,value:p});return new Al(w).toPromise()})).apply(this,arguments)}function ip(){return(ip=(0,m.Z)(function*(y,h){const p=xl(y,!1).get(h),w=yield new Al(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Em(y,h){const p=xl(y,!0).delete(h);return new Al(p).toPromise()}const Ya=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield vh()),p.db})()}_withRetries(p){var w=this;return(0,m.Z)(function*(){let S=0;for(;;)try{const R=yield w._openDb();return yield p(R)}catch(R){if(S++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Sl()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=bl._getInstance(function Nn(){return Sl()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(S,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(S,R){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var w,S;if(p.activeServiceWorker=yield function Xu(){return na.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new tp(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function go(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield vh();return yield _h(p,Ka,"1"),yield Em(p,Ka),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var S=this;return(0,m.Z)(function*(){return S._withPendingWrite((0,m.Z)(function*(){return yield S._withRetries(R=>_h(R,p,w)),S.localCache[p]=w,S.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,m.Z)(function*(){const S=yield w._withRetries(R=>function rp(y,h){return ip.apply(this,arguments)}(R,p));return w.localCache[p]=S,S})()}_remove(p){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(S=>Em(S,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const w=yield p._withRetries(B=>{const Q=xl(B,!1).getAll();return new Al(Q).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:B,value:Q}of w)R.add(B),JSON.stringify(p.localCache[B])!==JSON.stringify(Q)&&(p.notifyListeners(B,Q),S.push(B));for(const B of Object.keys(p.localCache))p.localCache[B]&&!R.has(B)&&(p.notifyListeners(B,null),S.push(B));return S})()}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function qn(y,h){return It(y,"POST","/v2/accounts/mfaSignIn:start",At(y,h))}const Wn=1e12;class Cs{constructor(h){this.auth=h,this.counter=Wn,this._widgets=new Map}render(h,p){const w=this.counter;return this._widgets.set(w,new Xa(h,this.auth.name,p||{})),this.counter++,w}reset(h){var p;const w=h||Wn;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Wn))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var w;return null===(w=p._widgets.get(h||Wn))||void 0===w||w.execute(),""})()}}class Xa{constructor(h,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;ne(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ss(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ia=fi("rcb"),op=new Qt(3e4,6e4);class Im{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=sn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return ne(function ap(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&kt(sn().grecaptcha)?Promise.resolve(sn().grecaptcha):new Promise((w,S)=>{const R=sn().setTimeout(()=>{S(ve(h,"network-request-failed"))},op.get());sn()[ia]=()=>{sn().clearTimeout(R),delete sn()[ia];const Q=sn().grecaptcha;if(!Q||!kt(Q))return void S(ve(h,"internal-error"));const Ae=Q.render;Q.render=(Be,tt)=>{const nt=Ae(Be,tt);return this.counter++,nt},this.hostLanguage=p,w(Q)},gr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ia,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=sn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bv{load(h){return(0,m.Z)(function*(){return new Cs(h)})()}clearedOneInstance(){}}const rc="recaptcha",vi={theme:"light",type:"image"};class sa{constructor(h,p=Object.assign({},vi),w){this.parameters=p,this.type=rc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(w),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;ne(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bv:new Im,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(p)||new Promise(R=>{const B=Q=>{!Q||(h.tokenChangeListeners.delete(B),R(Q))};h.tokenChangeListeners.add(B),h.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof h)h(p);else if("string"==typeof h){const w=sn()[h];"function"==typeof w&&w(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){ne(ue()&&!Sl(),h.auth,"internal-error"),yield function as(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function te(y){return Ne.apply(this,arguments)}(h.auth);ne(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class eu{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Tr._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function sc(){return(sc=(0,m.Z)(function*(y,h,p){const w=yn(y),S=yield nu(w,h,(0,O.m9)(p));return new eu(S,R=>Yr(w,R))})).apply(this,arguments)}function tu(){return(tu=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);yield Ht(!1,w,"phone");const S=yield nu(w.auth,h,(0,O.m9)(p));return new eu(S,R=>gl(w,R))})).apply(this,arguments)}function oc(){return(oc=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),S=yield nu(w.auth,h,(0,O.m9)(p));return new eu(S,R=>ih(w,R))})).apply(this,arguments)}function nu(y,h,p){return ru.apply(this,arguments)}function ru(){return(ru=(0,m.Z)(function*(y,h,p){var w;const S=yield p.verify();try{let R;if(ne("string"==typeof S,y,"argument-error"),ne(p.type===rc,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const B=R.session;if("phoneNumber"in R)return ne("enroll"===B.type,y,"internal-error"),(yield Qu(y,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ne("signin"===B.type,y,"internal-error");const Q=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return ne(Q,y,"missing-multi-factor-info"),(yield qn(y,{mfaPendingCredential:B.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield eh(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return B}}finally{p._reset()}})).apply(this,arguments)}function Eh(){return(Eh=(0,m.Z)(function*(y,h){yield Ua((0,O.m9)(y),h)})).apply(this,arguments)}let Vi=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=yn(p)}verifyPhoneNumber(p,w){return nu(this.auth,p,(0,O.m9)(w))}static credential(p,w){return Tr._fromVerification(p,w)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:S}=p;return w&&S?Tr._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function As(y,h){return h?Ln(h):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Cr extends ys{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Oi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Oi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Oi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function up(y){return ju(y.auth,new Cr(y),y.bypassAuthState)}function Ih(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),pl(p,new Cr(y),y.bypassAuthState)}function ac(y){return iu.apply(this,arguments)}function iu(){return(iu=(0,m.Z)(function*(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),Ua(p,new Cr(y),y.bypassAuthState)})).apply(this,arguments)}class yo{constructor(h,p,w,S,R=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(w,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:R,tenantId:B,error:Q,type:Ae}=h;if(Q)return void p.reject(Q);const Be={auth:p.auth,requestUri:w,sessionId:S,tenantId:B||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ae)(Be))}catch(tt){p.reject(tt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return up;case"linkViaPopup":case"linkViaRedirect":return ac;case"reauthViaPopup":case"reauthViaRedirect":return Ih;default:De(this.auth,"internal-error")}}resolve(h){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sr=new Qt(2e3,1e4);function Vn(){return(Vn=(0,m.Z)(function*(y,h,p){const w=yn(y);Ve(y,h,_s);const S=As(w,p);return new Nl(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function uc(){return(uc=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ve(w.auth,h,_s);const S=As(w.auth,p);return new Nl(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function vo(){return(vo=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ve(w.auth,h,_s);const S=As(w.auth,p);return new Nl(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Nl=(()=>{class y extends yo{constructor(p,w,S,R,B){super(p,w,R,B),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const w=yield p.execute();return ne(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,m.Z)(function*(){ee(1===p.filter.length,"Popup operations only handle one event");const w=Js();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Sr.get())};p()}}return y.currentPopupAction=null,y})();const cc=new Map;class bh extends yo{constructor(h,p,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let w=cc.get(p.auth._key());if(!w){try{const R=(yield function _o(y,h){return kl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;w=()=>Promise.resolve(R)}catch(S){w=()=>Promise.reject(S)}cc.set(p.auth._key(),w)}return p.bypassAuthState||cc.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,p().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function kl(){return(kl=(0,m.Z)(function*(y,h){const p=Ol(h),w=lc(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(p));return yield w._remove(p),S})).apply(this,arguments)}function aa(y,h){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,m.Z)(function*(y,h){return lc(y)._set(Ol(h),"true")})).apply(this,arguments)}function wo(y,h){cc.set(y._key(),h)}function lc(y){return Ln(y._redirectPersistence)}function Ol(y){return V("pendingRedirect",y.config.apiKey,y.name)}function Xs(){return(Xs=(0,m.Z)(function*(y,h,p){const w=yn(y);Ve(y,h,_s),yield w._initializationPromise;const S=As(w,p);return yield aa(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function Fl(){return(Fl=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ve(w.auth,h,_s),yield w.auth._initializationPromise;const S=As(w.auth,p);yield aa(S,w.auth);const R=yield ca(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function hc(){return(hc=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Ve(w.auth,h,_s),yield w.auth._initializationPromise;const S=As(w.auth,p);yield Ht(!1,w,h.providerId),yield aa(S,w.auth);const R=yield ca(w);return S._openRedirect(w.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function fc(){return(fc=(0,m.Z)(function*(y,h){return yield yn(y)._initializationPromise,ua(y,h,!1)})).apply(this,arguments)}function ua(y,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,m.Z)(function*(y,h,p=!1){const w=yn(y),S=As(w,h),B=yield new bh(w,S,p).execute();return B&&!p&&(delete B.user._redirectEventId,yield w._persistUserIfCurrent(B.user),yield w._setRedirectUser(null,h)),B})).apply(this,arguments)}function ca(y){return Do.apply(this,arguments)}function Do(){return(Do=(0,m.Z)(function*(y){const h=Js(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ul{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(p=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function su(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pc(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var w;if(h.error&&!pc(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const w=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bi(h))}saveEventToCache(h){this.cachedEventUids.add(Bi(h)),this.lastProcessedEventTime=Date.now()}}function Bi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function pc({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Dm(y){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,m.Z)(function*(y,h={}){return It(y,"GET","/v1/projects",h)})).apply(this,arguments)}const gc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mc=/^https?/;function xs(){return(xs=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Dm(y);for(const p of h)try{if(yc(p))return}catch{}De(y,"unauthorized-domain")})).apply(this,arguments)}function yc(y){const h=ge(),{protocol:p,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const B=new URL(y);return""===B.hostname&&""===w?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&B.hostname===w}if(!mc.test(p))return!1;if(gc.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Tm=new Qt(3e4,6e4);function la(){const y=sn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let To=null;function ji(y){return To=To||function Ms(y){return new Promise((h,p)=>{var w,S,R;function B(){la(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{la(),p(ve(y,"network-request-failed"))},timeout:Tm.get()})}if(null!==(S=null===(w=sn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=sn().gapi)||void 0===R||!R.load){const Q=fi("iframefcb");return sn()[Q]=()=>{gapi.load?B():p(ve(y,"network-request-failed"))},gr(`https://apis.google.com/js/api.js?onload=${Q}`).catch(Ae=>p(Ae))}B()}}).catch(h=>{throw To=null,h})}(y),To}const vc=new Qt(5e3,15e3),jl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xh(y){const h=y.config;ne(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?rn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},S=Rs.get(y.config.apiHost);S&&(w.eid=S);const R=y._getFrameworks();return R.length&&(w.fw=R.join(",")),`${p}?${(0,O.xO)(w).slice(1)}`}function T(){return T=(0,m.Z)(function*(y){const h=yield ji(y),p=sn().gapi;return ne(p,y,"internal-error"),h.open({where:document.body,url:xh(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jl,dontclear:!0},w=>new Promise(function(){var S=(0,m.Z)(function*(R,B){yield w.restyle({setHideOnLeave:!1});const Q=ve(y,"network-request-failed"),Ae=sn().setTimeout(()=>{B(Q)},vc.get());function Be(){sn().clearTimeout(Ae),R(w)}w.ping(Be).then(Be,()=>{B(Q)})});return function(R,B){return S.apply(this,arguments)}}()))}),T.apply(this,arguments)}const x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qe{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const _i=encodeURIComponent("fac");function Bn(y,h,p,w,S,R){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,m.Z)(function*(y,h,p,w,S,R){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const B={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:w,v:ae.SDK_VERSION,eventId:S};if(h instanceof _s){h.setDefaultLanguage(y.languageCode),B.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[tt,nt]of Object.entries(R||{}))B[tt]=nt}if(h instanceof Vu){const tt=h.getScopes().filter(nt=>""!==nt);tt.length>0&&(B.scopes=tt.join(","))}y.tenantId&&(B.tid=y.tenantId);const Q=B;for(const tt of Object.keys(Q))void 0===Q[tt]&&delete Q[tt];const Ae=yield y._getAppCheckToken(),Be=Ae?`#${_i}=${encodeURIComponent(Ae)}`:"";return`${Ar(y)}?${(0,O.xO)(Q).slice(1)}${Be}`})).apply(this,arguments)}function Ar({config:y}){return y.emulator?rn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const Br="webStorageSupport";class bm extends class $l{constructor(h){this.factorId=h}_process(h,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,w);case"signin":return this._finalizeSignIn(h,p.credential);default:return re("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new bm(h)}_finalizeEnroll(h,p,w){return function Ts(y,h){return It(y,"POST","/v2/accounts/mfaEnrollment:finalize",At(y,h))}(h,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function tc(y,h){return It(y,"POST","/v2/accounts/mfaSignIn:finalize",At(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rE=(()=>{class y{constructor(){}static assertion(p){return bm._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var jv="@firebase/auth";class $v{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(w=>{h(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function to(){return window}function hp(){return(hp=(0,m.Z)(function*(y,h,p){var w;const{BuildInfo:S}=to();ee(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Wv(h.sessionId),B={};return ut()?B.ibi=S.packageName:Pt()?B.apn=S.packageName:De(y,"operation-not-supported-in-this-environment"),S.displayName&&(B.appDisplayName=S.displayName),B.sessionId=R,Bn(y,p,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,B)})).apply(this,arguments)}function ql(){return(ql=(0,m.Z)(function*(y){const{BuildInfo:h}=to(),p={};ut()?p.iosBundleId=h.packageName:Pt()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Dm(y,p)})).apply(this,arguments)}function fp(){return(fp=(0,m.Z)(function*(y,h,p){const{cordova:w}=to();let S=()=>{};try{yield new Promise((R,B)=>{let Q=null;function Ae(){var nt;R();const Sn=null===(nt=w.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof Sn&&Sn(),"function"==typeof p?.close&&p.close()}function Be(){Q||(Q=window.setTimeout(()=>{B(ve(y,"redirect-cancelled-by-user"))},2e3))}function tt(){"visible"===document?.visibilityState&&Be()}h.addPassiveListener(Ae),document.addEventListener("resume",Be,!1),Pt()&&document.addEventListener("visibilitychange",tt,!1),S=()=>{h.removePassiveListener(Ae),document.removeEventListener("resume",Be,!1),document.removeEventListener("visibilitychange",tt,!1),Q&&window.clearTimeout(Q)}})}finally{S()}})).apply(this,arguments)}function Wv(y){return Am.apply(this,arguments)}function Am(){return(Am=(0,m.Z)(function*(y){const h=Ic(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ic(y){if(ee(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let w=0;w<y.length;w++)p[w]=y.charCodeAt(w);return p}(0,O.Pz)("authIdTokenMaxAge"),function sE(y){(0,ae._registerComponent)(new fe.wA("auth",(h,{options:p})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),R=h.getProvider("app-check-internal"),{apiKey:B,authDomain:Q}=w.options;ne(B&&!B.includes(":"),"invalid-api-key",{appName:w.name});const Ae={apiKey:B,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ie(y)},Be=new sl(w,S,R,Ae);return function mr(y,h){const p=h?.persistence||[],w=(Array.isArray(p)?p:[p]).map(Ln);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(Be,p),Be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,w)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new fe.wA("auth-internal",h=>{const p=yn(h.getProvider("auth").getImmediate());return new $v(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(jv,"0.23.2",function iE(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(jv,"0.23.2","esm2017")}("Browser");class Wl extends Ul{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function pp(y){return gp.apply(this,arguments)}function gp(){return(gp=(0,m.Z)(function*(y){const h=yield cu()._get(Nm(y));return h&&(yield cu()._remove(Nm(y))),h})).apply(this,arguments)}function Rm(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function cu(){return Ln(bs)}function Nm(y){return V("authEvent",y.config.apiKey,y.name)}function da(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function mp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function us(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ql(y=(0,O.z$)()){return!("file:"!==us()&&"ionic:"!==us()&&"capacitor:"!==us()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Om(){try{const y=self.localStorage,h=Js();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Tc(y=(0,O.z$)()){return function Zv(){return(0,O.w1)()&&11===document?.documentMode}()||function km(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return vp()&&(0,O.hl)()}return!1}function vp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _p(){return(function Ph(){return"http:"===us()||"https:"===us()}()||(0,O.ru)()||Ql())&&!function aE(){return(0,O.b$)()||(0,O.UG)()}()&&Om()&&!vp()}function wp(){return Ql()&&typeof document<"u"}function Ip(){return(Ip=(0,m.Z)(function*(){return!!wp()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const $i={LOCAL:"local",NONE:"none",SESSION:"session"},fa=ne,Qv="persistence";function lu(y){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,m.Z)(function*(y){yield y._initializationPromise;const h=bc(),p=V(Qv,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function bc(){var y;try{return(null===(y=function Dp(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const cs=ne;class bo{constructor(){this.browserResolver=Ln(class wi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=po,this._completeRedirectFn=ua,this._overrideRedirectResult=wo}_openPopup(h,p,w,S){var R=this;return(0,m.Z)(function*(){var B;ee(null===(B=R.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Q=yield Bn(h,p,w,ge(),S);return function $e(y,h,p,w=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),B=Math.max((window.screen.availWidth-w)/2,0).toString();let Q="";const Ae=Object.assign(Object.assign({},x),{width:w.toString(),height:S.toString(),top:R,left:B}),Be=(0,O.z$)().toLowerCase();p&&(Q=ze(Be)?"_blank":p),ce(Be)&&(h=h||"http://localhost",Ae.scrollbars="yes");const tt=Object.entries(Ae).reduce((Sn,[ks,td])=>`${Sn}${ks}=${td},`,"");if(function hn(y=(0,O.z$)()){var h;return ut(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Be)&&"_self"!==Q)return function Je(y,h){const p=document.createElement("a");p.href=y,p.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(h||"",Q),new qe(null);const nt=window.open(h||"",Q,tt);ne(nt,y,"popup-blocked");try{nt.focus()}catch{}return new qe(nt)}(h,Q,Js())})()}_openRedirect(h,p,w,S){var R=this;return(0,m.Z)(function*(){return yield R._originValidation(h),function Cl(y){sn().location.href=y}(yield Bn(h,p,w,ge(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:R}=this.eventManagers[p];return S?Promise.resolve(S):(ee(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(h);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const w=yield function E(y){return T.apply(this,arguments)}(h),S=new Ul(h);return w.register("authEvent",R=>(ne(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Br,{type:Br},S=>{var R;const B=null===(R=S?.[0])||void 0===R?void 0:R[Br];void 0!==B&&p(!!B),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ou(y){return xs.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return fn()||Y()||ut()}}),this.cordovaResolver=Ln(class ha{constructor(){this._redirectPersistence=po,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ua,this._overrideRedirectResult=wo}_initialize(h){var p=this;return(0,m.Z)(function*(){const w=h._key();let S=p.eventManagers.get(w);return S||(S=new Wl(h),p.eventManagers.set(w,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,w,S){var R=this;return(0,m.Z)(function*(){!function qv(y){var h,p,w,S,R,B,Q,Ae,Be,tt;const nt=to();ne("function"==typeof(null===(h=nt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(p=nt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(R=null===(S=null===(w=nt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ae=null===(Q=null===(B=nt?.cordova)||void 0===B?void 0:B.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===Ae?void 0:Ae.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(tt=null===(Be=nt?.cordova)||void 0===Be?void 0:Be.InAppBrowser)||void 0===tt?void 0:tt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield R._initialize(h);yield B.initialized(),B.resetRedirect(),function cp(){cc.clear()}(),yield R._originValidation(h);const Q=function Kl(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Rm(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,w,S);yield function xm(y,h){return cu()._set(Nm(y),h)}(h,Q);const Ae=yield function Sm(y,h,p){return hp.apply(this,arguments)}(h,Q,p),Be=yield function zv(y){const{cordova:h}=to();return new Promise(p=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function gt(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Ae);return function Gv(y,h,p){return fp.apply(this,arguments)}(h,B,Be)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Gl(y){return ql.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:w,handleOpenURL:S,BuildInfo:R}=to(),B=setTimeout((0,m.Z)(function*(){yield pp(h),p.onEvent(mp())}),500),Q=function(){var tt=(0,m.Z)(function*(nt){clearTimeout(B);const Sn=yield pp(h);let ks=null;Sn&&nt?.url&&(ks=function Mm(y,h){var p,w;const S=function Zl(y){const h=da(y),p=h.link?decodeURIComponent(h.link):void 0,w=da(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return da(S).link||S||w||p||y}(h);if(S.includes("/__/auth/callback")){const R=da(S),B=R.firebaseError?function Rh(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,Q=null===(w=null===(p=B?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Ae=Q?ve(Q):null;return Ae?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Sn,nt.url)),p.onEvent(ks||mp())});return function(Sn){return tt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,Q);const Ae=S,Be=`${R.packageName.toLowerCase()}://`;to().handleOpenURL=function(){var tt=(0,m.Z)(function*(nt){if(nt.toLowerCase().startsWith(Be)&&Q({url:nt}),"function"==typeof Ae)try{Ae(nt)}catch(Sn){console.error(Sn)}});return function(nt){return tt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=po,this._completeRedirectFn=ua,this._overrideRedirectResult=wo}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,w,S){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,w,S)})()}_openRedirect(h,p,w,S){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,w,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return wp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Ep(){return Ip.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function hu(y){return y.unwrap()}function Jv(y){return Yl(y)}function Yl(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Vi.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=hl;break;case"facebook.com":w=Zr;break;case"github.com":w=Bu;break;case"twitter.com":w=th;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:B,pendingToken:Q,nonce:Ae}=h;return R||B||S||Q?Q?p.startsWith("saml.")?qt._create(p,Q):pi._fromParams({providerId:p,signInMethod:p,pendingToken:Q,idToken:S,accessToken:R}):new gi(p).credential({idToken:S,accessToken:R,rawNonce:Ae}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function ei(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Xv(y,h){var p;const w=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new e_(y,function gh(y,h){var p;const w=(0,O.m9)(y),S=h;return ne(h.customData.operationType,w,"argument-error"),ne(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),qa._fromError(w,S)}(y,h));else if(w){const S=Yl(h),R=h;S&&(R.credential=S,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Jv(p),additionalUserInfo:Xo(p),user:ls.getOrCreate(S)}})}function Jl(y,h){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,m.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:w=>ei(y,p.confirm(w))}})).apply(this,arguments)}class e_{constructor(h,p){this.resolver=p,this.auth=function bp(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ei(hu(this.auth),this.resolver.resolveSignIn(h))}}class ls{constructor(h){this._delegate=h,this.multiFactor=function ta(y){const h=(0,O.m9)(y);return fo.has(h)||fo.set(h,Ys._fromUser(h)),fo.get(h)}(h)}static getOrCreate(h){return ls.USER_MAP.has(h)||ls.USER_MAP.set(h,new ls(h)),ls.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return ei(p.auth,gl(p._delegate,h))})()}linkWithPhoneNumber(h,p){var w=this;return(0,m.Z)(function*(){return Jl(w.auth,function wh(y,h,p){return tu.apply(this,arguments)}(w._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return ei(p.auth,function Th(y,h,p){return vo.apply(this,arguments)}(p._delegate,h,bo))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield lu(yn(p.auth)),function dc(y,h,p){return function Ah(y,h,p){return hc.apply(this,arguments)}(y,h,p)}(p._delegate,h,bo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return ei(p.auth,ih(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Jl(this.auth,function Ml(y,h,p){return oc.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ei(this.auth,function Dh(y,h,p){return uc.apply(this,arguments)}(this._delegate,h,bo))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield lu(yn(p.auth)),function Eo(y,h,p){return function eo(y,h,p){return Fl.apply(this,arguments)}(y,h,p)}(p._delegate,h,bo)})()}sendEmailVerification(h){return function wl(y,h){return Ws.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function La(y,h){return Fi.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Ku(y,h){return lo((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Ui(y,h){return lo((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function oa(y,h){return Eh.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Wu(y,h){return Ks.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Qo(y,h,p){return Ds.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ls.USER_MAP=new WeakMap;const Xl=ne;let Fm=(()=>{class y{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Xl(S,"invalid-api-key",{appName:p.name}),Xl(S,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?bo:void 0;this._delegate=w.initialize({options:{persistence:ed(S,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ls.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function zd(y,h,p){const w=yn(y);ne(w._canInitEmulator,w,"emulator-config-failed"),ne(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!p?.disableWarnings,R=rr(h),{host:B,port:Q}=function Vr(y){const h=rr(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const R=S[1];return{host:R,port:Go(w.substr(R.length+1))}}{const[R,B]=w.split(":");return{host:R,port:Go(B)}}}(h);w.config.emulator={url:`${R}//${B}${null===Q?"":`:${Q}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:B,port:Q,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Pu(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,w)}applyActionCode(p){return function Yf(y,h){return Li.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Gu(this._delegate,p)}confirmPasswordReset(p,w){return function ah(y,h,p){return Ba.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var S=this;return(0,m.Z)(function*(){return ei(S._delegate,function yl(y,h,p){return Ha.apply(this,arguments)}(S._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function _l(y,h){return qu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Jf(y,h){return"EMAIL_SIGNIN"===Uu.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){Xl(_p(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function Xr(y,h){return fc.apply(this,arguments)}(p._delegate,bo);return w?ei(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Dc(y,h){yn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,w,S){const{next:R,error:B,complete:Q}=ti(p,w,S);return this._delegate.onAuthStateChanged(R,B,Q)}onIdTokenChanged(p,w,S){const{next:R,error:B,complete:Q}=ti(p,w,S);return this._delegate.onIdTokenChanged(R,B,Q)}sendSignInLinkToEmail(p,w){return function co(y,h,p){return Is.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function _m(y,h,p){return zu.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,m.Z)(function*(){let S;switch(function Yv(y,h){fa(Object.values($i).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?fa(h!==$i.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?fa(h===$i.NONE,y,"unsupported-persistence-type"):vp()?fa(h===$i.NONE||h===$i.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):fa(h===$i.NONE||Om(),y,"unsupported-persistence-type")}(w._delegate,p),p){case $i.SESSION:S=po;break;case $i.LOCAL:S=(yield Ln(Ya)._isAvailable())?Ya:bs;break;case $i.NONE:S=Ur;break;default:return De("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ei(this._delegate,function Zf(y){return Qf.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ei(this._delegate,Yr(this._delegate,p))}signInWithCustomToken(p){return ei(this._delegate,function br(y,h){return Jr.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return ei(this._delegate,function uh(y,h,p){return Yr((0,O.m9)(y),Un.credential(h,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return ei(this._delegate,function Wt(y,h,p){return is.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return Jl(this._delegate,function ic(y,h,p){return sc.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,m.Z)(function*(){return Xl(_p(),w._delegate,"operation-not-supported-in-this-environment"),ei(w._delegate,function Rl(y,h,p){return Vn.apply(this,arguments)}(w._delegate,p,bo))})()}signInWithRedirect(p){var w=this;return(0,m.Z)(function*(){return Xl(_p(),w._delegate,"operation-not-supported-in-this-environment"),yield lu(w._delegate),function Sh(y,h,p){return function lp(y,h,p){return Xs.apply(this,arguments)}(y,h,p)}(w._delegate,p,bo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function ml(y,h){return $a.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=$i,y})();function ti(y,h,p){let w=y;"function"!=typeof y&&({next:w,error:h,complete:p}=y);const S=w;return{next:B=>S(B&&ls.getOrCreate(B)),error:h,complete:p}}function ed(y,h){const p=function du(y,h){const p=bc();if(!p)return[];const w=V(Qv,y,h);switch(p.getItem(w)){case $i.NONE:return[Ur];case $i.LOCAL:return[Ya,po];case $i.SESSION:return[po];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ya)&&p.push(Ya),typeof window<"u")for(const w of[bs,po])p.includes(w)||p.push(w);return p.includes(Ur)||p.push(Ur),p}class Lm{constructor(){this.providerId="phone",this._delegate=new Vi(hu(X.Z.auth()))}static credential(h,p){return Vi.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Lm.PHONE_SIGN_IN_METHOD=Vi.PHONE_SIGN_IN_METHOD,Lm.PROVIDER_ID=Vi.PROVIDER_ID;const uE=ne;class t_{constructor(h,p,w=X.Z.app()){var S;uE(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new sa(h,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Um(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Fm(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Un,FacebookAuthProvider:Zr,GithubAuthProvider:Bu,GoogleAuthProvider:hl,OAuthProvider:gi,SAMLAuthProvider:ws,PhoneAuthProvider:Lm,PhoneMultiFactorGenerator:rE,RecaptchaVerifier:t_,TwitterAuthProvider:th,Auth:Fm,AuthCredential:ys,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},5861:(vt,Me,F)=>{function m(O,ae,oe,pe,fe,Ie,me){try{var j=O[Ie](me),H=j.value}catch(W){return void oe(W)}j.done?ae(H):Promise.resolve(H).then(pe,fe)}function X(O){return function(){var ae=this,oe=arguments;return new Promise(function(pe,fe){var Ie=O.apply(ae,oe);function me(H){m(Ie,pe,fe,me,j,"next",H)}function j(H){m(Ie,pe,fe,me,j,"throw",H)}me(void 0)})}}F.d(Me,{Z:()=>X})}},vt=>{vt(vt.s=2434)}]);