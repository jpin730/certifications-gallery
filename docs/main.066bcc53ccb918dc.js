"use strict";(self.webpackChunkcertifications_gallery=self.webpackChunkcertifications_gallery||[]).push([[179],{2011:(ot,Ce,k)=>{k.d(Ce,{Dh:()=>de,GT:()=>he,cc:()=>Ae,hO:()=>Fe,on:()=>V,pX:()=>re,xv:()=>fe});var v=k(4650),X=k(127),P=k(5813);ot=k.hmd(ot);const oe=["ngOnDestroy"],re=(pe,Qe,nt,Te={})=>new Proxy(pe,{get:(_e,Ie)=>nt.runOutsideAngular(()=>{var Ve;if(pe[Ie])return!(null===(Ve=Te?.spy)||void 0===Ve)&&Ve.get&&Te.spy.get(Ie,pe[Ie]),pe[Ie];if(oe.indexOf(Ie)>-1)return()=>{};const Be=Qe.toPromise().then(U=>{const ge=U&&U[Ie];return"function"==typeof ge?ge.bind(U):ge&&ge.then?ge.then(Z=>nt.run(()=>Z)):nt.run(()=>ge)});return new Proxy(()=>{},{get:(U,ge)=>Be[ge],apply:(U,ge,Z)=>Be.then(J=>{var ie;const te=J&&J(...Z);return!(null===(ie=Te?.spy)||void 0===ie)&&ie.apply&&Te.spy.apply(Ie,Z,te),te})})})}),he=(pe,Qe)=>{Qe.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Te=>{Object.defineProperty(pe.prototype,Te,Object.getOwnPropertyDescriptor(nt.prototype||nt,Te))})})};class ue{constructor(Qe){return Qe}}const de=new v.OlP("angularfire2.app.options"),fe=new v.OlP("angularfire2.app.name");function V(pe,Qe,nt){const _e="object"==typeof nt&&nt||{};_e.name=_e.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ve=X.Z.apps.filter(Be=>Be&&Be.name===_e.name)[0]||Qe.runOutsideAngular(()=>X.Z.initializeApp(pe,_e));try{JSON.stringify(pe)!==JSON.stringify(Ve.options)&&B("error",`${Ve.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Ve)}const B=(pe,...Qe)=>{(0,v.X6Q)()&&typeof console<"u"&&console[pe](...Qe)},Y={provide:ue,useFactory:V,deps:[de,v.R0b,[new v.FiY,fe]]};let Fe=(()=>{class pe{constructor(nt){X.Z.registerVersion("angularfire",P.q4.full,"core"),X.Z.registerVersion("angularfire",P.q4.full,"app-compat"),X.Z.registerVersion("angular",v.q4F.full,nt.toString())}static initializeApp(nt,Te){return{ngModule:pe,providers:[{provide:de,useValue:nt},{provide:fe,useValue:Te}]}}}return pe.\u0275fac=function(nt){return new(nt||pe)(v.LFG(v.Lbi))},pe.\u0275mod=v.oAB({type:pe}),pe.\u0275inj=v.cJS({providers:[Y]}),pe})();function Ae(pe,Qe,nt,Te,_e){const[,Ie,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===pe)||[];if(Ie)return function we(pe,Qe){try{return pe.toString()===Qe.toString()}catch{return pe===Qe}}(_e,Ve)||(me("error",`${Qe} was already initialized on the ${nt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:_e,was:Ve})),Ie;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([pe,Be,_e]),Be}}const Xe=!!ot.hot,me=(pe,...Qe)=>{(0,v.X6Q)()&&typeof console<"u"&&console[pe](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Ce,k)=>{k.d(Ce,{q4:()=>st,iC:()=>ai,HU:()=>oi,vb:()=>ts,JM:()=>Ei});var v=k(4650),X=k(5867),P=k(5861),oe=k(9681),re=k(2090),he=k(4859),ue=k(1877),de=k(8766);const fe="@firebase/installations",V="0.5.12",Y=`w:${V}`,Fe="FIS_v2",Qe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Te({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function _e(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(D,C){const L=(yield C.json()).error;return Qe.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Be({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const x=Be(D);return x.append("Authorization",function ie(D){return`${Fe} ${D}`}(C)),x}function ge(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function te(D,C){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const L=Te(D),K=Be(D),ne=C.getImmediate({optional:!0});if(ne){const ht=yield ne.getHeartbeatsHeader();ht&&K.append("x-firebase-client",ht)}const je={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:Fe,appId:D.appId,sdkVersion:Y})},at=yield ge(()=>fetch(L,je));if(at.ok){const ht=yield at.json();return{fid:ht.fid||x,registrationStatus:2,refreshToken:ht.refreshToken,authToken:_e(ht.authToken)}}throw yield Ie("Create Installation",at)})).apply(this,arguments)}function Ne(D){return new Promise(C=>{setTimeout(C,D)})}const Bt=/^[cdef][\w-]{21}$/;function ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function en(D){return function ut(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Bt.test(x)?x:""}catch{return""}}function Mn(D){return`${D.appName}!${D.appId}`}const Wt=new Map;function qt(D,C){const x=Mn(D);Jt(x,C),function Wo(D,C){const x=function mr(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=D=>{Jt(D.data.key,D.data.fid)}),Lr}();x&&x.postMessage({key:D,fid:C}),function Fr(){0===Wt.size&&Lr&&(Lr.close(),Lr=null)}()}(x,C)}function Jt(D,C){const x=Wt.get(D);if(x)for(const L of x)L(C)}let Lr=null;const Ur="firebase-installations-store";let gi=null;function io(){return gi||(gi=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Ur)}})),gi}function Ke(D,C){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.Z)(function*(D,C){const x=Mn(D),K=(yield io()).transaction(Ur,"readwrite"),ne=K.objectStore(Ur),be=yield ne.get(x);return yield ne.put(C,x),yield K.done,(!be||be.fid!==C.fid)&&qt(D,C.fid),C})).apply(this,arguments)}function $i(D){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,P.Z)(function*(D){const C=Mn(D),L=(yield io()).transaction(Ur,"readwrite");yield L.objectStore(Ur).delete(C),yield L.done})).apply(this,arguments)}function mi(D,C){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,P.Z)(function*(D,C){const x=Mn(D),K=(yield io()).transaction(Ur,"readwrite"),ne=K.objectStore(Ur),be=yield ne.get(x),je=C(be);return void 0===je?yield ne.delete(x):yield ne.put(je,x),yield K.done,je&&(!be||be.fid!==je.fid)&&qt(D,je.fid),je})).apply(this,arguments)}function Nn(D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,P.Z)(function*(D){let C;const x=yield mi(D.appConfig,L=>{const K=cn(L),ne=lt(D,K);return C=ne.registrationPromise,ne.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function cn(D){return vt(D||{fid:ze(),registrationStatus:0})}function lt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},L=function it(D,C){return rn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:L}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:tr(D)}:{installationEntry:C}}function rn(){return(rn=(0,P.Z)(function*(D,C){try{const x=yield te(D,C);return Ke(D.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield $i(D.appConfig):yield Ke(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function tr(D){return nr.apply(this,arguments)}function nr(){return(nr=(0,P.Z)(function*(D){let C=yield Ar(D.appConfig);for(;1===C.registrationStatus;)yield Ne(100),C=yield Ar(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield Nn(D);return L||x}return C})).apply(this,arguments)}function Ar(D){return mi(D,C=>{if(!C)throw Qe.create("installation-not-found");return vt(C)})}function vt(D){return function Hi(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Kt(D,C){return yi.apply(this,arguments)}function yi(){return(yi=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const L=Gt(D,x),K=U(D,x),ne=C.getImmediate({optional:!0});if(ne){const ht=yield ne.getHeartbeatsHeader();ht&&K.append("x-firebase-client",ht)}const je={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Y,appId:D.appId}})},at=yield ge(()=>fetch(L,je));if(at.ok)return _e(yield at.json());throw yield Ie("Generate Auth Token",at)})).apply(this,arguments)}function Gt(D,{fid:C}){return`${Te(D)}/${C}/authTokens:generate`}function W(D){return j.apply(this,arguments)}function j(){return(j=(0,P.Z)(function*(D,C=!1){let x;const L=yield mi(D.appConfig,ne=>{if(!rt(ne))throw Qe.create("not-registered");const be=ne.authToken;if(!C&&sn(be))return ne;if(1===be.requestStatus)return x=F(D,C),ne;{if(!navigator.onLine)throw Qe.create("app-offline");const je=qn(ne);return x=Ee(D,je),je}});return x?yield x:L.authToken})).apply(this,arguments)}function F(D,C){return $.apply(this,arguments)}function $(){return($=(0,P.Z)(function*(D,C){let x=yield z(D.appConfig);for(;1===x.authToken.requestStatus;)yield Ne(100),x=yield z(D.appConfig);const L=x.authToken;return 0===L.requestStatus?W(D,C):L})).apply(this,arguments)}function z(D){return mi(D,C=>{if(!rt(C))throw Qe.create("not-registered");return function Ot(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ee(D,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*(D,C){try{const x=yield Kt(D,C),L=Object.assign(Object.assign({},C),{authToken:x});return yield Ke(D.appConfig,L),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ke(D.appConfig,L)}else yield $i(D.appConfig);throw x}})).apply(this,arguments)}function rt(D){return void 0!==D&&2===D.registrationStatus}function sn(D){return 2===D.requestStatus&&!function Zt(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function qn(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function fn(){return(fn=(0,P.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:L}=yield Nn(C);return L?L.catch(console.error):W(C).catch(console.error),x.fid})).apply(this,arguments)}function Si(){return(Si=(0,P.Z)(function*(D,C=!1){const x=D;return yield xr(x),(yield W(x,C)).token})).apply(this,arguments)}function xr(D){return Un.apply(this,arguments)}function Un(){return(Un=(0,P.Z)(function*(D){const{registrationPromise:C}=yield Nn(D);C&&(yield C)})).apply(this,arguments)}function ds(D){return Qe.create("missing-app-config-values",{valueName:D})}const so="installations",pn=D=>{const C=D.getProvider("app").getImmediate(),x=function ln(D){if(!D||!D.options)throw ds("App Configuration");if(!D.name)throw ds("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw ds(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Rs=D=>{const C=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(C,so).getImmediate();return{getId:()=>function St(D){return fn.apply(this,arguments)}(x),getToken:K=>function Fn(D){return Si.apply(this,arguments)}(x,K)}};(function gc(){(0,oe._registerComponent)(new he.wA(so,pn,"PUBLIC")),(0,oe._registerComponent)(new he.wA("installations-internal",Rs,"PRIVATE"))})(),(0,oe.registerVersion)(fe,V),(0,oe.registerVersion)(fe,V,"esm2017");const Ai="@firebase/remote-config",Bn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ph{constructor(C,x,L,K){this.client=C,this.storage=x,this.storageCache=L,this.logger=K}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,K=L<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var x=this;return(0,P.Z)(function*(){const[L,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(C.cacheMaxAgeMillis,L))return K;C.eTag=K&&K.eTag;const ne=yield x.client.fetch(C),be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&be.push(x.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(be),ne})()}}function wc(D=navigator){return D.languages&&D.languages[0]||D.language}class Ic{constructor(C,x,L,K,ne,be){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=L,this.projectId=K,this.apiKey=ne,this.appId=be}fetch(C){var x=this;return(0,P.Z)(function*(){var L,K,ne;const[be,je]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),ht=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ze={sdk_version:x.sdkVersion,app_instance_id:be,app_instance_id_token:je,app_id:x.appId,language_code:wc()},_n={method:"POST",headers:bt,body:JSON.stringify(Ze)},jn=fetch(ht,_n),zs=new Promise((Do,ui)=>{C.signal.addEventListener(()=>{const qc=new Error("The operation was aborted.");qc.name="AbortError",ui(qc)})});let bs;try{yield Promise.race([jn,zs]),bs=yield jn}catch(Do){let ui="fetch-client-network";throw"AbortError"===(null===(L=Do)||void 0===L?void 0:L.name)&&(ui="fetch-timeout"),Bn.create(ui,{originalErrorMessage:null===(K=Do)||void 0===K?void 0:K.message})}let Pi=bs.status;const wr=bs.headers.get("ETag")||void 0;let Oi,Ws;if(200===bs.status){let Do;try{Do=yield bs.json()}catch(ui){throw Bn.create("fetch-client-parse",{originalErrorMessage:null===(ne=ui)||void 0===ne?void 0:ne.message})}Oi=Do.entries,Ws=Do.state}if("INSTANCE_STATE_UNSPECIFIED"===Ws?Pi=500:"NO_CHANGE"===Ws?Pi=304:("NO_TEMPLATE"===Ws||"EMPTY_CONFIG"===Ws)&&(Oi={}),304!==Pi&&200!==Pi)throw Bn.create("fetch-status",{httpStatus:Pi});return{status:Pi,eTag:wr,config:Oi}})()}}class Pp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,P.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,L)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:L}){var K=this;return(0,P.Z)(function*(){yield function Zn(D,C){return new Promise((x,L)=>{const K=Math.max(C-Date.now(),0),ne=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ne),L(Bn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ne=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function ql(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ne))throw ne;const be={throttleEndTimeMillis:Date.now()+(0,re.$s)(L),backoffCount:L+1};return yield K.storage.setThrottleMetadata(be),K.attemptFetch(C,be)}})()}}class Kl{constructor(C,x,L,K,ne){this.app=C,this._client=x,this._storageCache=L,this._storage=K,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ec(D,C){var x;const L=D.target.error||void 0;return Bn.create(C,{originalErrorMessage:L&&(null===(x=L)||void 0===x?void 0:x.message)})}const gs="app_namespace_store";class Fp{constructor(C,x,L,K=function Lp(){return new Promise((D,C)=>{var x;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=K=>{C(Ec(K,"storage-open"))},L.onsuccess=K=>{D(K.target.result)},L.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(gs,{keyPath:"compositeKey"})}}catch(L){C(Bn.create("storage-open",{originalErrorMessage:null===(x=L)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=L,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,P.Z)(function*(){const L=yield x.openDbPromise;return new Promise((K,ne)=>{var be;const at=L.transaction([gs],"readonly").objectStore(gs),ht=x.createCompositeKey(C);try{const bt=at.get(ht);bt.onerror=Ze=>{ne(Ec(Ze,"storage-get"))},bt.onsuccess=Ze=>{const _n=Ze.target.result;K(_n?_n.value:void 0)}}catch(bt){ne(Bn.create("storage-get",{originalErrorMessage:null===(be=bt)||void 0===be?void 0:be.message}))}})})()}set(C,x){var L=this;return(0,P.Z)(function*(){const K=yield L.openDbPromise;return new Promise((ne,be)=>{var je;const ht=K.transaction([gs],"readwrite").objectStore(gs),bt=L.createCompositeKey(C);try{const Ze=ht.put({compositeKey:bt,value:x});Ze.onerror=_n=>{be(Ec(_n,"storage-set"))},Ze.onsuccess=()=>{ne()}}catch(Ze){be(Bn.create("storage-set",{originalErrorMessage:null===(je=Ze)||void 0===je?void 0:je.message}))}})})()}delete(C){var x=this;return(0,P.Z)(function*(){const L=yield x.openDbPromise;return new Promise((K,ne)=>{var be;const at=L.transaction([gs],"readwrite").objectStore(gs),ht=x.createCompositeKey(C);try{const bt=at.delete(ht);bt.onerror=Ze=>{ne(Ec(Ze,"storage-delete"))},bt.onsuccess=()=>{K()}}catch(bt){ne(Bn.create("storage-delete",{originalErrorMessage:null===(be=bt)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Zl{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const x=C.storage.getLastFetchStatus(),L=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),ne=yield x;ne&&(C.lastFetchStatus=ne);const be=yield L;be&&(C.lastSuccessfulFetchTimestampMillis=be);const je=yield K;je&&(C.activeConfig=je)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ya(){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,P.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function ms(){(0,oe._registerComponent)(new he.wA("remote-config",function D(C,{instanceIdentifier:x}){const L=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Bn.create("registration-window");if(!(0,re.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:ne,apiKey:be,appId:je}=L.options;if(!ne)throw Bn.create("registration-project-id");if(!be)throw Bn.create("registration-api-key");if(!je)throw Bn.create("registration-app-id");const at=new Fp(je,L.name,x=x||"firebase"),ht=new Zl(at),bt=new ue.Yd(Ai);bt.logLevel=ue.in.ERROR;const Ze=new Ic(K,oe.SDK_VERSION,x,ne,be,je),_n=new Pp(Ze,at),jn=new Ph(_n,at,ht,bt),zs=new Kl(L,jn,ht,at,bt);return function rr(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(zs),zs},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ai,"0.3.11"),(0,oe.registerVersion)(Ai,"0.3.11","esm2017")}();const xi="/firebase-messaging-sw.js",zi="/firebase-cloud-messaging-push-scope",Wi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zo="google.c.a.c_id",Qa="google.c.a.c_l",bc="google.c.a.ts",kh="google.c.a.e";var qi=(()=>{return(D=qi||(qi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",qi;var D})();function ti(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Br(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),K=new Uint8Array(L.length);for(let ne=0;ne<L.length;++ne)K[ne]=L.charCodeAt(ne);return K}const oo="fcm_token_details_db",dr="fcm_token_object_Store";function Lh(D){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(oo))return null;let C=null;return(yield(0,de.X3)(oo,5,{upgrade:(L=(0,P.Z)(function*(K,ne,be,je){var at;if(ne<2||!K.objectStoreNames.contains(dr))return;const ht=je.objectStore(dr),bt=yield ht.index("fcmSenderId").get(D);if(yield ht.clear(),bt)if(2===ne){const Ze=bt;if(!Ze.auth||!Ze.p256dh||!Ze.endpoint)return;C={token:Ze.fcmToken,createTime:null!==(at=Ze.createTime)&&void 0!==at?at:Date.now(),subscriptionOptions:{auth:Ze.auth,p256dh:Ze.p256dh,endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:"string"==typeof Ze.vapidKey?Ze.vapidKey:ti(Ze.vapidKey)}}}else if(3===ne){const Ze=bt;C={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:ti(Ze.auth),p256dh:ti(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:ti(Ze.vapidKey)}}}else if(4===ne){const Ze=bt;C={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:ti(Ze.auth),p256dh:ti(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:ti(Ze.vapidKey)}}}}),function(ne,be,je,at){return L.apply(this,arguments)})})).close(),yield(0,de.Lj)(oo),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),En(C)?C:null;var L}),Fh.apply(this,arguments)}function En(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ni="firebase-messaging-store";let Rr=null;function Xa(){return Rr||(Rr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ni)}})),Rr}function ao(D){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,P.Z)(function*(D){const C=wi(D),L=yield(yield Xa()).transaction(ni).objectStore(ni).get(C);if(L)return L;{const K=yield Lh(D.appConfig.senderId);if(K)return yield Ut(D,K),K}})).apply(this,arguments)}function Ut(D,C){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(D,C){const x=wi(D),K=(yield Xa()).transaction(ni,"readwrite");return yield K.objectStore(ni).put(C,x),yield K.done,C})).apply(this,arguments)}function ks(D){return tu.apply(this,arguments)}function tu(){return(tu=(0,P.Z)(function*(D){const C=wi(D),L=(yield Xa()).transaction(ni,"readwrite");yield L.objectStore(ni).delete(C),yield L.done})).apply(this,arguments)}function wi({appConfig:D}){return D.appId}const yn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _t(D,C){return ru.apply(this,arguments)}function ru(){return(ru=(0,P.Z)(function*(D,C){var x;const L=yield Tc(D),K=De(C),ne={method:"POST",headers:L,body:JSON.stringify(K)};let be;try{be=yield(yield fetch(Zi(D.appConfig),ne)).json()}catch(je){throw yn.create("token-subscribe-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(be.error)throw yn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw yn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function Vh(D,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(D,C){var x;const L=yield Tc(D),K=De(C.subscriptionOptions),ne={method:"PATCH",headers:L,body:JSON.stringify(K)};let be;try{be=yield(yield fetch(`${Zi(D.appConfig)}/${C.token}`,ne)).json()}catch(je){throw yn.create("token-update-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(be.error)throw yn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw yn.create("token-update-no-token");return be.token})).apply(this,arguments)}function su(D,C){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,P.Z)(function*(D,C){var x;const K={method:"DELETE",headers:yield Tc(D)};try{const be=yield(yield fetch(`${Zi(D.appConfig)}/${C}`,K)).json();if(be.error)throw yn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ne){throw yn.create("token-unsubscribe-failed",{errorInfo:null===(x=ne)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Zi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Tc(D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function De({p256dh:D,auth:C,endpoint:x,vapidKey:L}){const K={web:{endpoint:x,auth:C,p256dh:D}};return L!==Wi&&(K.web.applicationPubKey=L),K}const kt=6048e5;function ou(D){return au.apply(this,arguments)}function au(){return(au=(0,P.Z)(function*(D){const C=yield Sc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ti(C.getKey("auth")),p256dh:ti(C.getKey("p256dh"))},L=yield ao(D.firebaseDependencies);if(L){if(Xl(L.subscriptionOptions,x))return Date.now()>=L.createTime+kt?uo(D,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield su(D.firebaseDependencies,L.token)}catch(K){console.warn(K)}return Jo(D.firebaseDependencies,x)}return Jo(D.firebaseDependencies,x)})).apply(this,arguments)}function Dn(D){return uu.apply(this,arguments)}function uu(){return(uu=(0,P.Z)(function*(D){const C=yield ao(D.firebaseDependencies);C&&(yield su(D.firebaseDependencies,C.token),yield ks(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function uo(D,C){return ri.apply(this,arguments)}function ri(){return(ri=(0,P.Z)(function*(D,C){try{const x=yield Vh(D.firebaseDependencies,C),L=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Ut(D.firebaseDependencies,L),x}catch(x){throw yield Dn(D),x}})).apply(this,arguments)}function Jo(D,C){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,P.Z)(function*(D,C){const L={token:yield _t(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Ut(D,L),L.token})).apply(this,arguments)}function Sc(D,C){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Br(C)})})).apply(this,arguments)}function Xl(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function ea(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function bn(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const L=C.notification.body;L&&(D.notification.body=L);const K=C.notification.image;K&&(D.notification.image=K)}(C,D),function Mi(D,C){!C.data||(D.data=C.data)}(C,D),function xc(D,C){var x,L,K,ne,be;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const je=null!==(K=null===(L=C.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==K?K:null===(ne=C.notification)||void 0===ne?void 0:ne.click_action;je&&(D.fcmOptions.link=je);const at=null===(be=C.fcmOptions)||void 0===be?void 0:be.analytics_label;at&&(D.fcmOptions.analyticsLabel=at)}(C,D),C}function Ls(D){return"object"==typeof D&&!!D&&Zo in D}function Yi(D,C){const x=[];for(let L=0;L<D.length;L++)x.push(D.charAt(L)),L<C.length&&x.push(C.charAt(L));return x.join("")}function ta(D){return yn.create("missing-app-config-values",{valueName:D})}Yi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vp{constructor(C,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Up(D){if(!D||!D.options)throw ta("App Configuration Object");if(!D.name)throw ta("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const L of C)if(!x[L])throw ta(L);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Mc(D){return cu.apply(this,arguments)}function cu(){return(cu=(0,P.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(xi,{scope:zi}),D.swRegistration.update().catch(()=>{})}catch(x){throw yn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function na(D,C){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Mc(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw yn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function ra(D,C){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Wi)})).apply(this,arguments)}function du(){return(du=(0,P.Z)(function*(D,C){if(!navigator)throw yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yn.create("permission-blocked");return yield ra(D,C?.vapidKey),yield na(D,C?.serviceWorkerRegistration),ou(D)})).apply(this,arguments)}function Pc(D,C,x){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,P.Z)(function*(D,C,x){const L=kc(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[Zo],message_name:x[Qa],message_time:x[bc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function kc(D){switch(D){case qi.NOTIFICATION_CLICKED:return"notification_open";case qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fs(){return(Fs=(0,P.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===qi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ea(x)):D.onMessageHandler.next(ea(x)));const L=x.data;Ls(L)&&"1"===L[kh]&&(yield Pc(D,x.messageType,L))})).apply(this,arguments)}const Us="@firebase/messaging",Yn=D=>{const C=new Vp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ed(D,C){return Fs.apply(this,arguments)}(C,x)),C},jr=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:L=>function lu(D,C){return du.apply(this,arguments)}(C,L)}};function td(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,P.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dn(){(0,oe._registerComponent)(new he.wA("messaging",Yn,"PUBLIC")),(0,oe._registerComponent)(new he.wA("messaging-internal",jr,"PRIVATE")),(0,oe.registerVersion)(Us,"0.9.16"),(0,oe.registerVersion)(Us,"0.9.16","esm2017")}();const ho="analytics",id="firebase_id",Vs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pu="https://www.googletagmanager.com/gtag/js",Cn=new ue.Yd("@firebase/analytics");function gu(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function mu(D,C){const x=document.createElement("script");x.src=`${pu}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function jh(D,C,x,L,K,ne){return fo.apply(this,arguments)}function fo(){return(fo=(0,P.Z)(function*(D,C,x,L,K,ne){const be=L[K];try{if(be)yield C[be];else{const at=(yield gu(x)).find(ht=>ht.measurementId===K);at&&(yield C[at.appId])}}catch(je){Cn.error(je)}D("config",K,ne)})).apply(this,arguments)}function po(D,C,x,L,K){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,P.Z)(function*(D,C,x,L,K){try{let ne=[];if(K&&K.send_to){let be=K.send_to;Array.isArray(be)||(be=[be]);const je=yield gu(x);for(const at of be){const ht=je.find(Ze=>Ze.measurementId===at),bt=ht&&C[ht.appId];if(!bt){ne=[];break}ne.push(bt)}}0===ne.length&&(ne=Object.values(C)),yield Promise.all(ne),D("event",L,K||{})}catch(ne){Cn.error(ne)}})).apply(this,arguments)}function od(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(pu))return C;return null}const sr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),aa=new class Ri{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function ud(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ua(D){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,P.Z)(function*(D){var C;const{appId:x,apiKey:L}=D,K={method:"GET",headers:ud(L)},ne=Vs.replace("{app-id}",x),be=yield fetch(ne,K);if(200!==be.status&&304!==be.status){let je="";try{const at=yield be.json();null!==(C=at.error)&&void 0!==C&&C.message&&(je=at.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:be.status,responseMessage:je})}return be.json()})).apply(this,arguments)}function Pn(D){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,P.Z)(function*(D,C=aa,x){const{appId:L,apiKey:K,measurementId:ne}=D.options;if(!L)throw sr.create("no-app-id");if(!K){if(ne)return{measurementId:ne,appId:L};throw sr.create("no-api-key")}const be=C.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new wu;return setTimeout((0,P.Z)(function*(){je.abort()}),void 0!==x?x:6e4),vu({appId:L,apiKey:K,measurementId:ne},be,je,C)})).apply(this,arguments)}function vu(D,C,x){return js.apply(this,arguments)}function js(){return(js=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},L,K=aa){var ne,be;const{appId:je,measurementId:at}=D;try{yield ca(L,C)}catch(ht){if(at)return Cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${null===(ne=ht)||void 0===ne?void 0:ne.message}]`),{appId:je,measurementId:at};throw ht}try{const ht=yield ua(D);return K.deleteThrottleMetadata(je),ht}catch(ht){const bt=ht;if(!_u(bt)){if(K.deleteThrottleMetadata(je),at)return Cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:je,measurementId:at};throw ht}const Ze=503===Number(null===(be=bt?.customData)||void 0===be?void 0:be.httpStatus)?(0,re.$s)(x,K.intervalMillis,30):(0,re.$s)(x,K.intervalMillis),_n={throttleEndTimeMillis:Date.now()+Ze,backoffCount:x+1};return K.setThrottleMetadata(je,_n),Cn.debug(`Calling attemptFetch again in ${Ze} millis`),vu(D,_n,L,K)}})).apply(this,arguments)}function ca(D,C){return new Promise((x,L)=>{const K=Math.max(C-Date.now(),0),ne=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ne),L(sr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function _u(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class wu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let _s,da;function ws(){return(ws=(0,P.Z)(function*(D,C,x,L,K){if(K&&K.global)D("event",x,L);else{const ne=yield C;D("event",x,Object.assign(Object.assign({},L),{send_to:ne}))}})).apply(this,arguments)}function Hs(D){da=D}function $c(D){_s=D}function Is(){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,P.Z)(function*(){var D;if(!(0,re.hl)())return Cn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return Cn.warn(sr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function yo(){return(yo=(0,P.Z)(function*(D,C,x,L,K,ne,be){var je;const at=Pn(D);at.then(jn=>{x[jn.measurementId]=jn.appId,D.options.measurementId&&jn.measurementId!==D.options.measurementId&&Cn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${jn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(jn=>Cn.error(jn)),C.push(at);const ht=Is().then(jn=>{if(jn)return L.getId()}),[bt,Ze]=yield Promise.all([at,ht]);od()||mu(ne,bt.measurementId),da&&(K("consent","default",da),Hs(void 0)),K("js",new Date);const _n=null!==(je=be?.config)&&void 0!==je?je:{};return _n.origin="firebase",_n.update=!0,null!=Ze&&(_n[id]=Ze),K("config",bt.measurementId,_n),_s&&(K("set",_s),$c(void 0)),bt.measurementId})).apply(this,arguments)}class Du{constructor(C){this.app=C}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},Es=[];const vo={};let wo,Gs,_o="dataLayer",ha=!1;function sy(D,C,x){!function Bp(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((L,K)=>`(${K+1}) ${L}`).join(" "),x=sr.create("invalid-analytics-context",{errorInfo:C});Cn.warn(x.message)}}();const L=D.options.appId;if(!L)throw sr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw sr.create("no-api-key");Cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$r[L])throw sr.create("already-exists",{id:L});if(!ha){!function sd(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(_o);const{wrappedGtag:ne,gtagCore:be}=function ia(D,C,x,L,K){let ne=function(...be){window[L].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ne=window[K]),window[K]=function yu(D,C,x,L){function ne(){return(ne=(0,P.Z)(function*(be,je,at){try{"event"===be?yield po(D,C,x,je,at):"config"===be?yield jh(D,C,x,L,je,at):"consent"===be?D("consent","update",at):D("set",je)}catch(ht){Cn.error(ht)}})).apply(this,arguments)}return function K(be,je,at){return ne.apply(this,arguments)}}(ne,D,C,x),{gtagCore:ne,wrappedGtag:window[K]}}($r,Es,vo,_o,"gtag");Gs=ne,wo=be,ha=!0}return $r[L]=function mo(D,C,x,L,K,ne,be){return yo.apply(this,arguments)}(D,Es,vo,C,wo,_o,x),new Du(D)}function ay(){return $h.apply(this,arguments)}function $h(){return($h=(0,P.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const vr="@firebase/analytics";!function Hr(){(0,oe._registerComponent)(new he.wA(ho,(C,{options:x})=>sy(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new he.wA("analytics-internal",function D(C){try{const x=C.getProvider(ho).getImmediate();return{logEvent:(L,K,ne)=>function Ji(D,C,x,L){D=(0,re.m9)(D),function cd(D,C,x,L,K){return ws.apply(this,arguments)}(Gs,$r[D.app.options.appId],C,x,L).catch(K=>Cn.error(K))}(x,L,K,ne)}}catch(x){throw sr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(vr,"0.8.0"),(0,oe.registerVersion)(vr,"0.8.0","esm2017")}();var Qn=k(4408),Ni=k(7565);const kn=new class Je extends Ni.v{}(class an extends Qn.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(C,x,L):(C.flush(this),0)}});var Gc=k(4986),Io=k(8505),es=k(9468),Eo=k(5363);const st=new v.GfV("7.4.1"),fa="__angularfire_symbol__analyticsIsSupportedValue",ii="__angularfire_symbol__analyticsIsSupported",Ds="__angularfire_symbol__remoteConfigIsSupportedValue",pa="__angularfire_symbol__remoteConfigIsSupported",zc="__angularfire_symbol__messagingIsSupportedValue",Gr="__angularfire_symbol__messagingIsSupported";function Ei(D,C,x){if(C){if(1===C.length)return C[0];const ne=C.filter(be=>be.app===x);if(1===ne.length)return ne[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[ii]||(globalThis[ii]=ay().then(D=>globalThis[fa]=D).catch(()=>globalThis[fa]=!1)),globalThis[Gr]||(globalThis[Gr]=td().then(D=>globalThis[zc]=D).catch(()=>globalThis[zc]=!1)),globalThis[pa]||(globalThis[pa]=Ya().then(D=>globalThis[Ds]=D).catch(()=>globalThis[Ds]=!1));const ts=(D,C)=>{const x=C?[C]:(0,X.C6)(),L=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(be=>{L.includes(be)||L.push(be)})}),L};function si(){}class Ct{constructor(C,x=kn){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,L){const K=this.zone;return this.delegate.schedule(function(be){K.runGuarded(()=>{C.apply(this,[be])})},x,L)}}class Wc{constructor(C){this.zone=C,this.task=null}call(C,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si)),x.pipe((0,Io.b)({next:L,complete:L,error:L})).subscribe(C).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let oi=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ct(Zone.current)),this.insideAngular=x.run(()=>new Ct(Zone.current,Gc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(v.LFG(v.R0b))},D.\u0275prov=v.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ye(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ai(D){return Ye(),function hd(D){return function(x){return(x=x.lift(new Wc(D.ngZone))).pipe((0,es.R)(D.outsideAngular),(0,Eo.Q)(D.insideAngular))}}(Ye())(D)}},2090:(ot,Ce,k)=>{k.d(Ce,{$s:()=>Hi,BH:()=>Fe,G6:()=>Be,L:()=>de,LL:()=>Pe,Sg:()=>Ae,UG:()=>me,US:()=>he,ZB:()=>B,ZR:()=>te,b$:()=>nt,eu:()=>ge,hl:()=>U,jU:()=>pe,m9:()=>Gt,ne:()=>io,pd:()=>Ur,r3:()=>Sr,ru:()=>Qe,tV:()=>fe,uI:()=>Xe,vZ:()=>Lr,w1:()=>_e,xO:()=>ls,xb:()=>Jt,z$:()=>we,zI:()=>Z,zd:()=>Ti});const oe=function(W){const j=[];let F=0;for(let $=0;$<W.length;$++){let z=W.charCodeAt($);z<128?j[F++]=z:z<2048?(j[F++]=z>>6|192,j[F++]=63&z|128):55296==(64512&z)&&$+1<W.length&&56320==(64512&W.charCodeAt($+1))?(z=65536+((1023&z)<<10)+(1023&W.charCodeAt(++$)),j[F++]=z>>18|240,j[F++]=z>>12&63|128,j[F++]=z>>6&63|128,j[F++]=63&z|128):(j[F++]=z>>12|224,j[F++]=z>>6&63|128,j[F++]=63&z|128)}return j},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,j){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let z=0;z<W.length;z+=3){const Ee=W[z],Ue=z+1<W.length,rt=Ue?W[z+1]:0,sn=z+2<W.length,Zt=sn?W[z+2]:0;let St=(15&rt)<<2|Zt>>6,fn=63&Zt;sn||(fn=64,Ue||(St=64)),$.push(F[Ee>>2],F[(3&Ee)<<4|rt>>4],F[St],F[fn])}return $.join("")},encodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(W):this.encodeByteArray(oe(W),j)},decodeString(W,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(W):function(W){const j=[];let F=0,$=0;for(;F<W.length;){const z=W[F++];if(z<128)j[$++]=String.fromCharCode(z);else if(z>191&&z<224){const Ee=W[F++];j[$++]=String.fromCharCode((31&z)<<6|63&Ee)}else if(z>239&&z<365){const sn=((7&z)<<18|(63&W[F++])<<12|(63&W[F++])<<6|63&W[F++])-65536;j[$++]=String.fromCharCode(55296+(sn>>10)),j[$++]=String.fromCharCode(56320+(1023&sn))}else{const Ee=W[F++],Ue=W[F++];j[$++]=String.fromCharCode((15&z)<<12|(63&Ee)<<6|63&Ue)}}return j.join("")}(this.decodeStringToByteArray(W,j))},decodeStringToByteArray(W,j){this.init_();const F=j?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let z=0;z<W.length;){const Ee=F[W.charAt(z++)],rt=z<W.length?F[W.charAt(z)]:0;++z;const Zt=z<W.length?F[W.charAt(z)]:64;++z;const Ot=z<W.length?F[W.charAt(z)]:64;if(++z,null==Ee||null==rt||null==Zt||null==Ot)throw Error();$.push(Ee<<2|rt>>4),64!==Zt&&($.push(rt<<4&240|Zt>>2),64!==Ot&&$.push(Zt<<6&192|Ot))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},de=function(W){return function(W){const j=oe(W);return he.encodeByteArray(j,!0)}(W).replace(/\./g,"")},fe=function(W){try{return he.decodeString(W,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function B(W,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return j}for(const F in j)!j.hasOwnProperty(F)||!Y(F)||(W[F]=B(W[F],j[F]));return W}function Y(W){return"__proto__"!==W}class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,F)=>{this.resolve=j,this.reject=F})}wrapCallback(j){return(F,$)=>{F?this.reject(F):this.resolve($),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(F):j(F,$))}}}function Ae(W,j){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=j||"demo-project",z=W.iat||0,Ee=W.sub||W.user_id;if(!Ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:z,exp:z+3600,auth_time:z,sub:Ee,user_id:Ee,firebase:{sign_in_provider:"custom",identities:{}}},W);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(Ue)),""].join(".")}function we(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pe(){return"object"==typeof self&&self.self===self}function Qe(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){const W=we();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Be(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function ge(){return new Promise((W,j)=>{try{let F=!0;const $="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open($);z.onsuccess=()=>{z.result.close(),F||self.indexedDB.deleteDatabase($),W(!0)},z.onupgradeneeded=()=>{F=!1},z.onerror=()=>{var Ee;j((null===(Ee=z.error)||void 0===Ee?void 0:Ee.message)||"")}}catch(F){j(F)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class te extends Error{constructor(j,F,$){super(F),this.code=j,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(j,F,$){this.service=j,this.serviceName=F,this.errors=$}create(j,...F){const $=F[0]||{},z=`${this.service}/${j}`,Ee=this.errors[j],Ue=Ee?function Ne(W,j){return W.replace(ut,(F,$)=>{const z=j[$];return null!=z?String(z):`<${$}?>`})}(Ee,$):"Error";return new te(z,`${this.serviceName}: ${Ue} (${z}).`,$)}}const ut=/\{\$([^}]+)}/g;function Sr(W,j){return Object.prototype.hasOwnProperty.call(W,j)}function Jt(W){for(const j in W)if(Object.prototype.hasOwnProperty.call(W,j))return!1;return!0}function Lr(W,j){if(W===j)return!0;const F=Object.keys(W),$=Object.keys(j);for(const z of F){if(!$.includes(z))return!1;const Ee=W[z],Ue=j[z];if(mr(Ee)&&mr(Ue)){if(!Lr(Ee,Ue))return!1}else if(Ee!==Ue)return!1}for(const z of $)if(!F.includes(z))return!1;return!0}function mr(W){return null!==W&&"object"==typeof W}function ls(W){const j=[];for(const[F,$]of Object.entries(W))Array.isArray($)?$.forEach(z=>{j.push(encodeURIComponent(F)+"="+encodeURIComponent(z))}):j.push(encodeURIComponent(F)+"="+encodeURIComponent($));return j.length?"&"+j.join("&"):""}function Ti(W){const j={};return W.replace(/^\?/,"").split("&").forEach($=>{if($){const[z,Ee]=$.split("=");j[decodeURIComponent(z)]=decodeURIComponent(Ee)}}),j}function Ur(W){const j=W.indexOf("?");if(!j)return"";const F=W.indexOf("#",j);return W.substring(j,F>0?F:void 0)}function io(W,j){const F=new Ke(W,j);return F.subscribe.bind(F)}class Ke{constructor(j,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{j(this)}).catch($=>{this.error($)})}next(j){this.forEachObserver(F=>{F.next(j)})}error(j){this.forEachObserver(F=>{F.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,F,$){let z;if(void 0===j&&void 0===F&&void 0===$)throw new Error("Missing Observer.");z=function $i(W,j){if("object"!=typeof W||null===W)return!1;for(const F of j)if(F in W&&"function"==typeof W[F])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:F,complete:$},void 0===z.next&&(z.next=Rn),void 0===z.error&&(z.error=Rn),void 0===z.complete&&(z.complete=Rn);const Ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),Ee}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,j)}sendOne(j,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{F(this.observers[j])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}function Hi(W,j=1e3,F=2){const $=j*Math.pow(F,W),z=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+z)}function Gt(W){return W&&W._delegate?W._delegate:W}},638:(ot,Ce,k)=>{var v=k(4650);let X=null;function P(){return X}const ue=new v.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return function fe(){return(0,v.LFG)(B)}()},providedIn:"platform"}),n})();const V=new v.OlP("Location Initialized");let B=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ue))},n.\u0275prov=v.Yz7({token:n,factory:function(){return function Fe(){return new B((0,v.LFG)(ue))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(Qe)},providedIn:"root"}),n})();const pe=new v.OlP("appBaseHref");let Qe=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(de),v.LFG(pe,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(de),v.LFG(pe,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(t){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ve(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Ae,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(v.LFG(me))},n.\u0275prov=v.Yz7({token:n,factory:function(){return function _e(){return new Te((0,v.LFG)(me))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}class qo{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ps=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new qo(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),ps(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ps(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},n.\u0275dir=v.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ps(n,e){n.context.$implicit=e.item}let rr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(v.s_b),v.Y36(v.Rgc))},n.\u0275dir=v.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class vc{constructor(){this.$implicit=null,this.ngIf=null}}function ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,v.AaK)(e)}'.`)}let Dc=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function Zn(n,e){return new v.vHH(2100,!1)}();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=v.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),Yo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})();function dr(n){return"server"===n}let Ja=(()=>{class n{}return n.\u0275prov=(0,v.Yz7)({token:n,providedIn:"root",factory:()=>new Uh((0,v.LFG)(ue),window)}),n})();class Uh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ni(this.window.history)||ni(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ni(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Fs extends class ed extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new Fs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hu(){return Us=Us||document.querySelector("base"),Us?Us.getAttribute("href"):null}();return null==t?null:function jr(n){Yn=Yn||document.createElement("a"),Yn.setAttribute("href",n);const e=Yn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Us=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ka(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Yn,Us=null;const dn=new v.OlP("TRANSITION_ID"),Lc=[{provide:v.ip1,useFactory:function td(n,e,t){return()=>{t.get(v.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[dn,ue,v.zs3],multi:!0}];let Fc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const fu=new v.OlP("EventManagerPlugins");let nd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(fu),v.LFG(v.R0b))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class Uc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let co=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),lo=(()=>{class n extends co{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(rd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(rd))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ue))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function rd(n){P().remove(n)}const ho={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},id=/%COMP%/g;function mu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?mu(n,o,t):(o=o.replace(id,n),t.push(o))}return t}function sd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let fo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new po(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case v.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new od(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case v.ifc.ShadowDom:return new ad(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=mu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(nd),v.LFG(lo),v.LFG(v.AFp))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class po{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ho[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ia(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ia(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ho[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ho[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(v.JOm.DashCase|v.JOm.Important)?e.style.setProperty(t,r,o&v.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&v.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,sd(r)):this.eventManager.addEventListener(e,t,sd(r))}}function ia(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class od extends po{constructor(e,t,r,o){super(e),this.component=r;const u=mu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Cn(n){return"_ngcontent-%COMP%".replace(id,n)}(o+"-"+r.id),this.hostAttr=function gu(n){return"_nghost-%COMP%".replace(id,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ad extends po{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=mu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sr=(()=>{class n extends Uc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ue))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const sa=["alt","control","meta","shift"],oa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ri={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let aa=(()=>{class n extends Uc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),d="code."),sa.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),d+=b+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=oa[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),sa.forEach(d=>{d!==o&&(0,Ri[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ue))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function vu(){Fs.makeCurrent()},multi:!0},{provide:ue,useFactory:function ca(){return(0,v.RDi)(document),document},deps:[]}]),_s=new v.OlP(""),cd=[{provide:v.rWj,useClass:class Bh{addToWindow(e){v.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},v.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(r=>{const o=v.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],ws=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function js(){return new v.qLn},deps:[]},{provide:fu,useClass:sr,multi:!0,deps:[ue,v.R0b,v.Lbi]},{provide:fu,useClass:aa,multi:!0,deps:[ue]},{provide:fo,useClass:fo,deps:[nd,lo,v.AFp]},{provide:v.FYo,useExisting:fo},{provide:co,useExisting:lo},{provide:lo,useClass:lo,deps:[ue]},{provide:nd,useClass:nd,deps:[fu,v.R0b]},{provide:class ao{},useClass:Fc,deps:[]},[]];let Bc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:v.AFp,useValue:t.appId},{provide:dn,useExisting:v.AFp},Lc]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(_s,12))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[...ws,...cd],imports:[Yo,v.hGG]}),n})(),Qi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ue))},n.\u0275prov=v.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function go(){return new Qi((0,v.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Ji=k(515),On=k(4482),vr=k(5403);function Xi(n){return n<=0?()=>Ji.E:(0,On.e)((e,t)=>{let r=0;e.subscribe((0,vr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}var Hr=k(4986),Qn=k(9751),an=k(8996),Ni=k(7669);function Je(...n){const e=(0,Ni.yG)(n);return(0,an.D)(n,e)}var kn=k(5813),Cu=k(8189);function Io(...n){return function Gc(){return(0,Cu.J)(1)}()((0,an.D)(n,(0,Ni.yG)(n)))}function es(...n){const e=(0,Ni.yG)(n);return(0,On.e)((t,r)=>{(e?Io(n,t,e):Io(n,t)).subscribe(r)})}function Eo(){return(0,On.e)((n,e)=>{let t,r=!1;n.subscribe((0,vr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var st=k(4004);function fa(n,e,t,r,o){return(u,d)=>{let g=t,w=e,b=0;u.subscribe((0,vr.x)(d,A=>{const N=b++;w=g?n(w,A,N):(g=!0,A),r&&d.next(w)},o&&(()=>{g&&d.next(w),d.complete()})))}}function ii(n,e){return(0,On.e)(fa(n,e,arguments.length>=2,!0))}var Ds=k(4671);function zc(n,e){return n===e}function Gr(n,e){return(0,On.e)((t,r)=>{let o=0;t.subscribe((0,vr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Ye,_r=k(2011),dd=(k(2476),k(3942)),ye=k(5861),Ei=k(9681),ts=k(4859),si=k(1877),Ct=k(2090),Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oi={},ga=ga||{},dt=Wc||self;function Tu(){}function ns(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ai(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vn="closure_uid_"+(1e9*Math.random()>>>0),Hh=0;function D(n,e,t){return n.call.apply(n.bind,arguments)}function C(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function x(n,e,t){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D:C).apply(null,arguments)}function L(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function K(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function ne(){this.s=this.s,this.o=this.o}var je={};ne.prototype.s=!1,ne.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function hd(n){return Object.prototype.hasOwnProperty.call(n,vn)&&n[vn]||(n[vn]=++Hh)}(this);delete je[n]}},ne.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const at=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ht(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bt(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ns(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function Ze(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var _n=function(){if(!dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{dt.addEventListener("test",Tu,e),dt.removeEventListener("test",Tu,e)}catch{}return n}();function jn(n){return/^[\s\xa0]*$/.test(n)}var zs=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function bs(n,e){return n<e?-1:n>e?1:0}function Pi(){var n=dt.navigator;return n&&(n=n.userAgent)?n:""}function wr(n){return-1!=Pi().indexOf(n)}function Oi(n){return Oi[" "](n),n}Oi[" "]=Tu;var ma,n,Do=wr("Opera"),ui=wr("Trident")||wr("MSIE"),qc=wr("Edge"),fd=qc||ui,$p=wr("Gecko")&&!(-1!=Pi().toLowerCase().indexOf("webkit")&&!wr("Edge"))&&!(wr("Trident")||wr("MSIE"))&&!wr("Edge"),dy=-1!=Pi().toLowerCase().indexOf("webkit")&&!wr("Edge");function Gh(){var n=dt.document;return n?n.documentMode:void 0}e:{var ya="",zh=(n=Pi(),$p?/rv:([^\);]+)(\)|;)/.exec(n):qc?/Edge\/([\d\.]+)/.exec(n):ui?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):dy?/WebKit\/(\S+)/.exec(n):Do?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zh&&(ya=zh?zh[1]:""),ui){var pd=Gh();if(null!=pd&&pd>parseFloat(ya)){ma=String(pd);break e}}ma=ya}var m0={};var hy=dt.document&&ui&&(Gh()||parseInt(ma,10))||void 0;function Su(n,e){if(Ze.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($p){e:{try{Oi(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Au[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Su.X.h.call(this)}}K(Su,Ze);var Au={2:"touch",3:"pen",4:"mouse"};Su.prototype.h=function(){Su.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var va="closure_listenable_"+(1e6*Math.random()|0),xu=0;function fy(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++xu,this.ba=this.ea=!1}function md(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function zp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mu(n){const e={};for(const t in n)e[t]=n[t];return e}const yd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wh(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<yd.length;u++)t=yd[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Kc(n){this.src=n,this.g={},this.h=0}function vd(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=at(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(md(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ru(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Kc.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Ru(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new fy(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var qh="closure_lm_"+(1e6*Math.random()|0),Zc={};function Wp(n,e,t,r,o){if(r&&r.once)return rs(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Wp(n,e[u],t,r,o);return null}return t=gy(t),n&&n[va]?n.N(e,t,ai(r)?!!r.capture:!!r,o):Kh(n,e,t,!1,r,o)}function Kh(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=ai(o)?!!o.capture:!!o,g=Kp(n);if(g||(n[qh]=g=new Kc(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function py(){const e=y0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_n||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(qp(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function rs(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)rs(n,e[u],t,r,o);return null}return t=gy(t),n&&n[va]?n.O(e,t,ai(r)?!!r.capture:!!r,o):Kh(n,e,t,!0,r,o)}function Nu(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Nu(n,e[u],t,r,o);else r=ai(r)?!!r.capture:!!r,t=gy(t),n&&n[va]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ru(u=n.g[e],t,r,o))&&(md(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Kp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ru(e,t,r,o)),(t=-1<n?e[n]:null)&&_d(t))}function _d(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[va])vd(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(qp(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Kp(e))?(vd(t,n),0==t.h&&(t.src=null,e[qh]=null)):md(n)}}}function qp(n){return n in Zc?Zc[n]:Zc[n]="on"+n}function y0(n,e){if(n.ba)n=!0;else{e=new Su(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&_d(n),n=t.call(r,e)}return n}function Kp(n){return(n=n[qh])instanceof Kc?n:null}var Zp="__closure_events_fn_"+(1e9*Math.random()>>>0);function gy(n){return"function"==typeof n?n:(n[Zp]||(n[Zp]=function(e){return n.handleEvent(e)}),n[Zp])}function gn(){ne.call(this),this.i=new Kc(this),this.P=this,this.I=null}function Ir(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ze(e,n);else if(e instanceof Ze)e.target=e.target||n;else{var o=e;Wh(e=new Ze(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=wd(d,r,!0,e)&&o}if(o=wd(d=e.g=n,r,!0,e)&&o,o=wd(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=wd(d=e.g=t[u],r,!1,e)&&o}function wd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,w=d.ha||d.src;d.ea&&vd(n.i,d),o=!1!==g.call(w,r)&&o}}return o&&!r.defaultPrevented}K(gn,ne),gn.prototype[va]=!0,gn.prototype.removeEventListener=function(n,e,t,r){Nu(this,n,e,t,r)},gn.prototype.M=function(){if(gn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)md(t[r]);delete n.g[e],n.h--}}this.I=null},gn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},gn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Yc=dt.JSON.stringify;function my(){var n=yy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ed,Cs=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Jc,n=>n.reset());class Jc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Id(n){dt.setTimeout(()=>{throw n},0)}function Zh(n,e){Ed||function Yp(){var n=dt.Promise.resolve(void 0);Ed=function(){n.then(Yh)}}(),Qp||(Ed(),Qp=!0),yy.add(n,e)}var Qp=!1,yy=new class Qc{constructor(){this.h=this.g=null}add(e,t){const r=Cs.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Yh(){for(var n;n=my();){try{n.h.call(n.g)}catch(t){Id(t)}var e=Cs;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Qp=!1}function Pu(n,e){gn.call(this),this.h=n||1,this.g=e||dt,this.j=x(this.kb,this),this.l=Date.now()}function Jp(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Qh(n,e,t){if("function"==typeof n)t&&(n=x(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=x(n.handleEvent,n)}return 2147483647<Number(e)?-1:dt.setTimeout(n,e||0)}function Xc(n){n.g=Qh(()=>{n.g=null,n.i&&(n.i=!1,Xc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}K(Pu,gn),(Ye=Pu.prototype).ca=!1,Ye.R=null,Ye.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ir(this,"tick"),this.ca&&(Jp(this),this.start()))}},Ye.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){Pu.X.M.call(this),Jp(this),delete this.g};class vy extends ne{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xc(this)}M(){super.M(),this.g&&(dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function el(n){ne.call(this),this.h=n,this.g={}}K(el,ne);var Dd=[];function bd(n,e,t,r){Array.isArray(t)||(t&&(Dd[0]=t.toString()),t=Dd);for(var o=0;o<t.length;o++){var u=Wp(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Jh(n){zp(n.g,function(e,t){this.g.hasOwnProperty(t)&&_d(e)},n),n.g={}}function _a(){this.g=!0}function Ou(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Xp(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Yc(t)}catch{return e}}(n,t)+(r?" "+r:"")})}el.prototype.M=function(){el.X.M.call(this),Jh(this)},el.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_a.prototype.Aa=function(){this.g=!1},_a.prototype.info=function(){};var wa={},Td=null;function tl(){return Td=Td||new gn}function eg(n){Ze.call(this,wa.Oa,n)}function qs(n){const e=tl();Ir(e,new eg(e,n))}function tg(n,e){Ze.call(this,wa.STAT_EVENT,n),this.stat=e}function Nr(n){const e=tl();Ir(e,new tg(e,n))}function ng(n,e){Ze.call(this,wa.Pa,n),this.size=e}function Sd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return dt.setTimeout(function(){n()},e)}wa.Oa="serverreachability",K(eg,Ze),wa.STAT_EVENT="statevent",K(tg,Ze),wa.Pa="timingevent",K(ng,Ze);var ef={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},ku={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Lu(){}function rl(){}Lu.prototype.h=null;var Ad,Ia={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function tf(){Ze.call(this,"d")}function Fu(){Ze.call(this,"c")}function hr(){}function bo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new el(this),this.O=rf,this.T=new Pu(n=fd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new nf}function nf(){this.i=null,this.g="",this.h=!1}K(tf,Ze),K(Fu,Ze),K(hr,Lu),hr.prototype.g=function(){return new XMLHttpRequest},hr.prototype.i=function(){return{}},Ad=new hr;var rf=45e3,Uu={},Ea={};function Ks(n,e,t){n.K=1,n.v=ol(Zs(e)),n.s=t,n.P=!0,sf(n,null)}function sf(n,e){n.F=Date.now(),Da(n),n.A=Zs(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),$n(t.i,"t",r),n.C=0,t=n.l.H,n.h=new nf,n.g=cl(n.l,t?e:null,!n.s),0<n.N&&(n.L=new vy(x(n.Ka,n,n.g),n.N)),bd(n.S,n.g,"readystatechange",n.hb),e=n.H?Mu(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),qs(1),function Cd(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),w=0;w<g.length;w++){var b=g[w].split("=");if(1<b.length){var A=b[0];b=b[1];var N=A.split("_");d=2<=N.length&&"type"==N[1]?d+(A+"=")+b+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function xd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function ki(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=rg(n,t),o==Ea){4==e&&(n.o=4,Nr(14),r=!1),Ou(n.j,n.m,null,"[Incomplete Response]");break}if(o==Uu){n.o=4,Nr(15),Ou(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ou(n.j,n.m,o,null),sl(n,o)}xd(n)&&o!=Ea&&o!=Uu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Nr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),pg(e),e.K=!0,Nr(11))):(Ou(n.j,n.m,t,"[Invalid Chunked Response]"),Ln(n),ba(n))}function rg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ea:(t=Number(e.substring(t,r)),isNaN(t)?Uu:(r+=1)+t>e.length?Ea:(e=e.substr(r,t),n.C=r+t,e))}function Da(n){n.V=Date.now()+n.O,il(n,n.O)}function il(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sd(x(n.fb,n),e)}function Ts(n){n.B&&(dt.clearTimeout(n.B),n.B=null)}function ba(n){0==n.l.G||n.I||A0(n.l,n)}function Ln(n){Ts(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jp(n.T),Jh(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ju(t.h,n)))if(!n.J&&ju(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;wf(t),yf(t)}by(t),Nr(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Sd(x(t.bb,t),6e3));if(1>=cf(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ul(t,11)}else if((n.J||t.g==n)&&wf(t),!jn(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const A=b[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.J=r=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const ae=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.h;u.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(lf(u,u.h),u.h=null))}if(r.D){const Re=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.za=Re,wn(r.F,r.D,Re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=R0(r,r.H?r.ka:null,r.V),d.J){df(r.h,d);var g=d,w=r.J;w&&g.setTimeout(w),g.B&&(Ts(g),Da(g)),r.g=d}else Dy(r);0<t.i.length&&Dr(t)}else"stop"!=b[0]&&"close"!=b[0]||ul(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?ul(t,7):mf(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}qs(4)}catch{}}function zr(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ns(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ig(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ns(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function af(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ns(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(Ye=bo.prototype).setTimeout=function(n){this.O=n},Ye.hb=function(n){n=n.target;const e=this.L;e&&3==Ca(n)?e.l():this.Ka(n)},Ye.Ka=function(n){try{if(n==this.g)e:{const A=Ca(this.g);var e=this.g.Ea();const N=this.g.aa();if(!(3>A)&&(3!=A||fd||this.g&&(this.h.h||this.g.fa()||C0(this.g)))){this.I||4!=A||7==e||qs(8==e||0>=N?3:2),Ts(this);var t=this.g.aa();this.Y=t;t:if(xd(this)){var r=C0(this.g);n="";var o=r.length,u=4==Ca(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ln(this),ba(this);var d="";break t}this.h.i=new dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Xh(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,w=this.g;if((g=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jn(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Nr(12),Ln(this),ba(this);break e}Ou(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sl(this,t)}this.P?(ki(this,A,d),fd&&this.i&&3==A&&(bd(this.S,this.T,"tick",this.gb),this.T.start())):(Ou(this.j,this.m,d,null),sl(this,d)),4==A&&Ln(this),this.i&&!this.I&&(4==A?A0(this.l,this):(this.i=!1,Da(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Nr(12)):(this.o=0,Nr(13)),Ln(this),ba(this)}}}catch{}},Ye.gb=function(){if(this.g){var n=Ca(this.g),e=this.g.fa();this.C<e.length&&(Ts(this),ki(this,n,e),this.i&&4!=n&&Da(this))}},Ye.cancel=function(){this.I=!0,Ln(this)},Ye.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Jn(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qs(3),Nr(17)),Ln(this),this.o=2,ba(this)):il(this,this.V-n)};var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Co(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Co){this.h=void 0!==e?e:n.h,To(this,n.j),this.s=n.s,this.g=n.g,Md(this,n.m),this.l=n.l,e=n.i;var t=new Oe;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uf(this,t),this.o=n.o}else n&&(t=String(n).match(Vu))?(this.h=!!e,To(this,t[1]||"",!0),this.s=m(t[2]||""),this.g=m(t[3]||"",!0),Md(this,t[4]),this.l=m(t[5]||"",!0),uf(this,t[6]||"",!0),this.o=m(t[7]||"")):(this.h=!!e,this.i=new Oe(null,this.h))}function Zs(n){return new Co(n)}function To(n,e,t){n.j=t?m(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Md(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uf(n,e,t){e instanceof Oe?(n.i=e,function Bu(n,e){e&&!n.j&&(We(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(ft(this,r),$n(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=h(e,q)),n.i=new Oe(e,n.h))}function wn(n,e,t){n.i.set(e,t)}function ol(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function m(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function h(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,p),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function p(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Co.prototype.toString=function(){var n=[],e=this.j;e&&n.push(h(e,_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(h(e,_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(h(t,"/"==t.charAt(0)?R:S,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",h(t,ce)),n.join("")};var _=/[#\/\?@]/g,S=/[#\?:]/g,R=/[#\?]/g,q=/[#\?@]/g,ce=/#/g;function Oe(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function We(n){n.g||(n.g=new Map,n.h=0,n.i&&function sg(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ft(n,e){We(n),e=Er(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ct(n,e){return We(n),e=Er(n,e),n.g.has(e)}function $n(n,e,t){ft(n,e),0<t.length&&(n.i=null,n.g.set(Er(n,e),ht(t)),n.h+=t.length)}function Er(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Rd(n){this.l=n||Nd,n=dt.PerformanceNavigationTiming?0<(n=dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(dt.g&&dt.g.Ga&&dt.g.Ga()&&dt.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Oe.prototype).add=function(n,e){We(this),this.i=null,n=Er(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){We(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Ye.oa=function(){We(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},Ye.W=function(n){We(this);let e=[];if("string"==typeof n)ct(this,n)&&(e=e.concat(this.g.get(Er(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ye.set=function(n,e){return We(this),this.i=null,ct(this,n=Er(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var Nd=10;function ag(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cf(n){return n.h?1:n.g?n.g.size:0}function ju(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function lf(n,e){n.g?n.g.add(e):n.h=e}function df(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ug(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ht(n.i)}function cg(){}function lg(){this.g=new cg}function _y(n,e,t){const r=t||"";try{zr(n,function(o,u){let d=o;ai(o)&&(d=Yc(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Pd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Od(n){this.l=n.$b||null,this.j=n.ib||!1}function hf(n,e){gn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=dg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rd.prototype.cancel=function(){if(this.i=ug(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},cg.prototype.stringify=function(n){return dt.JSON.stringify(n,void 0)},cg.prototype.parse=function(n){return dt.JSON.parse(n,void 0)},K(Od,Lu),Od.prototype.g=function(){return new hf(this.l,this.j)},Od.prototype.i=function(n){return function(){return n}}({}),K(hf,gn);var dg=0;function hg(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function ff(n){n.readyState=4,n.l=null,n.j=null,n.A=null,al(n)}function al(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=hf.prototype).open=function(n,e){if(this.readyState!=dg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,al(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ff(this)),this.readyState=dg},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof dt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hg(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ff(this):al(this),3==this.readyState&&hg(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,ff(this))},Ye.Ta=function(n){this.g&&(this.response=n,ff(this))},Ye.ga=function(){this.g&&ff(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(hf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pf=dt.JSON.parse;function fr(n){gn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_0,this.K=this.L=!1}K(fr,gn);var _0="",rD=/^https?$/i,w0=["POST","PUT"];function I0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,E0(n),kd(n)}function E0(n){n.D||(n.D=!0,Ir(n,"complete"),Ir(n,"error"))}function D0(n){if(n.h&&typeof ga<"u"&&(!n.C[1]||4!=Ca(n)||2!=n.aa()))if(n.v&&4==Ca(n))Qh(n.Ha,0,n);else if(Ir(n,"readystatechange"),4==Ca(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Vu)[1]||null;if(!o&&dt.self&&dt.self.location){var u=dt.self.location.protocol;o=u.substr(0,u.length-1)}r=!rD.test(o?o.toLowerCase():"")}t=r}if(t)Ir(n,"complete"),Ir(n,"success");else{n.m=6;try{var d=2<Ca(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",E0(n)}}finally{kd(n)}}}function kd(n,e){if(n.g){b0(n);const t=n.g,r=n.C[0]?Tu:null;n.g=null,n.C=null,e||Ir(n,"ready");try{t.onreadystatechange=r}catch{}}}function b0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(dt.clearTimeout(n.A),n.A=null)}function Ca(n){return n.g?n.g.readyState:0}function C0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case _0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function wy(n){let e="";return zp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Iy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=wy(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wn(n,e,t))}function gf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ci(n){this.Ca=0,this.i=[],this.j=new _a,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=gf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=gf("baseRetryDelayMs",5e3,n),this.ab=gf("retryDelaySeedMs",1e4,n),this.Za=gf("forwardChannelMaxRetries",2,n),this.ta=gf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Rd(n&&n.concurrentRequestLimit),this.Fa=new lg,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function mf(n){if(fg(n),3==n.G){var e=n.U++,t=Zs(n.F);wn(t,"SID",n.I),wn(t,"RID",e),wn(t,"TYPE","terminate"),_f(n,t),(e=new bo(n,n.j,e,void 0)).K=2,e.v=ol(Zs(t)),t=!1,dt.navigator&&dt.navigator.sendBeacon&&(t=dt.navigator.sendBeacon(e.v.toString(),"")),!t&&dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cl(e.l,null),e.g.da(e.v)),e.F=Date.now(),Da(e)}M0(n)}function yf(n){n.g&&(pg(n),n.g.cancel(),n.g=null)}function fg(n){yf(n),n.u&&(dt.clearTimeout(n.u),n.u=null),wf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&dt.clearTimeout(n.m),n.m=null)}function Dr(n){ag(n.h)||n.m||(n.m=!0,Zh(n.Ja,n),n.C=0)}function Ey(n,e){var t;t=e?e.m:n.U++;const r=Zs(n.F);wn(r,"SID",n.I),wn(r,"RID",t),wn(r,"AID",n.T),_f(n,r),n.o&&n.s&&Iy(r,n.o,n.s),t=new bo(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=T0(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),lf(n.h,t),Ks(t,r,e)}function _f(n,e){n.ia&&zp(n.ia,function(t,r){wn(e,r,t)}),n.l&&zr({},function(t,r){wn(e,r,t)})}function T0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?x(n.l.Qa,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let w=0;w<t;w++){let b=o[w].h;const A=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),g=!1;else try{_y(A,d,"req"+b+"_")}catch{r&&r(A)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Dy(n){n.g||n.u||(n.Z=1,Zh(n.Ia,n),n.A=0)}function by(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Sd(x(n.Ia,n),x0(n,n.A)),n.A++,0))}function pg(n){null!=n.B&&(dt.clearTimeout(n.B),n.B=null)}function S0(n){n.g=new bo(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Zs(n.sa);wn(e,"RID","rpc"),wn(e,"SID",n.I),wn(e,"CI",n.L?"0":"1"),wn(e,"AID",n.T),wn(e,"TYPE","xmlhttp"),_f(n,e),n.o&&n.s&&Iy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ol(Zs(e)),t.s=null,t.P=!0,sf(t,n)}function wf(n){null!=n.v&&(dt.clearTimeout(n.v),n.v=null)}function A0(n,e){var t=null;if(n.g==e){wf(n),pg(n),n.g=null;var r=2}else{if(!ju(n.h,e))return;t=e.D,df(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ir(r=tl(),new ng(r,t,e,o)),Dr(n)}else Dy(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function vf(n,e){return!(cf(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=Sd(x(n.Ja,n,e),x0(n,n.C)),n.C++,0)))}(n,e)||2==r&&by(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:ul(n,5);break;case 4:ul(n,10);break;case 3:ul(n,6);break;default:ul(n,2)}}function x0(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function ul(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=x(n.jb,n);t||(t=new Co("//www.google.com/images/cleardot.gif"),dt.location&&"http"==dt.location.protocol||To(t,"https"),ol(t)),function v0(n,e){const t=new _a;if(dt.Image){const r=new Image;r.onload=L(Pd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=L(Pd,t,r,"TestLoadImage: error",!1,e),r.onabort=L(Pd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=L(Pd,t,r,"TestLoadImage: timeout",!1,e),dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Nr(2);n.G=0,n.l&&n.l.va(e),M0(n),fg(n)}function M0(n){if(n.G=0,n.la=[],n.l){const e=ug(n.h);(0!=e.length||0!=n.i.length)&&(bt(n.la,e),bt(n.la,n.i),n.h.i.length=0,ht(n.i),n.i.length=0),n.l.ua()}}function R0(n,e,t){var r=t instanceof Co?Zs(t):new Co(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Md(r,r.m);else{var o=dt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Co(null,void 0);r&&To(u,r),e&&(u.g=e),o&&Md(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&wn(r,t,e),wn(r,"VER",n.ma),_f(n,r),r}function cl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fr(t&&n.Da&&!n.ra?new Od({ib:!0}):n.ra)).L=n.H,e}function So(){}function gg(){if(ui&&!(10<=Number(hy)))throw Error("Environmental error: no available transport.")}function is(n,e){gn.call(this),this.g=new ci(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!jn(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jn(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ll(this)}function sD(n){tf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oD(){Fu.call(this),this.status=1}function ll(n){this.g=n}(Ye=fr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ad.g(),this.C=function nl(n){return n.h||(n.h=n.i())}(this.u?this.u:Ad),this.g.onreadystatechange=x(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void I0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=dt.FormData&&n instanceof dt.FormData,!(0<=at(w0,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{b0(this),0<this.B&&((this.K=function iD(n){return ui&&function Hp(){return function Ws(n){var e=m0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=zs(String(ma)).split("."),t=zs("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=bs(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||bs(0==o[2].length,0==u[2].length)||bs(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=x(this.qa,this)):this.A=Qh(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){I0(this,u)}},Ye.qa=function(){typeof ga<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ir(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ir(this,"complete"),Ir(this,"abort"),kd(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kd(this,!0)),fr.X.M.call(this)},Ye.Ha=function(){this.s||(this.F||this.v||this.l?D0(this):this.eb())},Ye.eb=function(){D0(this)},Ye.aa=function(){try{return 2<Ca(this)?this.g.status:-1}catch{return-1}},Ye.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ye.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pf(e)}},Ye.Ea=function(){return this.m},Ye.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=ci.prototype).ma=8,Ye.G=1,Ye.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new bo(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Mu(u),Wh(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=T0(this,o,e),wn(t=Zs(this.F),"RID",n),wn(t,"CVER",22),this.D&&wn(t,"X-HTTP-Session-Id",this.D),_f(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(wy(u)))+"&"+e:this.o&&Iy(t,this.o,u)),lf(this.h,o),this.Xa&&wn(t,"TYPE","init"),this.O?(wn(t,"$req",e),wn(t,"SID","null"),o.Z=!0,Ks(o,t,null)):Ks(o,t,e),this.G=2}}else 3==this.G&&(n?Ey(this,n):0==this.i.length||ag(this.h)||Ey(this))},Ye.Ia=function(){if(this.u=null,S0(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Sd(x(this.cb,this),n)}},Ye.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Nr(10),yf(this),S0(this))},Ye.bb=function(){null!=this.v&&(this.v=null,yf(this),by(this),Nr(19))},Ye.jb=function(n){n?(this.j.info("Successfully pinged google.com"),Nr(2)):(this.j.info("Failed to ping google.com"),Nr(1))},(Ye=So.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Qa=function(){},gg.prototype.g=function(n,e){return new is(n,e)},K(is,gn),is.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Nr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=R0(n,null,n.V),Dr(n)},is.prototype.close=function(){mf(this.g)},is.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Yc(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&Dr(e)},is.prototype.M=function(){this.g.l=null,delete this.j,mf(this.g),delete this.g,is.X.M.call(this)},K(sD,tf),K(oD,Fu),K(ll,So),ll.prototype.xa=function(){Ir(this.g,"a")},ll.prototype.wa=function(n){Ir(this.g,new sD(n))},ll.prototype.va=function(n){Ir(this.g,new oD(n))},ll.prototype.ua=function(){Ir(this.g,"b")},gg.prototype.createWebChannel=gg.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,ef.NO_ERROR=0,ef.TIMEOUT=8,ef.HTTP_ERROR=6,ku.COMPLETE="complete",rl.EventType=Ia,Ia.OPEN="a",Ia.CLOSE="b",Ia.ERROR="c",Ia.MESSAGE="d",gn.prototype.listen=gn.prototype.N,fr.prototype.listenOnce=fr.prototype.O,fr.prototype.getLastError=fr.prototype.Na,fr.prototype.getLastErrorCode=fr.prototype.Ea,fr.prototype.getStatus=fr.prototype.aa,fr.prototype.getResponseJson=fr.prototype.Ra,fr.prototype.getResponseText=fr.prototype.fa,fr.prototype.send=fr.prototype.da;var aT=oi.createWebChannelTransport=function(){return new gg},Ao=oi.getStatEventTarget=function(){return tl()},If=oi.ErrorCode=ef,Cy=oi.EventType=ku,aD=oi.Event=wa,Ty=oi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uD=oi.FetchXmlHttpFactory=Od,$u=oi.WebChannel=rl,cD=oi.XhrIo=fr;const N0="@firebase/firestore";class pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let Hu="9.10.0";const Ta=new si.Yd("@firebase/firestore");function P0(){return Ta.logLevel}function Me(n,...e){if(Ta.logLevel<=si.in.DEBUG){const t=e.map(Ef);Ta.debug(`Firestore (${Hu}): ${n}`,...t)}}function Xn(n,...e){if(Ta.logLevel<=si.in.ERROR){const t=e.map(Ef);Ta.error(`Firestore (${Hu}): ${n}`,...t)}}function dl(n,...e){if(Ta.logLevel<=si.in.WARN){const t=e.map(Ef);Ta.warn(`Firestore (${Hu}): ${n}`,...t)}}function Ef(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: `+n;throw Xn(e),new Error(e)}function Et(n,e){n||tt()}function qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ct.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pr.UNAUTHENTICATED))}shutdown(){}}class Sy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dD{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new br;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new br,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=d;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new br)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new mg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new pr(e)}}class hD{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Et(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class k0{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new hD(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ay{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hl{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.A=t.token,new Ay(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function L0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class F0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=L0(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function Sa(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function U0(n){return n+"\0"}class Tn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Tn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Tn(0,0))}static max(){return new yt(new Tn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fd{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Fd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class jt extends Fd{construct(e,t,r){return new jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new jt(t)}static emptyPath(){return new jt([])}}const V0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends Fd{construct(e,t,r){return new Sn(e,t,r)}static isValidIdentifier(e){return V0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(t)}static emptyPath(){return new Sn([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(jt.fromString(e))}static fromName(e){return new $e(jt.fromString(e).popFirst(5))}static empty(){return new $e(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new jt(e.slice()))}}class Df{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function bf(n){return n.fields.find(e=>2===e.kind)}function Gu(n){return n.fields.filter(e=>2!==e.kind)}Df.UNKNOWN_ID=-1;class zu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ud{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ud(0,Li.min())}}function B0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=yt.fromTimestamp(1e9===r?new Tn(t+1,0):new Tn(t,r));return new Li(o,$e.empty(),e)}function j0(n){return new Li(n.readTime,n.key,-1)}class Li{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Li(yt.min(),$e.empty(),-1)}static max(){return new Li(yt.max(),$e.empty(),-1)}}function Cf(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const My="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Aa(n){return Ry.apply(this,arguments)}function Ry(){return Ry=(0,ye.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==My)throw n;Me("LocalStore","Unexpectedly lost primary lease")}),Ry.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(A=>{d[b]=A,++g,g===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class yg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new br,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Tf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Ny(r.target.error);this.P.reject(new Tf(e,o))}}static open(e,t,r,o){try{return new yg(t,e.transaction(o,r))}catch(u){throw new Tf(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mD(t)}}class Ys{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ys.D((0,Ct.z$)())&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),fl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ct.hl)())return!1;if(Ys.N())return!0;const e=(0,Ct.z$)(),t=Ys.D(e),r=0<t&&t<10,o=Ys.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Tf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Tf(e,g))},u.onupgradeneeded=d=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const w=yg.open(u.db,e,d?"readonly":"readwrite",r),b=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),se.reject(A))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,A="FirebaseError"!==b.name&&g<3;if(Me("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qs{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return fl(this.U.delete())}}class Tf extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xa(n){return"IndexedDbTransactionError"===n.name}class mD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fl(r)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),fl(this.store.add(e))}get(e){return fl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),fl(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),fl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=Ny(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const w=new Qs(g),b=t(g.primaryKey,g.value,w);if(b instanceof se){const A=b.catch(N=>(w.done(),se.reject(N)));r.push(A)}w.isDone?o():null===w.G?g.continue():g.continue(w.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fl(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Ny(r.target.error);t(o)}})}let $0=!1;function Ny(n){const e=Ys.D((0,Ct.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $0||($0=!0,setTimeout(()=>{throw r},0)),r}}return n}class H0{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Me("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Me("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){xa(r)?Me("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Aa(r)}yield t.nt(6e4)}))}}class yD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Me("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(g=>(Me("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=j0(u);Cf(d,r)>0&&(r=d)}),new Li(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function G0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wt(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Py(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Fi.at=-1;class Hn{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sf(this.root,e,this.comparator,!0)}}class Sf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Wr.RED,this.left=o??Wr.EMPTY,this.right=u??Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Wr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Wr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Wr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class Oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vd(n){return n.hasNext()?n.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new Ui([])}unionWith(e){let t=new hn(Sn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Cr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const uT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(Et(!!n),"string"==typeof n){let e=0;const t=uT.exec(n);if(Et(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ss(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function ky(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vg(n){const e=n.mapValue.fields.__previous_value__;return ky(e)?vg(e):e}function pl(n){const e=Ma(n.mapValue.fields.__local_write_time__.timestampValue);return new Tn(e.seconds,e.nanos)}class _D{constructor(e,t,r,o,u,d,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=w}}class gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}function _g(n){return null==n}function wg(n){return 0===n&&1/n==-1/0}function z0(n){return"number"==typeof n&&Number.isInteger(n)&&!wg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ra={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ly={nullValue:"NULL_VALUE"};function ml(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ky(n)?4:Uy(n)?9007199254740991:10:tt()}function Di(n,e){if(n===e)return!0;const t=ml(n);if(t!==ml(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pl(n).isEqual(pl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ma(r.timestampValue),d=Ma(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ss(n.bytesValue).isEqual(ss(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Gn(r.geoPointValue.latitude)===Gn(o.geoPointValue.latitude)&&Gn(r.geoPointValue.longitude)===Gn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Gn(r.integerValue)===Gn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Gn(r.doubleValue),d=Gn(o.doubleValue);return u===d?wg(u)===wg(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Sa(n.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(G0(u)!==G0(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!Di(u[g],d[g])))return!1;return!0}(n,e);default:return tt()}var o}function Af(n,e){return void 0!==(n.values||[]).find(t=>Di(t,e))}function Na(n,e){if(n===e)return 0;const t=ml(n),r=ml(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Gn(o.integerValue||o.doubleValue),g=Gn(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return xf(n.timestampValue,e.timestampValue);case 4:return xf(pl(n),pl(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=ss(o),g=ss(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let w=0;w<d.length&&w<g.length;w++){const b=xt(d[w],g[w]);if(0!==b)return b}return xt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=xt(Gn(o.latitude),Gn(u.latitude));return 0!==d?d:xt(Gn(o.longitude),Gn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let w=0;w<d.length&&w<g.length;++w){const b=Na(d[w],g[w]);if(b)return b}return xt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Ra.mapValue&&u===Ra.mapValue)return 0;if(o===Ra.mapValue)return 1;if(u===Ra.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),w=u.fields||{},b=Object.keys(w);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const N=xt(g[A],b[A]);if(0!==N)return N;const H=Na(d[g[A]],w[b[A]]);if(0!==H)return H}return xt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw tt()}}function xf(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=Ma(n),r=Ma(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function Bd(n){return Ig(n)}function Ig(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ma(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ss(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Ig(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${Ig(r.fields[g])}`;return u+"}"}(n.mapValue):tt();var e}function yl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fy(n){return!!n&&"integerValue"in n}function Mf(n){return!!n&&"arrayValue"in n}function W0(n){return!!n&&"nullValue"in n}function q0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rf(n){return!!n&&"mapValue"in n}function Nf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wt(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Uy(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function K0(n){return"nullValue"in n?Ly:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yl(gl.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function Vy(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yl(gl.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ra:tt()}function wD(n,e){const t=Na(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Eg(n,e){const t=Na(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nf(t)}setAll(e){let t=Sn.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=Nf(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Rf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){wt(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new qr(Nf(this.value))}}function ID(n){const e=[];return wt(n.fields,(t,r)=>{const o=new Sn([t]);if(Rf(r)){const u=ID(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ui(e)}class nn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new nn(e,0,yt.min(),yt.min(),qr.empty(),0)}static newFoundDocument(e,t,r){return new nn(e,1,t,yt.min(),r,0)}static newNoDocument(e,t){return new nn(e,2,t,yt.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,yt.min(),qr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Z0{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.ht=null}}function By(n,e=null,t=[],r=[],o=null,u=null,d=null){return new Z0(n,e,t,r,o,u,d)}function xo(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Bd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),_g(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bd(r)).join(",")),e.ht=t}return e.ht}function jd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!DD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Di(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!J0(n.startAt,e.startAt)&&J0(n.endAt,e.endAt)}function Dg(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $d(n,e){return n.filters.filter(t=>t instanceof Pr&&t.field.isEqual(e))}function Mo(n,e,t){let r=Ly,o=!0;for(const u of $d(n,e)){let d=Ly,g=!0;switch(u.op){case"<":case"<=":d=K0(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=Ly}wD({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];wD({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function bg(n,e,t){let r=Ra,o=!0;for(const u of $d(n,e)){let d=Ra,g=!0;switch(u.op){case">=":case">":d=Vy(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Ra}Eg({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Eg({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Pr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new jy(e,t,r):"array-contains"===t?new Cg(e,r):"in"===t?new Tg(e,r):"not-in"===t?new $y(e,r):"array-contains-any"===t?new Hy(e,r):new Pr(e,t,r)}static lt(e,t,r){return"in"===t?new cT(e,r):new Y0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Na(t,this.value)):null!==t&&ml(this.value)===ml(t)&&this.ft(Na(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class jy extends Pr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.ft(t)}}class cT extends Pr{constructor(e,t){super(e,"in",t),this.keys=ED(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Y0 extends Pr{constructor(e,t){super(e,"not-in",t),this.keys=ED(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ED(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Cg extends Pr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mf(t)&&Af(t.arrayValue,this.value)}}class Tg extends Pr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Af(this.value.arrayValue,t)}}class $y extends Pr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Af(this.value.arrayValue,t)}}class Hy extends Pr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Af(this.value.arrayValue,r))}}class Ro{constructor(e,t){this.position=e,this.inclusive=t}}class Pf{constructor(e,t="asc"){this.field=e,this.dir=t}}function DD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Q0(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):Na(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function J0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Di(n.position[t],e.position[t]))return!1;return!0}class Pa{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=w,this._t=null,this.wt=null}}function Gy(n,e,t,r,o,u,d,g){return new Pa(n,e,t,r,o,u,d,g)}function Of(n){return new Pa(n)}function X0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ew(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Sg(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Ag(n){return null!==n.collectionGroup}function Hd(n){const e=qe(n);if(null===e._t){e._t=[];const t=Sg(e),r=ew(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Pf(t)),e._t.push(new Pf(Sn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Pf(Sn.keyField(),u))}}}return e._t}function li(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=By(e.path,e.collectionGroup,Hd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Hd(e))t.push(new Pf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ro(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ro(e.startAt.position,e.startAt.inclusive):null;e.wt=By(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function zy(n,e,t){return new Pa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xg(n,e){return jd(li(n),li(e))&&n.limitType===e.limitType}function bD(n){return`${xo(li(n))}|lt:${n.limitType}`}function tw(n){return`Query(target=${function Js(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bd(r.value)}`;var r}).join(", ")}]`),_g(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bd(t)).join(",")),`Target(${e})`}(li(n))}; limitType=${n.limitType})`}function nw(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=Q0(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,Hd(t),r)||t.endAt&&!function(o,u,d){const g=Q0(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,Hd(t),r)));var t,r}function CD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TD(n){return(e,t)=>{let r=!1;for(const o of Hd(n)){const u=lT(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function lT(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),w=d.data.field(o);return null!==g&&null!==w?Na(g,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function SD(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wg(e)?"-0":e}}function AD(n){return{integerValue:""+n}}function Oa(n,e){return z0(e)?AD(e):SD(n,e)}class Gd{constructor(){this._=void 0}}function xD(n,e,t){return n instanceof vl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ka?iw(n,e):n instanceof Vi?Wy(n,e):function(r,o){const u=Mg(r,o),d=sw(u)+sw(r.yt);return Fy(u)&&Fy(r.yt)?AD(d):SD(r.It,d)}(n,e)}function rw(n,e,t){return n instanceof ka?iw(n,e):n instanceof Vi?Wy(n,e):t}function Mg(n,e){return n instanceof zd?Fy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class vl extends Gd{}class ka extends Gd{constructor(e){super(),this.elements=e}}function iw(n,e){const t=qy(e);for(const r of n.elements)t.some(o=>Di(o,r))||t.push(r);return{arrayValue:{values:t}}}class Vi extends Gd{constructor(e){super(),this.elements=e}}function Wy(n,e){let t=qy(e);for(const r of n.elements)t=t.filter(o=>!Di(o,r));return{arrayValue:{values:t}}}class zd extends Gd{constructor(e,t){super(),this.It=e,this.yt=t}}function sw(n){return Gn(n.integerValue||n.doubleValue)}function qy(n){return Mf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class kf{constructor(e,t){this.field=e,this.transform=t}}class Rg{constructor(e,t){this.version=e,this.transformResults=t}}class un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class La{}function Ng(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kd(n.key,un.none()):new Wu(n.key,n.data,un.none());{const t=n.data,r=qr.empty();let o=new hn(Sn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new No(n.key,r,new Ui(o.toArray()),un.none())}}function Pg(n,e,t){n instanceof Wu?function(r,o,u){const d=r.value.clone(),g=aw(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof No?function(r,o,u){if(!Wd(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=aw(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(kg(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qd(n,e,t,r){return n instanceof Wu?function(o,u,d,g){if(!Wd(o.precondition,u))return d;const w=o.value.clone(),b=RD(o.fieldTransforms,g,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof No?function(o,u,d,g){if(!Wd(o.precondition,u))return d;const w=RD(o.fieldTransforms,g,u),b=u.data;return b.setAll(kg(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,Wd(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function ow(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Mg(r.transform,o||null);null!=u&&(null===t&&(t=qr.empty()),t.set(r.field,u))}return t||null}function Og(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sa(t,r,(o,u)=>function MD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ka&&r instanceof ka||t instanceof Vi&&r instanceof Vi?Sa(t.elements,r.elements,Di):t instanceof zd&&r instanceof zd?Di(t.yt,r.yt):t instanceof vl&&r instanceof vl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Wu extends La{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class No extends La{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function kg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function aw(n,e,t){const r=new Map;Et(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,rw(d,g,t[o]))}return r}function RD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,xD(u,d,e))}return r}class Kd extends La{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lg extends La{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ND{constructor(e){this.count=e}}var ar,zt;function uw(n){switch(n){default:return tt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function Bi(n){if(void 0===n)return Xn("GRPC error has no .code"),le.UNKNOWN;switch(n){case ar.OK:return le.OK;case ar.CANCELLED:return le.CANCELLED;case ar.UNKNOWN:return le.UNKNOWN;case ar.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ar.INTERNAL:return le.INTERNAL;case ar.UNAVAILABLE:return le.UNAVAILABLE;case ar.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ar.NOT_FOUND:return le.NOT_FOUND;case ar.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ar.ABORTED:return le.ABORTED;case ar.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ar.DATA_LOSS:return le.DATA_LOSS;default:return tt()}}(zt=ar||(ar={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wt(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Py(this.inner)}size(){return this.innerSize}}const PD=new Hn($e.comparator);function os(){return PD}const cw=new Hn($e.comparator);function _l(...n){let e=cw;for(const t of n)e=e.insert(t.key,t);return e}function Ky(n){let e=cw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Po(){return Lf()}function lw(){return Lf()}function Lf(){return new Fa(n=>n.toString(),(n,e)=>n.isEqual(e))}const dw=new Hn($e.comparator),OD=new hn($e.comparator);function Nt(...n){let e=OD;for(const t of n)e=e.add(t);return e}const kD=new hn(xt);function Fg(){return kD}class Zd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Zd(yt.min(),r,Fg(),os(),Nt())}}class Yd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yd(Cr.EMPTY_BYTE_STRING,t,Nt(),Nt(),Nt())}}class Ug{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class Xs{constructor(e,t){this.targetId=e,this.At=t}}class Vg{constructor(e,t,r=Cr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class hw{constructor(){this.Rt=0,this.bt=Zy(),this.Pt=Cr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Nt(),t=Nt(),r=Nt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Yd(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Zy()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class LD{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=os(),this.qt=FD(),this.Kt=new hn(xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(Dg(u))if(0===r){const d=new $e(u.path);this.jt(t,d,nn.newNoDocument(d,yt.min()))}else Et(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const g=this.Xt(d);if(g){if(u.current&&Dg(g.target)){const w=new $e(g.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,nn.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Nt();this.qt.forEach((u,d)=>{let g=!0;d.forEachWhile(w=>{const b=this.Xt(w);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new Zd(e,t,this.Kt,this.Ut,r);return this.Ut=os(),this.qt=FD(),this.Kt=new hn(xt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new hw,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new hn(xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new hw),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function FD(){return new Hn($e.comparator)}function Zy(){return new Hn($e.comparator)}const UD={asc:"ASCENDING",desc:"DESCENDING"},VD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BD{constructor(e,t){this.databaseId=e,this.gt=t}}function wl(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fw(n,e){return n.gt?e.toBase64():e.toUint8Array()}function jD(n,e){return wl(n,e.toTimestamp())}function ur(n){return Et(!!n),yt.fromTimestamp(function(e){const t=Ma(e);return new Tn(t.seconds,t.nanos)}(n))}function Ff(n,e){return(t=n,new jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Uf(n){const e=jt.fromString(n);return Et(ev(e)),e}function Bg(n,e){return Ff(n.databaseId,e.path)}function Ss(n,e){const t=Uf(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Qy(t))}function pw(n,e){return Ff(n.databaseId,e)}function Yy(n){const e=Uf(n);return 4===e.length?jt.emptyPath():Qy(e)}function Qd(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qy(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Jy(n,e,t){return{name:Bg(n,e),fields:t.value.mapValue.fields}}function jg(n,e,t){const r=Ss(n,e.name),o=ur(e.updateTime),u=new qr({mapValue:{fields:e.fields}}),d=nn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function qu(n,e){let t;if(e instanceof Wu)t={update:Jy(n,e.key,e.value)};else if(e instanceof Kd)t={delete:Bg(n,e.key)};else if(e instanceof No)t={update:Jy(n,e.key,e.data),updateMask:qD(e.fieldMask)};else{if(!(e instanceof Lg))return tt();t={verify:Bg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof vl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ka)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vi)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof zd)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:jD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Il(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?un.updateTime(ur(o.updateTime)):void 0!==o.exists?un.exists(o.exists):un.none():un.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(Et("REQUEST_TIME"===d.setToServerValue),g=new vl):"appendMissingElements"in d?g=new ka(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new Vi(d.removeAllFromArray.values||[]):"increment"in d?g=new zd(u,d.increment):tt();const w=Sn.fromServerFormat(d.fieldPath);return new kf(w,g)}(n,o)):[];var o;if(e.update){const o=Ss(n,e.update.name),u=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ui((e.updateMask.fieldPaths||[]).map(b=>Sn.fromServerFormat(b)));return new No(o,u,d,t,r)}return new Wu(o,u,t,r)}if(e.delete){const o=Ss(n,e.delete);return new Kd(o,t)}if(e.verify){const o=Ss(n,e.verify);return new Lg(o,t)}return tt()}function Hg(n,e){return{documents:[pw(n,e.path)]}}function Xy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const b=w.map(A=>function(N){if("=="===N.op){if(q0(N.value))return{unaryFilter:{field:Xd(N.field),op:"IS_NAN"}};if(W0(N.value))return{unaryFilter:{field:Xd(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(q0(N.value))return{unaryFilter:{field:Xd(N.field),op:"IS_NOT_NAN"}};if(W0(N.value))return{unaryFilter:{field:Xd(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xd(N.field),op:dT(N.op),value:N.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Xd((A=b).field),direction:GD(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.gt||_g(b)?b:{value:b});var b,g,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function gw(n){let e=Yy(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Et(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=Jd(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Pf(Vf((N=A).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(A){let N;return N="object"==typeof A?A.value:A,_g(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new Ro((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Ro(A.values||[],!A.before)}(t.endAt)),Gy(e,o,d,u,g,"F",w,b)}function Jd(n){return n?void 0!==n.unaryFilter?[WD(n)]:void 0!==n.fieldFilter?[zD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Jd(e)).reduce((e,t)=>e.concat(t)):tt():[]}function GD(n){return UD[n]}function dT(n){return VD[n]}function Xd(n){return{fieldPath:n.canonicalString()}}function Vf(n){return Sn.fromServerFormat(n.fieldPath)}function zD(n){return Pr.create(Vf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function WD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Vf(n.unaryFilter.field);return Pr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Vf(n.unaryFilter.field);return Pr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vf(n.unaryFilter.field);return Pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vf(n.unaryFilter.field);return Pr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function qD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ev(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gg(e)),e=KD(n.get(t),e);return Gg(e)}function KD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Gg(n){return n+"\x01\x01"}function Oo(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let w;0===o.length?w=g:(o+=g,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new jt(r)}const mw=["userId","batchId"];function zg(n,e){return[n,di(e)]}function yw(n,e,t){return[n,di(e),t]}const ZD={},YD=["prefixPath","collectionGroup","readTime","documentId"],Wg=["prefixPath","collectionGroup","documentId"],El=["collectionGroup","readTime","prefixPath","documentId"],hT=["canonicalId","targetId"],Bf=["targetId","path"],QD=["path","targetId"],JD=["collectionId","parent"],tv=["indexId","uid"],XD=["uid","sequenceNumber"],ko=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jf=["indexId","uid","orderedDocumentKey"],hi=["userId","collectionPath","documentId"],Dl=["userId","collectionPath","largestBatchId"],qg=["userId","collectionGroup","largestBatchId"],as=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nv=[...as,"documentOverlays"],bl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Cl=bl,eh=[...Cl,"indexConfiguration","indexState","indexEntries"];class Ku extends gD{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function zn(n,e){const t=qe(n);return Ys.O(t.ie,e)}class Zu{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Pg(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=qd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=qd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lw();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const w=Ng(d,g);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,(t,r)=>Og(t,r))&&Sa(this.baseMutations,e.baseMutations,(t,r)=>Og(t,r))}}class Yu{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Et(e.mutations.length===r.length);let o=dw;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Yu(e,t,r,o)}}class Qu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class us{constructor(e,t,r,o,u=yt.min(),d=yt.min(),g=Cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class rv{constructor(e){this.re=e}}function iv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$f(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Bg(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:wl(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ju(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Ju(e.version)}}var o,u;return r}function $f(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ju(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xu(n){const e=new Tn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function ec(n,e){const t=(e.baseMutations||[]).map(u=>Il(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Il(n.re,u)),o=Tn.fromMillis(e.localWriteTimeMs);return new Zu(e.batchId,o,t,r)}function th(n){const e=Xu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xu(n.lastLimboFreeSnapshotVersion):yt.min();let r;var o;return void 0!==n.query.documents?(Et(1===(o=n.query).documents.length),r=li(Of(Yy(o.documents[0])))):r=li(gw(n.query)),new us(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Cr.fromBase64String(n.resumeToken))}function sv(n,e){const t=Ju(e.snapshotVersion),r=Ju(e.lastLimboFreeSnapshotVersion);let o;o=Dg(e.target)?Hg(n.re,e.target):Xy(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xo(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function ov(n){const e=gw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?zy(e,e.limit,"L"):e}function av(n,e){return new Qu(e.largestBatchId,Il(n.re,e.overlayMutation))}function uv(n,e){const t=e.path.lastSegment();return[n,di(e.path.popLast()),t]}function _w(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ju(r.readTime),documentKey:di(r.documentKey.path),largestBatchId:r.largestBatchId}}class ww{getBundleMetadata(e,t){return Kg(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Xu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Kg(e).put({bundleId:(r=t).id,createTime:Ju(ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Zg(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:ov(o.bundledQuery),readTime:Xu(o.readTime)};var o})}saveNamedQuery(e,t){return Zg(e).put({name:(r=t).name,readTime:Ju(ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Kg(n){return zn(n,"bundles")}function Zg(n){return zn(n,"namedQueries")}class Yg{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Yg(e,t.uid||"")}getOverlay(e,t){return tc(e).get(uv(this.userId,t)).next(r=>r?av(this.It,r):null)}getOverlays(e,t){const r=Po();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new Qu(t,d);o.push(this.ue(e,g))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(di(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(tc(e).Y("collectionPathOverlayIndex",g))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Po(),u=di(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return tc(e).W("collectionPathOverlayIndex",d).next(g=>{for(const w of g){const b=av(this.It,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Po();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tc(e).Z({index:"collectionGroupOverlayIndex",range:g},(w,b,A)=>{const N=av(this.It,b);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return tc(e).put(function(r,o,u){const[d,g,w]=uv(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:qu(r.re,u.mutation)}}(this.It,this.userId,t))}}function tc(n){return zn(n,"documentOverlays")}class Lo{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Gn(e.integerValue));else if("doubleValue"in e){const r=Gn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),wg(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ss(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Uy(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):tt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),$e.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function cv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Iw(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=cv(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Lo.Te=new Lo;class Qg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=Iw(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=Iw(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Jg{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Ew{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class nh{constructor(){this.Be=new Qg,this.Le=new Jg(this.Be),this.Ue=new Ew(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Va{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Va(this.indexId,this.documentKey,this.arrayValue,r)}}function nc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lv(n.arrayValue,e.arrayValue),0!==t?t:(t=lv(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function lv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=bf(e);if(void 0!==t&&!this.ze(t))return!1;const r=Gu(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Dw{constructor(){this.Ye=new hv}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Li.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class hv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new hn(jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new hn(jt.comparator)).toArray()}}const Hf=new Uint8Array(0);class bw{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new hv,this.Ze=new Fa(r=>xo(r),(r,o)=>jd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:di(o)};return fv(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[U0(t),""],!1,!0);return fv(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Oo(d.parent))}return r})}addFieldIndex(e,t){const r=Xg(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Gf(e);return u.next(g=>{d.put(_w(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Xg(e),o=Gf(e),u=rh(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=rh(e);let o=!0;const u=new Map;return se.forEach(this.tn(t),d=>this.en(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=Nt();const g=[];return se.forEach(u,(w,b)=>{var A;Me("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${xo(t)}`);const N=function(Lt,Mt){const Pt=bf(Mt);if(void 0===Pt)return null;for(const Ht of $d(Lt,Pt.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(b,w),H=function(Lt,Mt){const Pt=new Map;for(const Ht of Gu(Mt))for(const Jr of $d(Lt,Ht.fieldPath))switch(Jr.op){case"==":case"in":Pt.set(Ht.fieldPath.canonicalString(),Jr.value);break;case"not-in":case"!=":return Pt.set(Ht.fieldPath.canonicalString(),Jr.value),Array.from(Pt.values())}return null}(b,w),Q=function(Lt,Mt){const Pt=[];let Ht=!0;for(const Jr of Gu(Mt)){const p0=0===Jr.kind?Mo(Lt,Jr.fieldPath,Lt.startAt):bg(Lt,Jr.fieldPath,Lt.startAt);Pt.push(p0.value),Ht&&(Ht=p0.inclusive)}return new Ro(Pt,Ht)}(b,w),ae=function(Lt,Mt){const Pt=[];let Ht=!0;for(const Jr of Gu(Mt)){const p0=0===Jr.kind?bg(Lt,Jr.fieldPath,Lt.endAt):Mo(Lt,Jr.fieldPath,Lt.endAt);Pt.push(p0.value),Ht&&(Ht=p0.inclusive)}return new Ro(Pt,Ht)}(b,w),Re=this.nn(w,b,Q),Le=this.nn(w,b,ae),Dt=this.sn(w,b,H),Tt=this.rn(w.indexId,N,Re,Q.inclusive,Le,ae.inclusive,Dt);return se.forEach(Tt,Lt=>r.J(Lt,t.limit).next(Mt=>{Mt.forEach(Pt=>{const Ht=$e.fromSegments(Pt.documentKey);d.has(Ht)||(d=d.add(Ht),g.push(Ht))})}))}).next(()=>g)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,g){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const H=t?this.on(t[N/b]):Hf,Q=this.un(e,H,r[N%b],o),ae=this.cn(e,H,u[N%b],d),Re=g.map(Le=>this.un(e,H,Le,!0));A.push(...this.createRange(Q,ae,Re))}return A}un(e,t,r,o){const u=new Va(e,$e.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new Va(e,$e.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new dv(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.We(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new hn(Sn.comparator),w=!1;for(const b of d.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:g=g.add(A.field))}for(const b of d.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new nh;for(const o of Gu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Lo.Te.ce(u,d)}return r.$e()}on(e){const t=new nh;return Lo.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new nh;return Lo.Te.ce(yl(this.databaseId,t),r.qe(function(o){const u=Gu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new nh);let u=0;for(const d of Gu(e)){const g=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&Mf(g))o=this.fn(o,d,g);else{const b=w.qe(d.kind);Lo.Te.ce(g,b)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const w=new nh;w.seed(g.$e()),Lo.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Pr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xg(e),o=Gf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return se.forEach(u,g=>o.get([g.indexId,this.uid]).next(w=>{d.push(function(b,A){const N=A?new Ud(A.sequenceNumber,new Li(Xu(A.readTime),new $e(Oo(A.documentKey)),A.largestBatchId)):Ud.empty(),H=b.fields.map(([Q,ae])=>new zu(Sn.fromServerFormat(Q),ae));return new Df(b.indexId,b.collectionGroup,H,N)}(g,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Xg(e),u=Gf(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>se.forEach(g,w=>u.put(_w(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),se.forEach(g,w=>this.wn(e,o,w).next(b=>{const A=this.mn(u,w);return b.isEqual(A)?se.resolve():this.gn(e,u,w,b,A)}))))})}yn(e,t,r,o){return rh(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return rh(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=rh(e);let u=new hn(nc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,g)=>{u=u.add(new Va(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}mn(e,t){let r=new hn(nc);const o=this.an(t,e);if(null==o)return r;const u=bf(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Mf(d))for(const g of d.arrayValue.values||[])r=r.add(new Va(t.indexId,e.key,this.on(g),o))}else r=r.add(new Va(t.indexId,e.key,Hf,o));return r}gn(e,t,r,o,u){Me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,w,b,A,N){const H=g.getIterator(),Q=w.getIterator();let ae=Vd(H),Re=Vd(Q);for(;ae||Re;){let Le=!1,Dt=!1;if(ae&&Re){const Tt=b(ae,Re);Tt<0?Dt=!0:Tt>0&&(Le=!0)}else null!=ae?Dt=!0:Le=!0;Le?(A(Re),Re=Vd(Q)):Dt?(N(ae),ae=Vd(H)):(ae=Vd(H),Re=Vd(Q))}}(o,u,nc,g=>{d.push(this.yn(e,t,r,g))},g=>{d.push(this.pn(e,t,r,g))}),se.waitFor(d)}_n(e){let t=1;return Gf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>nc(d,g)).filter((d,g,w)=>!g||0!==nc(d,w[g-1]));const o=[];o.push(e);for(const d of r){const g=nc(d,e),w=nc(d,t);if(0===g)o[0]=e.Ke();else if(g>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Hf,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Hf,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Cw)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||tt())).next(Cw)}}function fv(n){return zn(n,"collectionParents")}function rh(n){return zn(n,"indexEntries")}function Xg(n){return zn(n,"indexConfiguration")}function Gf(n){return zn(n,"indexState")}function Cw(n){Et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Cf(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Li(e.readTime,e.documentKey,t)}const pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fi(e,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gv(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const w=r.Z({range:d},(A,N,H)=>(g++,H.delete()));u.push(w.next(()=>{Et(1===g)}));const b=[];for(const A of t.mutations){const N=yw(e,A.key.path,t.batchId);u.push(o.delete(N)),b.push(A.key)}return se.waitFor(u).next(()=>b)}function zf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(41943040,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);class Wf{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Et(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Wf(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ba(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Tl(e),d=Ba(e);return d.add({}).next(g=>{Et("number"==typeof g);const w=new Zu(g,t,r,o),b=function(H,Q,ae){const Re=ae.baseMutations.map(Dt=>qu(H.re,Dt)),Le=ae.mutations.map(Dt=>qu(H.re,Dt));return{userId:Q,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Re,mutations:Le}}(this.It,this.userId,w),A=[];let N=new hn((H,Q)=>xt(H.canonicalString(),Q.canonicalString()));for(const H of o){const Q=yw(this.userId,H.key.path,g);N=N.add(H.key.path.popLast()),A.push(d.put(b)),A.push(u.put(Q,ZD))}return N.forEach(H=>{A.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.In[g]=w.keys()}),se.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Ba(e).get(t).next(r=>r?(Et(r.userId===this.userId),ec(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ba(e).Z({index:"userMutationsIndex",range:o},(d,g,w)=>{g.userId===this.userId&&(Et(g.batchId>=r),u=ec(this.It,g)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ba(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ba(e).W("userMutationsIndex",t).next(r=>r.map(o=>ec(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=zg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Tl(e).Z({range:o},(d,g,w)=>{const[b,A,N]=d,H=Oo(A);if(b===this.userId&&t.path.isEqual(H))return Ba(e).get(N).next(Q=>{if(!Q)throw tt();Et(Q.userId===this.userId),u.push(ec(this.It,Q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(xt);const o=[];return t.forEach(u=>{const d=zg(this.userId,u.path),g=IDBKeyRange.lowerBound(d),w=Tl(e).Z({range:g},(b,A,N)=>{const[H,Q,ae]=b,Re=Oo(Q);H===this.userId&&u.path.isEqual(Re)?r=r.add(ae):N.done()});o.push(w)}),se.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=zg(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new hn(xt);return Tl(e).Z({range:d},(w,b,A)=>{const[N,H,Q]=w,ae=Oo(H);N===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(g=g.add(Q)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ba(e).get(u).next(d=>{if(null===d)throw tt();Et(d.userId===this.userId),r.push(ec(this.It,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return gv(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Tl(e).Z({range:r},(u,d,g)=>{if(u[0]===this.userId){const w=Oo(u[1]);o.push(w)}else g.done()}).next(()=>{Et(0===o.length)})})}containsKey(e,t){return mv(e,this.userId,t)}Rn(e){return yv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mv(n,e,t){const r=zg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Tl(n).Z({range:u,X:!0},(g,w,b)=>{const[A,N,H]=g;A===e&&N===o&&(d=!0),b.done()}).next(()=>d)}function Ba(n){return zn(n,"mutations")}function Tl(n){return zn(n,"documentMutations")}function yv(n){return zn(n,"mutationQueues")}class rc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new rc(0)}static vn(){return new rc(-1)}}class fT{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new rc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>yt.fromTimestamp(new Tn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ih(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ih(e).Z((d,g)=>{const w=th(g);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ih(e).Z((r,o)=>{const u=th(o);t(u)})}Vn(e){return Tw(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}Sn(e,t){return Tw(e).put("targetGlobalKey",t)}Dn(e,t){return ih(e).put(sv(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xo(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ih(e).Z({range:o,index:"queryTargetsIndex"},(d,g,w)=>{const b=th(g);jd(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ja(e);return t.forEach(d=>{const g=di(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=ja(e);return se.forEach(t,u=>{const d=di(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ja(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ja(e);let u=Nt();return o.Z({range:r,X:!0},(d,g,w)=>{const b=Oo(d[1]),A=new $e(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=di(t.path),o=IDBKeyRange.bound([r],[U0(r)],!1,!0);let u=0;return ja(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,g],w,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}se(e,t){return ih(e).get(t).next(r=>r?th(r):null)}}function ih(n){return zn(n,"targets")}function Tw(n){return zn(n,"targetGlobal")}function ja(n){return zn(n,"targetDocuments")}function Sw([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class Tr{constructor(e){this.xn=e,this.buffer=new hn(Sw),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Sw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Aw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){xa(r)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Aa(r)}yield t.Fn(3e5)}))}}class eb{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Fi.at);const r=new Tr(t);return this.$n.forEachTarget(e,o=>r.Mn(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.Mn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(pv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pv):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,g,w,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),P0()<=si.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(w-g)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-A}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class tb{constructor(e,t){this.db=e,this.garbageCollector=new eb(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return qf(e,r)}removeReference(e,t,r){return qf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qf(e,t)}Gn(e,t){return function(r,o){let u=!1;return yv(r).tt(d=>mv(r,d,o).next(g=>(g&&(u=!0),se.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,g)=>{if(g<=t){const w=this.Gn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,yt.min()),ja(e).delete([0,di(d.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qf(e,t)}Kn(e,t){const r=ja(e);let o,u=Fi.at;return r.Z({index:"documentTargetsIndex"},([d,g],{path:w,sequenceNumber:b})=>{0===d?(u!==Fi.at&&t(new $e(Oo(o)),u),u=b,o=w):u=Fi.at}).next(()=>{u!==Fi.at&&t(new $e(Oo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qf(n,e){return ja(n).put((r=n.currentSequenceNumber,{targetId:0,path:di(e.path),sequenceNumber:r}));var r}class xw{constructor(){this.changes=new Fa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Mw{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sl(e).put(r)}removeEntry(e,t,r){return Sl(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],$f(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=nn.newInvalidDocument(t);return Sl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(oh(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:nn.newInvalidDocument(t)};return Sl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(oh(t))},(o,u)=>{r={document:this.jn(t,u),size:zf(u)}}).next(()=>r)}getEntries(e,t){let r=os();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=os(),o=new Hn($e.comparator);return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);r=r.insert(u,g),o=o.insert(u,zf(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let o=new hn(_v);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(oh(o.first()),oh(o.last())),d=o.getIterator();let g=d.getNext();return Sl(e).Z({index:"documentKeyIndex",range:u},(w,b,A)=>{const N=$e.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&_v(g,N)<0;)r(g,null),g=d.getNext();g&&g.isEqual(N)&&(r(g,b),g=d.hasNext()?d.getNext():null),g?A.j(oh(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),$f(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sl(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let g=os();for(const w of d){const b=this.jn($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=os();const d=Nw(t,r),g=Nw(t,Li.max());return Sl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(w,b,A)=>{const N=this.jn($e.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new sh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Rw(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Qn(e,t){return Rw(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function vw(n,e){let t;if(e.document)t=jg(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=Xu(e.noDocument.readTime);t=nn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=$e.fromSegments(e.unknownDocument.path),o=Xu(e.unknownDocument.version);t=nn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Tn(r[0],r[1]);return yt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return nn.newInvalidDocument(e)}}function vv(n){return new Mw(n)}class sh extends xw{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Fa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new hn((u,d)=>xt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const w=iv(this.Yn.It,d);o=o.add(u.path.popLast()),r+=zf(w)-g.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=g.size,this.trackRemovals){const w=iv(this.Yn.It,d.convertToNoDocument(yt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Rw(n){return zn(n,"remoteDocumentGlobal")}function Sl(n){return zn(n,"remoteDocumentsV14")}function oh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nw(n,e){const t=e.documentKey.path.toArray();return[n,$f(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _v(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class pT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wv{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&qd(r.mutation,o,Ui.empty(),Tn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const o=Po();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=_l();return u.forEach((g,w)=>{d=d.insert(g,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=os();const d=Lf(),g=Lf();return t.forEach((w,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof No)?u=u.insert(b.key,b):void 0!==A&&(d.set(b.key,A.mutation.getFieldMask()),qd(A.mutation,b,A.mutation.getFieldMask(),Tn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,A)=>d.set(b,A)),t.forEach((b,A)=>{var N;return g.set(b,new pT(A,null!==(N=d.get(b))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Lf();let o=new Hn((d,g)=>d-g),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let A=r.get(w)||Ui.empty();A=g.applyToLocalView(b,A),r.set(w,A);const N=(o.get(g.batchId)||Nt()).add(w);o=o.insert(g.batchId,N)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const w=g.getNext(),b=w.key,A=w.value,N=lw();A.forEach(H=>{if(!u.has(H)){const Q=Ng(t.get(H),r.get(H));null!==Q&&N.set(H,Q),u=u.add(H)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,N))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ag(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Po());let g=-1,w=u;return d.next(b=>se.forEach(b,(A,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(A)?se.resolve():this.getBaseDocument(e,A,N).next(H=>{w=w.insert(A,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Nt())).next(A=>({batchId:g,changes:Ky(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let o=_l();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=_l();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,g=>{const w=(b=t,A=g.child(o),new Pa(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,w)=>{const b=w.getKey();null===o.get(b)&&(o=o.insert(b,nn.newInvalidDocument(b)))});let d=_l();return o.forEach((g,w)=>{const b=u.get(g);void 0!==b&&qd(b.mutation,w,Ui.empty(),Tn.now()),nw(t,w)&&(d=d.insert(g,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(nn.newInvalidDocument(t))}}class Pw{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ur(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:ov(r.bundledQuery),readTime:ur(r.readTime)}),se.resolve();var r}}class Fo{constructor(){this.overlays=new Hn($e.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Po();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Po(),u=t.length+1,d=new $e(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const w=g.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Hn((b,A)=>b-A);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Po(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const g=Po(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,A)=>g.set(b,A)),!(g.size()>=o)););return se.resolve(g)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Qu(t,r));let u=this.es.get(t);void 0===u&&(u=Nt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class Iv{constructor(){this.ns=new hn(Or.ss),this.rs=new hn(Or.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Or(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Or(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new $e(new jt([])),r=new Or(t,e),o=new Or(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new $e(new jt([])),r=new Or(t,e),o=new Or(t,e+1);let u=Nt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Or(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Or{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return $e.comparator(e.key,t.key)||xt(e._s,t._s)}static os(e,t){return xt(e._s,t._s)||$e.comparator(e.key,t.key)}}class Uo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new hn(Or.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new Zu(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.gs=this.gs.add(new Or(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Or(t,0),o=new Or(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const g=this.ys(d._s);u.push(g)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(xt);return t.forEach(o=>{const u=new Or(o,0),d=new Or(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],g=>{r=r.add(g._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new Or(new $e(u),0);let g=new hn(xt);return this.gs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(w._s)),!0)},d),se.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Et(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,o=>{const u=new Or(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Or(t,0),o=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eo{constructor(e){this.Es=e,this.docs=new Hn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let r=os();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():nn.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=os();const u=new $e(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:w}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Cf(j0(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new to(this)}getSize(e){return se.resolve(this.size)}}class to extends xw{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Ow{constructor(e){this.persistence=e,this.Rs=new Fa(t=>xo(t),jd),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Iv,this.targetCount=0,this.vs=rc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new rc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class Ev{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Ow(this),this.indexManager=new Dw,this.remoteDocumentCache=new eo(r=>this.referenceDelegate.xs(r)),this.It=new rv(t),this.Ns=new Pw(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Uo(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const o=new nb(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Ms(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class nb extends gD{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.Fs=new Iv,this.$s=null}static Bs(e){return new em(e)}get Ls(){if(this.$s)return this.$s;throw tt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const o=$e.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,yt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class rb{constructor(e){this.It=e}$(e,t,r,o){const u=new yg("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mw,{unique:!0}),g.createObjectStore("documentMutations"),kw(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),kw(e)),d=d.next(()=>function(g){const w=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,w){return w.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mw,{unique:!0});const A=w.store("mutations"),N=b.map(H=>A.put(H));return se.waitFor(N)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const w=g.createObjectStore("documentOverlays",{keyPath:hi});w.createIndex("collectionPathOverlayIndex",Dl,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",qg,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const w=g.createObjectStore("remoteDocumentsV14",{keyPath:YD});w.createIndex("documentKeyIndex",Wg),w.createIndex("collectionGroupIndex",El)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:tv}).createIndex("sequenceNumberIndex",XD,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:ko}).createIndex("documentKeyIndex",jf,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=zf(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>se.forEach(g,w=>{Et(w.userId===u.userId);const b=ec(this.It,w);return gv(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,g)=>{const w=new jt(d),b=[0,di(w)];u.push(t.get(b).next(A=>A?se.resolve():t.put({targetId:0,path:di(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:JD});const r=t.store("collectionParents"),o=new hv,u=d=>{if(o.add(d)){const g=d.lastSegment(),w=d.popLast();return r.put({collectionId:g,parent:di(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const w=new jt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,w],b)=>{const A=Oo(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=th(o),d=sv(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const g=t.store("remoteDocumentsV14"),w=(b=d,b.document?new $e(jt.fromString(b.document.name).popFirst(5)):b.noDocument?$e.fromSegments(b.noDocument.path):b.unknownDocument?$e.fromSegments(b.unknownDocument.path):tt()).path.toArray();var b;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(A))}).next(()=>se.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=vv(this.It),u=new Ev(em.Bs,this.It.re);return r.W().next(d=>{const g=new Map;return d.forEach(w=>{var b;let A=null!==(b=g.get(w.userId))&&void 0!==b?b:Nt();ec(this.It,w).keys().forEach(N=>A=A.add(N)),g.set(w.userId,A)}),se.forEach(g,(w,b)=>{const A=new pr(b),N=Yg.oe(this.It,A),H=u.getIndexManager(A),Q=Wf.oe(A,this.It,H,u.referenceDelegate);return new wv(o,Q,N,H).recalculateAndSaveOverlaysForDocumentKeys(new Ku(t,Fi.at),w).next()})})}}function kw(n){n.createObjectStore("targetDocuments",{keyPath:Bf}).createIndex("documentTargetsIndex",QD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hT,{unique:!0}),n.createObjectStore("targetGlobal")}const Kf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Al{constructor(e,t,r,o,u,d,g,w,b,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=g,this.Js=b,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=H=>Promise.resolve(),!Al.C())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tb(this,o),this.ii=t+"main",this.It=new rv(w),this.ri=new Ys(this.ii,this.Xs,new rb(this.It)),this.Cs=new fT(this.referenceDelegate,this.It),this.remoteDocumentCache=vv(this.It),this.Ns=new ww,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,Kf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(xa(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zf(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return Yf(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=zn(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),g=u.filter(w=>-1===d.indexOf(w));return se.forEach(g,w=>o.delete(w.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):Zf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,Kf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yf(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ku(t,Fi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Yf(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Wf.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bw(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Yg.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Me("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?eh:14===d?Cl:13===d?bl:12===d?nv:11===d?as:void tt();var d;let g;return this.ri.runTransaction(e,o,u,w=>(g=new Ku(w,this.Ss?this.Ss.next():Fi.at),"readwrite-primary"===t?this.fi(g).next(b=>!!b||this.di(g)).next(b=>{if(!b)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(le.FAILED_PRECONDITION,My);return r(g)}).next(b=>this.wi(g).next(()=>b)):this.Vi(g).next(()=>r(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Vi(e){return Zf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,Kf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zf(e).put("owner",t)}static C(){return Ys.C()}_i(e){const t=Zf(e);return t.get("owner").next(r=>this.mi(r)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ct.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zf(n){return zn(n,"owner")}function Yf(n){return zn(n,"clientMetadata")}function Dv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class tm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Nt(),o=Nt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new tm(e,t.fromCache,r,o)}}class bv{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Mi(e,t,o,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(X0(t))return se.resolve(null);let r=li(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=zy(t,null,"F"),r=li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Nt(...u);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Fi(t,g);return this.$i(t,b,d,w.readTime)?this.ki(e,zy(t,null,"F")):this.Bi(e,b,t,w)}))})))}Mi(e,t,r,o){return X0(t)||o.isEqual(yt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Oi(e,t):(P0()<=si.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),tw(t)),this.Bi(e,d,t,B0(o,-1)))})}Fi(e,t){let r=new hn(TD(e));return t.forEach((o,u)=>{nw(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Oi(e,t){return P0()<=si.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",tw(t)),this.Ni.getDocumentsMatchingQuery(e,t,Li.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class nm{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Hn(xt),this.qi=new Fa(u=>xo(u),jd),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Lw(n,e,t,r){return new nm(n,e,t,r)}function Cv(n,e){return rm.apply(this,arguments)}function rm(){return rm=(0,ye.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let w=Nt();for(const b of o){d.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}for(const b of u){g.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(b=>({ji:b,removedBatchIds:d,addedBatchIds:g}))})})}),rm.apply(this,arguments)}function Tv(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,w,b){const A=w.batch,N=A.keys();let H=se.resolve();return N.forEach(Q=>{H=H.next(()=>b.getEntry(g,Q)).next(ae=>{const Re=w.docVersions.get(Q);Et(null!==Re),ae.version.compareTo(Re)<0&&(A.applyToRemoteDocument(ae,w),ae.isValidDocument()&&(ae.setReadTime(w.commitVersion),b.addEntry(ae)))})}),H.next(()=>d.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Nt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(g=g.add(d.batch.mutations[w].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function Qf(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Fw(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const g=[];e.targetChanges.forEach((A,N)=>{const H=o.get(N);if(!H)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let Q=H.withSequenceNumber(u.currentSequenceNumber);var ae,Re,Le;e.targetMismatches.has(N)?Q=Q.withResumeToken(Cr.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):A.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(A.resumeToken,r)),o=o.insert(N,Q),Re=Q,Le=A,(0===(ae=H).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,Q))});let w=os(),b=Nt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(Sv(u,d,e.documentUpdates).next(A=>{w=A.Wi,b=A.zi})),!r.isEqual(yt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return se.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ui=o,u))}function Sv(n,e,t){let r=Nt(),o=Nt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=os();return t.forEach((g,w)=>{const b=u.get(g);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),w.isNoDocument()&&w.version.isEqual(yt.min())?(e.removeEntry(g,w.readTime),d=d.insert(g,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),d=d.insert(g,w)):Me("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function Uw(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xl(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new us(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Ml(n,e,t){return im.apply(this,arguments)}function im(){return im=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!xa(d))throw d;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),im.apply(this,arguments)}function Jf(n,e,t){const r=qe(n);let o=yt.min(),u=Nt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,w,b){const A=qe(g),N=A.qi.get(b);return void 0!==N?se.resolve(A.Ui.get(N)):A.Cs.getTargetData(w,b)}(r,d,li(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,g.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:yt.min(),t?u:Nt())).next(g=>(Bw(r,CD(e),g),{documents:g,Hi:u})))}function Av(n,e){const t=qe(n),r=qe(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function Vw(n,e){const t=qe(n),r=t.Ki.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,B0(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Bw(t,e,o),o))}function Bw(n,e,t){let r=yt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function xv(){return xv=(0,ye.Z)(function*(n,e,t,r){const o=qe(n);let u=Nt(),d=os();for(const b of t){const A=e.Ji(b.metadata.name);b.document&&(u=u.add(A));const N=e.Yi(b);N.setReadTime(e.Xi(b.metadata.readTime)),d=d.insert(A,N)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield xl(o,(b=r,li(Of(jt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>Sv(b,g,d).next(A=>(g.apply(b),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Cs.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.Wi,A.zi)).next(()=>A.Wi)))}),xv.apply(this,arguments)}function sb(n,e){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,ye.Z)(function*(n,e,t=Nt()){const r=yield xl(n,li(ov(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=ur(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(Cr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),Mv.apply(this,arguments)}function jw(n,e){return`firestore_clients_${n}_${e}`}function $w(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Rv(n,e){return`firestore_targets_${n}_${e}`}class sm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new sm(e,t,o.state,u):(Xn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Xf(e,r.state,o):(Xn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class om{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Fg();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=z0(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new om(e,u):(Xn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Nv{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Nv(t.clientId,t.onlineState):(Xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Pv{constructor(){this.activeTargetIds=Fg()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ov{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Hn(xt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=jw(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Pv),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(jw(e.persistenceKey,o));if(u){const d=om.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Rv(this.persistenceKey,e));if(r){const o=Xf.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=Fi.at;if(null!=u)try{const g=JSON.parse(u);Et("number"==typeof g),d=g}catch(g){Xn("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==Fi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Mr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new sm(this.currentUser,e,t,r),u=$w(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=$w(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=Rv(this.persistenceKey,e),u=new Xf(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return om.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return sm.Zi(new pr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Xf.Zi(o,t)}yr(e){return Nv.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],g=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||g.push(w)}),this.syncEngine.Br(d,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Fg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Hw{constructor(){this.Lr=new Pv,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Pv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ob{qr(e){}shutdown(){}}class Gw{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const zw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Ww{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class qw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ao(e,t);Me("RestConnection","Sending: ",d,r);const g={};return this.ho(g,o,u),this.lo(e,d,g,r).then(w=>(Me("RestConnection","Received: ",w),w),w=>{throw dl("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}fo(e,t,r,o,u,d){return this.co(e,t,r,o,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ao(e,t){return`${this.oo}/v1/${t}:${zw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){return new Promise((u,d)=>{const g=new cD;g.listenOnce(Cy.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case If.NO_ERROR:const b=g.getResponseJson();Me("Connection","XHR received:",JSON.stringify(b)),u(b);break;case If.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),d(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const A=g.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const H=function(Q){const ae=Q.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ae)>=0?ae:le.UNKNOWN}(N.status);d(new xe(H,N.message))}else d(new xe(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new xe(le.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);g.send(t,"POST",w,r,15)})}_o(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=aT(),d=Ao(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new uD({})),this.ho(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const w=o.join("");Me("Connection","Creating WebChannel: "+w,g);const b=u.createWebChannel(w,g);let A=!1,N=!1;const H=new Ww({Hr:ae=>{N?Me("Connection","Not sending because WebChannel is closed:",ae):(A||(Me("Connection","Opening WebChannel transport."),b.open(),A=!0),Me("Connection","WebChannel sending:",ae),b.send(ae))},Jr:()=>b.close()}),Q=(ae,Re,Le)=>{ae.listen(Re,Dt=>{try{Le(Dt)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return Q(b,$u.EventType.OPEN,()=>{N||Me("Connection","WebChannel transport opened.")}),Q(b,$u.EventType.CLOSE,()=>{N||(N=!0,Me("Connection","WebChannel transport closed"),H.io())}),Q(b,$u.EventType.ERROR,ae=>{N||(N=!0,dl("Connection","WebChannel transport errored:",ae),H.io(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),Q(b,$u.EventType.MESSAGE,ae=>{var Re;if(!N){const Le=ae.data[0];Et(!!Le);const Dt=Le,Tt=Dt.error||(null===(Re=Dt[0])||void 0===Re?void 0:Re.error);if(Tt){Me("Connection","WebChannel received error:",Tt);const Lt=Tt.status;let Mt=function(Ht){const Jr=ar[Ht];if(void 0!==Jr)return Bi(Jr)}(Lt),Pt=Tt.message;void 0===Mt&&(Mt=le.INTERNAL,Pt="Unknown error status: "+Lt+" with message "+Tt.message),N=!0,H.io(new xe(Mt,Pt)),b.close()}else Me("Connection","WebChannel received:",Le),H.ro(Le)}}),Q(d,aD.STAT_EVENT,ae=>{ae.stat===Ty.PROXY?Me("Connection","Detected buffering proxy"):ae.stat===Ty.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.so()},0),H}}function kv(){return typeof window<"u"?window:null}function ep(){return typeof document<"u"?document:null}function ah(n){return new BD(n,!0)}class am{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=o,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Lv{constructor(e,t,r,o,u,d,g,w){this.Hs=e,this.Po=r,this.vo=o,this.Vo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new am(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kw extends Lv{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function $g(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.gt?(Et(void 0===b||"string"==typeof b),Cr.fromBase64String(b||"")):(Et(void 0===b||b instanceof Uint8Array),Cr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(w){const b=void 0===w.code?le.UNKNOWN:Bi(w.code);return new xe(b,w.message||"")}(d);t=new Vg(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Ss(n,r.document.name),u=ur(r.document.updateTime),d=new qr({mapValue:{fields:r.document.fields}}),g=nn.newFoundDocument(o,u,d);t=new Ug(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Ss(n,r.document),u=r.readTime?ur(r.readTime):yt.min(),d=nn.newNoDocument(o,u);t=new Ug([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Ss(n,r.document);t=new Ug([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new ND(r.count||0);t=new Xs(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return yt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?yt.min():u.readTime?ur(u.readTime):yt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Qd(this.It),t.addTarget=function(o,u){let d;const g=u.target;return d=Dg(g)?{documents:Hg(o,g)}:{query:Xy(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=fw(o,u.resumeToken):u.snapshotVersion.compareTo(yt.min())>0&&(d.readTime=wl(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function HD(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Qd(this.It),t.removeTarget=e,this.Bo(t)}}class Zw extends Lv{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function $D(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,o){let u=ur(r.updateTime?r.updateTime:o);return u.isEqual(yt.min())&&(u=ur(o)),new Rg(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.Zo(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Qd(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>qu(this.It,r))};this.Bo(t)}}class Yw extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.fo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(le.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class Rl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Xn(t),this.ou=!1):Me("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ab{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(g=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;sc(d)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(b){const A=qe(b);A._u.add(4),yield np(A),A.gu.set("Unknown"),A._u.delete(4),yield tp(A)}),function(b){return w.apply(this,arguments)})(d))}))}),this.gu=new Rl(r,o)}}function tp(n){return ic.apply(this,arguments)}function ic(){return ic=(0,ye.Z)(function*(n){if(sc(n))for(const e of n.wu)yield e(!0)}),ic.apply(this,arguments)}function np(n){return rp.apply(this,arguments)}function rp(){return rp=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),rp.apply(this,arguments)}function Fv(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Uv(t)?pt(t):hh(t).ko()&&um(t,e))}function uh(n,e){const t=qe(n),r=hh(t);t.du.delete(e),r.ko()&&ub(t,e),0===t.du.size&&(r.ko()?r.Fo():sc(t)&&t.gu.set("Unknown"))}function um(n,e){n.yu.Ot(e.targetId),hh(n).zo(e)}function ub(n,e){n.yu.Ot(e),hh(n).Ho(e)}function pt(n){n.yu=new LD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),hh(n).start(),n.gu.uu()}function Uv(n){return sc(n)&&!hh(n).No()&&n.du.size>0}function sc(n){return 0===qe(n)._u.size}function Qw(n){n.yu=void 0}function ch(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{um(n,e)})}),Vv.apply(this,arguments)}function cm(n,e){return lh.apply(this,arguments)}function lh(){return lh=(0,ye.Z)(function*(n,e){Qw(n),Uv(n)?(n.gu.hu(e),pt(n)):n.gu.set("Unknown")}),lh.apply(this,arguments)}function er(n,e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Vg&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ip(n,r)}else if(e instanceof Ug?n.yu.Gt(e):e instanceof Xs?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(yt.min()))try{const r=yield Qf(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.du.get(w);b&&o.du.set(w,b.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const w=o.du.get(g);if(!w)return;o.du.set(g,w.withResumeToken(Cr.EMPTY_BYTE_STRING,w.snapshotVersion)),ub(o,g);const b=new us(w.target,g,1,w.sequenceNumber);um(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),yield ip(n,r)}var r}),Jw.apply(this,arguments)}function ip(n,e,t){return lm.apply(this,arguments)}function lm(){return lm=(0,ye.Z)(function*(n,e,t){if(!xa(e))throw e;n._u.add(1),yield np(n),n.gu.set("Offline"),t||(t=()=>Qf(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield tp(n)}))}),lm.apply(this,arguments)}function Xw(n,e){return e().catch(t=>ip(n,t,e))}function Nl(n){return dm.apply(this,arguments)}function dm(){return dm=(0,ye.Z)(function*(n){const e=qe(n),t=oc(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;eI(e);)try{const o=yield Uw(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,tI(e,o)}catch(o){yield ip(e,o)}nI(e)&&rI(e)}),dm.apply(this,arguments)}function eI(n){return sc(n)&&n.fu.length<10}function tI(n,e){n.fu.push(e);const t=oc(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function nI(n){return sc(n)&&!oc(n).No()&&n.fu.length>0}function rI(n){oc(n).start()}function cb(n){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,ye.Z)(function*(n){oc(n).eu()}),Pl.apply(this,arguments)}function lb(n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,ye.Z)(function*(n){const e=oc(n);for(const t of n.fu)e.Xo(t.mutations)}),Bv.apply(this,arguments)}function db(n,e,t){return dh.apply(this,arguments)}function dh(){return dh=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),o=Yu.from(r,e,t);yield Xw(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Nl(n)}),dh.apply(this,arguments)}function iI(n,e){return hm.apply(this,arguments)}function hm(){return hm=(0,ye.Z)(function*(n,e){var t;e&&oc(n).Yo&&(yield(t=(0,ye.Z)(function*(r,o){if(uw(u=o.code)&&u!==le.ABORTED){const d=r.fu.shift();oc(r).Oo(),yield Xw(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Nl(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),nI(n)&&rI(n)}),hm.apply(this,arguments)}function jv(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,ye.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=sc(t);t._u.add(3),yield np(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield tp(t)}),$v.apply(this,arguments)}function Ol(n,e){return kl.apply(this,arguments)}function kl(){return kl=(0,ye.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield tp(t)):e||(t._u.add(2),yield np(t),t.gu.set("Unknown"))}),kl.apply(this,arguments)}function hh(n){return n.pu||(n.pu=function(e,t,r){const o=qe(e);return o.su(),new Kw(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:ch.bind(null,n),Zr:cm.bind(null,n),Wo:er.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Oo(),Uv(n)?pt(n):n.gu.set("Unknown")):(yield n.pu.stop(),Qw(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function oc(n){return n.Iu||(n.Iu=function(e,t,r){const o=qe(e);return o.su(),new Zw(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:cb.bind(null,n),Zr:iI.bind(null,n),tu:lb.bind(null,n),Zo:db.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Oo(),yield Nl(n)):(yield n.Iu.stop(),n.fu.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Hv{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new Hv(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ll(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),xa(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Fl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=_l(),this.sortedSet=new Hn(this.comparator)}static emptySet(e){return new Fl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Fl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Gv{constructor(){this.Tu=new Hn($e.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):tt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class fh{constructor(e,t,r,o,u,d,g,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new fh(e,t,Fl.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class sI{constructor(){this.Au=void 0,this.listeners=[]}}class hb{constructor(){this.queries=new Fa(e=>bD(e),xg),this.onlineState="Unknown",this.Ru=new Set}}function zv(n,e){return oI.apply(this,arguments)}function oI(){return oI=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new sI),o)try{u.Au=yield t.onListen(r)}catch(d){const g=Ll(d,`Initialization of query '${tw(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&ph(t)}),oI.apply(this,arguments)}function aI(n,e){return uI.apply(this,arguments)}function uI(){return uI=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),uI.apply(this,arguments)}function gT(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Pu(o)&&(r=!0);d.Au=o}}r&&ph(t)}function cI(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function ph(n){n.Ru.forEach(e=>{e.next()})}class Wv{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new fh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class fb{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class qv{constructor(e){this.It=e}Ji(e){return Ss(this.It,e)}Yi(e){return e.metadata.exists?jg(this.It,e.document,!1):nn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ur(e)}}class sp{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lI(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new qv(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||Nt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function ib(n,e,t,r){return xv.apply(this,arguments)}(e.localStore,new qv(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const o of e.queries)yield sb(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function lI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class dI{constructor(e){this.key=e}}class hI{constructor(e){this.key=e}}class fI{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Nt(),this.mutatedKeys=Nt(),this.Ku=TD(e),this.Gu=new Fl(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new Gv,o=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const H=o.get(A),Q=nw(this.query,N)?N:null,ae=!!H&&this.mutatedKeys.has(H.key),Re=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Le=!1;H&&Q?H.data.isEqual(Q.data)?ae!==Re&&(r.track({type:3,doc:Q}),Le=!0):this.zu(H,Q)||(r.track({type:2,doc:Q}),Le=!0,(w&&this.Ku(Q,w)>0||b&&this.Ku(Q,b)<0)&&(g=!0)):!H&&Q?(r.track({type:0,doc:Q}),Le=!0):H&&!Q&&(r.track({type:1,doc:H}),Le=!0,(w||b)&&(g=!0)),Le&&(Q?(d=d.add(Q),u=Re?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Gu:d,Wu:r,$i:g,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((b,A)=>function(N,H){const Q=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Q(N)-Q(H)}(b.type,A.type)||this.Ku(b.doc,A.doc)),this.Hu(r);const d=t?this.Ju():[],g=0===this.qu.size&&this.current?1:0,w=g!==this.Uu;return this.Uu=g,0!==u.length||w?{snapshot:new fh(this.query,e.Gu,o,u,e.mutatedKeys,0===g,w,!1),Yu:d}:{Yu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Gv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Nt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new hI(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new dI(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Nt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return fh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class pb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pI{constructor(e){this.key=e,this.ec=!1}}class gb{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nc={},this.sc=new Fa(g=>bD(g),xg),this.ic=new Map,this.rc=new Set,this.oc=new Hn($e.comparator),this.uc=new Map,this.cc=new Iv,this.ac={},this.hc=new Map,this.lc=rc.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function mb(n,e){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,ye.Z)(function*(n,e){const t=bI(n);let r,o;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.tc();else{const d=yield xl(t.localStore,li(e));t.isPrimaryClient&&Fv(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Kv(t,e,r,"current"===g)}return o}),Ul.apply(this,arguments)}function Kv(n,e,t,r){return fm.apply(this,arguments)}function fm(){return fm=(0,ye.Z)(function*(n,e,t,r){n.dc=(A,N,H)=>{return(Q=(0,ye.Z)(function*(ae,Re,Le,Dt){let Tt=Re.view.ju(Le);Tt.$i&&(Tt=yield Jf(ae.localStore,Re.query,!1).then(({documents:Pt})=>Re.view.ju(Pt,Tt)));const Lt=Dt&&Dt.targetChanges.get(Re.targetId),Mt=Re.view.applyChanges(Tt,ae.isPrimaryClient,Lt);return Jv(ae,Re.targetId,Mt.Yu),Mt.snapshot}),function(ae,Re,Le,Dt){return Q.apply(this,arguments)})(n,A,N,H);var Q};const o=yield Jf(n.localStore,e,!0),u=new fI(e,o.Hi),d=u.ju(o.documents),g=Yd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,g);Jv(n,t,w.Yu);const b=new pb(e,t,u);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),w.snapshot}),fm.apply(this,arguments)}function yb(n,e){return pm.apply(this,arguments)}function pm(){return pm=(0,ye.Z)(function*(n,e){const t=qe(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(u=>!xg(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ml(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),uh(t.remoteStore,r.targetId),gh(t,r.targetId)}).catch(Aa))):(gh(t,r.targetId),yield Ml(t.localStore,r.targetId,!0))}),pm.apply(this,arguments)}function gm(){return gm=(0,ye.Z)(function*(n,e,t){const r=wm(n);try{const o=yield function(u,d){const g=qe(u),w=Tn.now(),b=d.reduce((H,Q)=>H.add(Q.key),Nt());let A,N;return g.persistence.runTransaction("Locally write mutations","readwrite",H=>{let Q=os(),ae=Nt();return g.Gi.getEntries(H,b).next(Re=>{Q=Re,Q.forEach((Le,Dt)=>{Dt.isValidDocument()||(ae=ae.add(Le))})}).next(()=>g.localDocuments.getOverlayedDocuments(H,Q)).next(Re=>{A=Re;const Le=[];for(const Dt of d){const Tt=ow(Dt,A.get(Dt.key).overlayedDocument);null!=Tt&&Le.push(new No(Dt.key,Tt,ID(Tt.value.mapValue),un.exists(!0)))}return g.mutationQueue.addMutationBatch(H,w,Le,d)}).next(Re=>{N=Re;const Le=Re.applyToLocalDocumentSet(A,ae);return g.documentOverlayCache.saveOverlays(H,Re.batchId,Le)})}).then(()=>({batchId:N.batchId,changes:Ky(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let w=u.ac[u.currentUser.toKey()];w||(w=new Hn(xt)),w=w.insert(d,g),u.ac[u.currentUser.toKey()]=w}(r,o.batchId,t),yield $a(r,o.changes),yield Nl(r.remoteStore)}catch(o){const u=Ll(o,"Failed to persist write");t.reject(u)}}),gm.apply(this,arguments)}function gI(n,e){return op.apply(this,arguments)}function op(){return op=(0,ye.Z)(function*(n,e){const t=qe(n);try{const r=yield Fw(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.uc.get(u);d&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ec=!0:o.modifiedDocuments.size>0?Et(d.ec):o.removedDocuments.size>0&&(Et(d.ec),d.ec=!1))}),yield $a(t,r,e)}catch(r){yield Aa(r)}}),op.apply(this,arguments)}function mI(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((u,d)=>{const g=d.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=qe(u);g.onlineState=d;let w=!1;g.queries.forEach((b,A)=>{for(const N of A.listeners)N.bu(d)&&(w=!0)}),w&&ph(g)}(r.eventManager,e),o.length&&r.nc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yI(n,e,t){return mm.apply(this,arguments)}function mm(){return mm=(0,ye.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),u=o&&o.key;if(u){let d=new Hn($e.comparator);d=d.insert(u,nn.newNoDocument(u,yt.min()));const g=Nt().add(u),w=new Zd(yt.min(),new Map,new hn(xt),d,g);yield gI(r,w),r.oc=r.oc.remove(u),r.uc.delete(e),Xv(r)}else yield Ml(r.localStore,e,!1).then(()=>gh(r,e,t)).catch(Aa)}),mm.apply(this,arguments)}function _b(n,e){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield Tv(t.localStore,e);Qv(t,r,null),Yv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $a(t,o)}catch(o){yield Aa(o)}}),Zv.apply(this,arguments)}function wb(n,e,t){return ap.apply(this,arguments)}function ap(){return ap=(0,ye.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,d){const g=qe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return g.mutationQueue.lookupMutationBatch(w,d).next(A=>(Et(null!==A),b=A.keys(),g.mutationQueue.removeMutationBatch(w,A))).next(()=>g.mutationQueue.performConsistencyCheck(w)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(w,b,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>g.localDocuments.getDocuments(w,b))})}(r.localStore,e);Qv(r,e,t),Yv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $a(r,o)}catch(o){yield Aa(o)}}),ap.apply(this,arguments)}function ym(){return ym=(0,ye.Z)(function*(n,e){const t=qe(n);sc(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=Ll(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ym.apply(this,arguments)}function Yv(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function Qv(n,e,t){const r=qe(n);let o=r.ac[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function gh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||vI(n,r)})}function vI(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(uh(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),Xv(n))}function Jv(n,e,t){for(const r of t)r instanceof dI?(n.cc.addReference(r.key,e),Eb(n,r)):r instanceof hI?(Me("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||vI(n,r.key)):tt()}function Eb(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Me("SyncEngine","New document in limbo: "+t),n.rc.add(r),Xv(n))}function Xv(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new $e(jt.fromString(e)),r=n.lc.next();n.uc.set(r,new pI(t)),n.oc=n.oc.insert(t,r),Fv(n.remoteStore,new us(li(Of(t.path)),r,2,Fi.at))}}function $a(n,e,t){return vm.apply(this,arguments)}function vm(){return vm=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],d=[];var g;r.sc.isEmpty()||(r.sc.forEach((g,w)=>{d.push(r.dc(w,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b.fromCache?"not-current":"current"),o.push(b);const A=tm.Ci(w.targetId,b);u.push(A)}}))}),yield Promise.all(d),r.nc.Wo(o),yield(g=(0,ye.Z)(function*(w,b){const A=qe(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>se.forEach(b,H=>se.forEach(H.Si,Q=>A.persistence.referenceDelegate.addReference(N,H.targetId,Q)).next(()=>se.forEach(H.Di,Q=>A.persistence.referenceDelegate.removeReference(N,H.targetId,Q)))))}catch(N){if(!xa(N))throw N;Me("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const H=N.targetId;if(!N.fromCache){const Q=A.Ui.get(H),Re=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);A.Ui=A.Ui.insert(H,Re)}}}),function(w,b){return g.apply(this,arguments)})(r.localStore,u))}),vm.apply(this,arguments)}function _I(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,ye.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const r=yield Cv(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(d=>{d.forEach(g=>{g.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $a(t,r.ji)}var o}),e_.apply(this,arguments)}function Db(n,e){const t=qe(n),r=t.uc.get(e);if(r&&r.ec)return Nt().add(r.key);{let o=Nt();const u=t.ic.get(e);if(!u)return o;for(const d of u){const g=t.sc.get(d);o=o.unionWith(g.view.Qu)}return o}}function wI(n,e){return t_.apply(this,arguments)}function t_(){return t_=(0,ye.Z)(function*(n,e){const t=qe(n),r=yield Jf(t.localStore,e.query,!0),o=e.view.Zu(r);return t.isPrimaryClient&&Jv(t,e.targetId,o.Yu),o}),t_.apply(this,arguments)}function bb(n,e){return n_.apply(this,arguments)}function n_(){return n_=(0,ye.Z)(function*(n,e){const t=qe(n);return Vw(t.localStore,e).then(r=>$a(t,r))}),n_.apply(this,arguments)}function r_(n,e,t,r){return up.apply(this,arguments)}function up(){return up=(0,ye.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(d,g){const w=qe(d),b=qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Tn(A,g).next(N=>N?w.localDocuments.getDocuments(A,N):se.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Nl(o.remoteStore):"acknowledged"===t||"rejected"===t?(Qv(o,e,r||null),Yv(o,e),g=e,qe(qe(o.localStore).mutationQueue).An(g)):tt(),yield $a(o,u)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),up.apply(this,arguments)}function cp(){return cp=(0,ye.Z)(function*(n,e){const t=qe(n);if(bI(t),wm(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield EI(t,r.toArray());t.fc=!0,yield Ol(t.remoteStore,!0);for(const u of o)Fv(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(gh(t,d),Ml(t.localStore,d,!0))),uh(t.remoteStore,d)}),yield o,yield EI(t,r),function(u){const d=qe(u);d.uc.forEach((g,w)=>{uh(d.remoteStore,w)}),d.cc.fs(),d.uc=new Map,d.oc=new Hn($e.comparator)}(t),t.fc=!1,yield Ol(t.remoteStore,!1)}}),cp.apply(this,arguments)}function EI(n,e,t){return i_.apply(this,arguments)}function i_(){return i_=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const d of e){let g;const w=r.ic.get(d);if(w&&0!==w.length){g=yield xl(r.localStore,li(w[0]));for(const b of w){const A=r.sc.get(b),N=yield wI(r,A);N.snapshot&&u.push(N.snapshot)}}else{const b=yield Av(r.localStore,d);g=yield xl(r.localStore,b),yield Kv(r,_m(b),d,!1)}o.push(g)}return r.nc.Wo(u),o}),i_.apply(this,arguments)}function _m(n){return Gy(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Cb(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Tb(n,e,t,r){return ac.apply(this,arguments)}function ac(){return ac=(0,ye.Z)(function*(n,e,t,r){const o=qe(n);if(o.fc)return void Me("SyncEngine","Ignoring unexpected query state notification.");const u=o.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Vw(o.localStore,CD(u[0])),g=Zd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield $a(o,d,g);break}case"rejected":yield Ml(o.localStore,e,!0),gh(o,e,r);break;default:tt()}}),ac.apply(this,arguments)}function DI(n,e,t){return s_.apply(this,arguments)}function s_(){return s_=(0,ye.Z)(function*(n,e,t){const r=bI(n);if(r.fc){for(const o of e){if(r.ic.has(o)){Me("SyncEngine","Adding an already active target "+o);continue}const u=yield Av(r.localStore,o),d=yield xl(r.localStore,u);yield Kv(r,_m(u),d.targetId,!1),Fv(r.remoteStore,d)}for(const o of t)r.ic.has(o)&&(yield Ml(r.localStore,o,!1).then(()=>{uh(r.remoteStore,o),gh(r,o)}).catch(Aa))}}),s_.apply(this,arguments)}function bI(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Db.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yI.bind(null,e),e.nc.Wo=gT.bind(null,e.eventManager),e.nc._c=cI.bind(null,e.eventManager),e}function wm(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_b.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wb.bind(null,e),e}class CI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=ah(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Lw(this.persistence,new bv,e.initialUser,this.It)}gc(e){return new Ev(em.Bs,this.It)}mc(e){return new Hw}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Im extends CI{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield wm(r.Ec.syncEngine),yield Nl(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Lw(this.persistence,new bv,e.initialUser,this.It)}Ic(e,t){return new Aw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new yD(t,this.persistence);return new H0(e.asyncQueue,r)}gc(e){const t=Dv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fi.withCacheSize(this.cacheSizeBytes):fi.DEFAULT;return new Al(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kv(),ep(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Hw}}class Sb extends Im{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.Ec.syncEngine;r.sharedClientState instanceof Ov&&(r.sharedClientState.syncEngine={Fr:r_.bind(null,o),$r:Tb.bind(null,o),Br:DI.bind(null,o),vi:Cb.bind(null,o),Or:bb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(d){yield function II(n,e){return cp.apply(this,arguments)}(r.Ec.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}mc(e){const t=kv();if(!Ov.C(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Dv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ov(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Em{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>mI(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=_I.bind(null,r.syncEngine),yield Ol(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hb}createDatastore(e){const t=ah(e.databaseInfo.databaseId),r=new qw(e.databaseInfo);return new Yw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>mI(this.syncEngine,g,0),d=Gw.C()?new Gw:new ob,new ab(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,w,b){const A=new gb(r,o,u,d,g,w);return b&&(A.fc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=qe(t);Me("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield np(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Dm(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class lp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class TI{constructor(e,t){this.bc=e,this.It=t,this.metadata=new br,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),o=Number(r);isNaN(o)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(o);return new fb(JSON.parse(u),t.length+o)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ye.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class SI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const g=qe(u),w=Qd(g.It)+"/documents",b={documents:d.map(Q=>Bg(g.It,Q))},A=yield g.fo("BatchGetDocuments",w,b,d.length),N=new Map;A.forEach(Q=>{const ae=function Ua(n,e){return"found"in e?function(t,r){Et(!!r.found);const o=Ss(t,r.found.name),u=ur(r.found.updateTime),d=new qr({mapValue:{fields:r.found.fields}});return nn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const o=Ss(t,r.missing),u=ur(r.readTime);return nn.newNoDocument(o,u)}(n,e):tt()}(g.It,Q);N.set(ae.key.toString(),ae)});const H=[];return d.forEach(Q=>{const ae=N.get(Q.toString());Et(!!ae),H.push(ae)}),H}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new Lg(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=qe(o),g=Qd(d.It)+"/documents",w={writes:u.map(b=>qu(d.It,b))};yield d.co("Commit",g,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yt.min())?un.exists(!1):un.updateTime(t):un.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return un.updateTime(t)}return un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class AI{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new am(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ye.Z)(function*(){const t=new SI(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Oc(u)}))}).catch(o=>{e.Oc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!_g(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!uw(t)}return!1}}class Ab{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=pr.UNAUTHENTICATED,this.clientId=F0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(g){Me("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Me("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ll(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function xI(n,e){return a_.apply(this,arguments)}function a_(){return a_=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield Cv(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),a_.apply(this,arguments)}function MI(n,e){return bm.apply(this,arguments)}function bm(){return bm=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RI(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>jv(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>jv(e.remoteStore,u)),n.onlineComponents=e}),bm.apply(this,arguments)}function RI(n){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ye.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield xI(n,new CI)),n.offlineComponents}),Cm.apply(this,arguments)}function Tm(n){return u_.apply(this,arguments)}function u_(){return u_=(0,ye.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield MI(n,new Em)),n.onlineComponents}),u_.apply(this,arguments)}function xb(n){return RI(n).then(e=>e.persistence)}function c_(n){return RI(n).then(e=>e.localStore)}function NI(n){return Tm(n).then(e=>e.remoteStore)}function l_(n){return Tm(n).then(e=>e.syncEngine)}function mh(n){return d_.apply(this,arguments)}function d_(){return d_=(0,ye.Z)(function*(n){const e=yield Tm(n),t=e.eventManager;return t.onListen=mb.bind(null,e.syncEngine),t.onUnlisten=yb.bind(null,e.syncEngine),t}),d_.apply(this,arguments)}function PI(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,g,w){const b=new lp({next:N=>{u.enqueueAndForget(()=>aI(o,A));const H=N.docs.has(d);!H&&N.fromCache?w.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&g&&"server"===g.source?w.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new Wv(Of(d.path),b,{includeMetadataChanges:!0,Nu:!0});return zv(o,A)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}function OI(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,g,w){const b=new lp({next:N=>{u.enqueueAndForget(()=>aI(o,A)),N.fromCache&&"server"===g.source?w.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new Wv(d,b,{includeMetadataChanges:!0,Nu:!0});return zv(o,A)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}const h_=new Map;function Sm(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f_(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p_(n){if(!$e.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g_(n){if($e.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Am(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Am(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function m_(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class LI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,f_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new O0;switch(t.type){case"gapi":return new k0(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=h_.get(e);t&&(Me("ComponentProvider","Removing Datastore"),h_.delete(e),t.terminate())}(this),Promise.resolve()}}class An{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class gr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gr(this.firestore,e,this._query)}}class Vo extends gr{constructor(e,t,r){super(e,t,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new $e(e))}withConverter(e){return new Vo(this.firestore,e,this._path)}}function xm(n,e,...t){if(n=(0,Ct.m9)(n),Sm("collection","path",e),n instanceof hp){const r=jt.fromString(e,...t);return g_(r),new Vo(n,null,r)}{if(!(n instanceof An||n instanceof Vo))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return g_(r),new Vo(n.firestore,null,r)}}function Mm(n,e,...t){if(n=(0,Ct.m9)(n),1===arguments.length&&(e=F0.R()),Sm("doc","path",e),n instanceof hp){const r=jt.fromString(e,...t);return p_(r),new An(n,null,new $e(r))}{if(!(n instanceof An||n instanceof Vo))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return p_(r),new An(n.firestore,n instanceof Vo?n.converter:null,new $e(r))}}function Rm(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),(n instanceof An||n instanceof Vo)&&(e instanceof An||e instanceof Vo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function yh(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),n instanceof gr&&e instanceof gr&&n.firestore===e.firestore&&xg(n._query,e._query)&&n.converter===e.converter}class Fb{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new am(this,"async_queue_retry"),this.jc=()=>{const t=ep();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=ep();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=ep();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new br;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!xa(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Xn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const o=Hv.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(o),o}Wc(){this.qc&&tt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function y_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Ub{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mn extends hp{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Fb,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||v_(this),this._firestoreClient.terminate()}}function cr(n){return n._firestoreClient||v_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function v_(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _D(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new Ab(n._authCredentials,n._appCheckCredentials,n._queue,r)}function UI(n,e,t){const r=new br;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield xI(n,t),yield MI(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===le.FAILED_PRECONDITION||d.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;dl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function VI(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ha{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jo(Cr.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jo(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uc{constructor(e){this._methodName=e}}class vh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const BI=/^__.*__$/;class jb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wu(e,this.data,t,this.fieldTransforms)}}class b_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new No(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function C_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class Pm{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Pm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.oa(e),o}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.ea(),o}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Lm(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(C_(this.na)&&BI.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class jI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||ah(e)}fa(e,t,r,o=!1){return new Pm({na:e,methodName:t,la:r,path:Sn.emptyPath(),ra:!1,ha:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function cc(n){const e=n._freezeSettings(),t=ah(n._databaseId);return new jI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Om(n,e,t,r,o,u={}){const d=n.fa(u.merge||u.mergeFields?2:0,e,t,o);fp("Data must be an object, but it was:",d,r);const g=Ih(r,d);let w,b;if(u.merge)w=new Ui(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const H=S_(e,N,t);if(!d.contains(H))throw new xe(le.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);qI(A,H)||A.push(H)}w=new Ui(A),b=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=d.fieldTransforms;return new jb(new qr(g),w,b)}class _h extends uc{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _h}}function $I(n,e,t){return new Pm({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Kr extends uc{_toFieldTransform(e){return new kf(e.path,new vl)}isEqual(e){return e instanceof Kr}}class wh extends uc{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=$I(this,e,!0),r=this.da.map(u=>lc(u,t)),o=new ka(r);return new kf(e.path,o)}isEqual(e){return this===e}}class $b extends uc{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=$I(this,e,!0),r=this.da.map(u=>lc(u,t)),o=new Vi(r);return new kf(e.path,o)}isEqual(e){return this===e}}class Hb extends uc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new zd(e.It,Oa(e.It,this._a));return new kf(e.path,t)}isEqual(e){return this===e}}function HI(n,e,t,r){const o=n.fa(1,e,t);fp("Data must be an object, but it was:",o,r);const u=[],d=qr.empty();wt(r,(w,b)=>{const A=km(e,w,t);b=(0,Ct.m9)(b);const N=o.ua(A);if(b instanceof _h)u.push(A);else{const H=lc(b,N);null!=H&&(u.push(A),d.set(A,H))}});const g=new Ui(u);return new b_(d,g,o.fieldTransforms)}function GI(n,e,t,r,o,u){const d=n.fa(1,e,t),g=[S_(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)g.push(S_(e,u[H])),w.push(u[H+1]);const b=[],A=qr.empty();for(let H=g.length-1;H>=0;--H)if(!qI(b,g[H])){const Q=g[H];let ae=w[H];ae=(0,Ct.m9)(ae);const Re=d.ua(Q);if(ae instanceof _h)b.push(Q);else{const Le=lc(ae,Re);null!=Le&&(b.push(Q),A.set(Q,Le))}}const N=new Ui(b);return new b_(A,N,d.fieldTransforms)}function T_(n,e,t,r=!1){return lc(t,n.fa(r?4:3,e))}function lc(n,e){if(zI(n=(0,Ct.m9)(n)))return fp("Unsupported field value:",e,n),Ih(n,e);if(n instanceof uc)return function(t,r){if(!C_(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=lc(d,r.ca(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ct.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Oa(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Tn.fromDate(t);return{timestampValue:wl(r.It,o)}}if(t instanceof Tn){const o=new Tn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wl(r.It,o)}}if(t instanceof vh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jo)return{bytesValue:fw(r.It,t._byteString)};if(t instanceof An){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ff(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${Am(t)}`)}(n,e)}function Ih(n,e){const t={};return Py(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wt(n,(r,o)=>{const u=lc(o,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function zI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Tn||n instanceof vh||n instanceof jo||n instanceof An||n instanceof uc)}function fp(n,e,t){if(!zI(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Am(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function S_(n,e,t){if((e=(0,Ct.m9)(e))instanceof Ha)return e._internalPath;if("string"==typeof e)return km(n,e);throw Lm("Field path arguments must be of type string or ",n,!1,void 0,t)}const WI=new RegExp("[~\\*/\\[\\]]");function km(n,e,t){if(e.search(WI)>=0)throw Lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ha(...e.split("."))._internalPath}catch{throw Lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lm(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(le.INVALID_ARGUMENT,g+n+w)}function qI(n,e){return n.some(t=>t.isEqual(e))}class Vl{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KI extends Vl{data(){return super.data()}}function pp(n,e){return"string"==typeof e?km(n,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}class $o{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class no extends Vl{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Fm extends no{data(e={}){return super.data(e)}}class Ga{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $o(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Fm(this._firestore,this._userDataWriter,r.key,r,new $o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Fm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new $o(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new Fm(r._firestore,r._userDataWriter,d.doc.key,d.doc,new $o(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:Gb(d.type),doc:g,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Gb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function A_(n,e){return n instanceof no&&e instanceof no?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ga&&e instanceof Ga&&n._firestore===e._firestore&&yh(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Bl(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gp{}function za(n,...e){for(const t of e)n=t._apply(n);return n}class x_ extends gp{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=cc(e.firestore),r=function(o,u,d,g,w,b,A){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){XI(A,b);const Q=[];for(const ae of A)Q.push(N_(g,o,ae));N={arrayValue:{values:Q}}}else N=N_(g,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||XI(A,b),N=T_(d,"where",A,"in"===b||"not-in"===b);const H=Pr.create(w,b,N);return function(Q,ae){if(ae.dt()){const Le=Sg(Q);if(null!==Le&&!Le.isEqual(ae.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ae.field.toString()}'`);const Dt=ew(Q);null!==Dt&&P_(0,ae.field,Dt)}const Re=function(Le,Dt){for(const Tt of Le.filters)if(Dt.indexOf(Tt.op)>=0)return Tt.op;return null}(Q,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Re)throw new xe(le.INVALID_ARGUMENT,Re===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Re.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new gr(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Pa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class zb extends gp{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Pf(o,u);return function(g,w){if(null===ew(g)){const b=Sg(g);null!==b&&P_(0,b,w.field)}}(r,d),d}(e._query,this.wa,this.ya);return new gr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Pa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ZI extends gp{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new gr(e.firestore,e.converter,zy(e._query,this.pa,this.Ia))}}class M_ extends gp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=JI(e,this.type,this.Ta,this.Ea);return new gr(e.firestore,e.converter,(o=t,new Pa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class R_ extends gp{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=JI(e,this.type,this.Ta,this.Ea);return new gr(e.firestore,e.converter,(o=t,new Pa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function JI(n,e,t,r){if(t[0]=(0,Ct.m9)(t[0]),t[0]instanceof Vl)return function(o,u,d,g,w){if(!g)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const A of Hd(o))if(A.field.isKeyField())b.push(yl(u,g.key));else{const N=g.data.field(A.field);if(ky(N))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=A.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(N)}return new Ro(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=cc(n.firestore);return function(u,d,g,w,b,A){const N=u.explicitOrderBy;if(b.length>N.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Q=0;Q<b.length;Q++){const ae=b[Q];if(N[Q].field.isKeyField()){if("string"!=typeof ae)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ae}`);if(!Ag(u)&&-1!==ae.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ae}' contains a slash.`);const Re=u.path.child(jt.fromString(ae));if(!$e.isDocumentKey(Re))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Le=new $e(Re);H.push(yl(d,Le))}else{const Re=T_(g,w,ae);H.push(Re)}}return new Ro(H,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function N_(n,e,t){if("string"==typeof(t=(0,Ct.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ag(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(jt.fromString(t));if(!$e.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yl(n,new $e(r))}if(t instanceof An)return yl(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Am(t)}.`)}function XI(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function P_(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const eE={maxAttempts:5};class Um{convertValue(e,t="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return wt(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new vh(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pl(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new Tn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=jt.fromString(e);Et(ev(r));const o=new gl(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||Xn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function mp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Yb extends Um{constructor(e){super(),this.firestore=e}convertBytes(e){return new jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}class tE{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cc(e)}set(e,t,r){this._verifyNotCommitted();const o=jl(e,this._firestore),u=mp(o.converter,t,r),d=Om(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,un.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=jl(e,this._firestore);let d;return d="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Ha?GI(this._dataReader,"WriteBatch.update",u._key,t,r,o):HI(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jl(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(t._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jl(n,e){if((n=(0,Ct.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Eh extends Um{constructor(e){super(),this.firestore=e}convertBytes(e){return new jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}function Qb(n,e,t){n=Yt(n,An);const r=Yt(n.firestore,mn),o=mp(n.converter,e,t);return $l(r,[Om(cc(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,un.none())])}function Jb(n,e,t,...r){n=Yt(n,An);const o=Yt(n.firestore,mn),u=cc(o);let d;return d="string"==typeof(e=(0,Ct.m9)(e))||e instanceof Ha?GI(u,"updateDoc",n._key,e,t,r):HI(u,"updateDoc",n._key,e),$l(o,[d.toMutation(n._key,un.exists(!0))])}function O_(n,...e){var t,r,o;n=(0,Ct.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||y_(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(y_(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,b,A;if(n instanceof An)b=Yt(n.firestore,mn),A=Of(n._key.path),w={next:N=>{e[d]&&e[d](jm(b,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Yt(n,gr);b=Yt(N.firestore,mn),A=N._query;const H=new Eh(b);w={next:Q=>{e[d]&&e[d](new Ga(b,H,N,Q))},error:e[d+1],complete:e[d+2]},Bl(n._query)}return function(N,H,Q,ae){const Re=new lp(ae),Le=new Wv(H,Re,Q);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return zv(yield mh(N),Le)})),()=>{Re.Rc(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return aI(yield mh(N),Le)}))}}(cr(b),A,g,w)}function $l(n,e){return function(t,r){const o=new br;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function vb(n,e,t){return gm.apply(this,arguments)}(yield l_(t),r,o)})),o.promise}(cr(n),e)}function jm(n,e,t){const r=t.docs.get(e._key),o=new Eh(n);return new no(n,o,e._key,r,new $o(t.hasPendingWrites,t.fromCache),e.converter)}class AT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cc(e)}get(e){const t=jl(e,this._firestore),r=new Yb(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new Vl(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Vl(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=jl(e,this._firestore),u=mp(o.converter,t,r),d=Om(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=jl(e,this._firestore);let d;return d="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Ha?GI(this._dataReader,"Transaction.update",u._key,t,r,o):HI(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=jl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jl(e,this._firestore),r=new Eh(this._firestore);return super.get(e).then(o=>new no(this._firestore,r,t._key,o._document,new $o(!1,!1),t.converter))}}function sE(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function tC(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function oE(){if(!function vD(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hu=Ei.SDK_VERSION,(0,Ei._registerComponent)(new ts.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new mn(new dD(t.getProvider("auth-internal")),new hl(t.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(g.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Ei.registerVersion)(N0,"3.5.0",n),(0,Ei.registerVersion)(N0,"3.5.0","esm2017")}();class vp{constructor(e){this._delegate=e}static fromBase64String(e){return oE(),new vp(jo.fromBase64String(e))}static fromUint8Array(e){return tC(),new vp(jo.fromUint8Array(e))}toBase64(){return oE(),this._delegate.toBase64()}toUint8Array(){return tC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function L_(n){return function OT(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nC{enableIndexedDbPersistence(e,t){return function __(n,e){VI(n=Yt(n,mn));const t=cr(n),r=n._freezeSettings(),o=new Em;return UI(t,o,new Im(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function FI(n){VI(n=Yt(n,mn));const e=cr(n),t=n._freezeSettings(),r=new Em;return UI(e,r,new Sb(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Vb(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Ys.C())return Promise.resolve();const o=r+"main";yield Ys.delete(o)}),function(r){return t.apply(this,arguments)})(Dv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class F_{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Lb(n,e,t,r={}){var o;const u=(n=Yt(n,hp))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&dl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=pr.MOCK_USER;else{d=(0,Ct.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new pr(w)}n._authCredentials=new Sy(new mg(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function w_(n){return function Mb(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield xb(n),t=yield NI(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o._u.delete(0),tp(o)}(t)}))}(cr(n=Yt(n,mn)))}(this._delegate)}disableNetwork(){return function I_(n){return function Rb(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield xb(n),t=yield NI(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=qe(o);u._u.add(0),yield np(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(cr(n=Yt(n,mn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,f_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vT(n){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function Ib(n,e){return ym.apply(this,arguments)}(yield l_(e),t)})),t.promise}(cr(n=Yt(n,mn)))}(this._delegate)}onSnapshotsInSync(e){return function Bm(n,e){return function Ob(n,e){const t=new lp(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield mh(n),o=t,qe(r).Ru.add(o),void o.next();var r,o})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield mh(n),o=t,void qe(r).Ru.delete(o);var r,o}))}}(cr(n=Yt(n,mn)),y_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dh(this,xm(this._delegate,e))}catch(t){throw In(t,"collection()","Firestore.collection()")}}doc(e){try{return new xs(this,Mm(this._delegate,e))}catch(t){throw In(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zr(this,function Bo(n,e){if(n=Yt(n,hp),Sm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gr(n,null,(t=e,new Pa(jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw In(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function k_(n,e,t){n=Yt(n,mn);const r=Object.assign(Object.assign({},eE),t);return function(o){if(o.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function kb(n,e,t){const r=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const o=yield(u=n,Tm(u).then(d=>d.datastore));var u;new AI(n.asyncQueue,o,t,e,r).run()})),r.promise}(cr(n),o=>e(new AT(n,o)),r)}(this._delegate,t=>e(new As(this,t)))}batch(){return cr(this._delegate),new aE(new tE(this._delegate,e=>$l(this._delegate,e)))}loadBundle(e){return function E_(n,e){const t=cr(n=Yt(n,mn)),r=new Ub;return function dp(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return Dm(w,b);if(w instanceof ArrayBuffer)return Dm(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new TI(w,d);var w}(t,ah(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function o_(n,e,t){const r=qe(n);var o;(o=(0,ye.Z)(function*(u,d,g){try{const w=yield d.getMetadata();if(yield function(H,Q){const ae=qe(H),Re=ur(Q.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Le=>ae.Ns.getBundleMetadata(Le,Q.id)).then(Le=>!!Le&&Le.createTime.compareTo(Re)>=0)}(u.localStore,w))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);g._updateProgress(lI(w));const b=new sp(w,u.localStore,d.It);let A=yield d.wc();for(;A;){const H=yield b.Ou(A);H&&g._updateProgress(H),A=yield d.wc()}const N=yield b.complete();return yield $a(u,N.Bu,void 0),yield function(H,Q){const ae=qe(H);return ae.persistence.runTransaction("Save bundle","readwrite",Re=>ae.Ns.saveBundleMetadata(Re,Q))}(u.localStore,w),g._completeWith(N.progress),Promise.resolve(N.$u)}catch(w){return dl("SyncEngine",`Loading bundle failed with ${w}`),g._failWith(w),Promise.resolve(new Set)}var H}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield l_(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function D_(n,e){return function kI(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield c_(n),e)}))}(cr(n=Yt(n,mn)),e).then(t=>t?new gr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Zr(this,t):null)}}class _p extends Um{constructor(e){super(),this.firestore=e}convertBytes(e){return new vp(new jo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xs.forKey(t,this.firestore,null)}}class As{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _p(e)}get(e){const t=dc(e);return this._delegate.get(t).then(r=>new wp(this._firestore,new no(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=dc(e);return r?(sE("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=dc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=dc(e);return this._delegate.delete(t),this}}class aE{constructor(e){this._delegate=e}set(e,t,r){const o=dc(e);return r?(sE("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=dc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=dc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wa{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Fm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ip(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wa.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Wa(e,new _p(e),t),o.set(t,u)),u}}Wa.INSTANCES=new WeakMap;class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _p(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xs(t,new An(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new xs(t,new An(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Dh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dh(this.firestore,xm(this._delegate,e))}catch(t){throw In(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ct.m9)(e))instanceof An&&Rm(this._delegate,e)}set(e,t){t=sE("DocumentReference.set",t);try{return t?Qb(this._delegate,e,t):Qb(this._delegate,e)}catch(r){throw In(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Jb(this._delegate,e):Jb(this._delegate,e,t,...r)}catch(o){throw In(o,"updateDoc()","DocumentReference.update()")}}delete(){return function Vm(n){return $l(Yt(n.firestore,mn),[new Kd(n._key,un.none())])}(this._delegate)}onSnapshot(...e){const t=uE(e),r=$m(e,o=>new wp(this.firestore,new no(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return O_(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function ET(n){n=Yt(n,An);const e=Yt(n.firestore,mn),t=cr(e),r=new Eh(e);return function Nb(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const g=yield function(w,b){const A=qe(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,b))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const w=Ll(g,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield c_(n),e,t);var r})),t.promise}(t,n._key).then(o=>new no(e,r,n._key,o,new $o(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function DT(n){n=Yt(n,An);const e=Yt(n.firestore,mn);return PI(cr(e),n._key,{source:"server"}).then(t=>jm(e,n,t))}(this._delegate):function nE(n){n=Yt(n,An);const e=Yt(n.firestore,mn);return PI(cr(e),n._key).then(t=>jm(e,n,t))}(this._delegate),t.then(r=>new wp(this.firestore,new no(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Wa.getInstance(this.firestore,e):null))}}function In(n,e,t){return n.message=n.message.replace(e,t),n}function uE(n){for(const e of n)if("object"==typeof e&&!L_(e))return e;return{}}function $m(n,e){var t,r;let o;return o=L_(n[0])?n[0]:L_(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class wp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return A_(this._delegate,e._delegate)}}class Ip extends wp{data(e){const t=this._delegate.data(e);return function lD(n,e){n||tt()}(void 0!==t),t}}class Zr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _p(e)}where(e,t,r){try{return new Zr(this.firestore,za(this._delegate,function wT(n,e,t){const r=e,o=pp("where",n);return new x_(o,r,t)}(e,t,r)))}catch(o){throw In(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zr(this.firestore,za(this._delegate,function IT(n,e="asc"){const t=e,r=pp("orderBy",n);return new zb(r,t)}(e,t)))}catch(r){throw In(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zr(this.firestore,za(this._delegate,function Wb(n){return m_("limit",n),new ZI("limit",n,"F")}(e)))}catch(t){throw In(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Zr(this.firestore,za(this._delegate,function qb(n){return m_("limitToLast",n),new ZI("limitToLast",n,"L")}(e)))}catch(t){throw In(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zr(this.firestore,za(this._delegate,function YI(...n){return new M_("startAt",n,!0)}(...e)))}catch(t){throw In(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zr(this.firestore,za(this._delegate,function Kb(...n){return new M_("startAfter",n,!1)}(...e)))}catch(t){throw In(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zr(this.firestore,za(this._delegate,function QI(...n){return new R_("endBefore",n,!1)}(...e)))}catch(t){throw In(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zr(this.firestore,za(this._delegate,function Zb(...n){return new R_("endAt",n,!0)}(...e)))}catch(t){throw In(t,"endAt()","Query.endAt()")}}isEqual(e){return yh(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function CT(n){n=Yt(n,gr);const e=Yt(n.firestore,mn),t=cr(e),r=new Eh(e);return function Pb(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const g=yield Jf(o,u,!0),w=new fI(u,g.Hi),b=w.ju(g.documents),A=w.applyChanges(b,!1);d.resolve(A.snapshot)}catch(g){const w=Ll(g,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield c_(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ga(e,r,n,o))}(this._delegate):"server"===e?.source?function TT(n){n=Yt(n,gr);const e=Yt(n.firestore,mn),t=cr(e),r=new Eh(e);return OI(t,n._query,{source:"server"}).then(o=>new Ga(e,r,n,o))}(this._delegate):function bT(n){n=Yt(n,gr);const e=Yt(n.firestore,mn),t=cr(e),r=new Eh(e);return Bl(n._query),OI(t,n._query).then(o=>new Ga(e,r,n,o))}(this._delegate),t.then(r=>new Hm(this.firestore,new Ga(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uE(e),r=$m(e,o=>new Hm(this.firestore,new Ga(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return O_(this._delegate,t,r)}withConverter(e){return new Zr(this.firestore,this._delegate.withConverter(e?Wa.getInstance(this.firestore,e):null))}}class cE{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ip(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ip(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ip(this._firestore,r))})}isEqual(e){return A_(this._delegate,e._delegate)}}class Dh extends Zr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xs(this.firestore,e):null}doc(e){try{return new xs(this.firestore,void 0===e?Mm(this._delegate):Mm(this._delegate,e))}catch(t){throw In(t,"doc()","CollectionReference.doc()")}}add(e){return function ST(n,e){const t=Yt(n.firestore,mn),r=Mm(n),o=mp(n.converter,e);return $l(t,[Om(cc(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,un.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xs(this.firestore,t))}isEqual(e){return Rm(this._delegate,e._delegate)}withConverter(e){return new Dh(this.firestore,this._delegate.withConverter(e?Wa.getInstance(this.firestore,e):null))}}function dc(n){return Yt(n,An)}class Gm{constructor(...e){this._delegate=new Ha(...e)}static documentId(){return new Gm(Sn.keyField().canonicalString())}isEqual(e){return(e=(0,Ct.m9)(e))instanceof Ha&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Xb(){return new Kr("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hl(e)}static delete(){const e=function rE(){return new _h("deleteField")}();return e._methodName="FieldValue.delete",new Hl(e)}static arrayUnion(...e){const t=function iE(...n){return new wh("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hl(t)}static arrayRemove(...e){const t=function xT(...n){return new $b("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hl(t)}static increment(e){const t=function MT(n){return new Hb("increment",n)}(e);return t._methodName="FieldValue.increment",new Hl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lE={Firestore:F_,GeoPoint:vh,Timestamp:Tn,Blob:vp,Transaction:As,WriteBatch:aE,DocumentReference:xs,DocumentSnapshot:wp,Query:Zr,QueryDocumentSnapshot:Ip,QuerySnapshot:Hm,CollectionReference:Dh,FieldPath:Gm,FieldValue:Hl,setLogLevel:function kT(n){!function Ld(n){Ta.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function U_(n){(function rC(n,e){n.INTERNAL.registerComponent(new ts.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lE)))})(n,(e,t)=>new F_(e,t,new nC)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(dd.Z);var pi=k(7579),dE=k(6451),bh=k(5363),ro=k(8421);function kr(n,e){return(0,On.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,vr.x)(r,w=>{o?.unsubscribe();let b=0;const A=u++;(0,ro.Xf)(n(w,A)).subscribe(o=(0,vr.x)(r,N=>r.next(e?e(w,N,A,b++):N),()=>{o=null,g()}))},()=>{d=!0,g()}))})}var LT=k(6063);class iC extends pi.x{constructor(e=1/0,t=1/0,r=LT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)g=w;g&&r.splice(0,g+1)}}}var sC=k(3099);function hE(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,sC.B)({connector:()=>new iC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Ep=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function V_(n){return(0,On.e)((e,t)=>{let r=!1;e.subscribe((0,vr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function B_(n=aC){return(0,On.e)((e,t)=>{let r=!1;e.subscribe((0,vr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function aC(){return new Ep}function Ho(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gr((o,u)=>n(o,u,r)):Ds.y,Xi(1),t?V_(e):B_(()=>new Ep))}var fE=k(576);function zm(n,e){return(0,fE.m)(e)?kr(()=>n,e):kr(()=>n)}var Wm=k(9468);k(5867);const dC=new Map,HT={activated:!1,tokenObservers:[]},GT={initialized:!1,enabled:!1};function Yr(n){return dC.get(n)||HT}function Go(n,e){dC.set(n,e)}function Km(){return GT}class $_{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Ct.BH,yield function H_(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ct.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Qr=new Ct.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bp(n){if(!Yr(n).activated)throw Qr.create("use-before-activation",{appName:n.name})}function wE(n,e){return IE.apply(this,arguments)}function IE(){return IE=(0,ye.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Q=yield d.getHeartbeatsHeader();Q&&(u["X-Firebase-Client"]=Q)}const g={method:"POST",body:JSON.stringify(e),headers:u};let w,b;try{w=yield fetch(n,g)}catch(Q){throw Qr.create("fetch-network-error",{originalErrorMessage:null===(r=Q)||void 0===r?void 0:r.message})}if(200!==w.status)throw Qr.create("fetch-status-error",{httpStatus:w.status});try{b=yield w.json()}catch(Q){throw Qr.create("fetch-parse-error",{originalErrorMessage:null===(o=Q)||void 0===o?void 0:o.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw Qr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const N=1e3*Number(A[1]),H=Date.now();return{token:b.token,expireTimeMillis:H+N,issuedAtTimeMillis:H}}),IE.apply(this,arguments)}function mC(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ah="firebase-app-check-store";let Cp=null;function DE(){return Cp||(Cp=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(Qr.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Ah,{keyPath:"compositeKey"})}}catch(r){e(Qr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Cp)}function Tp(){return Tp=(0,ye.Z)(function*(n,e){const r=(yield DE()).transaction(Ah,"readwrite"),u=r.objectStore(Ah).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var b;g(Qr.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),Tp.apply(this,arguments)}const Zm=new si.Yd("@firebase/app-check");function TE(n,e){return(0,Ct.hl)()?function bE(n,e){return function q_(n,e){return Tp.apply(this,arguments)}(function wC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Zm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function EC(){return Km().enabled}function DC(){return AE.apply(this,arguments)}function AE(){return AE=(0,ye.Z)(function*(){const n=Km();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),AE.apply(this,arguments)}const qT={error:"UNKNOWN_ERROR"};function KT(n){return Ct.US.encodeString(JSON.stringify(n),!1)}function Y_(n){return xE.apply(this,arguments)}function xE(){return xE=(0,ye.Z)(function*(n,e=!1){const t=n.app;bp(t);const r=Yr(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&c(w)&&(o=w)}if(!e&&o&&c(o))return{token:o.token};let g,d=!1;if(EC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wE(mC(t,yield DC()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const w=yield r.exchangeTokenPromise;return yield TE(t,w),Go(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Zm.warn(w.message):Zm.error(w),u=w}return o?(g={token:o.token},Go(t,Object.assign(Object.assign({},r),{token:o})),yield TE(t,o)):g=l(u),d&&a(t,g),g}),xE.apply(this,arguments)}function RE(n,e){const t=Yr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Go(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function i(n){const{app:e}=n,t=Yr(e);let r=t.tokenRefresher;r||(r=function s(n){const{app:e}=n;return new $_((0,ye.Z)(function*(){let r;if(r=Yr(e).token?yield Y_(n,!0):yield Y_(n),r.error)throw r.error}),()=>!0,()=>{const t=Yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Go(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function a(n,e){const t=Yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function c(n){return n.expireTimeMillis-Date.now()>0}function l(n){return{token:KT(qT),error:n}}class f{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Yr(this.app);for(const t of e)RE(this.app,t.next);return Promise.resolve()}}const ZT="app-check-internal";!function MA(){(0,Ei._registerComponent)(new ts.wA("app-check",n=>function y(n,e){return new f(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZT).initialize()})),(0,Ei._registerComponent)(new ts.wA(ZT,n=>function I(n){return{getToken:e=>Y_(n,e),addTokenListener:e=>function ME(n,e,t,r){const{app:o}=n,u=Yr(o),d={next:t,error:r,type:e};if(Go(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&c(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),i(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>i(n))}(n,"INTERNAL",e),removeTokenListener:e=>RE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ei.registerVersion)("@firebase/app-check","0.5.12")}();class TC{constructor(){return(0,kn.vb)("app-check")}}typeof window<"u"&&window;var kA=k(127);const QT=new v.OlP("angularfire2.auth.use-emulator"),JT=new v.OlP("angularfire2.auth.settings"),XT=new v.OlP("angularfire2.auth.tenant-id"),eS=new v.OlP("angularfire2.auth.langugage-code"),tS=new v.OlP("angularfire2.auth.use-device-language"),nS=new v.OlP("angularfire.auth.persistence"),rS=(n,e,t,r,o,u,d,g)=>(0,_r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[b,A]of Object.entries(d))w.settings[b]=A;return g&&w.setPersistence(g),w},[t,r,o,u,d,g]);let iS=(()=>{class n{constructor(t,r,o,u,d,g,w,b,A,N,H,Q){const ae=new pi.x,Re=Je(void 0).pipe((0,bh.Q)(d.outsideAngular),kr(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2476)))),(0,st.U)(()=>(0,_r.on)(t,u,r)),(0,st.U)(Le=>rS(Le,u,g,b,A,N,w,H)),hE({bufferSize:1,refCount:!1}));if(dr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{Re.pipe(Ho()).subscribe();const Dt=Re.pipe(kr(Mt=>Mt.getRedirectResult().then(Pt=>Pt,()=>null)),kn.iC,hE({bufferSize:1,refCount:!1})),Tt=Re.pipe(kr(Mt=>new Qn.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>Mt.onAuthStateChanged(Ht=>Pt.next(Ht),Ht=>Pt.error(Ht),()=>Pt.complete()))})))),Lt=Re.pipe(kr(Mt=>new Qn.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>Mt.onIdTokenChanged(Ht=>Pt.next(Ht),Ht=>Pt.error(Ht),()=>Pt.complete()))}))));this.authState=Dt.pipe(zm(Tt),(0,Wm.R)(d.outsideAngular),(0,bh.Q)(d.insideAngular)),this.user=Dt.pipe(zm(Lt),(0,Wm.R)(d.outsideAngular),(0,bh.Q)(d.insideAngular)),this.idToken=this.user.pipe(kr(Mt=>Mt?(0,an.D)(Mt.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(kr(Mt=>Mt?(0,an.D)(Mt.getIdTokenResult()):Je(null))),this.credential=(0,dE.T)(Dt,ae,this.authState.pipe(Gr(Mt=>!Mt))).pipe((0,st.U)(Mt=>Mt?.user?Mt:null),(0,Wm.R)(d.outsideAngular),(0,bh.Q)(d.insideAngular))}return(0,_r.pX)(this,Re,u,{spy:{apply:(Le,Dt,Tt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&Tt.then(Lt=>ae.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(_r.Dh),v.LFG(_r.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(kn.HU),v.LFG(QT,8),v.LFG(JT,8),v.LFG(XT,8),v.LFG(eS,8),v.LFG(tS,8),v.LFG(nS,8),v.LFG(TC,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function sS(n,e){return function FA(n,e=Hr.z){return new Qn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function AC(n,e){return sS(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function LE(n,e){return AC(n,e).pipe(es(void 0),Eo(),(0,st.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function oS(n,e,t){return LE(n,t).pipe(ii((r,o)=>function VA(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function BA(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function pa(n,e=Ds.y){return n=n??zc,(0,On.e)((t,r)=>{let o,u=!0;t.subscribe((0,vr.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,st.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function xC(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function aS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class uS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=LE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(es(void 0),Eo(),Gr(([r,o])=>o.length>0||!r),(0,st.U)(([r,o])=>o),kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aS(e);return oS(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return AC(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),kn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(kn.iC)}add(e){return this.ref.add(e)}doc(e){return new cS(this.ref.doc(e),this.afs)}}class cS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=hS(r,t);return new uS(o,u,this.afs)}snapshotChanges(){return function UA(n,e){return sS(n,e).pipe(es(void 0),Eo(),(0,st.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(kn.iC)}}class jA{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?LE(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Gr(t=>t.length>0),kn.iC):LE(this.query,this.afs.schedulers.outsideAngular).pipe(kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ii((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aS(e);return oS(this.query,t,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(e={}){return AC(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),kn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(kn.iC)}}const lS=new v.OlP("angularfire2.enableFirestorePersistence"),dS=new v.OlP("angularfire2.firestore.persistenceSettings"),$A=new v.OlP("angularfire2.firestore.settings"),HA=new v.OlP("angularfire2.firestore.use-emulator");function hS(n,e=(t=>t)){return{query:e(n),ref:n}}let fS=(()=>{class n{constructor(t,r,o,u,d,g,w,b,A,N,H,Q,ae,Re,Le,Dt,Tt){this.schedulers=w;const Lt=(0,_r.on)(t,g,r),Mt=A;N&&rS(Lt,g,H,ae,Re,Le,Q,Dt),[this.firestore,this.persistenceEnabled$]=(0,_r.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Pt=g.runOutsideAngular(()=>Lt.firestore());if(u&&Pt.settings(u),Mt&&Pt.useEmulator(...Mt),o&&!dr(d)){const Ht=()=>{try{return(0,an.D)(Pt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jr){return typeof console<"u"&&console.warn(Jr),Je(!1)}};return[Pt,g.runOutsideAngular(Ht)]}return[Pt,Je(!1)]},[u,Mt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=hS(o,r),g=this.schedulers.ngZone.run(()=>u);return new uS(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new jA(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new cS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(_r.Dh),v.LFG(_r.xv,8),v.LFG(lS,8),v.LFG($A,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(kn.HU),v.LFG(dS,8),v.LFG(HA,8),v.LFG(iS,8),v.LFG(QT,8),v.LFG(JT,8),v.LFG(XT,8),v.LFG(eS,8),v.LFG(tS,8),v.LFG(nS,8),v.LFG(TC,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GA=(()=>{class n{constructor(){kA.Z.registerVersion("angularfire",kn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lS,useValue:!0},{provide:dS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[fS]}),n})(),pS=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="certifications"}getAlbum(){return this.firestore.collection(this.collectionName).valueChanges().pipe(Xi(1))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(fS))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class qa extends pi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:zA}=Array,{getPrototypeOf:WA,prototype:qA,keys:KA}=Object;const{isArray:QA}=Array;var tx=k(9672);function gS(...n){const e=(0,Ni.yG)(n),t=(0,Ni.jO)(n),{args:r,keys:o}=function ZA(n){if(1===n.length){const e=n[0];if(zA(e))return{args:e,keys:null};if(function YA(n){return n&&"object"==typeof n&&WA(n)===qA}(e)){const t=KA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,an.D)([],e);const u=new Qn.y(function nx(n,e,t=Ds.y){return r=>{mS(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let w=0;w<o;w++)mS(e,()=>{const b=(0,an.D)(n[w],e);let A=!1;b.subscribe((0,vr.x)(r,N=>{u[w]=N,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function ex(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):Ds.y));return t?u.pipe(function XA(n){return(0,st.U)(e=>function JA(n,e){return QA(e)?n(...e):n(e)}(n,e))}(t)):u}function mS(n,e,t){n?(0,tx.f)(t,n,e):e()}function yS(n){return new Qn.y(e=>{(0,ro.Xf)(n()).subscribe(e)})}var rx=k(9635);function X_(n,e){const t=(0,fE.m)(n)?n:()=>n,r=o=>o.error(t());return new Qn.y(e?o=>e.schedule(r,0,o):r)}var vS=k(727);function MC(){return(0,On.e)((n,e)=>{let t=null;n._refCount++;const r=(0,vr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class _S extends Qn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,On.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vS.w0;const t=this.getSubject();e.add(this.source.subscribe((0,vr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vS.w0.EMPTY)}return e}refCount(){return MC()(this)}}var cs=k(5577);function Ap(n,e){return(0,fE.m)(e)?(0,cs.z)(n,e,1):(0,cs.z)(n,1)}var ji=k(8505);function xh(n){return(0,On.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,vr.x)(t,void 0,void 0,d=>{u=(0,ro.Xf)(n(d,xh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function RC(n){return n<=0?()=>Ji.E:(0,On.e)((e,t)=>{let r=[];e.subscribe((0,vr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function wS(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gr((o,u)=>n(o,u,r)):Ds.y,RC(1),t?V_(e):B_(()=>new Ep))}function NC(n){return(0,On.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Vt="primary",e0=Symbol("RouteTitle");class ox{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Jm(n){return new ox(n)}function ax(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function pc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!IS(n[o],e[o]))return!1;return!0}function IS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ES(n){return Array.prototype.concat.apply([],n)}function DS(n){return n.length>0?n[n.length-1]:null}function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Mh(n){return(0,v.CqO)(n)?n:(0,v.QGY)(n)?(0,an.D)(Promise.resolve(n)):Je(n)}const lx={exact:function TS(n,e,t){if(!Mp(n.segments,e.segments)||!FE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!TS(n.children[r],e.children[r],t))return!1;return!0},subset:SS},bS={exact:function dx(n,e){return pc(n,e)},subset:function hx(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>IS(n[t],e[t]))},ignored:()=>!0};function CS(n,e,t){return lx[t.paths](n.root,e.root,t.matrixParams)&&bS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function SS(n,e,t){return AS(n,e,e.segments,t)}function AS(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Mp(o,t)||e.hasChildren()||!FE(o,t,r))}if(n.segments.length===t.length){if(!Mp(n.segments,t)||!FE(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!SS(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Mp(n.segments,o)&&FE(n.segments,o,r)&&n.children[Vt])&&AS(n.children[Vt],e,u,r)}}function FE(n,e,t){return e.every((r,o)=>bS[t](n[o].parameters,r.parameters))}class xp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jm(this.queryParams)),this._queryParamMap}toString(){return gx.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,bi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return UE(this)}}class t0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Jm(this.parameters)),this._parameterMap}toString(){return NS(this)}}function Mp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let xS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return new OC},providedIn:"root"}),n})();class OC{parse(e){const t=new bx(e);return new xp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${n0(e.root,!0)}`,r=function vx(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${VE(t)}=${VE(o)}`).join("&"):`${VE(t)}=${VE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function mx(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const gx=new OC;function UE(n){return n.segments.map(e=>NS(e)).join("/")}function n0(n,e){if(!n.hasChildren())return UE(n);if(e){const t=n.children[Vt]?n0(n.children[Vt],!1):"",r=[];return bi(n.children,(o,u)=>{u!==Vt&&r.push(`${u}:${n0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function px(n,e){let t=[];return bi(n.children,(r,o)=>{o===Vt&&(t=t.concat(e(r,o)))}),bi(n.children,(r,o)=>{o!==Vt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Vt?[n0(n.children[Vt],!1)]:[`${o}:${n0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${UE(n)}/${t[0]}`:`${UE(n)}/(${t.join("//")})`}}function MS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function VE(n){return MS(n).replace(/%3B/gi,";")}function kC(n){return MS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function BE(n){return decodeURIComponent(n)}function RS(n){return BE(n.replace(/\+/g,"%20"))}function NS(n){return`${kC(n.path)}${function yx(n){return Object.keys(n).map(e=>`;${kC(e)}=${kC(n[e])}`).join("")}(n.parameters)}`}const _x=/^[^\/()?;=#]+/;function jE(n){const e=n.match(_x);return e?e[0]:""}const wx=/^[^=?&#]+/,Ex=/^[^&#]+/;class bx{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new $t(e,t)),r}parseSegment(){const e=jE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new v.vHH(4009,!1);return this.capture(e),new t0(BE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=jE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=jE(this.remaining);o&&(r=o,this.capture(r))}e[BE(t)]=BE(r)}parseQueryParam(e){const t=function Ix(n){const e=n.match(wx);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Dx(n){const e=n.match(Ex);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=RS(t),u=RS(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jE(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new v.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Vt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Vt]:new $t([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new v.vHH(4011,!1)}}function LC(n){return n.segments.length>0?new $t([],{[Vt]:n}):n}function $E(n){const e={};for(const r of Object.keys(n.children)){const u=$E(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Cx(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Rp(n){return n instanceof xp}function Ax(n,e,t,r,o){if(0===t.length)return Xm(e.root,e.root,e.root,r,o);const u=function kS(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new OS(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return bi(u.outlets,(w,b)=>{g[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,w)=>{0==w&&"."===g||(0==w&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new OS(t,e,r)}(t);return u.toRoot()?Xm(e.root,e.root,new $t([],{}),r,o):function d(w){const b=function Mx(n,e,t,r){if(n.isAbsolute)return new ey(e.root,!0,0);if(-1===r)return new ey(t,t===e.root,0);return function LS(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new v.vHH(4005,!1);o=r.segments.length}return new ey(r,!1,o-u)}(t,r+(r0(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=b.processChildren?o0(b.segmentGroup,b.index,u.commands):UC(b.segmentGroup,b.index,u.commands);return Xm(e.root,b.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function r0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function s0(n){return"object"==typeof n&&null!=n&&n.outlets}function Xm(n,e,t,r,o){let d,u={};r&&bi(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),d=n===e?t:PS(n,e,t);const g=LC($E(d));return new xp(g,u,o)}function PS(n,e,t){const r={};return bi(n.children,(o,u)=>{r[u]=o===e?t:PS(o,e,t)}),new $t(n.segments,r)}class OS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&r0(r[0]))throw new v.vHH(4003,!1);const o=r.find(s0);if(o&&o!==DS(r))throw new v.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ey{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function UC(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return o0(n,e,t);const r=function Nx(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(s0(g))break;const w=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!US(w,b,d))return u;r+=2}else{if(!US(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new $t(n.segments.slice(0,r.pathIndex),{});return u.children[Vt]=new $t(n.segments.slice(r.pathIndex),n.children),o0(u,0,o)}return r.match&&0===o.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?VC(n,e,t):r.match?o0(n,0,o):VC(n,e,t)}function o0(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function Rx(n){return s0(n[0])?n[0].outlets:{[Vt]:n}}(t),o={};return bi(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=UC(n.children[d],e,u))}),bi(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new $t(n.segments,o)}}function VC(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(s0(u)){const w=Px(u.outlets);return new $t(r,w)}if(0===o&&r0(t[0])){r.push(new t0(n.segments[e].path,FS(t[0]))),o++;continue}const d=s0(u)?u.outlets[Vt]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&r0(g)?(r.push(new t0(d,FS(g))),o+=2):(r.push(new t0(d,{})),o++)}return new $t(r,{})}function Px(n){const e={};return bi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=VC(new $t([],{}),0,t))}),e}function FS(n){const e={};return bi(n,(t,r)=>e[r]=`${t}`),e}function US(n,e,t){return n==t.path&&pc(e,t.parameters)}class Gl{constructor(e,t){this.id=e,this.url=t}}class BC extends Gl{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Np extends Gl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class HE extends Gl{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class VS extends Gl{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ox extends Gl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kx extends Gl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lx extends Gl{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fx extends Gl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ux extends Gl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vx{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bx{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $x{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hx{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gx{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class jS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$C(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return $C(e,this._root).map(t=>t.value)}}function jC(n,e){if(n===e.value)return e;for(const t of e.children){const r=jC(n,t);if(r)return r}return null}function $C(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$C(n,t);if(r.length)return r.unshift(e),r}return[]}class zl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ty(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class $S extends jS{constructor(e,t){super(e),this.snapshot=t,HC(this,e)}toString(){return this.snapshot.toString()}}function HS(n,e){const t=function Wx(n,e){const d=new GE([],{},{},"",{},Vt,e,null,n.root,-1,{});return new zS("",new zl(d,[]))}(n,e),r=new qa([new t0("",{})]),o=new qa({}),u=new qa({}),d=new qa({}),g=new qa(""),w=new Rh(r,o,d,g,u,Vt,e,t.root);return w.snapshot=t.root,new $S(new zl(w,[]),t)}class Rh{constructor(e,t,r,o,u,d,g,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.pipe((0,st.U)(b=>b[e0]))??Je(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>Jm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>Jm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function GS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function qx(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class GE{constructor(e,t,r,o,u,d,g,w,b,A,N,H){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.[e0],this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=A,this._correctedLastPathIndex=H??A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zS extends jS{constructor(e,t){super(t),this.url=e,HC(this,t)}toString(){return WS(this._root)}}function HC(n,e){e.value._routerState=n,e.children.forEach(t=>HC(n,t))}function WS(n){const e=n.children.length>0?` { ${n.children.map(WS).join(", ")} } `:"";return`${n.value}${e}`}function GC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),pc(e.params,t.params)||n.params.next(t.params),function ux(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),pc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zC(n,e){const t=pc(n.params,e.params)&&function fx(n,e){return Mp(n,e)&&n.every((t,r)=>pc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zC(n.parent,e.parent))}function a0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Zx(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return a0(n,r,o);return a0(n,r)})}(n,e,t);return new zl(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>a0(n,g)),d}}const r=function Yx(n){return new Rh(new qa(n.url),new qa(n.params),new qa(n.queryParams),new qa(n.fragment),new qa(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>a0(n,u));return new zl(r,o)}}const WC="ngNavigationCancelingError";function qS(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Rp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=KS(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function KS(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[WC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ZS(n){return YS(n)&&Rp(n.url)}function YS(n){return n&&n[WC]}class Qx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new u0,this.attachRef=null}}let u0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qx,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zE=!1;let QS=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.name=o||Vt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,zE);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,zE);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,zE);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new v.vHH(4013,zE);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,w=new Jx(t,g,o.injector);if(r&&function Xx(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(d);this.activated=o.createComponent(b,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(u0),v.Y36(v.s_b),v.$8M("name"),v.Y36(v.sBO),v.Y36(v.lqb))},n.\u0275dir=v.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Jx{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rh?this.route:e===u0?this.childContexts:this.parent.get(e,t)}}let qC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[v.jDz],decls:1,vars:0,template:function(t,r){1&t&&v._UZ(0,"router-outlet")},dependencies:[QS],encapsulation:2}),n})();function JS(n,e){return n.providers&&!n._injector&&(n._injector=(0,v.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ZC(n){const e=n.children&&n.children.map(ZC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=qC),t}function zo(n){return n.outlet||Vt}function XS(n,e){const t=n.filter(r=>zo(r)===e);return t.push(...n.filter(r=>zo(r)!==e)),t}function c0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class iM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),GC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ty(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),bi(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ty(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ty(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ty(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Gx(u.value.snapshot))}),e.children.length&&this.forwardEvent(new $x(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(GC(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),GC(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=c0(o.snapshot),w=g?.get(v._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=g,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class eA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class WE{constructor(e,t){this.component=e,this.route=t}}function sM(n,e,t){const r=n._root;return l0(r,e?e._root:null,t,[r.value])}function ny(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,v.Z0I)(n)?e.get(n):n:r}function l0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ty(e);return n.children.forEach(d=>{(function aM(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function uM(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mp(n.url,e.url)||!pc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zC(n,e)||!pc(n.queryParams,e.queryParams);default:return!zC(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new eA(r)):(u.data=d.data,u._resolvedData=d._resolvedData),l0(n,e,u.component?g?g.children:null:t,r,o),w&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new WE(g.outlet.component,d))}else d&&d0(e,g,o),o.canActivateChecks.push(new eA(r)),l0(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),bi(u,(d,g)=>d0(d,t.getContext(g),o)),o}function d0(n,e,t){const r=ty(n),o=n.value;bi(r,(u,d)=>{d0(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new WE(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function h0(n){return"function"==typeof n}function YC(n){return n instanceof Ep||"EmptyError"===n?.name}const qE=Symbol("INITIAL_VALUE");function ry(){return kr(n=>gS(n.map(e=>e.pipe(Xi(1),es(qE)))).pipe((0,st.U)(e=>{for(const t of e)if(!0!==t){if(t===qE)return qE;if(!1===t||t instanceof xp)return t}return!0}),Gr(e=>e!==qE),Xi(1)))}function tA(n){return(0,rx.z)((0,ji.b)(e=>{if(Rp(e))throw qS(0,e)}),(0,st.U)(e=>!0===e))}const QC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nA(n,e,t,r,o){const u=JC(n,e,t);return u.matched?function CM(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Je(o.map(d=>{const g=ny(d,n);return Mh(function pM(n){return n&&h0(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(ry(),tA()):Je(!0)}(r=JS(e,r),e,t).pipe((0,st.U)(d=>!0===d?u:{...QC})):Je(u)}function JC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...QC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||ax)(t,n,e);if(!o)return{...QC};const u={};bi(o.posParams,(g,w)=>{u[w]=g.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function KE(n,e,t,r,o="corrected"){if(t.length>0&&function AM(n,e,t){return t.some(r=>ZE(n,e,r)&&zo(r)!==Vt)}(n,t,r)){const d=new $t(e,function SM(n,e,t,r){const o={};o[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&zo(u)!==Vt){const d=new $t([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[zo(u)]=d}return o}(n,e,r,new $t(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function xM(n,e,t){return t.some(r=>ZE(n,e,r))}(n,t,r)){const d=new $t(n.segments,function TM(n,e,t,r,o,u){const d={};for(const g of r)if(ZE(n,t,g)&&!o[zo(g)]){const w=new $t([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[zo(g)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new $t(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ZE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function rA(n,e,t,r){return!!(zo(n)===r||r!==Vt&&ZE(e,t,n))&&("**"===n.path||JC(e,n,t).matched)}function iA(n,e,t){return 0===e.length&&!n.children[t]}const YE=!1;class QE{constructor(e){this.segmentGroup=e||null}}class sA{constructor(e){this.urlTree=e}}function f0(n){return X_(new QE(n))}function oA(n){return X_(new sA(n))}class PM{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=KE(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Vt).pipe((0,st.U)(u=>this.createUrlTree($E(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xh(u=>{if(u instanceof sA)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof QE?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Vt).pipe((0,st.U)(o=>this.createUrlTree($E(o),e.queryParams,e.fragment))).pipe(xh(o=>{throw o instanceof QE?this.noMatchError(o):o}))}noMatchError(e){return new v.vHH(4002,YE)}createUrlTree(e,t,r){const o=LC(e);return new xp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(u=>new $t([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,an.D)(o).pipe(Ap(u=>{const d=r.children[u],g=XS(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,st.U)(w=>({segment:w,outlet:u})))}),ii((u,d)=>(u[d.outlet]=d.segment,u),{}),wS())}expandSegment(e,t,r,o,u,d){return(0,an.D)(r).pipe(Ap(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(xh(b=>{if(b instanceof QE)return Je(null);throw b}))),Ho(g=>!!g),xh((g,w)=>{if(YC(g))return iA(t,o,u)?Je(new $t([],{})):f0(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return rA(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):f0(t):f0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oA(u):this.lineralizeSegments(r,u).pipe((0,cs.z)(d=>{const g=new $t(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:w,remainingSegments:b,positionalParamSegments:A}=JC(t,o,u);if(!g)return f0(t);const N=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?oA(N):this.lineralizeSegments(o,N).pipe((0,cs.z)(H=>this.expandSegment(e,t,r,H.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=JS(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,st.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new $t(o,{})))):Je(new $t(o,{}))):nA(t,r,o,e).pipe(kr(({matched:d,consumedSegments:g,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,cs.z)(A=>{const N=A.injector??e,H=A.routes,{segmentGroup:Q,slicedSegments:ae}=KE(t,g,w,H),Re=new $t(Q.segments,Q.children);if(0===ae.length&&Re.hasChildren())return this.expandChildren(N,H,Re).pipe((0,st.U)(Lt=>new $t(g,Lt)));if(0===H.length&&0===ae.length)return Je(new $t(g,{}));const Le=zo(r)===u;return this.expandSegment(N,Re,H,ae,Le?Vt:u,!0).pipe((0,st.U)(Tt=>new $t(g.concat(Tt.segments),Tt.children)))})):f0(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function bM(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Je(!0):Je(o.map(d=>{const g=ny(d,n);return Mh(function lM(n){return n&&h0(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(ry(),tA())}(e,t,r).pipe((0,cs.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,ji.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function RM(n){return X_(KS(YE,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Je(r);if(o.numberOfChildren>1||!o.children[Vt])return X_(new v.vHH(4e3,YE));o=o.children[Vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new xp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return bi(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return bi(t.children,(g,w)=>{d[w]=this.createSegmentGroup(e,g,r,o)}),new $t(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new v.vHH(4001,YE);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class kM{}class UM{constructor(e,t,r,o,u,d,g,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g,this.urlSerializer=w}recognize(){const e=KE(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Vt).pipe((0,st.U)(t=>{if(null===t)return null;const r=new GE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new zl(r,t),u=new zS(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=GS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,an.D)(Object.keys(r.children)).pipe(Ap(o=>{const u=r.children[o],d=XS(t,o);return this.processSegmentGroup(e,d,u,o)}),ii((o,u)=>o&&u?(o.push(...u),o):null),function ix(n,e=!1){return(0,On.e)((t,r)=>{let o=0;t.subscribe((0,vr.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),V_(null),wS(),(0,st.U)(o=>{if(null===o)return null;const u=aA(o);return function VM(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,an.D)(t).pipe(Ap(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),Ho(d=>!!d),xh(d=>{if(YC(d))return iA(r,o,u)?Je([]):Je(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!rA(t,r,o,u))return Je(null);let d;if("**"===t.path){const g=o.length>0?DS(o).parameters:{},w=cA(r)+o.length;d=Je({snapshot:new GE(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dA(t),zo(t),t.component??t._loadedComponent??null,t,uA(r),w,hA(t),w),consumedSegments:[],remainingSegments:[]})}else d=nA(r,t,o,e).pipe((0,st.U)(({matched:g,consumedSegments:w,remainingSegments:b,parameters:A})=>{if(!g)return null;const N=cA(r)+w.length;return{snapshot:new GE(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dA(t),zo(t),t.component??t._loadedComponent??null,t,uA(r),N,hA(t),N),consumedSegments:w,remainingSegments:b}}));return d.pipe(kr(g=>{if(null===g)return Je(null);const{snapshot:w,consumedSegments:b,remainingSegments:A}=g;e=t._injector??e;const N=t._loadedInjector??e,H=function BM(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Q,slicedSegments:ae}=KE(r,b,A,H.filter(Le=>void 0===Le.redirectTo),this.relativeLinkResolution);if(0===ae.length&&Q.hasChildren())return this.processChildren(N,H,Q).pipe((0,st.U)(Le=>null===Le?null:[new zl(w,Le)]));if(0===H.length&&0===ae.length)return Je([new zl(w,[])]);const Re=zo(t)===u;return this.processSegment(N,H,Q,ae,Re?Vt:u).pipe((0,st.U)(Le=>null===Le?null:[new zl(w,Le)]))}))}}function jM(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function aA(n){const e=[],t=new Set;for(const r of n){if(!jM(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=aA(r.children);e.push(new zl(r.value,o))}return e.filter(r=>!t.has(r))}function uA(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cA(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function dA(n){return n.data||{}}function hA(n){return n.resolve||{}}function fA(n){return"string"==typeof n.title||null===n.title}function XC(n){return kr(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,st.U)(()=>e)):Je(e)})}let pA=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Vt);return r}getResolvedTitleForRoute(t){return t.data[e0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(gA)},providedIn:"root"}),n})(),gA=(()=>{class n extends pA{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Qi))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ZM{}class QM extends class YM{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const XE=new v.OlP("",{providedIn:"root",factory:()=>({})}),eT=new v.OlP("ROUTES");let tT=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Mh(t.loadComponent()).pipe((0,ji.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),NC(()=>{this.componentLoaders.delete(t)})),o=new _S(r,()=>new pi.x).pipe(MC());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,st.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,A=!1;Array.isArray(g)?b=g:(w=g.create(t).injector,b=ES(w.get(eT,[],v.XFs.Self|v.XFs.Optional)));return{routes:b.map(ZC),injector:w}}),NC(()=>{this.childrenLoaders.delete(r)})),d=new _S(u,()=>new pi.x).pipe(MC());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Mh(t()).pipe((0,cs.z)(r=>r instanceof v.YKP||Array.isArray(r)?Je(r):(0,an.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.zs3),v.LFG(v.Sil))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class XM{}class eR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function tR(n){throw n}function nR(n,e,t){return e.parse("/")}const rR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function yA(){const n=(0,v.f3M)(xS),e=(0,v.f3M)(u0),t=(0,v.f3M)(Te),r=(0,v.f3M)(v.zs3),o=(0,v.f3M)(v.Sil),u=(0,v.f3M)(eT,{optional:!0})??[],d=(0,v.f3M)(XE,{optional:!0})??{},g=(0,v.f3M)(gA),w=(0,v.f3M)(pA,{optional:!0}),b=(0,v.f3M)(XM,{optional:!0}),A=(0,v.f3M)(ZM,{optional:!0}),N=new Ci(null,n,e,t,r,o,ES(u));return b&&(N.urlHandlingStrategy=b),A&&(N.routeReuseStrategy=A),N.titleStrategy=w??g,function sR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let Ci=(()=>{class n{constructor(t,r,o,u,d,g,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pi.x,this.errorHandler=tR,this.malformedUriErrorHandler=nR,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new eR,this.routeReuseStrategy=new QM,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(tT),this.configLoader.onLoadEndListener=H=>this.triggerEvent(new Bx(H)),this.configLoader.onLoadStartListener=H=>this.triggerEvent(new Vx(H)),this.ngModule=d.get(v.h0i),this.console=d.get(v.c2e);const N=d.get(v.R0b);this.isNgZoneEnabled=N instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function cx(){return new xp(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=HS(this.currentUrlTree,this.rootComponentType),this.transitions=new qa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Gr(o=>0!==o.id),(0,st.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),kr(o=>{let u=!1,d=!1;return Je(o).pipe((0,ji.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),kr(g=>{const w=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return vA(g.source)&&(this.browserUrlTree=g.extractedUrl),Je(g).pipe(kr(N=>{const H=this.transitions.getValue();return r.next(new BC(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?Ji.E:Promise.resolve(N)}),function OM(n,e,t,r){return kr(o=>function NM(n,e,t,r,o){return new PM(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,st.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ji.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function HM(n,e,t,r,o,u){return(0,cs.z)(d=>function FM(n,e,t,r,o,u,d="emptyOnly",g="legacy"){return new UM(n,e,t,r,o,d,g,u).recognize().pipe(kr(w=>null===w?function LM(n){return new Qn.y(e=>e.error(n))}(new kM):Je(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,st.U)(g=>({...d,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ji.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new Ox(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Q,source:ae,restoredState:Re,extras:Le}=g,Dt=new BC(H,this.serializeUrl(Q),ae,Re);r.next(Dt);const Tt=HS(Q,this.rootComponentType).snapshot;return Je(o={...g,targetSnapshot:Tt,urlAfterRedirects:Q,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Ji.E}),(0,ji.b)(g=>{const w=new kx(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}),(0,st.U)(g=>o={...g,guards:sM(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function mM(n,e){return(0,cs.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Je({...t,guardsResult:!0}):function yM(n,e,t,r){return(0,an.D)(n).pipe((0,cs.z)(o=>function DM(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(g=>{const w=c0(e)??o,b=ny(g,w);return Mh(function fM(n){return n&&h0(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Ho())})).pipe(ry()):Je(!0)}(o.component,o.route,t,e,r)),Ho(o=>!0!==o,!0))}(d,r,o,n).pipe((0,cs.z)(g=>g&&function cM(n){return"boolean"==typeof n}(g)?function vM(n,e,t,r){return(0,an.D)(e).pipe(Ap(o=>Io(function wM(n,e){return null!==n&&e&&e(new jx(n)),Je(!0)}(o.route.parent,r),function _M(n,e){return null!==n&&e&&e(new Hx(n)),Je(!0)}(o.route,r),function EM(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function oM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>yS(()=>Je(d.guards.map(w=>{const b=c0(d.node)??t,A=ny(w,b);return Mh(function hM(n){return n&&h0(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Ho())})).pipe(ry())));return Je(u).pipe(ry())}(n,o.path,t),function IM(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const o=r.map(u=>yS(()=>{const d=c0(e)??t,g=ny(u,d);return Mh(function dM(n){return n&&h0(n.canActivate)}(g)?g.canActivate(e,n):d.runInContext(()=>g(e,n))).pipe(Ho())}));return Je(o).pipe(ry())}(n,o.route,t))),Ho(o=>!0!==o,!0))}(r,u,n,e):Je(g)),(0,st.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,ji.b)(g=>{if(o.guardsResult=g.guardsResult,Rp(g.guardsResult))throw qS(0,g.guardsResult);const w=new Lx(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(w)}),Gr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),XC(g=>{if(g.guards.canActivateChecks.length)return Je(g).pipe((0,ji.b)(w=>{const b=new Fx(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),kr(w=>{let b=!1;return Je(w).pipe(function GM(n,e){return(0,cs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Je(t);let u=0;return(0,an.D)(o).pipe(Ap(d=>function zM(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!fA(o)&&(u[e0]=o.title),function WM(n,e,t,r){const o=function qM(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Je({});const u={};return(0,an.D)(o).pipe((0,cs.z)(d=>function KM(n,e,t,r){const o=c0(e)??r,u=ny(n,o);return Mh(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(Ho(),(0,ji.b)(g=>{u[d]=g}))),RC(1),function sx(n){return(0,st.U)(()=>n)}(u),xh(d=>YC(d)?Ji.E:X_(d)))}(u,n,e,r).pipe((0,st.U)(d=>(n._resolvedData=d,n.data=GS(n,t).resolve,o&&fA(o)&&(n.data[e0]=o.title),null)))}(d.route,r,n,e)),(0,ji.b)(()=>u++),RC(1),(0,cs.z)(d=>u===o.length?Je(t):Ji.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ji.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,ji.b)(w=>{const b=new Ux(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),XC(g=>{const w=b=>{const A=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,ji.b)(N=>{b.component=N}),(0,st.U)(()=>{})));for(const N of b.children)A.push(...w(N));return A};return gS(w(g.targetSnapshot.root)).pipe(V_(),Xi(1))}),XC(()=>this.afterPreactivation()),(0,st.U)(g=>{const w=function Kx(n,e,t){const r=a0(n,e._root,t?t._root:void 0);return new $S(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return o={...g,targetRouterState:w}}),(0,ji.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new iM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,ji.b)({next(){u=!0},complete(){u=!0}}),NC(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),xh(g=>{if(d=!0,YS(g)){ZS(g)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new HE(o.id,this.serializeUrl(o.extractedUrl),g.message,g.cancellationCode);if(r.next(w),ZS(g)){const b=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vA(o.source)};this.scheduleNavigation(b,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new VS(o.id,this.serializeUrl(o.extractedUrl),g,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(g))}catch(b){o.reject(b)}}return Ji.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(ZC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:w}=r,b=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let N=null;switch(g){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),Ax(b,this.currentUrlTree,t,N,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Rp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function oR(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new v.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...rR}:!1===r?{...iR}:r,Rp(t))return CS(this.currentUrlTree,t,o);const u=this.parseUrl(t);return CS(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Np(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let g,w,b;d?(g=d.resolve,w=d.reject,b=d.promise):b=new Promise((H,Q)=>{g=H,w=Q});const A=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:A,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(H=>Promise.reject(H))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new HE(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){v.$Z()},n.\u0275prov=v.Yz7({token:n,factory:function(){return yA()},providedIn:"root"}),n})();function vA(n){return"imperative"!==n}class _A{}let cR=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Gr(t=>t instanceof Np),Ap(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,v.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,g=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,an.D)(o).pipe((0,Cu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const u=o.pipe((0,cs.z)(d=>null===d?Je(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,an.D)([u,d]).pipe((0,Cu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ci),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(_A),v.LFG(tT))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iT=new v.OlP("");let wA=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof BC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Np&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof BS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new BS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){v.$Z()},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function iy(n,e){return{\u0275kind:n,\u0275providers:e}}function sT(n){return[{provide:eT,multi:!0,useValue:n}]}function EA(){const n=(0,v.f3M)(v.zs3);return e=>{const t=n.get(v.z2F);if(e!==t.components[0])return;const r=n.get(Ci),o=n.get(DA);1===n.get(oT)&&r.initialNavigation(),n.get(bA,null,v.XFs.Optional)?.setUpPreloading(),n.get(iT,null,v.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const DA=new v.OlP("",{factory:()=>new pi.x}),oT=new v.OlP("",{providedIn:"root",factory:()=>1});const bA=new v.OlP("");function fR(n){return iy(0,[{provide:bA,useExisting:cR},{provide:_A,useExisting:n}])}const CA=new v.OlP("ROUTER_FORROOT_GUARD"),pR=[Te,{provide:xS,useClass:OC},{provide:Ci,useFactory:yA},u0,{provide:Rh,useFactory:function IA(n){return n.routerState.root},deps:[Ci]},tT];function gR(){return new v.PXZ("Router",Ci)}let mR=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[pR,[],sT(t),{provide:CA,useFactory:wR,deps:[[Ci,new v.FiY,new v.tp0]]},{provide:XE,useValue:r||{}},r?.useHash?{provide:me,useClass:nt}:{provide:me,useClass:Qe},{provide:iT,useFactory:()=>{const n=(0,v.f3M)(Ci),e=(0,v.f3M)(Ja),t=(0,v.f3M)(XE);return t.scrollOffset&&e.setOffset(t.scrollOffset),new wA(n,e,t)}},r?.preloadingStrategy?fR(r.preloadingStrategy).\u0275providers:[],{provide:v.PXZ,multi:!0,useFactory:gR},r?.initialNavigation?IR(r):[],[{provide:TA,useFactory:EA},{provide:v.tb,multi:!0,useExisting:TA}]]}}static forChild(t){return{ngModule:n,providers:[sT(t)]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(CA,8))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[qC]}),n})();function wR(n){return"guarded"}function IR(n){return["disabled"===n.initialNavigation?iy(3,[{provide:v.ip1,multi:!0,useFactory:()=>{const e=(0,v.f3M)(Ci);return()=>{e.setUpLocationChangeListener()}}},{provide:oT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?iy(2,[{provide:oT,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:e=>{const t=e.get(V,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(Ci),g=e.get(DA);(function o(u){e.get(Ci).events.pipe(Gr(g=>g instanceof Np||g instanceof HE||g instanceof VS),(0,st.U)(g=>g instanceof Np||g instanceof HE&&(0===g.code||1===g.code)&&null),Gr(g=>null!==g),Xi(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||g.closed?Je(void 0):g),d.initialNavigation()}))}}]).\u0275providers:[]]}const TA=new v.OlP("");function DR(n,e){if(1&n&&(v.TgZ(0,"option",13),v._uU(1),v.ALo(2,"uppercase"),v.qZA()),2&n){const t=e.$implicit;v.Q6J("value",t),v.xp6(1),v.hij(" ",v.lcZ(2,2,t)," ")}}function bR(n,e){if(1&n){const t=v.EpF();v.TgZ(0,"div",19)(1,"img",20),v.NdJ("click",function(){v.CHM(t);const o=v.oxw().$implicit,u=v.oxw(2);return v.KtG(u.openPreview(o))}),v.qZA()()}if(2&n){const t=v.oxw().$implicit;v.xp6(1),v.Q6J("src",t.image,v.LSH)}}function CR(n,e){if(1&n&&(v.ynx(0),v.YNc(1,bR,2,1,"div",18),v.BQk()),2&n){const t=e.$implicit,r=v.oxw().$implicit;v.xp6(1),v.Q6J("ngIf",t.date.startsWith(r))}}function TR(n,e){if(1&n&&(v.TgZ(0,"div",4)(1,"h2",14),v._uU(2),v.qZA(),v._UZ(3,"hr",15),v.TgZ(4,"div",16),v.YNc(5,CR,2,1,"ng-container",17),v.qZA()()),2&n){const t=e.$implicit,r=v.oxw();v.xp6(2),v.Oqu(t),v.xp6(3),v.Q6J("ngForOf",r.filteredCertifications)}}function SR(n,e){if(1&n){const t=v.EpF();v.TgZ(0,"div",21),v.NdJ("click",function(){v.CHM(t);const o=v.oxw();return v.KtG(o.closePreview())}),v.TgZ(1,"img",22),v.NdJ("click",function(o){return o.stopPropagation()}),v.qZA()()}if(2&n){const t=v.oxw();v.xp6(1),v.Q6J("src",t.certification.image,v.LSH)}}let AR=(()=>{class n{constructor(t,r,o){this.galleryService=t,this.route=r,this.location=o,this.certifications=[],this.filteredCertifications=[],this.filter="",this.preview=!1,this.categories=["career","edteam","platzi","udemy"],this.years=[]}ngOnInit(){this.galleryService.getAlbum().subscribe(t=>{this.certifications=t.sort((r,o)=>o.date.localeCompare(r.date)),this.filter=this.route.snapshot.queryParamMap.get("filter")||"",this.location.replaceState(""),this.filterCertifications(this.filter)})}filterCertifications(t){this.filteredCertifications=t&&this.categories.includes(t)?this.certifications.filter(r=>r.category===t):[...this.certifications],this.years=[...new Set(this.filteredCertifications.map(r=>r.date.slice(0,4)))]}openPreview(t){document.body.style.overflowY="hidden",this.preview=!0,this.certification=t}closePreview(){document.body.style.overflowY="",this.preview=!1}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(pS),v.Y36(Rh),v.Y36(Te))},n.\u0275cmp=v.Xpm({type:n,selectors:[["app-root"]],decls:18,vars:4,consts:[[1,"navbar","navbar-dark","bg-primary","mb-4"],[1,"container"],[1,"navbar-brand","mx-auto"],[1,"min-vh-100"],[1,"container","mb-4"],[1,"form-select",3,"value","change"],["categorySelect",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","container mb-4",4,"ngFor","ngForOf"],[1,"bg-white","text-center","py-3"],["href","https://github.com/jpin730","target","_blank"],["class","d-flex vh-100 vw-100 position-fixed top-0 start-0 bg-dark bg-opacity-75",3,"click",4,"ngIf"],[3,"value"],[1,"m-0"],[1,"mt-1"],[1,"row","row-cols-1","row-cols-lg-2"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"w-100",3,"src","click"],[1,"d-flex","vh-100","vw-100","position-fixed","top-0","start-0","bg-dark","bg-opacity-75",3,"click"],["loading","lazy",1,"m-auto","py-5","py-lg-0","px-lg-5",2,"max-height","100vh","max-width","100%",3,"src","click"]],template:function(t,r){if(1&t){const o=v.EpF();v.TgZ(0,"nav",0)(1,"div",1)(2,"h1",2),v._uU(3,"Jaime's Certifications"),v.qZA()()(),v.TgZ(4,"div",3)(5,"div",4)(6,"select",5,6),v.NdJ("change",function(){v.CHM(o);const d=v.MAs(7);return v.KtG(r.filterCertifications(d.value))}),v.TgZ(8,"option",7),v._uU(9,"ALL"),v.qZA(),v.YNc(10,DR,3,4,"option",8),v.qZA()(),v.YNc(11,TR,6,2,"div",9),v.qZA(),v.TgZ(12,"footer",10)(13,"a",11),v._uU(14,"Jaime Pineda"),v.qZA(),v.TgZ(15,"span"),v._uU(16,"\xa0\xa9\xa02022"),v.qZA()(),v.YNc(17,SR,2,1,"div",12)}2&t&&(v.xp6(6),v.Q6J("value",r.filter),v.xp6(4),v.Q6J("ngForOf",r.categories),v.xp6(1),v.Q6J("ngForOf",r.years),v.xp6(6),v.Q6J("ngIf",r.preview))},dependencies:[Ps,rr,Dc],styles:[".form-select[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();const SA_firebase={projectId:"portfolio-jpin730",appId:"1:733714402019:web:a1301af4562abe9ecc53d6",storageBucket:"portfolio-jpin730.appspot.com",apiKey:"AIzaSyCUOML6rLU4b0uImZsqoGSpcIdponc0qA8",authDomain:"portfolio-jpin730.firebaseapp.com",messagingSenderId:"733714402019"};let xR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n,bootstrap:[AR]}),n.\u0275inj=v.cJS({providers:[pS],imports:[Bc,mR.forRoot([]),_r.hO.initializeApp(SA_firebase),GA]}),n})();(0,v.G48)(),wu().bootstrapModule(xR).catch(n=>console.error(n))},5867:(ot,Ce,k)=>{k.d(Ce,{C6:()=>v.getApps,Mq:()=>v.getApp});var v=k(9681);(0,v.registerVersion)("firebase","9.10.0","app")},127:(ot,Ce,k)=>{k.d(Ce,{Z:()=>v.Z});var v=k(3942);v.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(ot,Ce,k)=>{k.r(Ce);var v=k(5861),X=k(3942),P=k(2090),oe=k(9681),re=k(655),he=k(1877),ue=k(4859);const we=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new he.Yd("@firebase/auth");function nt(m,...h){Qe.logLevel<=he.in.ERROR&&Qe.error(`Auth (${oe.SDK_VERSION}): ${m}`,...h)}function Te(m,...h){throw Be(m,...h)}function _e(m,...h){return Be(m,...h)}function Ie(m,h,p){const _=Object.assign(Object.assign({},Xe()),{[h]:p});return new P.LL("auth","Firebase",_).create(h,{appName:m.name})}function Ve(m,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Te(m,"argument-error"),Ie(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(m,...h){if("string"!=typeof m){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=m.name),m._errorFactory.create(p,..._)}return me.create(m,...h)}function U(m,h,...p){if(!m)throw Be(h,...p)}function ge(m){const h="INTERNAL ASSERTION FAILED: "+m;throw nt(h),new Error(h)}function Z(m,h){m||ge(h)}const J=new Map;function ie(m){Z(m instanceof Function,"Expected a class definition");let h=J.get(m);return h?(Z(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,J.set(m,h),h)}function Ne(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function ut(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class en{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Ft(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mn(m,h){Z(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Wt{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sr=new en(3e4,6e4);function Rt(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function Jt(m,h,p,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,v.Z)(function*(m,h,p,_,S={}){return Lr(m,S,(0,v.Z)(function*(){let R={},q={};_&&("GET"===h?q=_:R={body:JSON.stringify(_)});const ce=(0,P.xO)(Object.assign({key:m.config.apiKey},q)).slice(1),Oe=yield m._getAdditionalHeaders();return Oe["Content-Type"]="application/json",m.languageCode&&(Oe["X-Firebase-Locale"]=m.languageCode),Wt.fetch()(Ti(m,m.config.apiHost,p,ce),Object.assign({method:h,headers:Oe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Lr(m,h,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,v.Z)(function*(m,h,p){m._canInitEmulator=!1;const _=Object.assign(Object.assign({},qt),h);try{const S=new Ur(m),R=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw gi(m,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const ce=R.ok?q.errorMessage:q.error.message,[Oe,We]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw gi(m,"credential-already-in-use",q);if("EMAIL_EXISTS"===Oe)throw gi(m,"email-already-in-use",q);if("USER_DISABLED"===Oe)throw gi(m,"user-disabled",q);const ft=_[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(We)throw Ie(m,ft,We);Te(m,ft)}}catch(S){if(S instanceof P.ZR)throw S;Te(m,"network-request-failed")}})).apply(this,arguments)}function Fr(m,h,p,_){return ls.apply(this,arguments)}function ls(){return(ls=(0,v.Z)(function*(m,h,p,_,S={}){const R=yield Jt(m,h,p,_,S);return"mfaPendingCredential"in R&&Te(m,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ti(m,h,p,_){const S=`${h}${p}?${_}`;return m.config.emulator?Mn(m.config,S):`${m.config.apiScheme}://${S}`}class Ur{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(_e(this.auth,"network-request-failed")),Sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gi(m,h,p){const _={appName:m.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const S=_e(m,h,_);return S.customData._tokenResponse=p,S}function Ke(){return(Ke=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Vr(m,h){return $i.apply(this,arguments)}function $i(){return($i=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Rn(m,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Xr(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function cn(){return(cn=(0,v.Z)(function*(m,h=!1){const p=(0,P.m9)(m),_=yield p.getIdToken(h),S=it(_);U(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,q=R?.sign_in_provider;return{claims:S,token:_,authTime:Xr(lt(S.auth_time)),issuedAtTime:Xr(lt(S.iat)),expirationTime:Xr(lt(S.exp)),signInProvider:q||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function lt(m){return 1e3*Number(m)}function it(m){var h;const[p,_,S]=m.split(".");if(void 0===p||void 0===_||void 0===S)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,P.tV)(_);return R?JSON.parse(R):(nt("Failed to decode base64 JWT payload"),null)}catch(R){return nt("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function tr(m,h){return nr.apply(this,arguments)}function nr(){return(nr=(0,v.Z)(function*(m,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof P.ZR&&Ar(_)&&m.auth.currentUser===m&&(yield m.auth.signOut()),_}})).apply(this,arguments)}function Ar({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class vt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,v.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,v.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(p=_)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class Hi{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kt(m){return yi.apply(this,arguments)}function yi(){return(yi=(0,v.Z)(function*(m){var h;const p=m.auth,_=yield m.getIdToken(),S=yield tr(m,Rn(p,{idToken:_}));U(S?.users.length,p,"internal-error");const R=S.users[0];m._notifyReloadListener(R);const q=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?F(R.providerUserInfo):[],ce=j(m.providerData,q),ft=!!m.isAnonymous&&!(m.email&&R.passwordHash||ce?.length),ct={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ce,metadata:new Hi(R.createdAt,R.lastLoginAt),isAnonymous:ft};Object.assign(m,ct)})).apply(this,arguments)}function W(){return(W=(0,v.Z)(function*(m){const h=(0,P.m9)(m);yield Kt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function j(m,h){return[...m.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}function F(m){return m.map(h=>{var{providerId:p}=h,_=(0,re._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function z(){return(z=(0,v.Z)(function*(m,h){const p=yield Lr(m,{},(0,v.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=m.config,q=Ti(m,S,"/v1/token",`key=${R}`),ce=yield m._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(q,{method:"POST",headers:ce,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ee{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rn(m){const h=it(m);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,v.Z)(function*(){return U(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,v.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:q}=yield function $(m,h){return z.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(S,R,Number(q))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:S,expirationTime:R}=p,q=new Ee;return _&&(U("string"==typeof _,"internal-error",{appName:h}),q.refreshToken=_),S&&(U("string"==typeof S,"internal-error",{appName:h}),q.accessToken=S),R&&(U("number"==typeof R,"internal-error",{appName:h}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ee,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Ue(m,h){U("string"==typeof m||typeof m>"u","internal-error",{appName:h})}class rt{constructor(h){var{uid:p,auth:_,stsTokenManager:S}=h,R=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Hi(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,v.Z)(function*(){const _=yield tr(p,p.stsTokenManager.getToken(p.auth,h));return U(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function Wn(m){return cn.apply(this,arguments)}(this,h)}reload(){return function Gt(m){return W.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new rt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,v.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Kt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,v.Z)(function*(){const p=yield h.getIdToken();return yield tr(h,function io(m,h){return Ke.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,S,R,q,ce,Oe,We,ft;const ct=null!==(_=p.displayName)&&void 0!==_?_:void 0,$n=null!==(S=p.email)&&void 0!==S?S:void 0,Er=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Bu=null!==(q=p.photoURL)&&void 0!==q?q:void 0,og=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,Rd=null!==(Oe=p._redirectEventId)&&void 0!==Oe?Oe:void 0,Nd=null!==(We=p.createdAt)&&void 0!==We?We:void 0,ag=null!==(ft=p.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:cf,emailVerified:ju,isAnonymous:lf,providerData:df,stsTokenManager:ug}=p;U(cf&&ug,h,"internal-error");const cg=Ee.fromJSON(this.name,ug);U("string"==typeof cf,h,"internal-error"),Ue(ct,h.name),Ue($n,h.name),U("boolean"==typeof ju,h,"internal-error"),U("boolean"==typeof lf,h,"internal-error"),Ue(Er,h.name),Ue(Bu,h.name),Ue(og,h.name),Ue(Rd,h.name),Ue(Nd,h.name),Ue(ag,h.name);const lg=new rt({uid:cf,auth:h,email:$n,emailVerified:ju,displayName:ct,isAnonymous:lf,photoURL:Bu,phoneNumber:Er,tenantId:og,stsTokenManager:cg,createdAt:Nd,lastLoginAt:ag});return df&&Array.isArray(df)&&(lg.providerData=df.map(_y=>Object.assign({},_y))),Rd&&(lg._redirectEventId=Rd),lg}static _fromIdTokenResponse(h,p,_=!1){return(0,v.Z)(function*(){const S=new Ee;S.updateFromServerResponse(p);const R=new rt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield Kt(R),R})()}}const Zt=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(p,_){var S=this;return(0,v.Z)(function*(){S.storage[p]=_})()}_get(p){var _=this;return(0,v.Z)(function*(){const S=_.storage[p];return void 0===S?null:S})()}_remove(p){var _=this;return(0,v.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return m.type="NONE",m})();function qn(m,h,p){return`firebase:${m}:${h}:${p}`}class Ot{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=qn(this.userKey,S.apiKey,R),this.fullPersistenceKey=qn("persistence",S.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,v.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?rt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,v.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,v.Z)(function*(){if(!p.length)return new Ot(ie(Zt),h,_);const S=(yield Promise.all(p.map(function(){var We=(0,v.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return We.apply(this,arguments)}}()))).filter(We=>We);let R=S[0]||ie(Zt);const q=qn(_,h.config.apiKey,h.name);let ce=null;for(const We of p)try{const ft=yield We._get(q);if(ft){const ct=rt._fromJSON(h,ft);We!==R&&(ce=ct),R=We;break}}catch{}const Oe=S.filter(We=>We._shouldAllowMigration);return R._shouldAllowMigration&&Oe.length?(R=Oe[0],ce&&(yield R._set(q,ce.toJSON())),yield Promise.all(p.map(function(){var We=(0,v.Z)(function*(ft){if(ft!==R)try{yield ft._remove(q)}catch{}});return function(ft){return We.apply(this,arguments)}}())),new Ot(R,h,_)):new Ot(R,h,_)})()}}function St(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(xr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(fn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(He(h))return"Blackberry";if(mt(h))return"Webos";if(Fn(h))return"Safari";if((h.includes("chrome/")||Si(h))&&!h.includes("edge/"))return"Chrome";if(Un(h))return"Android";{const _=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function fn(m=(0,P.z$)()){return/firefox\//i.test(m)}function Fn(m=(0,P.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Si(m=(0,P.z$)()){return/crios\//i.test(m)}function xr(m=(0,P.z$)()){return/iemobile/i.test(m)}function Un(m=(0,P.z$)()){return/android/i.test(m)}function He(m=(0,P.z$)()){return/blackberry/i.test(m)}function mt(m=(0,P.z$)()){return/webos/i.test(m)}function Qt(m=(0,P.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Ms(m=(0,P.z$)()){return Qt(m)||Un(m)||mt(m)||He(m)||/windows phone/i.test(m)||xr(m)}function ds(m,h=[]){let p;switch(m){case"Browser":p=St((0,P.z$)());break;case"Worker":p=`${St((0,P.z$)())}-${m}`;break;default:p=m}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${_}`}class so{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((q,ce)=>{try{q(h(R))}catch(Oe){ce(Oe)}});_.onAbort=p,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,v.Z)(function*(){var _;if(p.auth.currentUser===h)return;const S=[];try{for(const R of p.queue)yield R(h),R.onAbort&&S.push(R.onAbort)}catch(R){S.reverse();for(const q of S)try{q()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class At{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rs(this),this.idTokenSubscription=new Rs(this),this.beforeStateQueue=new so(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,v.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield Ot.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,v.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,v.Z)(function*(){var _;const S=yield p.assertedPersistence.getCurrentUser();let R=S,q=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Oe=R?._redirectEventId,We=yield p.tryRedirectSignIn(h);(!ce||ce===Oe)&&We?.user&&(R=We.user,q=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield p.beforeStateQueue.runMiddleware(R)}catch(ce){R=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return U(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,v.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,v.Z)(function*(){var _;try{yield Kt(h)}catch(S){if("auth/network-request-failed"!==(null===(_=S)||void 0===_?void 0:_.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,v.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,v.Z)(function*(){const _=h?(0,P.m9)(h):null;return _&&U(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,v.Z)(function*(){if(!_._deleted)return h&&U(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,v.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,v.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,v.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,v.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,v.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&ie(h)||p._popupRedirectResolver;U(_,p,"argument-error"),p.redirectPersistenceManager=yield Ot.create(p,[ie(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,v.Z)(function*(){var _,S;return p._isInitialized&&(yield p.queue((0,v.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,v.Z)(function*(){if(h===p.currentUser)return p.queue((0,v.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,S){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return U(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,v.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ds(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,v.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function pn(m){return(0,P.m9)(m)}class Rs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ai(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function hs(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class lr{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,p){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Bn(m,h){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:resetPassword",Rt(m,h))})).apply(this,arguments)}function tn(m,h){return mc.apply(this,arguments)}function mc(){return(mc=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function yc(m,h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:update",Rt(m,h))})).apply(this,arguments)}function Ps(){return(Ps=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signInWithPassword",Rt(m,h))})).apply(this,arguments)}function ps(m,h){return _i.apply(this,arguments)}function _i(){return(_i=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:sendOobCode",Rt(m,h))})).apply(this,arguments)}function rr(m,h){return vc.apply(this,arguments)}function vc(){return(vc=(0,v.Z)(function*(m,h){return ps(m,h)})).apply(this,arguments)}function ir(m,h){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,v.Z)(function*(m,h){return ps(m,h)})).apply(this,arguments)}function Za(m,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,v.Z)(function*(m,h){return ps(m,h)})).apply(this,arguments)}function _c(m,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,v.Z)(function*(m,h){return ps(m,h)})).apply(this,arguments)}function Wl(){return(Wl=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signInWithEmailLink",Rt(m,h))})).apply(this,arguments)}function wc(){return(wc=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signInWithEmailLink",Rt(m,h))})).apply(this,arguments)}class Ic extends lr{constructor(h,p,_,S=null){super("password",_),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new Ic(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new Ic(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,v.Z)(function*(){switch(p.signInMethod){case"password":return function qo(m,h){return Ps.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Nh(m,h){return Wl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Te(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,v.Z)(function*(){switch(_.signInMethod){case"password":return tn(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ph(m,h){return wc.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Te(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Zn(m,h){return ql.apply(this,arguments)}function ql(){return(ql=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signInWithIdp",Rt(m,h))})).apply(this,arguments)}class Gi extends lr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Gi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Te("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=p,R=(0,re._T)(p,["providerId","signInMethod"]);if(!_||!S)return null;const q=new Gi(_,S);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(h){return Zn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Zn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Zn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Op(m,h){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:sendVerificationCode",Rt(m,h))})).apply(this,arguments)}function gs(){return(gs=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signInWithPhoneNumber",Rt(m,h))})).apply(this,arguments)}function Dc(){return(Dc=(0,v.Z)(function*(m,h){const p=yield Fr(m,"POST","/v1/accounts:signInWithPhoneNumber",Rt(m,h));if(p.temporaryProof)throw gi(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Lp={USER_NOT_FOUND:"user-not-found"};function Zl(){return(Zl=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signInWithPhoneNumber",Rt(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Lp)})).apply(this,arguments)}class ms extends lr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new ms({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new ms({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Ec(m,h){return gs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function kp(m,h){return Dc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Fp(m,h){return Zl.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}=h;return _||p||S||R?new ms({verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class Ya{constructor(h){var p,_,S,R,q,ce;const Oe=(0,P.zd)((0,P.pd)(h)),We=null!==(p=Oe.apiKey)&&void 0!==p?p:null,ft=null!==(_=Oe.oobCode)&&void 0!==_?_:null,ct=function Yl(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Oe.mode)&&void 0!==S?S:null);U(We&&ft&&ct,"argument-error"),this.apiKey=We,this.operation=ct,this.code=ft,this.continueUrl=null!==(R=Oe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Oe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ce=Oe.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const p=function Ql(m){const h=(0,P.zd)((0,P.pd)(m)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(m)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||p||h||m}(h);try{return new Ya(p)}catch{return null}}}let xi=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,_){return Ic._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const S=Ya.parseLink(_);return U(S,"argument-error"),Ic._fromEmailAndCode(p,S.code,S.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class zi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Wi extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Os extends Wi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return U("providerId"in p&&"signInMethod"in p,"argument-error"),Gi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Os.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Os.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:q,providerId:ce}=h;if(!_&&!S&&!p&&!R||!ce)return null;try{return new Os(ce)._credential({idToken:p,accessToken:_,nonce:q,pendingToken:R})}catch{return null}}}let Zo=(()=>{class m extends Wi{constructor(){super("facebook.com")}static credential(p){return Gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Qa=(()=>{class m extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return Gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:S}=p;if(!_&&!S)return null;try{return m.credential(_,S)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),bc=(()=>{class m extends Wi{constructor(){super("github.com")}static credential(p){return Gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Yo extends lr{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Zn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Zn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Zn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:R}=p;return _&&S&&R&&_===S?new Yo(_,R):null}static _create(h,p){return new Yo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ti extends zi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ti.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ti.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Yo.fromJSON(h);return U(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return Yo._create(_,p)}catch{return null}}}let Br=(()=>{class m extends Wi{constructor(){super("twitter.com")}static credential(p,_){return Gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=p;if(!_||!S)return null;try{return m.credential(_,S)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function oo(m,h){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signUp",Rt(m,h))})).apply(this,arguments)}class dr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,S=!1){return(0,v.Z)(function*(){const R=yield rt._fromIdTokenResponse(h,_,S),q=Lh(_);return new dr({user:R,providerId:q,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,v.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=Lh(_);return new dr({user:h,providerId:S,_tokenResponse:_,operationType:p})})()}}function Lh(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function En(){return(En=(0,v.Z)(function*(m){var h;const p=pn(m);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new dr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield oo(p,{returnSecureToken:!0}),S=yield dr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ja extends P.ZR{constructor(h,p,_,S){var R;super(p.code,p.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,S){return new Ja(h,p,_,S)}}function Uh(m,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ja._fromErrorAndOperation(m,R,h,_):R})}function ni(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function Xa(){return(Xa=(0,v.Z)(function*(m,h){const p=(0,P.m9)(m);yield Ut(!0,p,h);const{providerUserInfo:_}=yield Vr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=ni(_||[]);return p.providerData=p.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function ao(m,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,v.Z)(function*(m,h,p=!1){const _=yield tr(m,h._linkToIdToken(m.auth,yield m.getIdToken()),p);return dr._forOperation(m,"link",_)})).apply(this,arguments)}function Ut(m,h,p){return eu.apply(this,arguments)}function eu(){return(eu=(0,v.Z)(function*(m,h,p){yield Kt(h);const S=!1===m?"provider-already-linked":"no-such-provider";U(ni(h.providerData).has(p)===m,h.auth,S)})).apply(this,arguments)}function ks(m,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,v.Z)(function*(m,h,p=!1){var _;const{auth:S}=m,R="reauthenticate";try{const q=yield tr(m,Uh(S,R,h,m),p);U(q.idToken,S,"internal-error");const ce=it(q.idToken);U(ce,S,"internal-error");const{sub:Oe}=ce;return U(m.uid===Oe,S,"user-mismatch"),dr._forOperation(m,R,q)}catch(q){throw"auth/user-not-found"===(null===(_=q)||void 0===_?void 0:_.code)&&Te(S,"user-mismatch"),q}})).apply(this,arguments)}function wi(m,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,v.Z)(function*(m,h,p=!1){const _="signIn",S=yield Uh(m,_,h),R=yield dr._fromIdTokenResponse(m,_,S);return p||(yield m._updateCurrentUser(R.user)),R})).apply(this,arguments)}function yn(m,h){return _t.apply(this,arguments)}function _t(){return(_t=(0,v.Z)(function*(m,h){return wi(pn(m),h)})).apply(this,arguments)}function ru(m,h){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,v.Z)(function*(m,h){const p=(0,P.m9)(m);return yield Ut(!1,p,h.providerId),ao(p,h)})).apply(this,arguments)}function iu(m,h){return su.apply(this,arguments)}function su(){return(su=(0,v.Z)(function*(m,h){return ks((0,P.m9)(m),h)})).apply(this,arguments)}function Cc(m,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,v.Z)(function*(m,h){return Fr(m,"POST","/v1/accounts:signInWithCustomToken",Rt(m,h))})).apply(this,arguments)}function Qo(){return(Qo=(0,v.Z)(function*(m,h){const p=pn(m),_=yield Cc(p,{token:h,returnSecureToken:!0}),S=yield dr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class De{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?kt._fromServerResponse(h,p):Te(h,"internal-error")}}class kt extends De{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new kt(p)}}function ou(m,h,p){var _;U((null===(_=p.url)||void 0===_?void 0:_.length)>0,m,"invalid-continue-uri"),U(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(U(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(U(p.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Dn(){return(Dn=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m),S={requestType:"PASSWORD_RESET",email:h};p&&ou(_,S,p),yield ir(_,S)})).apply(this,arguments)}function uo(){return(uo=(0,v.Z)(function*(m,h,p){yield Bn((0,P.m9)(m),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Jo(){return(Jo=(0,v.Z)(function*(m,h){yield yc((0,P.m9)(m),{oobCode:h})})).apply(this,arguments)}function Xo(m,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,v.Z)(function*(m,h){const p=(0,P.m9)(m),_=yield Bn(p,{oobCode:h}),S=_.requestType;switch(U(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(_.mfaInfo,p,"internal-error");default:U(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=De._fromServerResponse(pn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function Xl(){return(Xl=(0,v.Z)(function*(m,h){const{data:p}=yield Xo((0,P.m9)(m),h);return p.email})).apply(this,arguments)}function bn(){return(bn=(0,v.Z)(function*(m,h,p){const _=pn(m),S=yield oo(_,{returnSecureToken:!0,email:h,password:p}),R=yield dr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ls(){return(Ls=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m),S={requestType:"EMAIL_SIGNIN",email:h};U(p.handleCodeInApp,_,"argument-error"),p&&ou(_,S,p),yield Za(_,S)})).apply(this,arguments)}function ta(){return(ta=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m),S=xi.credentialWithLink(h,p||Ne());return U(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),yn(_,S)})).apply(this,arguments)}function Vp(m,h){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:createAuthUri",Rt(m,h))})).apply(this,arguments)}function na(){return(na=(0,v.Z)(function*(m,h){const _={identifier:h,continueUri:ut()?Ne():"http://localhost"},{signinMethods:S}=yield Vp((0,P.m9)(m),_);return S||[]})).apply(this,arguments)}function ra(){return(ra=(0,v.Z)(function*(m,h){const p=(0,P.m9)(m),S={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&ou(p.auth,S,h);const{email:R}=yield rr(p.auth,S);R!==m.email&&(yield m.reload())})).apply(this,arguments)}function lu(){return(lu=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};p&&ou(_.auth,R,p);const{email:q}=yield _c(_.auth,R);q!==m.email&&(yield m.reload())})).apply(this,arguments)}function du(m,h){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,v.Z)(function*(m,h){return Jt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function kc(){return(kc=(0,v.Z)(function*(m,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,P.m9)(m),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},q=yield tr(_,du(_.auth,R));_.displayName=q.displayName||null,_.photoURL=q.photoUrl||null;const ce=_.providerData.find(({providerId:Oe})=>"password"===Oe);ce&&(ce.displayName=_.displayName,ce.photoURL=_.photoURL),yield _._updateTokensIfNecessary(q)})).apply(this,arguments)}function Us(m,h,p){return hu.apply(this,arguments)}function hu(){return(hu=(0,v.Z)(function*(m,h,p){const{auth:_}=m,R={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const q=yield tr(m,tn(_,R));yield m._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class jr{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class dn extends jr{constructor(h,p,_,S){super(h,p,_),this.username=S}}class td extends jr{constructor(h,p){super(h,"facebook.com",p)}}class Lc extends dn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Bh extends jr{constructor(h,p){super(h,"google.com",p)}}class Fc extends dn{constructor(h,p,_){super(h,"twitter.com",p,_)}}function fu(m){const{user:h,_tokenResponse:p}=m;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Yn(m){var h,p;if(!m)return null;const{providerId:_}=m,S=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},R=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!_&&m?.idToken){const q=null===(p=null===(h=it(m.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new jr(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!_)return null;switch(_){case"facebook.com":return new td(R,S);case"github.com":return new Lc(R,S);case"google.com":return new Bh(R,S);case"twitter.com":return new Fc(R,S,m.screenName||null);case"custom":case"anonymous":return new jr(R,null);default:return new jr(R,_,S)}}(p)}class Vs{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new Vs("enroll",h,p)}static _fromMfaPendingCredential(h){return new Vs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Vs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Vs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class pu{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=pn(h),S=p.customData._serverResponse,R=(S.mfaInfo||[]).map(ce=>De._fromServerResponse(_,ce));U(S.mfaPendingCredential,_,"internal-error");const q=Vs._fromMfaPendingCredential(S.mfaPendingCredential);return new pu(q,R,function(){var ce=(0,v.Z)(function*(Oe){const We=yield Oe._process(_,q);delete S.mfaInfo,delete S.mfaPendingCredential;const ft=Object.assign(Object.assign({},S),{idToken:We.idToken,refreshToken:We.refreshToken});switch(p.operationType){case"signIn":const ct=yield dr._fromIdTokenResponse(_,p.operationType,ft);return yield _._updateCurrentUser(ct.user),ct;case"reauthenticate":return U(p.user,_,"internal-error"),dr._forOperation(p.user,p.operationType,ft);default:Te(_,"internal-error")}});return function(Oe){return ce.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,v.Z)(function*(){return p.signInResolver(h)})()}}function gu(m,h){return Jt(m,"POST","/v2/accounts/mfaEnrollment:start",Rt(m,h))}class jh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>De._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new jh(h)}getSession(){var h=this;return(0,v.Z)(function*(){return Vs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,v.Z)(function*(){const S=h,R=yield _.getSession(),q=yield tr(_.user,S._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(q),_.user.reload()})()}unenroll(h){var p=this;return(0,v.Z)(function*(){var _;const S="string"==typeof h?h:h.uid,R=yield p.user.getIdToken(),q=yield tr(p.user,function sd(m,h){return Jt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(m,h))}(p.user.auth,{idToken:R,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ce})=>ce!==S),yield p.user._updateTokensIfNecessary(q);try{yield p.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(_=ce)||void 0===_?void 0:_.code))throw ce}})()}}const fo=new WeakMap,Bs="__sak";class yu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const sa=(()=>{class m extends yu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ia(){const m=(0,P.z$)();return Fn(m)||Qt(m)}()&&function ln(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ms(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&p(_,R,S)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((ce,Oe,We)=>{this.notifyListeners(ce,We)});const S=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(S);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!_)return}const R=()=>{const ce=this.storage.getItem(S);!_&&this.localCache[S]===ce||this.notifyListeners(S,ce)},q=this.storage.getItem(S);!function Kn(){return(0,P.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var S=()=>super._set,R=this;return(0,v.Z)(function*(){yield S().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,S=this;return(0,v.Z)(function*(){const R=yield _().call(S,p);return S.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,S=this;return(0,v.Z)(function*(){yield _().call(S,p),delete S.localCache[p]})()}}return m.type="LOCAL",m})(),Ri=(()=>{class m extends yu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return m.type="SESSION",m})();let ud=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const S=new m(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,v.Z)(function*(){const S=p,{eventId:R,eventType:q,data:ce}=S.data,Oe=_.handlersMap[q];if(!Oe?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const We=Array.from(Oe).map(function(){var ct=(0,v.Z)(function*($n){return $n(S.origin,ce)});return function($n){return ct.apply(this,arguments)}}()),ft=yield function aa(m){return Promise.all(m.map(function(){var h=(0,v.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(We);S.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:ft})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function ua(m="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return m+p}class Vc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var S=this;return(0,v.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,ce;return new Promise((Oe,We)=>{const ft=ua("",20);R.port1.start();const ct=setTimeout(()=>{We(new Error("unsupported_event"))},_);ce={messageChannel:R,onMessage($n){const Er=$n;if(Er.data.eventId===ft)switch(Er.data.status){case"ack":clearTimeout(ct),q=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Oe(Er.data.response);break;default:clearTimeout(ct),clearTimeout(q),We(new Error("invalid_response"))}}},S.handlers.add(ce),R.port1.addEventListener("message",ce.onMessage),S.target.postMessage({eventType:h,eventId:ft,data:p},[R.port2])}).finally(()=>{ce&&S.removeMessageHandler(ce)})})()}}function Pn(){return window}function vu(){return typeof Pn().WorkerGlobalScope<"u"&&"function"==typeof Pn().importScripts}function ca(){return(ca=(0,v.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _s="firebaseLocalStorageDb",ws="firebaseLocalStorage",Bc="fbase_key";class $s{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function la(m,h){return m.transaction([ws],h?"readwrite":"readonly").objectStore(ws)}function go(){const m=indexedDB.open(_s,1);return new Promise((h,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const _=m.result;try{_.createObjectStore(ws,{keyPath:Bc})}catch(S){p(S)}}),m.addEventListener("success",(0,v.Z)(function*(){const _=m.result;_.objectStoreNames.contains(ws)?h(_):(_.close(),yield function ld(){const m=indexedDB.deleteDatabase(_s);return new $s(m).toPromise()}(),h(yield go()))}))})}function Qi(m,h,p){return jc.apply(this,arguments)}function jc(){return(jc=(0,v.Z)(function*(m,h,p){const _=la(m,!0).put({[Bc]:h,value:p});return new $s(_).toPromise()})).apply(this,arguments)}function da(){return(da=(0,v.Z)(function*(m,h){const p=la(m,!1).get(h),_=yield new $s(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Hs(m,h){const p=la(m,!0).delete(h);return new $s(p).toPromise()}const mo=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,v.Z)(function*(){return p.db||(p.db=yield go()),p.db})()}_withRetries(p){var _=this;return(0,v.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,v.Z)(function*(){return vu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,v.Z)(function*(){p.receiver=ud._getInstance(function wu(){return vu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,v.Z)(function*(S,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,v.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,v.Z)(function*(){var _,S;if(p.activeServiceWorker=yield function js(){return ca.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Vc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,v.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function _u(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const p=yield go();return yield Qi(p,Bs,"1"),yield Hs(p,Bs),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,v.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var S=this;return(0,v.Z)(function*(){return S._withPendingWrite((0,v.Z)(function*(){return yield S._withRetries(R=>Qi(R,p,_)),S.localCache[p]=_,S.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,v.Z)(function*(){const S=yield _._withRetries(R=>function Iu(m,h){return da.apply(this,arguments)}(R,p));return _.localCache[p]=S,S})()}_remove(p){var _=this;return(0,v.Z)(function*(){return _._withPendingWrite((0,v.Z)(function*(){return yield _._withRetries(S=>Hs(S,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,v.Z)(function*(){const _=yield p._withRetries(q=>{const ce=la(q,!1).getAll();return new $s(ce).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:q,value:ce}of _)R.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(ce)&&(p.notifyListeners(q,ce),S.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!R.has(q)&&(p.notifyListeners(q,null),S.push(q));return S})()}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function yo(m,h){return Jt(m,"POST","/v2/accounts/mfaSignIn:start",Rt(m,h))}function Es(){return(Es=(0,v.Z)(function*(m){return(yield Jt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _o(m){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",m),_.onload=h,_.onerror=S=>{const R=_e("internal-error");R.customData=S,p(R)},_.type="text/javascript",_.charset="UTF-8",function vo(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(_)})}function bu(m){return`__${m}${Math.floor(1e6*Math.random())}`}const ha=1e12;class on{constructor(h){this.auth=h,this.counter=ha,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new Bp(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||ha;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ha))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,v.Z)(function*(){var _;return null===(_=p._widgets.get(h||ha))||void 0===_||_.execute(),""})()}}class Bp{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;U(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sy(m){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<m;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jp=bu("rcb"),oy=new en(3e4,6e4);class $h{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Pn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return U(function g0(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Pn().grecaptcha):new Promise((_,S)=>{const R=Pn().setTimeout(()=>{S(_e(h,"network-request-failed"))},oy.get());Pn()[jp]=()=>{Pn().clearTimeout(R),delete Pn()[jp];const ce=Pn().grecaptcha;if(!ce)return void S(_e(h,"internal-error"));const Oe=ce.render;ce.render=(We,ft)=>{const ct=Oe(We,ft);return this.counter++,ct},this.hostLanguage=p,_(ce)},_o(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:jp,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Pn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hc{load(h){return(0,v.Z)(function*(){return new on(h)})()}clearedOneInstance(){}}const uy="recaptcha",cy={theme:"light",type:"image"};class or{constructor(h,p=Object.assign({},cy),_){this.parameters=p,this.type=uy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(_),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hc:new $h,this.validateStartingState()}verify(){var h=this;return(0,v.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const q=ce=>{!ce||(h.tokenChangeListeners.delete(q),R(ce))};h.tokenChangeListeners.add(q),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=Pn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,v.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,v.Z)(function*(){U(ut()&&!vu(),h.auth,"internal-error"),yield function Ji(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function $r(m){return Es.apply(this,arguments)}(h.auth);U(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class On{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=ms._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Xi(){return(Xi=(0,v.Z)(function*(m,h,p){const _=pn(m),S=yield Je(_,h,(0,P.m9)(p));return new On(S,R=>yn(_,R))})).apply(this,arguments)}function Qn(){return(Qn=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m);yield Ut(!1,_,"phone");const S=yield Je(_.auth,h,(0,P.m9)(p));return new On(S,R=>ru(_,R))})).apply(this,arguments)}function Ni(){return(Ni=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m),S=yield Je(_.auth,h,(0,P.m9)(p));return new On(S,R=>iu(_,R))})).apply(this,arguments)}function Je(m,h,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,v.Z)(function*(m,h,p){var _;const S=yield p.verify();try{let R;if(U("string"==typeof S,m,"argument-error"),U(p.type===uy,m,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const q=R.session;if("phoneNumber"in R)return U("enroll"===q.type,m,"internal-error"),(yield gu(m,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===q.type,m,"internal-error");const ce=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return U(ce,m,"missing-multi-factor-info"),(yield yo(m,{mfaPendingCredential:q.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Op(m,{phoneNumber:R.phoneNumber,recaptchaToken:S});return q}}finally{p._reset()}})).apply(this,arguments)}function Gc(){return(Gc=(0,v.Z)(function*(m,h){yield ao((0,P.m9)(m),h)})).apply(this,arguments)}let Io=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=pn(p)}verifyPhoneNumber(p,_){return Je(this.auth,p,(0,P.m9)(_))}static credential(p,_){return ms._fromVerification(p,_)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:S}=p;return _&&S?ms._fromTokenResponse(_,S):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function es(m,h){return h?ie(h):(U(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Eo extends lr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Zn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Zn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Zn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function st(m){return wi(m.auth,new Eo(m),m.bypassAuthState)}function fa(m){const{auth:h,user:p}=m;return U(p,h,"internal-error"),ks(p,new Eo(m),m.bypassAuthState)}function ii(m){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,v.Z)(function*(m){const{auth:h,user:p}=m;return U(p,h,"internal-error"),ao(p,new Eo(m),m.bypassAuthState)})).apply(this,arguments)}class pa{constructor(h,p,_,S,R=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,v.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,v.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:q,error:ce,type:Oe}=h;if(ce)return void p.reject(ce);const We={auth:p.auth,requestUri:_,sessionId:S,tenantId:q||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Oe)(We))}catch(ft){p.reject(ft)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return st;case"linkViaPopup":case"linkViaRedirect":return ii;case"reauthViaPopup":case"reauthViaRedirect":return fa;default:Te(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zc=new en(2e3,1e4);function _r(){return(_r=(0,v.Z)(function*(m,h,p){const _=pn(m);Ve(m,h,zi);const S=es(_,p);return new ts(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function dd(){return(dd=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m);Ve(_.auth,h,zi);const S=es(_.auth,p);return new ts(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function Ei(){return(Ei=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m);Ve(_.auth,h,zi);const S=es(_.auth,p);return new ts(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let ts=(()=>{class m extends pa{constructor(p,_,S,R,q){super(p,_,R,q),this.provider=S,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,v.Z)(function*(){const _=yield p.execute();return U(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,v.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const _=ua();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,zc.get())};p()}}return m.currentPopupAction=null,m})();const Ct=new Map;class Wc extends pa{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,v.Z)(function*(){let _=Ct.get(p.auth._key());if(!_){try{const R=(yield function oi(m,h){return Ye.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}Ct.set(p.auth._key(),_)}return p.bypassAuthState||Ct.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,v.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function Ye(){return(Ye=(0,v.Z)(function*(m,h){const p=hd(h),_=ai(m);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(p));return yield _._remove(p),S})).apply(this,arguments)}function ga(m,h){return dt.apply(this,arguments)}function dt(){return(dt=(0,v.Z)(function*(m,h){return ai(m)._set(hd(h),"true")})).apply(this,arguments)}function ns(m,h){Ct.set(m._key(),h)}function ai(m){return ie(m._redirectPersistence)}function hd(m){return qn("pendingRedirect",m.config.apiKey,m.name)}function D(){return(D=(0,v.Z)(function*(m,h,p){const _=pn(m);Ve(m,h,zi);const S=es(_,p);return yield ga(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m);Ve(_.auth,h,zi);const S=es(_.auth,p);yield ga(S,_.auth);const R=yield Ze(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function be(){return(be=(0,v.Z)(function*(m,h,p){const _=(0,P.m9)(m);Ve(_.auth,h,zi);const S=es(_.auth,p);yield Ut(!1,_,h.providerId),yield ga(S,_.auth);const R=yield Ze(_);return S._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function at(){return(at=(0,v.Z)(function*(m,h){return yield pn(m)._initializationPromise,ht(m,h,!1)})).apply(this,arguments)}function ht(m,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,v.Z)(function*(m,h,p=!1){const _=pn(m),S=es(_,h),q=yield new Wc(_,S,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield _._persistUserIfCurrent(q.user),yield _._setRedirectUser(null,h)),q})).apply(this,arguments)}function Ze(m){return _n.apply(this,arguments)}function _n(){return(_n=(0,v.Z)(function*(m){const h=ua(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class zs{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function wr(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pi(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!Pi(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bs(h))}saveEventToCache(h){this.cachedEventUids.add(bs(h)),this.lastProcessedEventTime=Date.now()}}function bs(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function Pi({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===h?.code}function Oi(m){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,v.Z)(function*(m,h={}){return Jt(m,"GET","/v1/projects",h)})).apply(this,arguments)}const Do=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ui=/^https?/;function fd(){return(fd=(0,v.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield Oi(m);for(const p of h)try{if($p(p))return}catch{}Te(m,"unauthorized-domain")})).apply(this,arguments)}function $p(m){const h=Ne(),{protocol:p,hostname:_}=new URL(h);if(m.startsWith("chrome-extension://")){const q=new URL(m);return""===q.hostname&&""===_?"chrome-extension:"===p&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===_}if(!ui.test(p))return!1;if(Do.test(m))return _===m;const S=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const dy=new en(3e4,6e4);function Gh(){const m=Pn().___jsl;if(m?.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let ya=null;function zh(m){return ya=ya||function ma(m){return new Promise((h,p)=>{var _,S,R;function q(){Gh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Gh(),p(_e(m,"network-request-failed"))},timeout:dy.get()})}if(null!==(S=null===(_=Pn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Pn().gapi)||void 0===R||!R.load){const ce=bu("iframefcb");return Pn()[ce]=()=>{gapi.load?q():p(_e(m,"network-request-failed"))},_o(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Oe=>p(Oe))}q()}}).catch(h=>{throw ya=null,h})}(m),ya}const pd=new en(5e3,15e3),Gp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hy(m){const h=m.config;U(h.authDomain,m,"auth-domain-config-required");const p=h.emulator?Mn(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:m.name,v:oe.SDK_VERSION},S=gd.get(m.config.apiHost);S&&(_.eid=S);const R=m._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,P.xO)(_).slice(1)}`}function Au(){return Au=(0,v.Z)(function*(m){const h=yield zh(m),p=Pn().gapi;return U(p,m,"internal-error"),h.open({where:document.body,url:hy(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gp,dontclear:!0},_=>new Promise(function(){var S=(0,v.Z)(function*(R,q){yield _.restyle({setHideOnLeave:!1});const ce=_e(m,"network-request-failed"),Oe=Pn().setTimeout(()=>{q(ce)},pd.get());function We(){Pn().clearTimeout(Oe),R(_)}_.ping(We).then(We,()=>{q(ce)})});return function(R,q){return S.apply(this,arguments)}}()))}),Au.apply(this,arguments)}const va={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Mu{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ru(m,h,p,_,S,R){U(m.config.authDomain,m,"auth-domain-config-required"),U(m.config.apiKey,m,"invalid-api-key");const q={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:_,v:oe.SDK_VERSION,eventId:S};if(h instanceof zi){h.setDefaultLanguage(m.languageCode),q.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Oe,We]of Object.entries(R||{}))q[Oe]=We}if(h instanceof Wi){const Oe=h.getScopes().filter(We=>""!==We);Oe.length>0&&(q.scopes=Oe.join(","))}m.tenantId&&(q.tid=m.tenantId);const ce=q;for(const Oe of Object.keys(ce))void 0===ce[Oe]&&delete ce[Oe];return`${function qh({config:m}){return m.emulator?Mn(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,P.xO)(ce).slice(1)}`}const Zc="webStorageSupport";class rs extends class py{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new rs(h)}_finalizeEnroll(h,p,_){return function mu(m,h){return Jt(m,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(m,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Du(m,h){return Jt(m,"POST","/v2/accounts/mfaSignIn:finalize",Rt(m,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nu=(()=>{class m{constructor(){}static assertion(p){return rs._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var _d="@firebase/auth";class y0{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,v.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{var S;h((null===(S=_)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gn(){return window}function Yc(){return(Yc=(0,v.Z)(function*(m,h,p){var _;const{BuildInfo:S}=gn();Z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Ed(h.sessionId),q={};return Qt()?q.ibi=S.packageName:Un()?q.apn=S.packageName:Te(m,"operation-not-supported-in-this-environment"),S.displayName&&(q.appDisplayName=S.displayName),q.sessionId=R,Ru(m,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,q)})).apply(this,arguments)}function Qc(){return(Qc=(0,v.Z)(function*(m){const{BuildInfo:h}=gn(),p={};Qt()?p.iosBundleId=h.packageName:Un()?p.androidPackageName=h.packageName:Te(m,"operation-not-supported-in-this-environment"),yield Oi(m,p)})).apply(this,arguments)}function Id(){return(Id=(0,v.Z)(function*(m,h,p){const{cordova:_}=gn();let S=()=>{};try{yield new Promise((R,q)=>{let ce=null;function Oe(){var ct;R();const $n=null===(ct=_.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof $n&&$n(),"function"==typeof p?.close&&p.close()}function We(){ce||(ce=window.setTimeout(()=>{q(_e(m,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===document?.visibilityState&&We()}h.addPassiveListener(Oe),document.addEventListener("resume",We,!1),Un()&&document.addEventListener("visibilitychange",ft,!1),S=()=>{h.removePassiveListener(Oe),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",ft,!1),ce&&window.clearTimeout(ce)}})}finally{S()}})).apply(this,arguments)}function Ed(m){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,v.Z)(function*(m){const h=Qp(m),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Qp(m){if(Z(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),p=new Uint8Array(h);for(let _=0;_<m.length;_++)p[_]=m.charCodeAt(_);return p}!function Zp(m){(0,oe._registerComponent)(new ue.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:q}=_.options;return((ce,Oe)=>{U(R&&!R.includes(":"),"invalid-api-key",{appName:ce.name}),U(!q?.includes(":"),"argument-error",{appName:ce.name});const We={apiKey:R,authDomain:q,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ds(m)},ft=new At(ce,Oe,We);return function Pe(m,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(ie);h?.errorMap&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(_,h?.popupRedirectResolver)}(ft,p),ft})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ue.wA("auth-internal",h=>{const p=pn(h.getProvider("auth").getImmediate());return new y0(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(_d,"0.20.7",function Kp(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,oe.registerVersion)(_d,"0.20.7","esm2017")}("Browser");class Yh extends zs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,v.Z)(function*(){yield h.initPromise})()}}function Qh(m){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,v.Z)(function*(m){const h=yield Dd()._get(bd(m));return h&&(yield Dd()._remove(bd(m))),h})).apply(this,arguments)}function el(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*h.length);m.push(h.charAt(_))}return m.join("")}function Dd(){return ie(sa)}function bd(m){return qn("authEvent",m.config.apiKey,m.name)}function Cd(m){if(!m?.includes("?"))return{};const[h,...p]=m.split("?");return(0,P.zd)(p.join("?"))}function Xp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function qs(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Nr(m=(0,P.z$)()){return!("file:"!==qs()&&"ionic:"!==qs()&&"capacitor:"!==qs()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lu(){try{const m=self.localStorage,h=ua();if(m)return m.setItem(h,"1"),m.removeItem(h),!function ku(m=(0,P.z$)()){return function Sd(){return(0,P.w1)()&&11===document?.documentMode}()||function ef(m=(0,P.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,P.hl)()}catch{return nl()&&(0,P.hl)()}return!1}function nl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function rl(){return(function tg(){return"http:"===qs()||"https:"===qs()}()||(0,P.ru)()||Nr())&&!function ng(){return(0,P.b$)()||(0,P.UG)()}()&&Lu()&&!nl()}function Ia(){return Nr()&&typeof document<"u"}function Fu(){return(Fu=(0,v.Z)(function*(){return!!Ia()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const hr={LOCAL:"local",NONE:"none",SESSION:"session"},bo=U,nf="persistence";function Uu(m){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,v.Z)(function*(m){yield m._initializationPromise;const h=sf(),p=qn(nf,m.config.apiKey,m.name);h&&h.setItem(p,m._getPersistence())})).apply(this,arguments)}function sf(){var m;try{return(null===(m=function Ad(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const xd=U;class ki{constructor(){this.browserResolver=ie(class Wp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ri,this._completeRedirectFn=ht,this._overrideRedirectResult=ns}_openPopup(h,p,_,S){var R=this;return(0,v.Z)(function*(){var q;Z(null===(q=R.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ce=Ru(h,p,_,Ne(),S);return function yd(m,h,p,_=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),q=Math.max((window.screen.availWidth-_)/2,0).toString();let ce="";const Oe=Object.assign(Object.assign({},va),{width:_.toString(),height:S.toString(),top:R,left:q}),We=(0,P.z$)().toLowerCase();p&&(ce=Si(We)?"_blank":p),fn(We)&&(h=h||"http://localhost",Oe.scrollbars="yes");const ft=Object.entries(Oe).reduce(($n,[Er,Bu])=>`${$n}${Er}=${Bu},`,"");if(function vi(m=(0,P.z$)()){var h;return Qt(m)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(We)&&"_self"!==ce)return function Wh(m,h){const p=document.createElement("a");p.href=m,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",ce),new Mu(null);const ct=window.open(h||"",ce,ft);U(ct,m,"popup-blocked");try{ct.focus()}catch{}return new Mu(ct)}(h,ce,ua())})()}_openRedirect(h,p,_,S){var R=this;return(0,v.Z)(function*(){return yield R._originValidation(h),function Ii(m){Pn().location.href=m}(Ru(h,p,_,Ne(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:R}=this.eventManagers[p];return S?Promise.resolve(S):(Z(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,v.Z)(function*(){const _=yield function Su(m){return Au.apply(this,arguments)}(h),S=new zs(h);return _.register("authEvent",R=>(U(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Zc,{type:Zc},S=>{var R;const q=null===(R=S?.[0])||void 0===R?void 0:R[Zc];void 0!==q&&p(!!q),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function qc(m){return fd.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ms()||Fn()||Qt()}}),this.cordovaResolver=ie(class Ou{constructor(){this._redirectPersistence=Ri,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ht,this._overrideRedirectResult=ns}_initialize(h){var p=this;return(0,v.Z)(function*(){const _=h._key();let S=p.eventManagers.get(_);return S||(S=new Yh(h),p.eventManagers.set(_,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,S){var R=this;return(0,v.Z)(function*(){!function Zh(m){var h,p,_,S,R,q,ce,Oe,We,ft;const ct=gn();U("function"==typeof(null===(h=ct?.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(p=ct?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(R=null===(S=null===(_=ct?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Oe=null===(ce=null===(q=ct?.cordova)||void 0===q?void 0:q.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Oe?void 0:Oe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(ft=null===(We=ct?.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===ft?void 0:ft.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield R._initialize(h);yield q.initialized(),q.resetRedirect(),function Tu(){Ct.clear()}(),yield R._originValidation(h);const ce=function Pu(m,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:el(),postBody:null,tenantId:m.tenantId,error:_e(m,"no-auth-event")}}(h,_,S);yield function Jp(m,h){return Dd()._set(bd(m),h)}(h,ce);const Oe=yield function wd(m,h,p){return Yc.apply(this,arguments)}(h,ce,p),We=yield function Cs(m){const{cordova:h}=gn();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(m):S=h.InAppBrowser.open(m,function ei(m=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(S)})})}(Oe);return function Jc(m,h,p){return Id.apply(this,arguments)}(h,q,We)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function my(m){return Qc.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=gn(),q=setTimeout((0,v.Z)(function*(){yield Qh(h),p.onEvent(Xp())}),500),ce=function(){var ft=(0,v.Z)(function*(ct){clearTimeout(q);const $n=yield Qh(h);let Er=null;$n&&ct?.url&&(Er=function vy(m,h){var p,_;const S=function _a(m){const h=Cd(m),p=h.link?decodeURIComponent(h.link):void 0,_=Cd(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Cd(S).link||S||_||p||m}(h);if(S.includes("/__/auth/callback")){const R=Cd(S),q=R.firebaseError?function Jh(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ce=null===(_=null===(p=q?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Oe=ce?_e(ce):null;return Oe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:S,postBody:null}}return null}($n,ct.url)),p.onEvent(Er||Xp())});return function($n){return ft.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ce);const Oe=S,We=`${R.packageName.toLowerCase()}://`;gn().handleOpenURL=function(){var ft=(0,v.Z)(function*(ct){if(ct.toLowerCase().startsWith(We)&&ce({url:ct}),"function"==typeof Oe)try{Oe(ct)}catch($n){console.error($n)}});return function(ct){return ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ri,this._completeRedirectFn=ht,this._overrideRedirectResult=ns}_initialize(h){var p=this;return(0,v.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,S){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,S)})()}_openRedirect(h,p,_,S){var R=this;return(0,v.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Ia()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,v.Z)(function*(){if(h.underlyingResolver)return;const p=yield function tf(){return Fu.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function rg(m){return m.unwrap()}function il(m){return ba(m)}function ba(m){const{_tokenResponse:h}=m instanceof P.ZR?m.customData:m;if(!h)return null;if(!(m instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Io.credentialFromResult(m);const p=h.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=Qa;break;case"facebook.com":_=Zo;break;case"github.com":_=bc;break;case"twitter.com":_=Br;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:ce,nonce:Oe}=h;return R||q||S||ce?ce?p.startsWith("saml.")?Yo._create(p,ce):Gi._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:S,accessToken:R}):new Os(p).credential({idToken:S,accessToken:R,rawNonce:Oe}):null}return m instanceof P.ZR?_.credentialFromError(m):_.credentialFromResult(m)}function Ln(m,h){return h.catch(p=>{throw p instanceof P.ZR&&function Ts(m,h){var p,_;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new ig(m,function Cn(m,h){var p;const _=(0,P.m9)(m),S=h;return U(h.customData.operationType,_,"argument-error"),U(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),pu._fromError(_,S)}(m,h));else if(S){const R=ba(h),q=h;R&&(q.credential=R,q.tenantId=S.tenantId||void 0,q.email=S.email||void 0,q.phoneNumber=S.phoneNumber||void 0)}}(m,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:il(p),additionalUserInfo:fu(p),user:zr.getOrCreate(S)}})}function sl(m,h){return af.apply(this,arguments)}function af(){return(af=(0,v.Z)(function*(m,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>Ln(m,p.confirm(_))}})).apply(this,arguments)}class ig{constructor(h,p){this.resolver=p,this.auth=function Da(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ln(rg(this.auth),this.resolver.resolveSignIn(h))}}class zr{constructor(h){this._delegate=h,this.multiFactor=function po(m){const h=(0,P.m9)(m);return fo.has(h)||fo.set(h,jh._fromUser(h)),fo.get(h)}(h)}static getOrCreate(h){return zr.USER_MAP.has(h)||zr.USER_MAP.set(h,new zr(h)),zr.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,v.Z)(function*(){return Ln(p.auth,ru(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,v.Z)(function*(){return sl(_.auth,function Hr(m,h,p){return Qn.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,v.Z)(function*(){return Ln(p.auth,function ye(m,h,p){return Ei.apply(this,arguments)}(p._delegate,h,ki))})()}linkWithRedirect(h){var p=this;return(0,v.Z)(function*(){return yield Uu(pn(p.auth)),function K(m,h,p){return function ne(m,h,p){return be.apply(this,arguments)}(m,h,p)}(p._delegate,h,ki)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,v.Z)(function*(){return Ln(p.auth,iu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return sl(this.auth,function an(m,h,p){return Ni.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Ln(this.auth,function ly(m,h,p){return dd.apply(this,arguments)}(this._delegate,h,ki))}reauthenticateWithRedirect(h){var p=this;return(0,v.Z)(function*(){return yield Uu(pn(p.auth)),function C(m,h,p){return function x(m,h,p){return L.apply(this,arguments)}(m,h,p)}(p._delegate,h,ki)})()}sendEmailVerification(h){return function Rc(m,h){return ra.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,v.Z)(function*(){return yield function Rr(m,h){return Xa.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function ed(m,h){return Us((0,P.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function Fs(m,h){return Us((0,P.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Cu(m,h){return Gc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Oc(m,h){return kc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Nc(m,h,p){return lu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zr.USER_MAP=new WeakMap;const Vu=U;let sg=(()=>{class m{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Vu(S,"invalid-api-key",{appName:p.name}),Vu(S,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?ki:void 0;this._delegate=_.initialize({options:{persistence:Zs(S,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function gc(m,h,p){const _=pn(m);U(_._canInitEmulator,_,"emulator-config-failed"),U(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!p?.disableWarnings,R=Ai(h),{host:q,port:ce}=function Vn(m){const h=Ai(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:hs(_.substr(R.length+1))}}{const[R,q]=_.split(":");return{host:R,port:hs(q)}}}(h);_.config.emulator={url:`${R}//${q}${null===ce?"":`:${ce}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:q,port:ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function fs(){function m(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,_)}applyActionCode(p){return function ri(m,h){return Jo.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Xo(this._delegate,p)}confirmPasswordReset(p,_){return function uu(m,h,p){return uo.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var S=this;return(0,v.Z)(function*(){return Ln(S._delegate,function ea(m,h,p){return bn.apply(this,arguments)}(S._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function cu(m,h){return na.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Yi(m,h){return"EMAIL_SIGNIN"===Ya.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,v.Z)(function*(){Vu(rl(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function je(m,h){return at.apply(this,arguments)}(p._delegate,ki);return _?Ln(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function wa(m,h){pn(m)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,S){const{next:R,error:q,complete:ce}=Co(p,_,S);return this._delegate.onAuthStateChanged(R,q,ce)}onIdTokenChanged(p,_,S){const{next:R,error:q,complete:ce}=Co(p,_,S);return this._delegate.onIdTokenChanged(R,q,ce)}sendSignInLinkToEmail(p,_){return function xc(m,h,p){return Ls.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function au(m,h,p){return Dn.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,v.Z)(function*(){let S;switch(function rf(m,h){bo(Object.values(hr).includes(h),m,"invalid-persistence-type"),(0,P.b$)()?bo(h!==hr.SESSION,m,"unsupported-persistence-type"):(0,P.UG)()?bo(h===hr.NONE,m,"unsupported-persistence-type"):nl()?bo(h===hr.NONE||h===hr.LOCAL&&(0,P.hl)(),m,"unsupported-persistence-type"):bo(h===hr.NONE||Lu(),m,"unsupported-persistence-type")}(_._delegate,p),p){case hr.SESSION:S=Ri;break;case hr.LOCAL:S=(yield ie(mo)._isAvailable())?mo:sa;break;case hr.NONE:S=Zt;break;default:return Te("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Ln(this._delegate,function Fh(m){return En.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Ln(this._delegate,yn(this._delegate,p))}signInWithCustomToken(p){return Ln(this._delegate,function Tc(m,h){return Qo.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return Ln(this._delegate,function Mi(m,h,p){return yn((0,P.m9)(m),xi.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return Ln(this._delegate,function Up(m,h,p){return ta.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return sl(this._delegate,function vr(m,h,p){return Xi.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,v.Z)(function*(){return Vu(rl(),_._delegate,"operation-not-supported-in-this-environment"),Ln(_._delegate,function Gr(m,h,p){return _r.apply(this,arguments)}(_._delegate,p,ki))})()}signInWithRedirect(p){var _=this;return(0,v.Z)(function*(){return Vu(rl(),_._delegate,"operation-not-supported-in-this-environment"),yield Uu(_._delegate),function vn(m,h,p){return function Hh(m,h,p){return D.apply(this,arguments)}(m,h,p)}(_._delegate,p,ki)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ac(m,h){return Xl.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=hr,m})();function Co(m,h,p){let _=m;"function"!=typeof m&&({next:_,error:h,complete:p}=m);const S=_;return{next:q=>S(q&&zr.getOrCreate(q)),error:h,complete:p}}function Zs(m,h){const p=function Ks(m,h){const p=sf();if(!p)return[];const _=qn(nf,m,h);switch(p.getItem(_)){case hr.NONE:return[Zt];case hr.LOCAL:return[mo,Ri];case hr.SESSION:return[Ri];default:return[]}}(m,h);if(typeof self<"u"&&!p.includes(mo)&&p.push(mo),typeof window<"u")for(const _ of[sa,Ri])p.includes(_)||p.push(_);return p.includes(Zt)||p.push(Zt),p}class To{constructor(){this.providerId="phone",this._delegate=new Io(rg(X.Z.auth()))}static credential(h,p){return Io.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}To.PHONE_SIGN_IN_METHOD=Io.PHONE_SIGN_IN_METHOD,To.PROVIDER_ID=Io.PROVIDER_ID;const Md=U;class uf{constructor(h,p,_=X.Z.app()){var S;Md(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new or(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ol(m){m.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new sg(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xi,FacebookAuthProvider:Zo,GithubAuthProvider:bc,GoogleAuthProvider:Qa,OAuthProvider:Os,SAMLAuthProvider:ti,PhoneAuthProvider:To,PhoneMultiFactorGenerator:Nu,RecaptchaVerifier:uf,TwitterAuthProvider:Br,Auth:sg,AuthCredential:lr,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.20")}(X.Z)},9751:(ot,Ce,k)=>{k.d(Ce,{y:()=>de});var v=k(2961),X=k(727),P=k(8822),oe=k(9635),re=k(2416),he=k(576),ue=k(2806);let de=(()=>{class Y{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const we=new Y;return we.source=this,we.operator=Ae,we}subscribe(Ae,we,Xe){const me=function B(Y){return Y&&Y instanceof v.Lv||function V(Y){return Y&&(0,he.m)(Y.next)&&(0,he.m)(Y.error)&&(0,he.m)(Y.complete)}(Y)&&(0,X.Nn)(Y)}(Ae)?Ae:new v.Hp(Ae,we,Xe);return(0,ue.x)(()=>{const{operator:pe,source:Qe}=this;me.add(pe?pe.call(me,Qe):Qe?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(we){Ae.error(we)}}forEach(Ae,we){return new(we=fe(we))((Xe,me)=>{const pe=new v.Hp({next:Qe=>{try{Ae(Qe)}catch(nt){me(nt),pe.unsubscribe()}},error:me,complete:Xe});this.subscribe(pe)})}_subscribe(Ae){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Ae)}[P.L](){return this}pipe(...Ae){return(0,oe.U)(Ae)(this)}toPromise(Ae){return new(Ae=fe(Ae))((we,Xe)=>{let me;this.subscribe(pe=>me=pe,pe=>Xe(pe),()=>we(me))})}}return Y.create=Fe=>new Y(Fe),Y})();function fe(Y){var Fe;return null!==(Fe=Y??re.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(ot,Ce,k)=>{k.d(Ce,{x:()=>ue});var v=k(9751),X=k(727);const oe=(0,k(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),he=k(2806);let ue=(()=>{class fe extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Y=new de(this,this);return Y.operator=B,Y}_throwIfClosed(){if(this.closed)throw new oe}next(B){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(B)}})}error(B){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Y}=this;for(;Y.length;)Y.shift().error(B)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Y,isStopped:Fe,observers:Ae}=this;return Y||Fe?X.Lc:(this.currentObservers=null,Ae.push(B),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Ae,B)}))}_checkFinalizedStatuses(B){const{hasError:Y,thrownError:Fe,isStopped:Ae}=this;Y?B.error(Fe):Ae&&B.complete()}asObservable(){const B=new v.y;return B.source=this,B}}return fe.create=(V,B)=>new de(V,B),fe})();class de extends ue{constructor(V,B){super(),this.destination=V,this.source=B}next(V){var B,Y;null===(Y=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Y||Y.call(B,V)}error(V){var B,Y;null===(Y=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Y||Y.call(B,V)}complete(){var V,B;null===(B=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===B||B.call(V)}_subscribe(V){var B,Y;return null!==(Y=null===(B=this.source)||void 0===B?void 0:B.subscribe(V))&&void 0!==Y?Y:X.Lc}}},2961:(ot,Ce,k)=>{k.d(Ce,{Hp:()=>Xe,Lv:()=>Y});var v=k(576),X=k(727),P=k(2416),oe=k(7849);function re(){}const he=fe("C",void 0,void 0);function fe(Te,_e,Ie){return{kind:Te,value:_e,error:Ie}}var V=k(3410),B=k(2806);class Y extends X.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,X.Nn)(_e)&&_e.add(this)):this.destination=nt}static create(_e,Ie,Ve){return new Xe(_e,Ie,Ve)}next(_e){this.isStopped?Qe(function de(Te){return fe("N",Te,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Qe(function ue(Te){return fe("E",void 0,Te)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Qe(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function Ae(Te,_e){return Fe.call(Te,_e)}class we{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(_e)}catch(Ve){me(Ve)}}error(_e){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(_e)}catch(Ve){me(Ve)}else me(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ie){me(Ie)}}}class Xe extends Y{constructor(_e,Ie,Ve){let Be;if(super(),(0,v.m)(_e)||!_e)Be={next:_e??void 0,error:Ie??void 0,complete:Ve??void 0};else{let U;this&&P.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),Be={next:_e.next&&Ae(_e.next,U),error:_e.error&&Ae(_e.error,U),complete:_e.complete&&Ae(_e.complete,U)}):Be=_e}this.destination=new we(Be)}}function me(Te){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Te):(0,oe.h)(Te)}function Qe(Te,_e){const{onStoppedNotification:Ie}=P.v;Ie&&V.z.setTimeout(()=>Ie(Te,_e))}const nt={closed:!0,next:re,error:function pe(Te){throw Te},complete:re}},727:(ot,Ce,k)=>{k.d(Ce,{Lc:()=>he,w0:()=>re,Nn:()=>ue});var v=k(576);const P=(0,k(3888).d)(fe=>function(B){fe(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Y,Fe)=>`${Fe+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var oe=k(8737);class re{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ae of B)Ae.remove(this);else B.remove(this);const{initialTeardown:Y}=this;if((0,v.m)(Y))try{Y()}catch(Ae){V=Ae instanceof P?Ae.errors:[Ae]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const Ae of Fe)try{de(Ae)}catch(we){V=V??[],we instanceof P?V=[...V,...we.errors]:V.push(we)}}if(V)throw new P(V)}}add(V){var B;if(V&&V!==this)if(this.closed)de(V);else{if(V instanceof re){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(V)}}_hasParent(V){const{_parentage:B}=this;return B===V||Array.isArray(B)&&B.includes(V)}_addParent(V){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(V),B):B?[B,V]:V}_removeParent(V){const{_parentage:B}=this;B===V?this._parentage=null:Array.isArray(B)&&(0,oe.P)(B,V)}remove(V){const{_finalizers:B}=this;B&&(0,oe.P)(B,V),V instanceof re&&V._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const he=re.EMPTY;function ue(fe){return fe instanceof re||fe&&"closed"in fe&&(0,v.m)(fe.remove)&&(0,v.m)(fe.add)&&(0,v.m)(fe.unsubscribe)}function de(fe){(0,v.m)(fe)?fe():fe.unsubscribe()}},2416:(ot,Ce,k)=>{k.d(Ce,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Ce,k)=>{k.d(Ce,{E:()=>X});const X=new(k(9751).y)(re=>re.complete())},8996:(ot,Ce,k)=>{k.d(Ce,{D:()=>_e});var v=k(8421),X=k(5363),P=k(9468),he=k(9751),de=k(2202),fe=k(576),V=k(9672);function Y(Ie,Ve){if(!Ie)throw new Error("Iterable cannot be null");return new he.y(Be=>{(0,V.f)(Be,Ve,()=>{const U=Ie[Symbol.asyncIterator]();(0,V.f)(Be,Ve,()=>{U.next().then(ge=>{ge.done?Be.complete():Be.next(ge.value)})},0,!0)})})}var Fe=k(3670),Ae=k(8239),we=k(1144),Xe=k(6495),me=k(2206),pe=k(4532),Qe=k(3260);function _e(Ie,Ve){return Ve?function Te(Ie,Ve){if(null!=Ie){if((0,Fe.c)(Ie))return function oe(Ie,Ve){return(0,v.Xf)(Ie).pipe((0,P.R)(Ve),(0,X.Q)(Ve))}(Ie,Ve);if((0,we.z)(Ie))return function ue(Ie,Ve){return new he.y(Be=>{let U=0;return Ve.schedule(function(){U===Ie.length?Be.complete():(Be.next(Ie[U++]),Be.closed||this.schedule())})})}(Ie,Ve);if((0,Ae.t)(Ie))return function re(Ie,Ve){return(0,v.Xf)(Ie).pipe((0,P.R)(Ve),(0,X.Q)(Ve))}(Ie,Ve);if((0,me.D)(Ie))return Y(Ie,Ve);if((0,Xe.T)(Ie))return function B(Ie,Ve){return new he.y(Be=>{let U;return(0,V.f)(Be,Ve,()=>{U=Ie[de.h](),(0,V.f)(Be,Ve,()=>{let ge,Z;try{({value:ge,done:Z}=U.next())}catch(J){return void Be.error(J)}Z?Be.complete():Be.next(ge)},0,!0)}),()=>(0,fe.m)(U?.return)&&U.return()})}(Ie,Ve);if((0,Qe.L)(Ie))return function nt(Ie,Ve){return Y((0,Qe.Q)(Ie),Ve)}(Ie,Ve)}throw(0,pe.z)(Ie)}(Ie,Ve):(0,v.Xf)(Ie)}},8421:(ot,Ce,k)=>{k.d(Ce,{Xf:()=>Fe});var v=k(655),X=k(1144),P=k(8239),oe=k(9751),re=k(3670),he=k(2206),ue=k(4532),de=k(6495),fe=k(3260),V=k(576),B=k(7849),Y=k(8822);function Fe(Te){if(Te instanceof oe.y)return Te;if(null!=Te){if((0,re.c)(Te))return function Ae(Te){return new oe.y(_e=>{const Ie=Te[Y.L]();if((0,V.m)(Ie.subscribe))return Ie.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,X.z)(Te))return function we(Te){return new oe.y(_e=>{for(let Ie=0;Ie<Te.length&&!_e.closed;Ie++)_e.next(Te[Ie]);_e.complete()})}(Te);if((0,P.t)(Te))return function Xe(Te){return new oe.y(_e=>{Te.then(Ie=>{_e.closed||(_e.next(Ie),_e.complete())},Ie=>_e.error(Ie)).then(null,B.h)})}(Te);if((0,he.D)(Te))return pe(Te);if((0,de.T)(Te))return function me(Te){return new oe.y(_e=>{for(const Ie of Te)if(_e.next(Ie),_e.closed)return;_e.complete()})}(Te);if((0,fe.L)(Te))return function Qe(Te){return pe((0,fe.Q)(Te))}(Te)}throw(0,ue.z)(Te)}function pe(Te){return new oe.y(_e=>{(function nt(Te,_e){var Ie,Ve,Be,U;return(0,v.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,v.KL)(Te);!(Ve=yield Ie.next()).done;)if(_e.next(Ve.value),_e.closed)return}catch(ge){Be={error:ge}}finally{try{Ve&&!Ve.done&&(U=Ie.return)&&(yield U.call(Ie))}finally{if(Be)throw Be.error}}_e.complete()})})(Te,_e).catch(Ie=>_e.error(Ie))})}},6451:(ot,Ce,k)=>{k.d(Ce,{T:()=>he});var v=k(8189),X=k(8421),P=k(515),oe=k(7669),re=k(8996);function he(...ue){const de=(0,oe.yG)(ue),fe=(0,oe._6)(ue,1/0),V=ue;return V.length?1===V.length?(0,X.Xf)(V[0]):(0,v.J)(fe)((0,re.D)(V,de)):P.E}},5403:(ot,Ce,k)=>{k.d(Ce,{x:()=>X});var v=k(2961);function X(oe,re,he,ue,de){return new P(oe,re,he,ue,de)}class P extends v.Lv{constructor(re,he,ue,de,fe,V){super(re),this.onFinalize=fe,this.shouldUnsubscribe=V,this._next=he?function(B){try{he(B)}catch(Y){re.error(Y)}}:super._next,this._error=de?function(B){try{de(B)}catch(Y){re.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ot,Ce,k)=>{k.d(Ce,{U:()=>P});var v=k(4482),X=k(5403);function P(oe,re){return(0,v.e)((he,ue)=>{let de=0;he.subscribe((0,X.x)(ue,fe=>{ue.next(oe.call(re,fe,de++))}))})}},8189:(ot,Ce,k)=>{k.d(Ce,{J:()=>P});var v=k(5577),X=k(4671);function P(oe=1/0){return(0,v.z)(X.y,oe)}},5577:(ot,Ce,k)=>{k.d(Ce,{z:()=>de});var v=k(4004),X=k(8421),P=k(4482),oe=k(9672),re=k(5403),ue=k(576);function de(fe,V,B=1/0){return(0,ue.m)(V)?de((Y,Fe)=>(0,v.U)((Ae,we)=>V(Y,Ae,Fe,we))((0,X.Xf)(fe(Y,Fe))),B):("number"==typeof V&&(B=V),(0,P.e)((Y,Fe)=>function he(fe,V,B,Y,Fe,Ae,we,Xe){const me=[];let pe=0,Qe=0,nt=!1;const Te=()=>{nt&&!me.length&&!pe&&V.complete()},_e=Ve=>pe<Y?Ie(Ve):me.push(Ve),Ie=Ve=>{Ae&&V.next(Ve),pe++;let Be=!1;(0,X.Xf)(B(Ve,Qe++)).subscribe((0,re.x)(V,U=>{Fe?.(U),Ae?_e(U):V.next(U)},()=>{Be=!0},void 0,()=>{if(Be)try{for(pe--;me.length&&pe<Y;){const U=me.shift();we?(0,oe.f)(V,we,()=>Ie(U)):Ie(U)}Te()}catch(U){V.error(U)}}))};return fe.subscribe((0,re.x)(V,_e,()=>{nt=!0,Te()})),()=>{Xe?.()}}(Y,Fe,fe,B)))}},5363:(ot,Ce,k)=>{k.d(Ce,{Q:()=>oe});var v=k(9672),X=k(4482),P=k(5403);function oe(re,he=0){return(0,X.e)((ue,de)=>{ue.subscribe((0,P.x)(de,fe=>(0,v.f)(de,re,()=>de.next(fe),he),()=>(0,v.f)(de,re,()=>de.complete(),he),fe=>(0,v.f)(de,re,()=>de.error(fe),he)))})}},3099:(ot,Ce,k)=>{k.d(Ce,{B:()=>re});var v=k(8421),X=k(7579),P=k(2961),oe=k(4482);function re(ue={}){const{connector:de=(()=>new X.x),resetOnError:fe=!0,resetOnComplete:V=!0,resetOnRefCountZero:B=!0}=ue;return Y=>{let Fe,Ae,we,Xe=0,me=!1,pe=!1;const Qe=()=>{Ae?.unsubscribe(),Ae=void 0},nt=()=>{Qe(),Fe=we=void 0,me=pe=!1},Te=()=>{const _e=Fe;nt(),_e?.unsubscribe()};return(0,oe.e)((_e,Ie)=>{Xe++,!pe&&!me&&Qe();const Ve=we=we??de();Ie.add(()=>{Xe--,0===Xe&&!pe&&!me&&(Ae=he(Te,B))}),Ve.subscribe(Ie),!Fe&&Xe>0&&(Fe=new P.Hp({next:Be=>Ve.next(Be),error:Be=>{pe=!0,Qe(),Ae=he(nt,fe,Be),Ve.error(Be)},complete:()=>{me=!0,Qe(),Ae=he(nt,V),Ve.complete()}}),(0,v.Xf)(_e).subscribe(Fe))})(Y)}}function he(ue,de,...fe){if(!0===de)return void ue();if(!1===de)return;const V=new P.Hp({next:()=>{V.unsubscribe(),ue()}});return de(...fe).subscribe(V)}},9468:(ot,Ce,k)=>{k.d(Ce,{R:()=>X});var v=k(4482);function X(P,oe=0){return(0,v.e)((re,he)=>{he.add(P.schedule(()=>re.subscribe(he),oe))})}},8505:(ot,Ce,k)=>{k.d(Ce,{b:()=>re});var v=k(576),X=k(4482),P=k(5403),oe=k(4671);function re(he,ue,de){const fe=(0,v.m)(he)||ue||de?{next:he,error:ue,complete:de}:he;return fe?(0,X.e)((V,B)=>{var Y;null===(Y=fe.subscribe)||void 0===Y||Y.call(fe);let Fe=!0;V.subscribe((0,P.x)(B,Ae=>{var we;null===(we=fe.next)||void 0===we||we.call(fe,Ae),B.next(Ae)},()=>{var Ae;Fe=!1,null===(Ae=fe.complete)||void 0===Ae||Ae.call(fe),B.complete()},Ae=>{var we;Fe=!1,null===(we=fe.error)||void 0===we||we.call(fe,Ae),B.error(Ae)},()=>{var Ae,we;Fe&&(null===(Ae=fe.unsubscribe)||void 0===Ae||Ae.call(fe)),null===(we=fe.finalize)||void 0===we||we.call(fe)}))}):oe.y}},4408:(ot,Ce,k)=>{k.d(Ce,{o:()=>re});var v=k(727);class X extends v.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const P={setInterval(he,ue,...de){const{delegate:fe}=P;return fe?.setInterval?fe.setInterval(he,ue,...de):setInterval(he,ue,...de)},clearInterval(he){const{delegate:ue}=P;return(ue?.clearInterval||clearInterval)(he)},delegate:void 0};var oe=k(8737);class re extends X{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var fe;if(this.closed)return this;this.state=ue;const V=this.id,B=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(B,V,de)),this.pending=!0,this.delay=de,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(B,this.id,de),this}requestAsyncId(ue,de,fe=0){return P.setInterval(ue.flush.bind(ue,this),fe)}recycleAsyncId(ue,de,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return de;null!=de&&P.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ue,de);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let V,fe=!1;try{this.work(ue)}catch(B){fe=!0,V=B||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:fe}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(fe,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Ce,k)=>{k.d(Ce,{v:()=>P});var v=k(6063);class X{constructor(re,he=X.now){this.schedulerActionCtor=re,this.now=he}schedule(re,he=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,he)}}X.now=v.l.now;class P extends X{constructor(re,he=X.now){super(re,he),this.actions=[],this._active=!1}flush(re){const{actions:he}=this;if(this._active)return void he.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=he.shift());if(this._active=!1,ue){for(;re=he.shift();)re.unsubscribe();throw ue}}}},4986:(ot,Ce,k)=>{k.d(Ce,{z:()=>P});var v=k(4408);const P=new(k(7565).v)(v.o)},6063:(ot,Ce,k)=>{k.d(Ce,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},3410:(ot,Ce,k)=>{k.d(Ce,{z:()=>v});const v={setTimeout(X,P,...oe){const{delegate:re}=v;return re?.setTimeout?re.setTimeout(X,P,...oe):setTimeout(X,P,...oe)},clearTimeout(X){const{delegate:P}=v;return(P?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ot,Ce,k)=>{k.d(Ce,{h:()=>X});const X=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Ce,k)=>{k.d(Ce,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Ce,k)=>{k.d(Ce,{_6:()=>he,jO:()=>oe,yG:()=>re});var v=k(576);function P(ue){return ue[ue.length-1]}function oe(ue){return(0,v.m)(P(ue))?ue.pop():void 0}function re(ue){return function X(ue){return ue&&(0,v.m)(ue.schedule)}(P(ue))?ue.pop():void 0}function he(ue,de){return"number"==typeof P(ue)?ue.pop():de}},8737:(ot,Ce,k)=>{function v(X,P){if(X){const oe=X.indexOf(P);0<=oe&&X.splice(oe,1)}}k.d(Ce,{P:()=>v})},3888:(ot,Ce,k)=>{function v(X){const oe=X(re=>{Error.call(re),re.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ce,{d:()=>v})},2806:(ot,Ce,k)=>{k.d(Ce,{O:()=>oe,x:()=>P});var v=k(2416);let X=null;function P(re){if(v.v.useDeprecatedSynchronousErrorHandling){const he=!X;if(he&&(X={errorThrown:!1,error:null}),re(),he){const{errorThrown:ue,error:de}=X;if(X=null,ue)throw de}}else re()}function oe(re){v.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(ot,Ce,k)=>{function v(X,P,oe,re=0,he=!1){const ue=P.schedule(function(){oe(),he?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(ue),!he)return ue}k.d(Ce,{f:()=>v})},4671:(ot,Ce,k)=>{function v(X){return X}k.d(Ce,{y:()=>v})},1144:(ot,Ce,k)=>{k.d(Ce,{z:()=>v});const v=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ot,Ce,k)=>{k.d(Ce,{D:()=>X});var v=k(576);function X(P){return Symbol.asyncIterator&&(0,v.m)(P?.[Symbol.asyncIterator])}},576:(ot,Ce,k)=>{function v(X){return"function"==typeof X}k.d(Ce,{m:()=>v})},3670:(ot,Ce,k)=>{k.d(Ce,{c:()=>P});var v=k(8822),X=k(576);function P(oe){return(0,X.m)(oe[v.L])}},6495:(ot,Ce,k)=>{k.d(Ce,{T:()=>P});var v=k(2202),X=k(576);function P(oe){return(0,X.m)(oe?.[v.h])}},8239:(ot,Ce,k)=>{k.d(Ce,{t:()=>X});var v=k(576);function X(P){return(0,v.m)(P?.then)}},3260:(ot,Ce,k)=>{k.d(Ce,{L:()=>oe,Q:()=>P});var v=k(655),X=k(576);function P(re){return(0,v.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:de,done:fe}=yield(0,v.qq)(ue.read());if(fe)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(de)}}finally{ue.releaseLock()}})}function oe(re){return(0,X.m)(re?.getReader)}},4482:(ot,Ce,k)=>{k.d(Ce,{A:()=>X,e:()=>P});var v=k(576);function X(oe){return(0,v.m)(oe?.lift)}function P(oe){return re=>{if(X(re))return re.lift(function(he){try{return oe(he,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ot,Ce,k)=>{k.d(Ce,{U:()=>P,z:()=>X});var v=k(4671);function X(...oe){return P(oe)}function P(oe){return 0===oe.length?v.y:1===oe.length?oe[0]:function(he){return oe.reduce((ue,de)=>de(ue),he)}}},7849:(ot,Ce,k)=>{k.d(Ce,{h:()=>P});var v=k(2416),X=k(3410);function P(oe){X.z.setTimeout(()=>{const{onUnhandledError:re}=v.v;if(!re)throw oe;re(oe)})}},4532:(ot,Ce,k)=>{function v(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>v})},655:(ot,Ce,k)=>{function oe(Z,J){var ie={};for(var te in Z)Object.prototype.hasOwnProperty.call(Z,te)&&J.indexOf(te)<0&&(ie[te]=Z[te]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(te=Object.getOwnPropertySymbols(Z);Pe<te.length;Pe++)J.indexOf(te[Pe])<0&&Object.prototype.propertyIsEnumerable.call(Z,te[Pe])&&(ie[te[Pe]]=Z[te[Pe]])}return ie}function de(Z,J,ie,te){return new(ie||(ie=Promise))(function(Ne,ut){function Bt(en){try{ze(te.next(en))}catch(Mn){ut(Mn)}}function Ft(en){try{ze(te.throw(en))}catch(Mn){ut(Mn)}}function ze(en){en.done?Ne(en.value):function Pe(Ne){return Ne instanceof ie?Ne:new ie(function(ut){ut(Ne)})}(en.value).then(Bt,Ft)}ze((te=te.apply(Z,J||[])).next())})}function me(Z){return this instanceof me?(this.v=Z,this):new me(Z)}function pe(Z,J,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,te=ie.apply(Z,J||[]),Ne=[];return Pe={},ut("next"),ut("throw"),ut("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function ut(Wt){te[Wt]&&(Pe[Wt]=function(qt){return new Promise(function(Sr,Rt){Ne.push([Wt,qt,Sr,Rt])>1||Bt(Wt,qt)})})}function Bt(Wt,qt){try{!function Ft(Wt){Wt.value instanceof me?Promise.resolve(Wt.value.v).then(ze,en):Mn(Ne[0][2],Wt)}(te[Wt](qt))}catch(Sr){Mn(Ne[0][3],Sr)}}function ze(Wt){Bt("next",Wt)}function en(Wt){Bt("throw",Wt)}function Mn(Wt,qt){Wt(qt),Ne.shift(),Ne.length&&Bt(Ne[0][0],Ne[0][1])}}function nt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,J=Z[Symbol.asyncIterator];return J?J.call(Z):(Z=function Y(Z){var J="function"==typeof Symbol&&Symbol.iterator,ie=J&&Z[J],te=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&te>=Z.length&&(Z=void 0),{value:Z&&Z[te++],done:!Z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},te("next"),te("throw"),te("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function te(Ne){ie[Ne]=Z[Ne]&&function(ut){return new Promise(function(Bt,Ft){!function Pe(Ne,ut,Bt,Ft){Promise.resolve(Ft).then(function(ze){Ne({value:ze,done:Bt})},ut)}(Bt,Ft,(ut=Z[Ne](ut)).done,ut.value)})}}}k.d(Ce,{FC:()=>pe,KL:()=>nt,_T:()=>oe,mG:()=>de,qq:()=>me})},4650:(ot,Ce,k)=>{k.d(Ce,{$8M:()=>Du,$Z:()=>Z0,AFp:()=>$l,ALo:()=>g_,AaK:()=>de,BQk:()=>Jg,CHM:()=>ou,CRH:()=>C_,CZH:()=>Bm,CqO:()=>lv,D6c:()=>TE,EJc:()=>eC,EpF:()=>nh,F4k:()=>nc,FYo:()=>Oe,FiY:()=>je,G48:()=>VT,GfV:()=>$n,JOm:()=>Ao,KtG:()=>au,LFG:()=>vn,LSH:()=>Td,Lbi:()=>Xb,Lck:()=>s_,MAs:()=>ww,MMx:()=>Im,NdJ:()=>dv,OlP:()=>on,Oqu:()=>Tv,PXZ:()=>sC,Q6J:()=>Kg,QGY:()=>Va,QP$:()=>Si,Qsj:()=>We,R0b:()=>In,RDi:()=>hy,Rgc:()=>yh,SBq:()=>R,Sil:()=>vp,Suo:()=>b_,TTD:()=>Wi,TgZ:()=>tc,X6Q:()=>UT,XFs:()=>Ke,Xpm:()=>$,Xts:()=>Lu,Y36:()=>nn,YKP:()=>DI,YNc:()=>uv,Yjl:()=>Ot,Yz7:()=>qt,Z0I:()=>Wo,ZZ4:()=>W_,_UZ:()=>cv,_Vd:()=>p,_c5:()=>IC,_uU:()=>rm,aQg:()=>Tp,c2e:()=>RT,cJS:()=>Rt,cg1:()=>rp,dDg:()=>Hl,dqk:()=>rn,eFA:()=>B_,eoX:()=>lE,f3M:()=>D,g9A:()=>rE,h0i:()=>ac,hGG:()=>Z_,hij:()=>Qf,iGM:()=>BI,ifc:()=>it,ip1:()=>O_,jDz:()=>Em,kL8:()=>uh,lG2:()=>qn,lcZ:()=>m_,lqb:()=>Ts,lri:()=>dc,oAB:()=>rt,oxw:()=>rh,q4F:()=>Er,qLn:()=>pf,qZA:()=>Lo,rWj:()=>Gm,sBO:()=>BT,sIi:()=>Bf,s_b:()=>mn,soG:()=>yp,tb:()=>iE,tp0:()=>ht,uIk:()=>nv,vHH:()=>we,vpe:()=>Bo,wAp:()=>pt,xp6:()=>Py,ynx:()=>Qg,z2F:()=>qm,zSh:()=>xd,zs3:()=>ss});var v=k(7579),X=k(727),P=k(9751),oe=k(6451),re=k(3099);function he(i){for(let s in i)if(i[s]===he)return s;throw Error("Could not find renamed property on target object.")}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const V=he({__forward_ref__:he});function B(i){return i.__forward_ref__=B,i.toString=function(){return de(this())},i}function Y(i){return function Fe(i){return"function"==typeof i&&i.hasOwnProperty(V)&&i.__forward_ref__===B}(i)?i():i}class we extends Error{constructor(s,a){super(function Xe(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,s){throw new we(-201,!1)}function Ft(i,s){null==i&&function ze(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Rt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Jt(i){return Lr(i,Ti)||Lr(i,gi)}function Wo(i){return null!==Jt(i)}function Lr(i,s){return i.hasOwnProperty(s)?i[s]:null}function ls(i){return i&&(i.hasOwnProperty(Ur)||i.hasOwnProperty(io))?i[Ur]:null}const Ti=he({\u0275prov:he}),Ur=he({\u0275inj:he}),gi=he({ngInjectableDef:he}),io=he({ngInjectorDef:he});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Vr;function Rn(i){const s=Vr;return Vr=i,s}function mi(i,s,a){const c=Jt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ke.Optional?null:void 0!==s?s:void _e(de(i))}function Nn(i){return{toString:i}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),it=(()=>{return(i=it||(it={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",it;var i})();const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ar={},vt=[],Hi=he({\u0275cmp:he}),Kt=he({\u0275dir:he}),yi=he({\u0275pipe:he}),Gt=he({\u0275mod:he}),W=he({\u0275fac:he}),j=he({__NG_ELEMENT_ID__:he});let F=0;function $(i){return Nn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||vt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||it.Emulated,id:"c"+F++,styles:i.styles||vt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return l.inputs=Zt(i.inputs,c),l.outputs=Zt(i.outputs),y&&y.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ee).filter(Ue):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(Fn).filter(Ue):null,l})}function Ee(i){return St(i)||fn(i)}function Ue(i){return null!==i}function rt(i){return Nn(()=>({type:i.type,bootstrap:i.bootstrap||vt,declarations:i.declarations||vt,imports:i.imports||vt,exports:i.exports||vt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Zt(i,s){if(null==i)return Ar;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const qn=$;function Ot(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function St(i){return i[Hi]||null}function fn(i){return i[Kt]||null}function Fn(i){return i[yi]||null}function Si(i){const s=St(i)||fn(i)||Fn(i);return null!==s&&s.standalone}function xr(i,s){const a=i[Gt]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function ir(i){return Array.isArray(i)&&"object"==typeof i[1]}function Mr(i){return Array.isArray(i)&&!0===i[1]}function Za(i){return 0!=(8&i.flags)}function Ko(i){return 2==(2&i.flags)}function _c(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function Nh(i){return 0!=(256&i[2])}function xi(i,s){return i.hasOwnProperty(W)?i[W]:null}class zi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Wi(){return Os}function Os(i){return i.type.prototype.ngOnChanges&&(i.setInput=Qa),Zo}function Zo(){const i=kh(this),s=i?.current;if(s){const a=i.previous;if(a===Ar)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Qa(i,s,a,c){const l=kh(i)||function Yo(i,s){return i[bc]=s}(i,{previous:Ar,current:null}),f=l.current||(l.current={}),y=l.previous,I=this.declaredInputs[a],E=y[I];f[I]=new zi(E&&E.currentValue,s,y===Ar),i[c]=s}Wi.ngInherit=!0;const bc="__ngSimpleChanges__";function kh(i){return i[bc]||null}function En(i){for(;Array.isArray(i);)i=i[0];return i}function Rr(i,s){return En(s[i.index])}function ao(i,s){return i.data[s]}function Ki(i,s){return i[s]}function Ut(i,s){const a=s[i];return ir(a)?a:a[0]}function ks(i){return 64==(64&i[2])}function wi(i,s){return null==s?null:i[s]}function nu(i){i[18]=0}function yn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const _t={lFrame:Oc(null),bindingsEnabled:!0};function Zi(){return _t.bindingsEnabled}function De(){return _t.lFrame.lView}function kt(){return _t.lFrame.tView}function ou(i){return _t.lFrame.contextLView=i,i[8]}function au(i){return _t.lFrame.contextLView=null,i}function Dn(){let i=uu();for(;null!==i&&64===i.type;)i=i.parent;return i}function uu(){return _t.lFrame.currentTNode}function ri(i,s){const a=_t.lFrame;a.currentTNode=i,a.isParent=s}function Jo(){return _t.lFrame.isParent}function Xo(){_t.lFrame.isParent=!1}function Ls(){return _t.lFrame.bindingIndex++}function Vp(i,s){const a=_t.lFrame;a.bindingIndex=a.bindingRootIndex=i,cu(s)}function cu(i){_t.lFrame.currentDirectiveIndex=i}function Rc(){return _t.lFrame.currentQueryIndex}function ra(i){_t.lFrame.currentQueryIndex=i}function Nc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function lu(i,s,a){if(a&Ke.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&Ke.Host||(l=Nc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=_t.lFrame=Pc();return c.currentTNode=s,c.lView=i,!0}function du(i){const s=Pc(),a=i[1];_t.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Pc(){const i=_t.lFrame,s=null===i?null:i.child;return null===s?Oc(i):s}function Oc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function kc(){const i=_t.lFrame;return _t.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ed=kc;function Fs(){const i=kc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Yn(){return _t.lFrame.selectedIndex}function jr(i){_t.lFrame.selectedIndex=i}function dn(){const i=_t.lFrame;return ao(i.tView,i.selectedIndex)}function Uc(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function co(i,s,a){ho(i,s,3,a)}function lo(i,s,a,c){(3&i[2])===a&&ho(i,s,a,c)}function rd(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function ho(i,s,a,c){const f=c??-1,y=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<y;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(id(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function id(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class vs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function po(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],y=a[c++],I=a[c++];i.setAttribute(s,y,I,f)}else{const f=l,y=a[++c];yu(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function Bs(i){return 3===i||4===i||6===i}function yu(i){return 64===i.charCodeAt(0)}function ia(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||od(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function od(i,s,a,c,l){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){y=-1;break}if(I>s){y=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function ad(i){return-1!==i}function sr(i){return 32767&i}function oa(i,s){let a=function sa(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Ri=!0;function aa(i){const s=Ri;return Ri=i,s}let Pn=0;const Ii={};function js(i,s){const a=_u(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,ca(c.data,i),ca(s,null),ca(c.blueprint,null));const l=wu(i,s),f=i.injectorIndex;if(ad(l)){const y=sr(l),I=oa(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[y+T]|E[y+T]}return s[f+8]=l,f}function ca(i,s){i.push(0,0,0,0,0,0,0,0,s)}function _u(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function wu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=yo(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function _s(i,s,a){!function vu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(j)&&(c=a[j]),null==c&&(c=a[j]=Pn++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function ws(i,s,a){if(a&Ke.Optional||void 0!==i)return i;_e()}function Bc(i,s,a,c){if(a&Ke.Optional&&void 0===c&&(c=null),0==(a&(Ke.Self|Ke.Host))){const l=i[9],f=Rn(void 0);try{return l?l.get(s,c,a&Ke.Optional):mi(s,c,a&Ke.Optional)}finally{Rn(f)}}return ws(c,0,a)}function $s(i,s,a,c=Ke.Default,l){if(null!==i){if(1024&s[2]){const y=function mo(i,s,a,c,l){let f=i,y=s;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=la(f,y,a,c|Ke.Self,Ii);if(I!==Ii)return I;let E=f.parent;if(!E){const T=y[21];if(T){const M=T.get(a,Ii,c);if(M!==Ii)return M}E=yo(y),y=y[15]}f=E}return l}(i,s,a,c,Ii);if(y!==Ii)return y}const f=la(i,s,a,c,Ii);if(f!==Ii)return f}return Bc(s,a,c,l)}function la(i,s,a,c,l){const f=function jc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof s?s>=0?255&s:$c:s}(a);if("function"==typeof f){if(!lu(s,i,c))return c&Ke.Host?ws(l,0,c):Bc(s,a,c,l);try{const y=f(c);if(null!=y||c&Ke.Optional)return y;_e()}finally{ed()}}else if("number"==typeof f){let y=null,I=_u(i,s),E=-1,T=c&Ke.Host?s[16][6]:null;for((-1===I||c&Ke.SkipSelf)&&(E=-1===I?wu(i,s):s[I+8],-1!==E&&da(c,!1)?(y=s[1],I=sr(E),s=oa(E,s)):I=-1);-1!==I;){const M=s[1];if(Iu(f,I,M.data)){const O=ld(I,s,a,y,c,T);if(O!==Ii)return O}E=s[I+8],-1!==E&&da(c,s[1].data[I+8]===T)&&Iu(f,I,s)?(y=M,I=sr(E),s=oa(E,s)):I=-1}}return l}function ld(i,s,a,c,l,f){const y=s[1],I=y.data[i+8],M=go(I,y,a,null==c?Ko(I)&&Ri:c!=y&&0!=(3&I.type),l&Ke.Host&&f===I);return null!==M?Qi(s,y,M,I):Ii}function go(i,s,a,c,l){const f=i.providerIndexes,y=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,G=l?I+M:i.directiveEnd;for(let ee=c?I:I+M;ee<G;ee++){const ve=y[ee];if(ee<E&&a===ve||ee>=E&&ve.type===a)return ee}if(l){const ee=y[E];if(ee&&yr(ee)&&ee.type===a)return E}return null}function Qi(i,s,a,c){let l=i[a];const f=s.data;if(function Vs(i){return i instanceof vs}(l)){const y=l;y.resolving&&function Qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const I=aa(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?Rn(y.injectImpl):null;lu(i,c,Ke.Default);try{l=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function nd(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const y=Os(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&Rn(E),aa(I),y.resolving=!1,ed()}}return l}function Iu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function da(i,s){return!(i&Ke.Self||i&Ke.Host&&s)}class Hs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return $s(this._tNode,this._lView,s,c,a)}}function $c(){return new Hs(Dn(),De())}function yo(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Du(i){return function cd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Bs(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(Dn(),i)}const Es="__parameters__";function wo(i,s,a){return Nn(()=>{const c=function bu(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const y=new l(...f);return I.annotation=y,I;function I(E,T,M){const O=E.hasOwnProperty(Es)?E[Es]:Object.defineProperty(E,Es,{value:[]})[Es];for(;O.length<=M;)O.push(null);return(O[M]=O[M]||[]).push(y),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class on{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Hr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Hr(c,s)):s!==i&&s.push(c)}return s}function Qn(i,s){i.forEach(a=>Array.isArray(a)?Qn(a,s):s(a))}function an(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ni(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const Ct={},Wc="__NG_DI_FLAG__",oi="ngTempTokenPath",ga=/\n/gm,Tu="__source";let ns;function ai(i){const s=ns;return ns=i,s}function hd(i,s=Ke.Default){if(void 0===ns)throw new we(-203,!1);return null===ns?mi(i,void 0,s):ns.get(i,s&Ke.Optional?null:void 0,s)}function vn(i,s=Ke.Default){return(function $i(){return Vr}()||hd)(Y(i),s)}function D(i,s=Ke.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),vn(i,s)}function C(i){const s=[];for(let a=0;a<i.length;a++){const c=Y(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,f=Ke.Default;for(let y=0;y<c.length;y++){const I=c[y],E=L(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(vn(l,f))}else s.push(vn(c))}return s}function x(i,s){return i[Wc]=s,i.prototype[Wc]=s,i}function L(i){return i[Wc]}const je=x(wo("Optional"),8),ht=x(wo("SkipSelf"),4);let gd;function hy(i){gd=i}class Ru{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const my=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function Td(i){const s=function ku(){const i=De();return i&&i[12]}();return s?s.sanitize(Jn.URL,i)||"":function Nu(i,s){const a=function _d(i){return i instanceof Ru&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function rs(i){return i instanceof Ru?i.changingThisBreaksApplicationSecurity:i}(i):function Qc(i){return(i=String(i)).match(my)?i:"unsafe:"+i}(me(i))}const Lu=new on("ENVIRONMENT_INITIALIZER"),nl=new on("INJECTOR",-1),rl=new on("INJECTOR_DEF_TYPES");class Ia{get(s,a=Ct){if(a===Ct){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function tf(...i){return{\u0275providers:Fu(0,i)}}function Fu(i,...s){const a=[],c=new Set;let l;return Qn(s,f=>{const y=f;hr(y,a,[],c)&&(l||(l=[]),l.push(y))}),void 0!==l&&Ad(l,a),a}function Ad(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];Qn(l,f=>{s.push(f)})}}function hr(i,s,a,c){if(!(i=Y(i)))return!1;let l=null,f=ls(i);const y=!f&&St(i);if(f||y){if(y&&!y.standalone)return!1;l=i}else{const E=i.ngModule;if(f=ls(E),!f)return!1;l=E}const I=c.has(l);if(y){if(I)return!1;if(c.add(l),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of E)hr(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{Qn(f.imports,M=>{hr(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Ad(T,s)}if(!I){const T=xi(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:vt},{provide:rl,useValue:l,multi:!0},{provide:Lu,useValue:()=>vn(l),multi:!0})}const E=f.providers;null==E||I||Qn(E,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const nf=he({provide:String,useValue:he});function rf(i){return null!==i&&"object"==typeof i&&nf in i}function Ks(i){return"function"==typeof i}const xd=new on("Set Injector scope."),ki={},rg={};let Da;function il(){return void 0===Da&&(Da=new Ia),Da}class Ts{}class ba extends Ts{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,To(s,y=>this.processProvider(y)),this.records.set(nl,zr(void 0,this)),l.has("environment")&&this.records.set(Ts,zr(void 0,this));const f=this.records.get(xd);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(rl.multi,vt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=ai(this),c=Rn(void 0);try{return s()}finally{ai(a),Rn(c)}}get(s,a=Ct,c=Ke.Default){this.assertNotDestroyed();const l=ai(this),f=Rn(void 0);try{if(!(c&Ke.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Co(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(s)&&Jt(s);I=E&&this.injectableDefInScope(E)?zr(Ln(s),ki):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ke.Self?il():this.parent).get(s,a=c&Ke.Optional&&a===Ct?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[oi]=y[oi]||[]).unshift(de(s)),l)throw y;return function K(i,s,a,c){const l=i[oi];throw s[Tu]&&l.unshift(s[Tu]),i.message=function ne(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=de(s);if(Array.isArray(s))l=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let I=s[y];f.push(y+":"+("string"==typeof I?JSON.stringify(I):de(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(ga,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[oi]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Rn(f),ai(l)}}resolveInjectorInitializers(){const s=ai(this),a=Rn(void 0);try{const c=this.get(Lu.multi,vt,Ke.Self);for(const l of c)l()}finally{ai(s),Rn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=Ks(s=Y(s))?s:Y(s&&s.provide);const c=function af(i){return rf(i)?zr(void 0,i.useValue):zr(function ig(i,s,a){let c;if(Ks(i)){const l=Y(i);return xi(l)||Ln(l)}if(rf(i))c=()=>Y(i.useValue);else if(function Ea(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...C(i.deps||[]));else if(function Uu(i){return!(!i||!i.useExisting)}(i))c=()=>vn(Y(i.useExisting));else{const l=Y(i&&(i.useClass||i.provide));if(!function Vu(i){return!!i.deps}(i))return xi(l)||Ln(l);c=()=>new l(...C(i.deps))}return c}(i),ki)}(s);if(Ks(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=zr(void 0,ki,!0),l.factory=()=>C(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===ki&&(a.value=rg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function sg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ln(i){const s=Jt(i),a=null!==s?s.factory:xi(i);if(null!==a)return a;if(i instanceof on)throw new we(204,!1);if(i instanceof Function)return function sl(i){const s=i.length;if(s>0)throw function Je(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function mr(i){const s=i&&(i[Ti]||i[gi]);if(s){const a=function Fr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function zr(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Zs(i){return!!i.\u0275providers}function To(i,s){for(const a of i)Array.isArray(a)?To(a,s):Zs(a)?To(a.\u0275providers,s):s(a)}class uf{}class h{resolveComponentFactory(s){throw function wn(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let p=(()=>{class i{}return i.NULL=new h,i})();function _(){return S(Dn(),De())}function S(i,s){return new R(Rr(i,s))}let R=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=_,i})();function q(i){return i instanceof R?i.nativeElement:i}class Oe{}let We=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ft(){const i=De(),a=Ut(Dn().index,i);return(ir(a)?a:i)[11]}(),i})(),ct=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class $n{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Er=new $n("14.2.4"),Bu={};function al(i){return i.ngOriginalError}class pf{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&al(s);for(;a&&al(a);)a=al(a);return a||null}}const kd=new Map;let b0=0;const fg="__ngContext__";function Dr(i,s){ir(s)?(i[fg]=s[20],function C0(i){kd.set(i[20],i)}(s)):i[fg]=s}function So(i){return i instanceof Function?i():i}var Ao=(()=>((Ao=Ao||{})[Ao.Important=1]="Important",Ao[Ao.DashCase=2]="DashCase",Ao))();function Cy(i,s){return undefined(i,s)}function $u(i){const s=i[3];return Mr(s)?s[3]:s}function pr(i){return Ta(i[13])}function Hu(i){return Ta(i[4])}function Ta(i){for(;null!==i&&!Mr(i);)i=i[4];return i}function Ld(i,s,a,c,l){if(null!=c){let f,y=!1;Mr(c)?f=c:ir(c)&&(y=!0,c=c[0]);const I=En(c);0===i&&null!==a?null==l?fD(s,a,I):hl(s,a,I,l||null,!0):1===i&&null!==a?hl(s,a,I,l||null,!0):2===i?function Gu(i,s,a){const c=Sa(i,s);c&&function F0(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,y):3===i&&s.destroyNode(I),null!=f&&function B0(i,s,a,c,l){const f=a[7];f!==En(a)&&Ld(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];zu(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function Ef(i,s,a){return i.createElement(s,a)}function br(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,yn(l,-1)),a.splice(c,1)}function mg(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&br(l,c),s>0&&(i[a-1][4]=c[4]);const f=Ni(i,10+s);!function tt(i,s){zu(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function O0(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&zu(i,s,a,3,null,null),function qe(i){let s=i[13];if(!s)return Sy(i[1],i);for(;s;){let a=null;if(ir(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)ir(s)&&Sy(s[1],s),s=s[3];null===s&&(s=i),ir(s)&&Sy(s[1],s),a=s&&s[4]}s=a}}(s)}}function Sy(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function hD(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof vs)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const I=l[f[y]],E=f[y+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function dD(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],I="function"==typeof y?y(s):En(s[y]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const y=c[l=a[f+1]];a[f].call(y)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Mr(s[3])){a!==s[3]&&br(a,s);const c=s[19];null!==c&&c.detachView(i)}!function Iy(i){kd.delete(i[20])}(s)}}function k0(i,s,a){return function Ay(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===it.None||l===it.Emulated)return null}return Rr(c,a)}(i,s.parent,a)}function hl(i,s,a,c,l){i.insertBefore(s,a,c,l)}function fD(i,s,a){i.appendChild(s,a)}function L0(i,s,a,c,l){null!==c?hl(i,s,a,c,l):fD(i,s,a)}function Sa(i,s){return i.parentNode(s)}let Fd=function yt(i,s,a){return 40&i.type?Rr(i,a):null};function Sn(i,s,a,c){const l=k0(i,c,s),f=s[11],I=function Tn(i,s,a){return Fd(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)L0(f,l,a[E],I,!1);else L0(f,l,a,I,!1)}function $e(i,s){if(null!==s){const a=s.type;if(3&a)return Rr(s,i);if(4&a)return bf(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return $e(i,c);{const l=i[s.index];return Mr(l)?bf(-1,l):En(l)}}if(32&a)return Cy(s,i)()||En(i[s.index]);{const c=Df(i,s);return null!==c?Array.isArray(c)?c[0]:$e($u(i[16]),c):$e(i,s.next)}}return null}function Df(i,s){return null!==s?i[16][6].projection[s.projection]:null}function bf(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return $e(c,l)}return s[7]}function xy(i,s,a,c,l,f,y){for(;null!=a;){const I=c[a.index],E=a.type;if(y&&0===s&&(I&&Dr(En(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)xy(i,s,a.child,c,l,f,!1),Ld(s,i,l,I,f);else if(32&E){const T=Cy(a,c);let M;for(;M=T();)Ld(s,i,l,M,f);Ld(s,i,l,I,f)}else 16&E?Ud(i,s,c,a,l,f):Ld(s,i,l,I,f);a=y?a.projectionNext:a.next}}function zu(i,s,a,c,l,f){xy(a,c,i.firstChild,s,l,f,!1)}function Ud(i,s,a,c,l,f){const y=a[16],E=y[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Ld(s,i,l,E[T],f);else xy(i,s,E,y[3],l,f,!0)}function Li(i,s,a){i.setAttribute(s,"style",a)}function Cf(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function My(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const Aa="ng-template";function Ry(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==My(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function se(i){return 4===i.type&&i.value!==Aa}function yg(i,s,a){return s===(4!==i.type||a?i.value:Aa)}function Ys(i,s,a){let c=4;const l=i.attrs||[],f=function fl(i){for(let s=0;s<i.length;s++)if(Bs(i[s]))return s;return i.length}(l);let y=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!y)if(4&c){if(c=2|1&c,""!==E&&!yg(i,E,a)||""===E&&1===s.length){if(Qs(c))return!1;y=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!Ry(i.attrs,T,a)){if(Qs(c))return!1;y=!0}continue}const O=Tf(8&c?"class":E,l,se(i),a);if(-1===O){if(Qs(c))return!1;y=!0;continue}if(""!==T){let G;G=O>f?"":l[O+1].toLowerCase();const ee=8&c?G:null;if(ee&&-1!==My(ee,T,0)||2&c&&T!==G){if(Qs(c))return!1;y=!0}}}}else{if(!y&&!Qs(c)&&!Qs(E))return!1;if(y&&Qs(E))continue;y=!1,c=E|1&c}}return Qs(c)||y}function Qs(i){return 0==(1&i)}function Tf(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const y=s[l];if(y===i)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function $0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function xa(i,s,a=!1){for(let c=0;c<s.length;c++)if(Ys(i,s[c],a))return!0;return!1}function H0(i,s){return i?":not("+s.trim()+")":s}function yD(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const I=i[++a];l+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+y:4&c&&(l+=" "+y);else""!==l&&!Qs(y)&&(s+=H0(f,l),l=""),c=y,f=f||!Qs(c);a++}return""!==l&&(s+=H0(f,l)),s}const wt={};function Py(i){Hn(kt(),De(),Yn()+i,!1)}function Hn(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&co(s,f,a)}else{const f=i.preOrderHooks;null!==f&&lo(s,f,0,a)}jr(a)}function Ma(i,s=null,a=null,c){const l=Gn(i,s,a,c);return l.resolveInjectorInitializers(),l}function Gn(i,s=null,a=null,c,l=new Set){const f=[a||vt,tf(i)];return c=c||("object"==typeof i?void 0:de(i)),new ba(f,s||il(),c||null,l)}let ss=(()=>{class i{static create(a,c){if(Array.isArray(a))return Ma({name:""},c,a,"");{const l=a.name??"";return Ma({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=Ct,i.NULL=new Ia,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>vn(nl)}),i.__NG_ELEMENT_ID__=-1,i})();function nn(i,s=Ke.Default){const a=De();return null===a?vn(i,s):$s(Dn(),a,Y(i),s)}function Z0(){throw new Error("invalid")}function qy(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const y=i.data[f];ra(l),y.contentQueries(2,s[f],f)}}}function Rg(i,s,a,c,l,f,y,I,E,T,M){const O=s.blueprint.slice();return O[0]=l,O[2]=76|c,(null!==M||i&&1024&i[2])&&(O[2]|=1024),nu(O),O[3]=O[15]=i,O[8]=a,O[10]=y||i&&i[10],O[11]=I||i&&i[11],O[12]=E||i&&i[12]||null,O[9]=T||i&&i[9]||null,O[6]=f,O[20]=function Ca(){return b0++}(),O[21]=M,O[16]=2==s.type?i[16]:O,O}function un(i,s,a,c,l){let f=i.data[s];if(null===f)f=function Wd(i,s,a,c,l){const f=uu(),y=Jo(),E=i.data[s]=function ND(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(y?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function Up(){return _t.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const y=function uo(){const i=_t.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return ri(f,!0),f}function La(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function Ng(i,s,a){du(s);try{const c=i.viewQuery;null!==c&&Ss(1,c,a);const l=i.template;null!==l&&qd(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&qy(i,s),i.staticViewQueries&&Ss(2,i.viewQuery,a);const f=i.components;null!==f&&function MD(i,s){for(let a=0;a<s.length;a++)fw(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Fs()}}function Pg(i,s,a,c){const l=s[2];if(128!=(128&l)){du(s);try{nu(s),function xc(i){return _t.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&qd(i,s,a,2,c);const y=3==(3&l);if(y){const T=i.preOrderCheckHooks;null!==T&&co(s,T,null)}else{const T=i.preOrderHooks;null!==T&&lo(s,T,0,null),rd(s,0)}if(function VD(i){for(let s=pr(i);null!==s;s=Hu(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&yn(f,1),l[2]|=512}}}(s),function UD(i){for(let s=pr(i);null!==s;s=Hu(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];ks(c)&&Pg(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&qy(i,s),y){const T=i.contentCheckHooks;null!==T&&co(s,T)}else{const T=i.contentHooks;null!==T&&lo(s,T,1),rd(s,1)}!function sw(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)jr(~l);else{const f=l,y=a[++c],I=a[++c];Vp(y,f),I(2,s[f])}}}finally{jr(-1)}}(i,s);const I=i.components;null!==I&&function kf(i,s){for(let a=0;a<s.length;a++)BD(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&Ss(2,E,c),y){const T=i.viewCheckHooks;null!==T&&co(s,T)}else{const T=i.viewHooks;null!==T&&lo(s,T,2),rd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,yn(s[3],-1))}finally{Fs()}}}function qd(i,s,a,c,l){const f=Yn(),y=2&c;try{jr(-1),y&&s.length>22&&Hn(i,s,22,!1),a(c,l)}finally{jr(f)}}function ow(i,s,a){if(Za(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function Og(i,s,a){!Zi()||(function lw(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||js(a,s),Dr(c,s);const y=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=yr(E);T&&Ug(s,a,E);const M=Qi(s,i,I,a);Dr(M,s),null!==y&&hw(0,I-l,M,E,0,y),T&&(Ut(a.index,s)[8]=M)}}(i,s,a,Rr(a,s)),128==(128&a.flags)&&function Lf(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,y=function Mc(){return _t.lFrame.currentDirectiveIndex}();try{jr(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];cu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&dw(E,T)}}finally{jr(-1),cu(y)}}(i,s,a))}function Wu(i,s,a=Rr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],I=-1===y?a(s,i):i[y];i[l++]=I}}}function No(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=kg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function kg(i,s,a,c,l,f,y,I,E,T){const M=22+c,O=M+l,G=function aw(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:wt);return a}(M,O),ee="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:s,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:ee,incompleteFirstPass:!1}}function Lg(i,s,a,c){const l=Yy(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&Qd(i).push(c,l.length-1))}function ar(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function zt(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,y=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],O=M.inputs,G=null===f||se(s)?null:LD(O,f);y.push(G),I=ar(O,T,I),E=ar(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=I,s.outputs=E}function Fa(i,s){const a=Ut(s,i);16&a[2]||(a[2]|=32)}function _l(i,s,a,c){let l=!1;if(Zi()){const f=function OD(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];xa(a,y.selectors,!1)&&(l||(l=[]),_s(js(a,s),i,y.type),yr(y)?(Nt(i,a),l.unshift(y)):l.push(y))}return l}(i,s,a),y=null===c?null:{"":-1};if(null!==f){l=!0,Zd(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const O=f[M];O.providersResolver&&O.providersResolver(O)}let I=!1,E=!1,T=La(i,s,f.length,null);for(let M=0;M<f.length;M++){const O=f[M];a.mergedAttrs=ia(a.mergedAttrs,O.hostAttrs),Yd(i,a,s,T,O),Fg(T,O,y),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const G=O.type.prototype;!I&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}zt(i,a)}y&&function kD(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new we(-301,!1);c.push(s[l],f)}}}(a,c,y)}return a.mergedAttrs=ia(a.mergedAttrs,a.attrs),l}function Ky(i,s,a,c,l,f){const y=f.hostBindings;if(y){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function Po(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,y)}}function dw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Nt(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Fg(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;yr(s)&&(a[""]=i)}}function Zd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Yd(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=xi(l.type)),y=new vs(f,yr(l),nn);i.blueprint[c]=y,a[c]=y,Ky(i,s,0,c,La(i,a,l.hostVars,wt),l)}function Ug(i,s,a){const c=Rr(s,i),l=No(a),f=i[10],y=ur(i,Rg(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=y}function Xs(i,s,a,c,l,f){const y=Rr(i,s);!function Vg(i,s,a,c,l,f,y){if(null==f)i.removeAttribute(s,l,a);else{const I=null==y?me(f):y(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],y,f,i.value,a,c,l)}function hw(i,s,a,c,l,f){const y=f[s];if(null!==y){const I=c.setInput;for(let E=0;E<y.length;){const T=y[E++],M=y[E++],O=y[E++];null!==I?c.setInput(a,O,T,M):a[M]=O}}}function LD(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Zy(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function BD(i,s){const a=Ut(s,i);if(ks(a)){const c=a[1];48&a[2]?Pg(c,a,c.template,a[8]):a[5]>0&&wl(a)}}function wl(i){for(let c=pr(i);null!==c;c=Hu(c))for(let l=10;l<c.length;l++){const f=c[l];if(ks(f))if(512&f[2]){const y=f[1];Pg(y,f,y.template,f[8])}else f[5]>0&&wl(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Ut(a[c],i);ks(l)&&l[5]>0&&wl(l)}}function fw(i,s){const a=Ut(s,i),c=a[1];(function jD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Ng(c,a,a[8])}function ur(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Ff(i){for(;i;){i[2]|=32;const s=$u(i);if(Nh(i)&&!s)return i;i=s}return null}function Uf(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Pg(i,s,i.template,a)}catch(y){throw c&&Jy(s,y),y}finally{l.end&&l.end()}}function Ss(i,s,a){ra(0),s(i,a)}function Yy(i){return i[7]||(i[7]=[])}function Qd(i){return i.cleanup||(i.cleanup=[])}function Jy(i,s){const a=i[9],c=a?a.get(pf,null):null;c&&c.handleError(s)}function jg(i,s,a,c,l){for(let f=0;f<a.length;){const y=a[f++],I=a[f++],E=s[y],T=i.data[y];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function Ua(i,s,a){const c=function ni(i,s){return En(s[i])}(s,i);!function Xn(i,s,a){i.setValue(s,a)}(i[11],c,a)}function $g(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const I=s[y];"number"==typeof I?f=I:1==f?l=fe(l,I):2==f&&(c=fe(c,I+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function qu(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(En(f)),Mr(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&qu(E[1],E,T,c)}const y=a.type;if(8&y)qu(i,s,a.child,c);else if(32&y){const I=Cy(a,s);let E;for(;E=I();)c.push(E)}else if(16&y){const I=Df(s,a);if(Array.isArray(I))c.push(...I);else{const E=$u(s[16]);qu(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class Il{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return qu(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Mr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(mg(s,c),Ni(a,c))}this._attachedToViewContainer=!1}O0(this._lView[1],this._lView)}onDestroy(s){Lg(this._lView[1],this._lView,null,s)}markForCheck(){Ff(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Uf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lD(i,s){zu(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class $D extends Il{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Uf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Hg extends p{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=St(s);return new Jd(a,this.ngModule)}}function Xy(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class HD{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,Bu,c);return l!==Bu||a===Bu?l:this.parentInjector.get(s,a,c)}}class Jd extends uf{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Fi(i){return i.map(yD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Xy(this.componentDef.inputs)}get outputs(){return Xy(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof Ts?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new HD(s,f):s,I=y.get(Oe,null);if(null===I)throw new we(407,!1);const E=y.get(ct,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",O=c?function Kd(i,s,a){return i.selectRootElement(s,a===it.ShadowDom)}(T,c,this.componentDef.encapsulation):Ef(I.createRenderer(null,this.componentDef),M,function gw(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),G=this.componentDef.onPush?288:272,ee=kg(0,null,null,1,0,null,null,null,null,null),ve=Rg(null,ee,null,G,null,null,I,T,E,y,null);let ke,Ge;du(ve);try{const et=function zD(i,s,a,c,l,f){const y=a[1];a[22]=i;const E=un(y,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&($g(E,T,!0),null!==i&&(po(l,i,T),null!==E.classes&&Cf(l,i,E.classes),null!==E.styles&&Li(l,i,E.styles)));const M=c.createRenderer(i,s),O=Rg(a,No(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return y.firstCreatePass&&(_s(js(E,a),y,s.type),Nt(y,E),Zd(E,a.length,1)),ur(a,O),a[22]=O}(O,this.componentDef,ve,I,T);if(O)if(c)po(T,O,["ng-version",Er.full]);else{const{attrs:gt,classes:Se}=function G0(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!Qs(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);gt&&po(T,O,gt),Se&&Se.length>0&&Cf(T,O,Se.join(" "))}if(Ge=ao(ee,22),void 0!==a){const gt=Ge.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const It=a[Se];gt.push(null!=It?Array.from(It):null)}}ke=function WD(i,s,a,c){const l=a[1],f=function cw(i,s,a){const c=Dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Yd(i,c,s,La(i,s,1,null),a),zt(i,c));const l=Qi(s,i,c.directiveStart,c);Dr(l,s);const f=Rr(c,s);return f&&Dr(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=Dn();s.contentQueries(1,f,I.directiveStart)}const y=Dn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(jr(y.index),Ky(a[1],y,0,y.directiveStart,y.directiveEnd,s),dw(s,f)),f}(et,this.componentDef,ve,[qD]),Ng(ee,ve,null)}finally{Fs()}return new Xd(this.componentType,ke,S(Ge,ve),ve,Ge)}}class Xd extends class Md{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new $D(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;jg(f[1],f,l,s,a),Fa(f,this._tNode.index)}}get injector(){return new Hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function qD(){const i=Dn();Uc(De()[1],i)}let Wg=null;function El(){if(!Wg){const i=rn.Symbol;if(i&&i.iterator)Wg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Wg=c)}}}return Wg}function Bf(i){return!!tv(i)&&(Array.isArray(i)||!(i instanceof Map)&&El()in i)}function tv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function hi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function nv(i,s,a,c){const l=De();return hi(l,Ls(),s)&&(kt(),Xs(dn(),l,i,s,a,c)),nv}function uv(i,s,a,c,l,f,y,I){const E=De(),T=kt(),M=i+22,O=T.firstCreatePass?function av(i,s,a,c,l,f,y,I,E){const T=s.consts,M=un(s,i,4,y||null,wi(T,I));_l(s,a,M,wi(T,E)),Uc(s,M);const O=M.tViews=kg(2,M,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),O.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,l,f,y):T.data[M];ri(O,!1);const G=E[11].createComment("");Sn(T,E,G,O),Dr(G,E),ur(E,E[M]=Zy(G,E,G,O)),_c(O)&&Og(T,E,O),null!=y&&Wu(E,O,I)}function ww(i){return Ki(function Ac(){return _t.lFrame.contextLView}(),22+i)}function Kg(i,s,a){const c=De();return hi(c,Ls(),s)&&function Bi(i,s,a,c,l,f,y,I){const E=Rr(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(jg(i,a,M,c,l),Ko(s)&&Fa(a,s.index)):3&s.type&&(c=function uw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=y?y(l,s.value||"",c):l,f.setProperty(E,c,l))}(kt(),dn(),c,i,s,c[11],a,!1),Kg}function Zg(i,s,a,c,l){const y=l?"class":"style";jg(i,a,s.inputs[y],y,c)}function tc(i,s,a,c){const l=De(),f=kt(),y=22+i,I=l[11],E=l[y]=Ef(I,s,function fu(){return _t.lFrame.currentNamespace}()),T=f.firstCreatePass?function Yg(i,s,a,c,l,f,y){const I=s.consts,T=un(s,i,2,l,wi(I,f));return _l(s,a,T,wi(I,y)),null!==T.attrs&&$g(T,T.attrs,!1),null!==T.mergedAttrs&&$g(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,f,l,0,s,a,c):f.data[y];ri(T,!0);const M=T.mergedAttrs;null!==M&&po(I,E,M);const O=T.classes;null!==O&&Cf(I,E,O);const G=T.styles;return null!==G&&Li(I,E,G),64!=(64&T.flags)&&Sn(f,l,E,T),0===function iu(){return _t.lFrame.elementDepthCount}()&&Dr(E,l),function su(){_t.lFrame.elementDepthCount++}(),_c(T)&&(Og(f,l,T),ow(f,T,l)),null!==c&&Wu(l,T),tc}function Lo(){let i=Dn();Jo()?Xo():(i=i.parent,ri(i,!1));const s=i;!function Cc(){_t.lFrame.elementDepthCount--}();const a=kt();return a.firstCreatePass&&(Uc(a,i),Za(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function mu(i){return 0!=(16&i.flags)}(s)&&Zg(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function sd(i){return 0!=(32&i.flags)}(s)&&Zg(a,s,De(),s.stylesWithoutHost,!1),Lo}function cv(i,s,a,c){return tc(i,s,a,c),Lo(),cv}function Qg(i,s,a){const c=De(),l=kt(),f=i+22,y=l.firstCreatePass?function Iw(i,s,a,c,l){const f=s.consts,y=wi(f,c),I=un(s,i,8,"ng-container",y);return null!==y&&$g(I,y,!0),_l(s,a,I,wi(f,l)),null!==s.queries&&s.queries.elementStart(s,I),I}(f,l,c,s,a):l.data[f];ri(y,!0);const I=c[f]=c[11].createComment("");return Sn(l,c,I,y),Dr(I,c),_c(y)&&(Og(l,c,y),ow(l,y,c)),null!=a&&Wu(c,y),Qg}function Jg(){let i=Dn();const s=kt();return Jo()?Xo():(i=i.parent,ri(i,!1)),s.firstCreatePass&&(Uc(s,i),Za(i)&&s.queries.elementEnd(i)),Jg}function nh(){return De()}function Va(i){return!!i&&"function"==typeof i.then}function nc(i){return!!i&&"function"==typeof i.subscribe}const lv=nc;function dv(i,s,a,c){const l=De(),f=kt(),y=Dn();return function Hf(i,s,a,c,l,f,y,I){const E=_c(c),M=i.firstCreatePass&&Qd(i),O=s[8],G=Yy(s);let ee=!0;if(3&c.type||I){const Ge=Rr(c,s),et=I?I(Ge):Ge,gt=G.length,Se=I?Xt=>I(En(Xt[c.index])):c.index;let It=null;if(!I&&E&&(It=function hv(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof y&&(f+=2)}return null}(i,s,l,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=f,It.__ngLastListenerFn__=f,ee=!1;else{f=fv(c,s,O,f,!1);const Xt=a.listen(et,l,f);G.push(f,Xt),M&&M.push(l,Se,gt,gt+1)}}else f=fv(c,s,O,f,!1);const ve=c.outputs;let ke;if(ee&&null!==ve&&(ke=ve[l])){const Ge=ke.length;if(Ge)for(let et=0;et<Ge;et+=2){const xn=s[ke[et]][ke[et+1]].subscribe(f),fc=G.length;G.push(f,xn),M&&M.push(l,c.index,fc,-(fc+1))}}}(f,l,l[11],y,i,s,0,c),dv}function bw(i,s,a,c){try{return!1!==a(c)}catch(l){return Jy(i,l),!1}}function fv(i,s,a,c,l){return function f(y){if(y===Function)return c;Ff(2&i.flags?Ut(i.index,s):s);let E=bw(s,0,c,y),T=f.__ngNextListenerFn__;for(;T;)E=bw(s,0,T,y)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function rh(i=1){return function Us(i){return(_t.lFrame.contextLView=function hu(i,s){for(;i>0;)s=s[15],i--;return s}(i,_t.lFrame.contextLView))[8]}(i)}function rm(i,s=""){const a=De(),c=kt(),l=i+22,f=c.firstCreatePass?un(c,l,1,s,null):c.data[l],y=a[l]=function Me(i,s){return i.createText(s)}(a[11],s);Sn(c,a,y,f),ri(f,!1)}function Tv(i){return Qf("",i,""),Tv}function Qf(i,s,a){const c=De(),l=function Cl(i,s,a,c){return hi(i,Ls(),a)?s+me(a)+c:wt}(c,i,s,a);return l!==wt&&Ua(c,Yn(),l),Qf}const Rl=void 0;var tp=["en",[["a","p"],["AM","PM"],Rl],[["AM","PM"],Rl,Rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rl,"{1} 'at' {0}",Rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ab(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let ic={};function rp(i){const s=function Uv(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=um(s);if(a)return a;const c=s.split("-")[0];if(a=um(c),a)return a;if("en"===c)return tp;throw new we(701,!1)}function uh(i){return rp(i)[pt.PluralCase]}function um(i){return i in ic||(ic[i]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[i]),ic[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const ch="en-US";let ip=ch;class ac{}class DI{}function s_(i,s){return new wm(i,s??null)}class wm extends ac{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hg(this);const c=xr(s);this._bootstrapComponents=So(c.bootstrap),this._r3Injector=Gn(s,a,[{provide:ac,useValue:this},{provide:p,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class o_ extends DI{constructor(s){super(),this.moduleType=s}create(s){return new wm(this.moduleType,s)}}class CI extends ac{constructor(s,a,c){super(),this.componentFactoryResolver=new Hg(this),this.instance=null;const l=new ba([...s,{provide:ac,useValue:this},{provide:p,useValue:this.componentFactoryResolver}],a||il(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Im(i,s,a=null){return new CI(i,s,a).injector}let Sb=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Fu(0,a.type),l=c.length>0?Im([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=qt({token:i,providedIn:"environment",factory:()=>new i(vn(Ts))}),i})();function Em(i){i.getStandaloneInjector=s=>s.get(Sb).getOrCreateStandaloneInjector(i)}function kI(i,s,a,c,l,f){const y=s+a;return hi(i,y,l)?function ko(i,s,a){return i[s]=a}(i,y+1,f?c.call(f,l):c(l)):function dp(i,s){const a=i[s];return a===wt?void 0:a}(i,y+1)}function g_(i,s){const a=kt();let c;const l=i+22;a.firstCreatePass?(c=function Am(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[l]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(l,c.onDestroy)):c=a.data[l];const f=c.factory||(c.factory=xi(c.type)),y=Rn(nn);try{const I=aa(!1),E=f();return aa(I),function _w(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,De(),l,E),E}finally{Rn(y)}}function m_(i,s,a){const c=i+22,l=De(),f=Ki(l,c);return function gr(i,s){return i[1].data[s].pure}(l,c)?kI(l,function bn(){const i=_t.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,f.transform,a,f):f.transform(a)}function xm(i){return s=>{setTimeout(i,void 0,s)}}const Bo=class Vo extends v.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(f=xm(f),l&&(l=xm(l)),y&&(y=xm(y)));const I=super.subscribe({next:l,error:f,complete:y});return s instanceof X.w0&&s.add(I),I}};function Mm(){return this._results[El()]()}class Rm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=El(),c=Rm.prototype;c[a]||(c[a]=Mm)}get changes(){return this._changes||(this._changes=new Bo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Hr(s);(this._changesDetected=!function Xi(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let yh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ub,i})();const Fb=yh,y_=class extends Fb{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Rg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(c)),Ng(c,l,s),new Il(l)}};function Ub(){return Nm(Dn(),De())}function Nm(i,s){return 4&i.type?new y_(s,i,S(i,s)):null}let mn=(()=>{class i{}return i.__NG_ELEMENT_ID__=mT,i})();function mT(){return FI(Dn(),De())}const yT=mn,cr=class extends yT{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return S(this._hostTNode,this._hostLView)}get injector(){return new Hs(this._hostTNode,this._hostLView)}get parentInjector(){const s=wu(this._hostTNode,this._hostLView);if(ad(s)){const a=oa(s,this._hostLView),c=sr(s);return new Hs(a[1].data[c+8],a)}return new Hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=v_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const y=s.createEmbeddedView(a||{},f);return this.insert(y,l),y}createComponent(s,a,c,l,f){const y=s&&!function On(i){return"function"==typeof i}(s);let I;if(y)I=a;else{const O=a||{};I=O.index,c=O.injector,l=O.projectableNodes,f=O.environmentInjector||O.ngModuleRef}const E=y?s:new Jd(St(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const G=(y?T:this.parentInjector).get(Ts,null);G&&(f=G)}const M=E.create(T,l,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,l=c[1];if(function tu(i){return Mr(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const O=c[3],G=new cr(O,O[6],O[3]);G.detach(G.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function le(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],an(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function xe(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,y,f);const I=bf(f,y),E=c[11],T=Sa(E,y[7]);return null!==T&&function Et(i,s,a,c,l,f){c[0]=l,c[6]=s,zu(i,c,a,1,l,f)}(l,y[6],E,c,T,I),s.attachToViewContainerRef(),an(__(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=v_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=mg(this._lContainer,a);c&&(Ni(__(this._lContainer),a),O0(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=mg(this._lContainer,a);return c&&null!=Ni(__(this._lContainer),a)?new Il(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function v_(i){return i[8]}function __(i){return i[8]||(i[8]=[])}function FI(i,s){let a;const c=s[i.index];if(Mr(c))a=c;else{let l;if(8&i.type)l=En(c);else{const f=s[11];l=f.createComment("");const y=Rr(i,s);hl(f,Sa(f,y),l,function U0(i,s){return i.nextSibling(s)}(f,y),!1)}s[i.index]=a=Zy(c,s,l,i),ur(s,a)}return new cr(a,i,s)}class w_{constructor(s){this.queryList=s,this.matches=null}clone(){return new w_(this.queryList)}setDirty(){this.queryList.setDirty()}}class I_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new I_(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==_h(s,a).matches&&this.queries[a].setDirty()}}class Bb{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class E_{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new E_(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class D_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new D_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,VI(a,f)),this.matchTNodeWithReadOption(s,a,go(a,s,f,!1,!1))}else c===yh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,go(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===R||l===mn||l===yh&&4&a.type)this.addMatch(a.index,-2);else{const f=go(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function VI(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function _T(i,s,a,c){return-1===a?function Ha(i,s){return 11&i.type?S(i,s):4&i.type?Nm(i,s):null}(s,i):-2===a?function jo(i,s,a){return a===R?S(s,i):a===yh?Nm(s,i):a===mn?FI(s,i):void 0}(i,s,c):Qi(i,i[1],a,s)}function uc(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,y=a.matches,I=[];for(let E=0;E<y.length;E+=2){const T=y[E];I.push(T<0?null:_T(s,f[T],y[E+1],a.metadata.read))}l.matches=I}return l.matches}function vh(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const y=uc(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(y[I/2]);else{const T=f[I+1],M=s[-E];for(let O=10;O<M.length;O++){const G=M[O];G[17]===G[3]&&vh(G[1],G,T,c)}if(null!==M[9]){const O=M[9];for(let G=0;G<O.length;G++){const ee=O[G];vh(ee[1],ee,T,c)}}}}}return c}function BI(i){const s=De(),a=kt(),c=Rc();ra(c+1);const l=_h(a,c);if(i.dirty&&function eu(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?vh(a,s,c,[]):uc(a,s,l,c);i.reset(f,q),i.notifyOnChanges()}return!0}return!1}function b_(i,s,a,c){const l=kt();if(l.firstCreatePass){const f=Dn();(function cc(i,s,a){null===i.queries&&(i.queries=new E_),i.queries.track(new D_(s,a))})(l,new Bb(s,a,c),f.index),function Om(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function jI(i,s,a){const c=new Rm(4==(4&a));Lg(i,s,c,c.destroy),null===s[19]&&(s[19]=new I_),s[19].queries.push(new w_(c))}(l,De(),a)}function C_(){return function Pm(i,s){return i[19].queries[s].queryList}(De(),Rc())}function _h(i,s){return i.queries.getByIndex(s)}function Vm(...i){}const O_=new on("Application Initializer");let Bm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Vm,this.reject=Vm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Va(f))a.push(f);else if(lv(f)){const y=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(vn(O_,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const $l=new on("AppId",{providedIn:"root",factory:function jm(){return`${k_()}${k_()}${k_()}`}});function k_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rE=new on("Platform Initializer"),Xb=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),iE=new on("appBootstrapListener");let RT=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const yp=new on("LocaleId",{providedIn:"root",factory:()=>D(yp,Ke.Optional|Ke.SkipSelf)||function NT(){return typeof $localize<"u"&&$localize.locale||ch}()}),eC=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class oE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let vp=(()=>{class i{compileModuleSync(a){return new o_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=So(xr(a).declarations).reduce((y,I)=>{const E=St(I);return E&&y.push(new Jd(E)),y},[]);return new oE(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const aE=(()=>Promise.resolve(0))();function Wa(i){typeof Zone>"u"?aE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class In{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bo(!1),this.onMicrotaskEmpty=new Bo(!1),this.onStable=new Bo(!1),this.onError=new Bo(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function xs(){let i=rn.requestAnimationFrame,s=rn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Ip(i){const s=()=>{!function wp(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Zr(i),i.isCheckStableRunning=!0,$m(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Zr(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,y,I)=>{try{return cE(i),a.invokeTask(l,f,y,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Hm(i)}},onInvoke:(a,c,l,f,y,I,E)=>{try{return cE(i),a.invoke(l,f,y,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Hm(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Zr(i),$m(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!In.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(In.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,s,uE,Vm,Vm);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const uE={};function $m(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Zr(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function cE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Hm(i){i._nesting--,$m(i)}class Dh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bo,this.onMicrotaskEmpty=new Bo,this.onStable=new Bo,this.onError=new Bo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const dc=new on(""),Gm=new on("");let U_,Hl=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,U_||(function rC(i){U_=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{In.assertNotInAngularZone(),Wa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wa(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(vn(In),vn(lE),vn(Gm))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),lE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return U_?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),pi=null;const dE=new on("AllowMultipleToken"),bh=new on("PlatformDestroyListeners");class sC{constructor(s,a){this.name=s,this.token=a}}function B_(i,s,a=[]){const c=`Platform: ${s}`,l=new on(c);return(f=[])=>{let y=zm();if(!y||y.injector.get(dE,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function hE(i){if(pi&&!pi.get(dE,!1))throw new we(400,!1);pi=i;const s=i.get(Wm);(function Ep(i){const s=i.get(rE,null);s&&s.forEach(a=>a())})(i)}(function Ho(i=[],s){return ss.create({name:s,providers:[{provide:xd,useValue:"platform"},{provide:bh,useValue:new Set([()=>pi=null])},...i]})}(I,c))}return function aC(i){const s=zm();if(!s)throw new we(401,!1);return s}()}}function zm(){return pi?.get(Wm)??null}let Wm=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function Dp(i,s){let a;return a="noop"===i?new Dh:("zone.js"===i?void 0:i)||new In(s),a}(c?.ngZone,function j_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:In,useValue:l}];return l.run(()=>{const y=ss.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(y),E=I.injector.get(pf,null);if(!E)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{Ch(this._modules,I),T.unsubscribe()})}),function pE(i,s,a){try{const c=a();return Va(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get(Bm);return T.runInitializers(),T.donePromise.then(()=>(function lm(i){Ft(i,"Expected localeId to be defined"),"string"==typeof i&&(ip=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(yp,ch)||ch),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=uC({},c);return function kr(i,s,a){const c=new o_(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(qm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(bh,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(vn(ss))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function uC(i,s){return Array.isArray(s)?s.reduce(uC,i):{...i,...s}}let qm=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new P.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{In.assertNotInAngularZone(),Wa(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{In.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(f,y.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof uf;if(!this._injector.get(Bm).done)throw!l&&Si(a),new we(405,false);let y;y=l?a:this._injector.get(p).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const I=function iC(i){return i.isBoundToModule}(y)?void 0:this._injector.get(ac),T=y.create(ss.NULL,[],c||y.selector,I),M=T.location.nativeElement,O=T.injector.get(dc,null);return O?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),Ch(this.components,T),O?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Ch(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(iE,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ch(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(vn(In),vn(Ts),vn(pf))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ch(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let gE=!0,mE=!1;function UT(){return mE=!0,gE}function VT(){if(mE)throw new Error("Cannot enable prod mode after platform setup.");gE=!1}let BT=(()=>{class i{}return i.__NG_ELEMENT_ID__=jT,i})();function jT(i){return function $T(i,s,a){if(Ko(i)&&!a){const c=Ut(i.index,s);return new Il(c,c)}return 47&i.type?new Il(s[16],s):null}(Dn(),De(),16==(16&i))}class EE{constructor(){}supports(s){return Bf(s)}create(s){return new mC(s)}}const gC=(i,s)=>s;class mC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||gC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<z_(c,l,f)?a:c,I=z_(y,l,f),E=y.currentIndex;if(y===c)l--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)l++;else{f||(f=[]);const T=I-l,M=E-l;if(T!=M){for(let G=0;G<T;G++){const ee=G<f.length?f[G]:f[G]=0,ve=ee+G;M<=ve&&ve<T&&(f[G]=ee+1)}f[y.previousIndex]=M-T}}I!==E&&s(y,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Bf(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],y=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,I),c=!0),a=a._next}else l=0,function JD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[El()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{y=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,I,y,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,y,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new yC(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ah),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ah),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class yC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Ah{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new vC,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function z_(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class Cp{constructor(){}supports(s){return s instanceof Map||tv(s)}create(){return new DE}}class DE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||tv(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const c=new _C(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class _C{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bE(){return new W_([new EE])}let W_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||bE()),deps:[[i,new ht,new je]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:bE}),i})();function q_(){return new Tp([new Cp])}let Tp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||q_()),deps:[[i,new ht,new je]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:q_}),i})();const IC=B_(null,"core",[]);let Z_=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(vn(qm))},i.\u0275mod=rt({type:i}),i.\u0275inj=Rt({}),i})();function TE(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,Ce,k)=>{k.d(Ce,{Z:()=>we});var v=k(2090),X=k(4859),P=k(9681),oe=k(1877);class re{constructor(me,pe){this._delegate=me,this.firebase=pe,(0,P._addComponent)(me,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(me,pe=P._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(me);return!nt.isInitialized()&&"EXPLICIT"===(null===(Qe=nt.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:pe})}_removeServiceInstance(me,pe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(pe)}_addComponent(me){(0,P._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,P._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function fe(){const Xe=function de(Xe){const me={},pe={__esModule:!0,initializeApp:function Te(Be,U={}){const ge=P.initializeApp(Be,U);if((0,v.r3)(me,ge.name))return me[ge.name];const Z=new Xe(ge,pe);return me[ge.name]=Z,Z},app:nt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Be){const U=Be.name,ge=U.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const Z=(J=nt())=>{if("function"!=typeof J[ge])throw ue.create("invalid-app-argument",{appName:U});return J[ge]()};void 0!==Be.serviceProps&&(0,v.ZB)(Z,Be.serviceProps),pe[ge]=Z,Xe.prototype[ge]=function(...J){return this._getService.bind(this,U).apply(this,Be.multipleInstances?J:[])}}return"PUBLIC"===Be.type?pe[ge]:null},removeApp:function Qe(Be){delete me[Be]},useAsService:function Ve(Be,U){return"serverAuth"===U?null:U},modularAPIs:P}};function nt(Be){if(!(0,v.r3)(me,Be=Be||P._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Be});return me[Be]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function _e(){return Object.keys(me).map(Be=>me[Be])}}),nt.App=Xe,pe}(re);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function me(pe){(0,v.ZB)(Xe,pe)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),Xe}(),B=new oe.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=V;!function Ae(Xe){(0,P.registerVersion)("@firebase/app-compat","0.1.34",Xe)}()},9681:(ot,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ls,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>qt,_apps:()=>en,_clearComponents:()=>Wo,_components:()=>Mn,_getProvider:()=>Rt,_registerComponent:()=>Sr,_removeServiceInstance:()=>Jt,deleteApp:()=>io,getApp:()=>Ur,getApps:()=>gi,initializeApp:()=>Ti,onLog:()=>$i,registerVersion:()=>Vr,setLogLevel:()=>Rn});var v=k(5861),X=k(4859),P=k(1877),oe=k(2090),re=k(8766);class he{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function ue(F){return"VERSION"===F.getComponent()?.type}(z)){const Ee=z.getImmediate();return`${Ee.library}/${Ee.version}`}return null}).filter(z=>z).join(" ")}}const de="@firebase/app",V=new P.Yd("@firebase/app"),Ft="[DEFAULT]",ze={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,Mn=new Map;function Wt(F,$){try{F.container.addComponent($)}catch(z){V.debug(`Component ${$.name} failed to register with FirebaseApp ${F.name}`,z)}}function qt(F,$){F.container.addOrOverwriteComponent($)}function Sr(F){const $=F.name;if(Mn.has($))return V.debug(`There were multiple attempts to register component ${$}.`),!1;Mn.set($,F);for(const z of en.values())Wt(z,F);return!0}function Rt(F,$){const z=F.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),F.container.getProvider($)}function Jt(F,$,z=Ft){Rt(F,$).clearInstance(z)}function Wo(){Mn.clear()}const mr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fr{constructor($,z,Ee){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=Ee,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const ls="9.10.0";function Ti(F,$={}){"object"!=typeof $&&($={name:$});const z=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},$),Ee=z.name;if("string"!=typeof Ee||!Ee)throw mr.create("bad-app-name",{appName:String(Ee)});const Ue=en.get(Ee);if(Ue){if((0,oe.vZ)(F,Ue.options)&&(0,oe.vZ)(z,Ue.config))return Ue;throw mr.create("duplicate-app",{appName:Ee})}const rt=new X.H0(Ee);for(const Zt of Mn.values())rt.addComponent(Zt);const sn=new Fr(F,z,rt);return en.set(Ee,sn),sn}function Ur(F=Ft){const $=en.get(F);if(!$)throw mr.create("no-app",{appName:F});return $}function gi(){return Array.from(en.values())}function io(F){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,v.Z)(function*(F){const $=F.name;en.has($)&&(en.delete($),yield Promise.all(F.container.getProviders().map(z=>z.delete())),F.isDeleted=!0)})).apply(this,arguments)}function Vr(F,$,z){var Ee;let Ue=null!==(Ee=ze[F])&&void 0!==Ee?Ee:F;z&&(Ue+=`-${z}`);const rt=Ue.match(/\s|\//),sn=$.match(/\s|\//);if(rt||sn){const Zt=[`Unable to register library "${Ue}" with version "${$}":`];return rt&&Zt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),rt&&sn&&Zt.push("and"),sn&&Zt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void V.warn(Zt.join(" "))}Sr(new X.wA(`${Ue}-version`,()=>({library:Ue,version:$}),"VERSION"))}function $i(F,$){if(null!==F&&"function"!=typeof F)throw mr.create("invalid-log-argument");(0,P.Am)(F,$)}function Rn(F){(0,P.Ub)(F)}const Nn="firebase-heartbeat-store";let Wn=null;function cn(){return Wn||(Wn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(F,$)=>{0===$&&F.createObjectStore(Nn)}}).catch(F=>{throw mr.create("idb-open",{originalErrorMessage:F.message})})),Wn}function it(){return(it=(0,v.Z)(function*(F){var $;try{return(yield cn()).transaction(Nn).objectStore(Nn).get(nr(F))}catch(z){if(z instanceof oe.ZR)V.warn(z.message);else{const Ee=mr.create("idb-get",{originalErrorMessage:null===($=z)||void 0===$?void 0:$.message});V.warn(Ee.message)}}})).apply(this,arguments)}function rn(F,$){return tr.apply(this,arguments)}function tr(){return(tr=(0,v.Z)(function*(F,$){var z;try{const Ue=(yield cn()).transaction(Nn,"readwrite");return yield Ue.objectStore(Nn).put($,nr(F)),Ue.done}catch(Ee){if(Ee instanceof oe.ZR)V.warn(Ee.message);else{const Ue=mr.create("idb-set",{originalErrorMessage:null===(z=Ee)||void 0===z?void 0:z.message});V.warn(Ue.message)}}})).apply(this,arguments)}function nr(F){return`${F.name}!${F.options.appId}`}class Hi{constructor($){this.container=$,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new Gt(z),this._heartbeatsCachePromise=this._storage.read().then(Ee=>(this._heartbeatsCache=Ee,Ee))}triggerHeartbeat(){var $=this;return(0,v.Z)(function*(){const Ee=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=Kt();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!$._heartbeatsCache.heartbeats.some(rt=>rt.date===Ue))return $._heartbeatsCache.heartbeats.push({date:Ue,agent:Ee}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(rt=>{const sn=new Date(rt.date).valueOf();return Date.now()-sn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,v.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const z=Kt(),{heartbeatsToSend:Ee,unsentEntries:Ue}=function yi(F,$=1024){const z=[];let Ee=F.slice();for(const Ue of F){const rt=z.find(sn=>sn.agent===Ue.agent);if(rt){if(rt.dates.push(Ue.date),W(z)>$){rt.dates.pop();break}}else if(z.push({agent:Ue.agent,dates:[Ue.date]}),W(z)>$){z.pop();break}Ee=Ee.slice(1)}return{heartbeatsToSend:z,unsentEntries:Ee}}($._heartbeatsCache.heartbeats),rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ee}));return $._heartbeatsCache.lastSentHeartbeatDate=z,Ue.length>0?($._heartbeatsCache.heartbeats=Ue,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),rt})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class Gt{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,v.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function lt(F){return it.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var z=this;return(0,v.Z)(function*(){var Ee;if(yield z._canUseIndexedDBPromise){const rt=yield z.read();return rn(z.app,{lastSentHeartbeatDate:null!==(Ee=$.lastSentHeartbeatDate)&&void 0!==Ee?Ee:rt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var z=this;return(0,v.Z)(function*(){var Ee;if(yield z._canUseIndexedDBPromise){const rt=yield z.read();return rn(z.app,{lastSentHeartbeatDate:null!==(Ee=$.lastSentHeartbeatDate)&&void 0!==Ee?Ee:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...$.heartbeats]})}})()}}function W(F){return(0,oe.L)(JSON.stringify({version:2,heartbeats:F})).length}!function j(F){Sr(new X.wA("platform-logger",$=>new he($),"PRIVATE")),Sr(new X.wA("heartbeat",$=>new Hi($),"PRIVATE")),Vr(de,"0.7.33",F),Vr(de,"0.7.33","esm2017"),Vr("fire-js","")}("")},4859:(ot,Ce,k)=>{k.d(Ce,{H0:()=>de,wA:()=>P});var v=k(5861),X=k(2090);class P{constructor(V,B,Y){this.name=V,this.instanceFactory=B,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const oe="[DEFAULT]";class re{constructor(V,B){this.name=V,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const B=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(B)){const Y=new X.BH;if(this.instancesDeferred.set(B,Y),this.isInitialized(B)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:B});Fe&&Y.resolve(Fe)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(V){var B;const Y=this.normalizeInstanceIdentifier(V?.identifier),Fe=null!==(B=V?.optional)&&void 0!==B&&B;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Ae){if(Fe)return null;throw Ae}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function ue(fe){return"EAGER"===fe.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[B,Y]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(B);try{const Ae=this.getOrInitializeService({instanceIdentifier:Fe});Y.resolve(Ae)}catch{}}}}clearInstance(V=oe){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,v.Z)(function*(){const B=Array.from(V.instances.values());yield Promise.all([...B.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...B.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=oe){return this.instances.has(V)}getOptions(V=oe){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:B={}}=V,Y=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:Y,options:B});for(const[Ae,we]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Ae)&&we.resolve(Fe);return Fe}onInit(V,B){var Y;const Fe=this.normalizeInstanceIdentifier(B),Ae=null!==(Y=this.onInitCallbacks.get(Fe))&&void 0!==Y?Y:new Set;Ae.add(V),this.onInitCallbacks.set(Fe,Ae);const we=this.instances.get(Fe);return we&&V(we,Fe),()=>{Ae.delete(V)}}invokeOnInitCallbacks(V,B){const Y=this.onInitCallbacks.get(B);if(Y)for(const Fe of Y)try{Fe(V,B)}catch{}}getOrInitializeService({instanceIdentifier:V,options:B={}}){let Y=this.instances.get(V);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=V,fe===oe?void 0:fe),options:B}),this.instances.set(V,Y),this.instancesOptions.set(V,B),this.invokeOnInitCallbacks(Y,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,Y)}catch{}var fe;return Y||null}normalizeInstanceIdentifier(V=oe){return this.component?this.component.multipleInstances?V:oe:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const B=this.getProvider(V.name);if(B.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);B.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const B=new re(V,this);return this.providers.set(V,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Ce,k)=>{k.d(Ce,{Am:()=>fe,Ub:()=>de,Yd:()=>ue,in:()=>X});const v=[];var X=(()=>{return(V=X||(X={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",X;var V})();const P={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},oe=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},he=(V,B,...Y)=>{if(B<V.logLevel)return;const Fe=(new Date).toISOString(),Ae=re[B];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ae](`[${Fe}]  ${V.name}:`,...Y)};class ue{constructor(B){this.name=B,this._logLevel=oe,this._logHandler=he,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function de(V){v.forEach(B=>{B.setLogLevel(V)})}function fe(V,B){for(const Y of v){let Fe=null;B&&B.level&&(Fe=P[B.level]),Y.userLogHandler=null===V?null:(Ae,we,...Xe)=>{const me=Xe.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");we>=(Fe??Ae.logLevel)&&V({level:X[we].toLowerCase(),message:me,args:Xe,type:Ae.name})}}}},8766:(ot,Ce,k)=>{k.d(Ce,{Lj:()=>Te,X3:()=>nt});var v=k(5861);let P,oe;const ue=new WeakMap,de=new WeakMap,fe=new WeakMap,V=new WeakMap,B=new WeakMap;let Ae={get(U,ge,Z){if(U instanceof IDBTransaction){if("done"===ge)return de.get(U);if("objectStoreNames"===ge)return U.objectStoreNames||fe.get(U);if("store"===ge)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return pe(U[ge])},set:(U,ge,Z)=>(U[ge]=Z,!0),has:(U,ge)=>U instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in U};function me(U){return"function"==typeof U?function Xe(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ge){return U.apply(Qe(this),ge),pe(ue.get(this))}:function(...ge){return pe(U.apply(Qe(this),ge))}:function(ge,...Z){const J=U.call(Qe(this),ge,...Z);return fe.set(J,ge.sort?ge.sort():[ge]),pe(J)}}(U):(U instanceof IDBTransaction&&function Fe(U){if(de.has(U))return;const ge=new Promise((Z,J)=>{const ie=()=>{U.removeEventListener("complete",te),U.removeEventListener("error",Pe),U.removeEventListener("abort",Pe)},te=()=>{Z(),ie()},Pe=()=>{J(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",te),U.addEventListener("error",Pe),U.addEventListener("abort",Pe)});de.set(U,ge)}(U),((U,ge)=>ge.some(Z=>U instanceof Z))(U,function re(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Ae):U)}function pe(U){if(U instanceof IDBRequest)return function Y(U){const ge=new Promise((Z,J)=>{const ie=()=>{U.removeEventListener("success",te),U.removeEventListener("error",Pe)},te=()=>{Z(pe(U.result)),ie()},Pe=()=>{J(U.error),ie()};U.addEventListener("success",te),U.addEventListener("error",Pe)});return ge.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,U)}).catch(()=>{}),B.set(ge,U),ge}(U);if(V.has(U))return V.get(U);const ge=me(U);return ge!==U&&(V.set(U,ge),B.set(ge,U)),ge}const Qe=U=>B.get(U);function nt(U,ge,{blocked:Z,upgrade:J,blocking:ie,terminated:te}={}){const Pe=indexedDB.open(U,ge),Ne=pe(Pe);return J&&Pe.addEventListener("upgradeneeded",ut=>{J(pe(Pe.result),ut.oldVersion,ut.newVersion,pe(Pe.transaction))}),Z&&Pe.addEventListener("blocked",()=>Z()),Ne.then(ut=>{te&&ut.addEventListener("close",()=>te()),ie&&ut.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Ne}function Te(U,{blocked:ge}={}){const Z=indexedDB.deleteDatabase(U);return ge&&Z.addEventListener("blocked",()=>ge()),pe(Z).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ve=new Map;function Be(U,ge){if(!(U instanceof IDBDatabase)||ge in U||"string"!=typeof ge)return;if(Ve.get(ge))return Ve.get(ge);const Z=ge.replace(/FromIndex$/,""),J=ge!==Z,ie=Ie.includes(Z);if(!(Z in(J?IDBIndex:IDBObjectStore).prototype)||!ie&&!_e.includes(Z))return;const te=function(){var Pe=(0,v.Z)(function*(Ne,...ut){const Bt=this.transaction(Ne,ie?"readwrite":"readonly");let Ft=Bt.store;return J&&(Ft=Ft.index(ut.shift())),(yield Promise.all([Ft[Z](...ut),ie&&Bt.done]))[0]});return function(ut){return Pe.apply(this,arguments)}}();return Ve.set(ge,te),te}!function we(U){Ae=U(Ae)}(U=>({...U,get:(ge,Z,J)=>Be(ge,Z)||U.get(ge,Z,J),has:(ge,Z)=>!!Be(ge,Z)||U.has(ge,Z)}))},5861:(ot,Ce,k)=>{function v(P,oe,re,he,ue,de,fe){try{var V=P[de](fe),B=V.value}catch(Y){return void re(Y)}V.done?oe(B):Promise.resolve(B).then(he,ue)}function X(P){return function(){var oe=this,re=arguments;return new Promise(function(he,ue){var de=P.apply(oe,re);function fe(B){v(de,he,ue,fe,V,"next",B)}function V(B){v(de,he,ue,fe,V,"throw",B)}fe(void 0)})}}k.d(Ce,{Z:()=>X})}},ot=>{ot(ot.s=638)}]);