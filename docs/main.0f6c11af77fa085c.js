"use strict";(self.webpackChunkcertifications_gallery=self.webpackChunkcertifications_gallery||[]).push([[179],{2011:(ot,Ce,O)=>{O.d(Ce,{Dh:()=>he,GT:()=>fe,cc:()=>Me,hO:()=>Fe,on:()=>B,pX:()=>re,xv:()=>pe});var m=O(4650),te=O(127),P=O(5813);ot=O.hmd(ot);const oe=["ngOnDestroy"],re=(ge,Je,nt,Ae={})=>new Proxy(ge,{get:(_e,De)=>nt.runOutsideAngular(()=>{var Ve;if(ge[De])return!(null===(Ve=Ae?.spy)||void 0===Ve)&&Ve.get&&Ae.spy.get(De,ge[De]),ge[De];if(oe.indexOf(De)>-1)return()=>{};const Be=Je.toPromise().then(V=>{const me=V&&V[De];return"function"==typeof me?me.bind(V):me&&me.then?me.then(Y=>nt.run(()=>Y)):nt.run(()=>me)});return new Proxy(()=>{},{get:(V,me)=>Be[me],apply:(V,me,Y)=>Be.then(X=>{var ie;const ne=X&&X(...Y);return!(null===(ie=Ae?.spy)||void 0===ie)&&ie.apply&&Ae.spy.apply(De,Y,ne),ne})})})}),fe=(ge,Je)=>{Je.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Ae=>{Object.defineProperty(ge.prototype,Ae,Object.getOwnPropertyDescriptor(nt.prototype||nt,Ae))})})};class le{constructor(Je){return Je}}const he=new m.OlP("angularfire2.app.options"),pe=new m.OlP("angularfire2.app.name");function B(ge,Je,nt){const _e="object"==typeof nt&&nt||{};_e.name=_e.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ve=te.Z.apps.filter(Be=>Be&&Be.name===_e.name)[0]||Je.runOutsideAngular(()=>te.Z.initializeApp(ge,_e));try{JSON.stringify(ge)!==JSON.stringify(Ve.options)&&j("error",`${Ve.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ve)}const j=(ge,...Je)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Je)},Q={provide:le,useFactory:B,deps:[he,m.R0b,[new m.FiY,pe]]};let Fe=(()=>{class ge{constructor(nt){te.Z.registerVersion("angularfire",P.q4.full,"core"),te.Z.registerVersion("angularfire",P.q4.full,"app-compat"),te.Z.registerVersion("angular",m.q4F.full,nt.toString())}static initializeApp(nt,Ae){return{ngModule:ge,providers:[{provide:he,useValue:nt},{provide:pe,useValue:Ae}]}}}return ge.\u0275fac=function(nt){return new(nt||ge)(m.LFG(m.Lbi))},ge.\u0275mod=m.oAB({type:ge}),ge.\u0275inj=m.cJS({providers:[Q]}),ge})();function Me(ge,Je,nt,Ae,_e){const[,De,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===ge)||[];if(De)return function Ee(ge,Je){try{return ge.toString()===Je.toString()}catch{return ge===Je}}(_e,Ve)||(ye("error",`${Je} was already initialized on the ${nt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:_e,was:Ve})),De;{const Be=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ge,Be,_e]),Be}}const Xe=!!ot.hot,ye=(ge,...Je)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Ce,O)=>{O.d(Ce,{q4:()=>Yr,iC:()=>Ns,HU:()=>Fu,vb:()=>Fo,JM:()=>xa});var m=O(4650),te=O(5867),P=O(5861),oe=O(9681),re=O(2090),fe=O(4859),le=O(1877),he=O(8766);const pe="@firebase/installations",B="0.5.12",Q=`w:${B}`,Fe="FIS_v2",Je=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function Ae({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function _e(b){return{token:b.token,requestStatus:2,expiresIn:X(b.expiresIn),creationTime:Date.now()}}function De(b,T){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(b,T){const L=(yield T.json()).error;return Je.create("request-failed",{requestName:b,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Be({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function V(b,{refreshToken:T}){const M=Be(b);return M.append("Authorization",function ie(b){return`${Fe} ${b}`}(T)),M}function me(b){return Y.apply(this,arguments)}function Y(){return(Y=(0,P.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function X(b){return Number(b.replace("s","000"))}function ne(b,T){return ke.apply(this,arguments)}function ke(){return(ke=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const L=Ae(b),J=Be(b),ae=T.getImmediate({optional:!0});if(ae){const _t=yield ae.getHeartbeatsHeader();_t&&J.append("x-firebase-client",_t)}const je={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:Fe,appId:b.appId,sdkVersion:Q})},dt=yield me(()=>fetch(L,je));if(dt.ok){const _t=yield dt.json();return{fid:_t.fid||M,registrationStatus:2,refreshToken:_t.refreshToken,authToken:_e(_t.authToken)}}throw yield De("Create Installation",dt)})).apply(this,arguments)}function Ne(b){return new Promise(T=>{setTimeout(T,b)})}const Ht=/^[cdef][\w-]{21}$/;function ze(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function nn(b){return function ct(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Ht.test(M)?M:""}catch{return""}}function An(b){return`${b.appName}!${b.appId}`}const Kt=new Map;function Zt(b,T){const M=An(b);en(M,T),function sa(b,T){const M=function hr(){return!Nr&&"BroadcastChannel"in self&&(Nr=new BroadcastChannel("[Firebase] FID Change"),Nr.onmessage=b=>{en(b.data.key,b.data.fid)}),Nr}();M&&M.postMessage({key:b,fid:T}),function Pr(){0===Kt.size&&Nr&&(Nr.close(),Nr=null)}()}(M,T)}function en(b,T){const M=Kt.get(b);if(M)for(const L of M)L(T)}let Nr=null;const kr="firebase-installations-store";let li=null;function wo(){return li||(li=(0,he.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(kr)}})),li}function Ke(b,T){return Or.apply(this,arguments)}function Or(){return(Or=(0,P.Z)(function*(b,T){const M=An(b),J=(yield wo()).transaction(kr,"readwrite"),ae=J.objectStore(kr),Se=yield ae.get(M);return yield ae.put(T,M),yield J.done,(!Se||Se.fid!==T.fid)&&Zt(b,T.fid),T})).apply(this,arguments)}function Qi(b){return xn.apply(this,arguments)}function xn(){return(xn=(0,P.Z)(function*(b){const T=An(b),L=(yield wo()).transaction(kr,"readwrite");yield L.objectStore(kr).delete(T),yield L.done})).apply(this,arguments)}function ci(b,T){return zr.apply(this,arguments)}function zr(){return(zr=(0,P.Z)(function*(b,T){const M=An(b),J=(yield wo()).transaction(kr,"readwrite"),ae=J.objectStore(kr),Se=yield ae.get(M),je=T(Se);return void 0===je?yield ae.delete(M):yield ae.put(je,M),yield J.done,je&&(!Se||Se.fid!==je.fid)&&Zt(b,je.fid),je})).apply(this,arguments)}function Mn(b){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,P.Z)(function*(b){let T;const M=yield ci(b.appConfig,L=>{const J=hn(L),ae=ht(b,J);return T=ae.registrationPromise,ae.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function hn(b){return Dt(b||{fid:ze(),registrationStatus:0})}function ht(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Je.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function st(b,T){return on.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Yn(b)}:{installationEntry:T}}function on(){return(on=(0,P.Z)(function*(b,T){try{const M=yield ne(b,T);return Ke(b.appConfig,M)}catch(M){throw nt(M)&&409===M.customData.serverCode?yield Qi(b.appConfig):yield Ke(b.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Yn(b){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,P.Z)(function*(b){let T=yield Ir(b.appConfig);for(;1===T.registrationStatus;)yield Ne(100),T=yield Ir(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:L}=yield Mn(b);return L||M}return T})).apply(this,arguments)}function Ir(b){return ci(b,T=>{if(!T)throw Je.create("installation-not-found");return Dt(T)})}function Dt(b){return function Ji(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Yt(b,T){return di.apply(this,arguments)}function di(){return(di=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const L=zt(b,M),J=V(b,M),ae=T.getImmediate({optional:!0});if(ae){const _t=yield ae.getHeartbeatsHeader();_t&&J.append("x-firebase-client",_t)}const je={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Q,appId:b.appId}})},dt=yield me(()=>fetch(L,je));if(dt.ok)return _e(yield dt.json());throw yield De("Generate Auth Token",dt)})).apply(this,arguments)}function zt(b,{fid:T}){return`${Ae(b)}/${T}/authTokens:generate`}function K(b){return $.apply(this,arguments)}function $(){return($=(0,P.Z)(function*(b,T=!1){let M;const L=yield ci(b.appConfig,ae=>{if(!rt(ae))throw Je.create("not-registered");const Se=ae.authToken;if(!T&&ln(Se))return ae;if(1===Se.requestStatus)return M=U(b,T),ae;{if(!navigator.onLine)throw Je.create("app-offline");const je=zn(ae);return M=be(b,je),je}});return M?yield M:L.authToken})).apply(this,arguments)}function U(b,T){return H.apply(this,arguments)}function H(){return(H=(0,P.Z)(function*(b,T){let M=yield W(b.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield W(b.appConfig);const L=M.authToken;return 0===L.requestStatus?K(b,T):L})).apply(this,arguments)}function W(b){return ci(b,T=>{if(!rt(T))throw Je.create("not-registered");return function Ut(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function be(b,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*(b,T){try{const M=yield Yt(b,T),L=Object.assign(Object.assign({},T),{authToken:M});return yield Ke(b.appConfig,L),M}catch(M){if(!nt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Ke(b.appConfig,L)}else yield Qi(b.appConfig);throw M}})).apply(this,arguments)}function rt(b){return void 0!==b&&2===b.registrationStatus}function ln(b){return 2===b.requestStatus&&!function Qt(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function zn(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function gn(){return(gn=(0,P.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:L}=yield Mn(T);return L?L.catch(console.error):K(T).catch(console.error),M.fid})).apply(this,arguments)}function Mi(){return(Mi=(0,P.Z)(function*(b,T=!1){const M=b;return yield Dr(M),(yield K(M,T)).token})).apply(this,arguments)}function Dr(b){return On.apply(this,arguments)}function On(){return(On=(0,P.Z)(function*(b){const{registrationPromise:T}=yield Mn(b);T&&(yield T)})).apply(this,arguments)}function _s(b){return Je.create("missing-app-config-values",{valueName:b})}const Eo="installations",mn=b=>{const T=b.getProvider("app").getImmediate(),M=function fn(b){if(!b||!b.options)throw _s("App Configuration");if(!b.name)throw _s("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw _s(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Vs=b=>{const T=b.getProvider("app").getImmediate(),M=(0,oe._getProvider)(T,Eo).getImmediate();return{getId:()=>function kt(b){return gn.apply(this,arguments)}(M),getToken:J=>function kn(b){return Mi.apply(this,arguments)}(M,J)}};(function bl(){(0,oe._registerComponent)(new fe.wA(Eo,mn,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("installations-internal",Vs,"PRIVATE"))})(),(0,oe.registerVersion)(pe,B),(0,oe.registerVersion)(pe,B,"esm2017");const Ri="@firebase/remote-config",Fn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class tf{constructor(T,M,L,J){this.client=T,this.storage=M,this.storageCache=L,this.logger=J}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-M,J=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var M=this;return(0,P.Z)(function*(){const[L,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(T.cacheMaxAgeMillis,L))return J;T.eTag=J&&J.eTag;const ae=yield M.client.fetch(T),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(Se),ae})()}}function xl(b=navigator){return b.languages&&b.languages[0]||b.language}class Ml{constructor(T,M,L,J,ae,Se){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=L,this.projectId=J,this.apiKey=ae,this.appId=Se}fetch(T){var M=this;return(0,P.Z)(function*(){var L,J,ae;const[Se,je]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ft={sdk_version:M.sdkVersion,app_instance_id:Se,app_instance_id_token:je,app_id:M.appId,language_code:xl()},vn={method:"POST",headers:Pt,body:JSON.stringify(ft)},ur=fetch(_t,vn),Ra=new Promise((ro,ls)=>{T.signal.addEventListener(()=>{const Uu=new Error("The operation was aborted.");Uu.name="AbortError",ls(Uu)})});let Vo;try{yield Promise.race([ur,Ra]),Vo=yield ur}catch(ro){let ls="fetch-client-network";throw"AbortError"===(null===(L=ro)||void 0===L?void 0:L.name)&&(ls="fetch-timeout"),Fn.create(ls,{originalErrorMessage:null===(J=ro)||void 0===J?void 0:J.message})}let no=Vo.status;const Bo=Vo.headers.get("ETag")||void 0;let Fi,Cr;if(200===Vo.status){let ro;try{ro=yield Vo.json()}catch(ls){throw Fn.create("fetch-client-parse",{originalErrorMessage:null===(ae=ls)||void 0===ae?void 0:ae.message})}Fi=ro.entries,Cr=ro.state}if("INSTANCE_STATE_UNSPECIFIED"===Cr?no=500:"NO_CHANGE"===Cr?no=304:("NO_TEMPLATE"===Cr||"EMPTY_CONFIG"===Cr)&&(Fi={}),304!==no&&200!==no)throw Fn.create("fetch-status",{httpStatus:no});return{status:no,eTag:Bo,config:Fi}})()}}class cg{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,P.Z)(function*(){const L=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:L}){var J=this;return(0,P.Z)(function*(){yield function Wn(b,T){return new Promise((M,L)=>{const J=Math.max(T-Date.now(),0),ae=setTimeout(M,J);b.addEventListener(()=>{clearTimeout(ae),L(Fn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ae=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function od(b){if(!(b instanceof re.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ae))throw ae;const Se={throttleEndTimeMillis:Date.now()+(0,re.$s)(L),backoffCount:L+1};return yield J.storage.setThrottleMetadata(Se),J.attemptFetch(T,Se)}})()}}class ad{constructor(T,M,L,J,ae){this.app=T,this._client=M,this._storageCache=L,this._storage=J,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rl(b,T){var M;const L=b.target.error||void 0;return Fn.create(T,{originalErrorMessage:L&&(null===(M=L)||void 0===M?void 0:M.message)})}const Ds="app_namespace_store";class pg{constructor(T,M,L,J=function fg(){return new Promise((b,T)=>{var M;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=J=>{T(Rl(J,"storage-open"))},L.onsuccess=J=>{b(J.target.result)},L.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(L){T(Fn.create("storage-open",{originalErrorMessage:null===(M=L)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=L,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,P.Z)(function*(){const L=yield M.openDbPromise;return new Promise((J,ae)=>{var Se;const dt=L.transaction([Ds],"readonly").objectStore(Ds),_t=M.createCompositeKey(T);try{const Pt=dt.get(_t);Pt.onerror=ft=>{ae(Rl(ft,"storage-get"))},Pt.onsuccess=ft=>{const vn=ft.target.result;J(vn?vn.value:void 0)}}catch(Pt){ae(Fn.create("storage-get",{originalErrorMessage:null===(Se=Pt)||void 0===Se?void 0:Se.message}))}})})()}set(T,M){var L=this;return(0,P.Z)(function*(){const J=yield L.openDbPromise;return new Promise((ae,Se)=>{var je;const _t=J.transaction([Ds],"readwrite").objectStore(Ds),Pt=L.createCompositeKey(T);try{const ft=_t.put({compositeKey:Pt,value:M});ft.onerror=vn=>{Se(Rl(vn,"storage-set"))},ft.onsuccess=()=>{ae()}}catch(ft){Se(Fn.create("storage-set",{originalErrorMessage:null===(je=ft)||void 0===je?void 0:je.message}))}})})()}delete(T){var M=this;return(0,P.Z)(function*(){const L=yield M.openDbPromise;return new Promise((J,ae)=>{var Se;const dt=L.transaction([Ds],"readwrite").objectStore(Ds),_t=M.createCompositeKey(T);try{const Pt=dt.delete(_t);Pt.onerror=ft=>{ae(Rl(ft,"storage-delete"))},Pt.onsuccess=()=>{J()}}catch(Pt){ae(Fn.create("storage-delete",{originalErrorMessage:null===(Se=Pt)||void 0===Se?void 0:Se.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ud{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const M=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),ae=yield M;ae&&(T.lastFetchStatus=ae);const Se=yield L;Se&&(T.lastSuccessfulFetchTimestampMillis=Se);const je=yield J;je&&(T.activeConfig=je)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function iu(){return nf.apply(this,arguments)}function nf(){return(nf=(0,P.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function bs(){(0,oe._registerComponent)(new fe.wA("remote-config",function b(T,{instanceIdentifier:M}){const L=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fn.create("registration-window");if(!(0,re.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:ae,apiKey:Se,appId:je}=L.options;if(!ae)throw Fn.create("registration-project-id");if(!Se)throw Fn.create("registration-api-key");if(!je)throw Fn.create("registration-app-id");const dt=new pg(je,L.name,M=M||"firebase"),_t=new ud(dt),Pt=new le.Yd(Ri);Pt.logLevel=le.in.ERROR;const ft=new Ml(J,oe.SDK_VERSION,M,ae,Se,je),vn=new cg(ft,dt),ur=new tf(vn,dt,_t,Pt),Ra=new ad(L,ur,_t,dt,Pt);return function Jn(b){const T=(0,re.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ra),Ra},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ri,"0.3.11"),(0,oe.registerVersion)(Ri,"0.3.11","esm2017")}();const Ni="/firebase-messaging-sw.js",es="/firebase-cloud-messaging-push-scope",ts="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ua="google.c.a.c_id",su="google.c.a.c_l",Pl="google.c.a.ts",rf="google.c.a.e";var ns=(()=>{return(b=ns||(ns={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",ns;var b})();function Wr(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lr(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(M),J=new Uint8Array(L.length);for(let ae=0;ae<L.length;++ae)J[ae]=L.charCodeAt(ae);return J}const Io="fcm_token_details_db",ar="fcm_token_object_Store";function sf(b){return af.apply(this,arguments)}function af(){return af=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(Io))return null;let T=null;return(yield(0,he.X3)(Io,5,{upgrade:(L=(0,P.Z)(function*(J,ae,Se,je){var dt;if(ae<2||!J.objectStoreNames.contains(ar))return;const _t=je.objectStore(ar),Pt=yield _t.index("fcmSenderId").get(b);if(yield _t.clear(),Pt)if(2===ae){const ft=Pt;if(!ft.auth||!ft.p256dh||!ft.endpoint)return;T={token:ft.fcmToken,createTime:null!==(dt=ft.createTime)&&void 0!==dt?dt:Date.now(),subscriptionOptions:{auth:ft.auth,p256dh:ft.p256dh,endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:"string"==typeof ft.vapidKey?ft.vapidKey:Wr(ft.vapidKey)}}}else if(3===ae){const ft=Pt;T={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Wr(ft.auth),p256dh:Wr(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Wr(ft.vapidKey)}}}else if(4===ae){const ft=Pt;T={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Wr(ft.auth),p256dh:Wr(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Wr(ft.vapidKey)}}}}),function(ae,Se,je,dt){return L.apply(this,arguments)})})).close(),yield(0,he.Lj)(Io),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Dn(T)?T:null;var L}),af.apply(this,arguments)}function Dn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Kr="firebase-messaging-store";let Tr=null;function au(){return Tr||(Tr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Kr)}})),Tr}function Do(b){return rs.apply(this,arguments)}function rs(){return(rs=(0,P.Z)(function*(b){const T=pi(b),L=yield(yield au()).transaction(Kr).objectStore(Kr).get(T);if(L)return L;{const J=yield sf(b.appConfig.senderId);if(J)return yield jt(b,J),J}})).apply(this,arguments)}function jt(b,T){return uu.apply(this,arguments)}function uu(){return(uu=(0,P.Z)(function*(b,T){const M=pi(b),J=(yield au()).transaction(Kr,"readwrite");return yield J.objectStore(Kr).put(T,M),yield J.done,T})).apply(this,arguments)}function Hs(b){return lu.apply(this,arguments)}function lu(){return(lu=(0,P.Z)(function*(b){const T=pi(b),L=(yield au()).transaction(Kr,"readwrite");yield L.objectStore(Kr).delete(T),yield L.done})).apply(this,arguments)}function pi({appConfig:b}){return b.appId}const yn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bt(b,T){return du.apply(this,arguments)}function du(){return(du=(0,P.Z)(function*(b,T){var M;const L=yield Ol(b),J=Te(T),ae={method:"POST",headers:L,body:JSON.stringify(J)};let Se;try{Se=yield(yield fetch(is(b.appConfig),ae)).json()}catch(je){throw yn.create("token-subscribe-failed",{errorInfo:null===(M=je)||void 0===M?void 0:M.toString()})}if(Se.error)throw yn.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw yn.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function lf(b,T){return hu.apply(this,arguments)}function hu(){return(hu=(0,P.Z)(function*(b,T){var M;const L=yield Ol(b),J=Te(T.subscriptionOptions),ae={method:"PATCH",headers:L,body:JSON.stringify(J)};let Se;try{Se=yield(yield fetch(`${is(b.appConfig)}/${T.token}`,ae)).json()}catch(je){throw yn.create("token-update-failed",{errorInfo:null===(M=je)||void 0===M?void 0:M.toString()})}if(Se.error)throw yn.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw yn.create("token-update-no-token");return Se.token})).apply(this,arguments)}function fu(b,T){return kl.apply(this,arguments)}function kl(){return(kl=(0,P.Z)(function*(b,T){var M;const J={method:"DELETE",headers:yield Ol(b)};try{const Se=yield(yield fetch(`${is(b.appConfig)}/${T}`,J)).json();if(Se.error)throw yn.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(ae){throw yn.create("token-unsubscribe-failed",{errorInfo:null===(M=ae)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function is({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Ol(b){return ca.apply(this,arguments)}function ca(){return(ca=(0,P.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Te({p256dh:b,auth:T,endpoint:M,vapidKey:L}){const J={web:{endpoint:M,auth:T,p256dh:b}};return L!==ts&&(J.web.applicationPubKey=L),J}const Vt=6048e5;function pu(b){return gu.apply(this,arguments)}function gu(){return(gu=(0,P.Z)(function*(b){const T=yield Ll(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Wr(T.getKey("auth")),p256dh:Wr(T.getKey("p256dh"))},L=yield Do(b.firebaseDependencies);if(L){if(hd(L.subscriptionOptions,M))return Date.now()>=L.createTime+Vt?bo(b,{token:L.token,createTime:Date.now(),subscriptionOptions:M}):L.token;try{yield fu(b.firebaseDependencies,L.token)}catch(J){console.warn(J)}return da(b.firebaseDependencies,M)}return da(b.firebaseDependencies,M)})).apply(this,arguments)}function bn(b){return mu.apply(this,arguments)}function mu(){return(mu=(0,P.Z)(function*(b){const T=yield Do(b.firebaseDependencies);T&&(yield fu(b.firebaseDependencies,T.token),yield Hs(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function bo(b,T){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,P.Z)(function*(b,T){try{const M=yield lf(b.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield jt(b.firebaseDependencies,L),M}catch(M){throw yield bn(b),M}})).apply(this,arguments)}function da(b,T){return ha.apply(this,arguments)}function ha(){return(ha=(0,P.Z)(function*(b,T){const L={token:yield bt(b,T),createTime:Date.now(),subscriptionOptions:T};return yield jt(b,L),L.token})).apply(this,arguments)}function Ll(b,T){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,P.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lr(T)})})).apply(this,arguments)}function hd(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function fa(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Tn(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const L=T.notification.body;L&&(b.notification.body=L);const J=T.notification.image;J&&(b.notification.image=J)}(T,b),function Pi(b,T){!T.data||(b.data=T.data)}(T,b),function Ul(b,T){var M,L,J,ae,Se;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;b.fcmOptions={};const je=null!==(J=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==J?J:null===(ae=T.notification)||void 0===ae?void 0:ae.click_action;je&&(b.fcmOptions.link=je);const dt=null===(Se=T.fcmOptions)||void 0===Se?void 0:Se.analytics_label;dt&&(b.fcmOptions.analyticsLabel=dt)}(T,b),T}function Gs(b){return"object"==typeof b&&!!b&&ua in b}function ss(b,T){const M=[];for(let L=0;L<b.length;L++)M.push(b.charAt(L)),L<T.length&&M.push(T.charAt(L));return M.join("")}function pa(b){return yn.create("missing-app-config-values",{valueName:b})}ss("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ss("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mg{constructor(T,M,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function gg(b){if(!b||!b.options)throw pa("App Configuration Object");if(!b.name)throw pa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const L of T)if(!M[L])throw pa(L);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:M,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Vl(b){return yu.apply(this,arguments)}function yu(){return(yu=(0,P.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register(Ni,{scope:es}),b.swRegistration.update().catch(()=>{})}catch(M){throw yn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function ga(b,T){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,P.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield Vl(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw yn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function ma(b,T){return jl.apply(this,arguments)}function jl(){return(jl=(0,P.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=ts)})).apply(this,arguments)}function _u(){return(_u=(0,P.Z)(function*(b,T){if(!navigator)throw yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yn.create("permission-blocked");return yield ma(b,T?.vapidKey),yield ga(b,T?.serviceWorkerRegistration),pu(b)})).apply(this,arguments)}function $l(b,T,M){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,P.Z)(function*(b,T,M){const L=Gl(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:M[ua],message_name:M[su],message_time:M[Pl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gl(b){switch(b){case ns.NOTIFICATION_CLICKED:return"notification_open";case ns.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zs(){return(zs=(0,P.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===ns.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(fa(M)):b.onMessageHandler.next(fa(M)));const L=M.data;Gs(L)&&"1"===L[rf]&&(yield $l(b,M.messageType,L))})).apply(this,arguments)}const qs="@firebase/messaging",Kn=b=>{const T=new mg(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function fd(b,T){return zs.apply(this,arguments)}(T,M)),T},Fr=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:L=>function vu(b,T){return _u.apply(this,arguments)}(T,L)}};function pd(){return zl.apply(this,arguments)}function zl(){return(zl=(0,P.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pn(){(0,oe._registerComponent)(new fe.wA("messaging",Kn,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("messaging-internal",Fr,"PRIVATE")),(0,oe.registerVersion)(qs,"0.9.16"),(0,oe.registerVersion)(qs,"0.9.16","esm2017")}();const Co="analytics",yd="firebase_id",Ws="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Iu="https://www.googletagmanager.com/gtag/js",Sn=new le.Yd("@firebase/analytics");function Du(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function bu(b,T){const M=document.createElement("script");M.src=`${Iu}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}function df(b,T,M,L,J,ae){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,P.Z)(function*(b,T,M,L,J,ae){const Se=L[J];try{if(Se)yield T[Se];else{const dt=(yield Du(M)).find(_t=>_t.measurementId===J);dt&&(yield T[dt.appId])}}catch(je){Sn.error(je)}b("config",J,ae)})).apply(this,arguments)}function Ao(b,T,M,L,J){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,P.Z)(function*(b,T,M,L,J){try{let ae=[];if(J&&J.send_to){let Se=J.send_to;Array.isArray(Se)||(Se=[Se]);const je=yield Du(M);for(const dt of Se){const _t=je.find(ft=>ft.measurementId===dt),Pt=_t&&T[_t.appId];if(!Pt){ae=[];break}ae.push(Pt)}}0===ae.length&&(ae=Object.values(T)),yield Promise.all(ae),b("event",L,J||{})}catch(ae){Sn.error(ae)}})).apply(this,arguments)}function _d(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(Iu))return T;return null}const er=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wa=new class ki{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ed(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ea(b){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,P.Z)(function*(b){var T;const{appId:M,apiKey:L}=b,J={method:"GET",headers:Ed(L)},ae=Ws.replace("{app-id}",M),Se=yield fetch(ae,J);if(200!==Se.status&&304!==Se.status){let je="";try{const dt=yield Se.json();null!==(T=dt.error)&&void 0!==T&&T.message&&(je=dt.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:je})}return Se.json()})).apply(this,arguments)}function Rn(b){return gi.apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(b,T=wa,M){const{appId:L,apiKey:J,measurementId:ae}=b.options;if(!L)throw er.create("no-app-id");if(!J){if(ae)return{measurementId:ae,appId:L};throw er.create("no-api-key")}const Se=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Au;return setTimeout((0,P.Z)(function*(){je.abort()}),void 0!==M?M:6e4),Su({appId:L,apiKey:J,measurementId:ae},Se,je,T)})).apply(this,arguments)}function Su(b,T,M){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},L,J=wa){var ae,Se;const{appId:je,measurementId:dt}=b;try{yield Ia(L,T)}catch(_t){if(dt)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${null===(ae=_t)||void 0===ae?void 0:ae.message}]`),{appId:je,measurementId:dt};throw _t}try{const _t=yield Ea(b);return J.deleteThrottleMetadata(je),_t}catch(_t){const Pt=_t;if(!Cu(Pt)){if(J.deleteThrottleMetadata(je),dt)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:je,measurementId:dt};throw _t}const ft=503===Number(null===(Se=Pt?.customData)||void 0===Se?void 0:Se.httpStatus)?(0,re.$s)(M,J.intervalMillis,30):(0,re.$s)(M,J.intervalMillis),vn={throttleEndTimeMillis:Date.now()+ft,backoffCount:M+1};return J.setThrottleMetadata(je,vn),Sn.debug(`Calling attemptFetch again in ${ft} millis`),Su(b,vn,L,J)}})).apply(this,arguments)}function Ia(b,T){return new Promise((M,L)=>{const J=Math.max(T-Date.now(),0),ae=setTimeout(M,J);b.addEventListener(()=>{clearTimeout(ae),L(er.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Cu(b){if(!(b instanceof re.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Au{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Cs,ba;function As(){return(As=(0,P.Z)(function*(b,T,M,L,J){if(J&&J.global)b("event",M,L);else{const ae=yield T;b("event",M,Object.assign(Object.assign({},L),{send_to:ae}))}})).apply(this,arguments)}function Js(b){ba=b}function Yl(b){Cs=b}function xs(){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,P.Z)(function*(){var b;if(!(0,re.hl)())return Sn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(T){return Sn.warn(er.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Ro(){return(Ro=(0,P.Z)(function*(b,T,M,L,J,ae,Se){var je;const dt=Rn(b);dt.then(ur=>{M[ur.measurementId]=ur.appId,b.options.measurementId&&ur.measurementId!==b.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ur=>Sn.error(ur)),T.push(dt);const _t=xs().then(ur=>{if(ur)return L.getId()}),[Pt,ft]=yield Promise.all([dt,_t]);_d()||bu(ae,Pt.measurementId),ba&&(J("consent","default",ba),Js(void 0)),J("js",new Date);const vn=null!==(je=Se?.config)&&void 0!==je?je:{};return vn.origin="firebase",vn.update=!0,null!=ft&&(vn[yd]=ft),J("config",Pt.measurementId,vn),Cs&&(J("set",Cs),Yl(void 0)),Pt.measurementId})).apply(this,arguments)}class Nu{constructor(T){this.app=T}_delete(){return delete Ur[this.app.options.appId],Promise.resolve()}}let Ur={},Ms=[];const No={};let ko,Xs,Po="dataLayer",Ta=!1;function nv(b,T,M){!function yg(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((L,J)=>`(${J+1}) ${L}`).join(" "),M=er.create("invalid-analytics-context",{errorInfo:T});Sn.warn(M.message)}}();const L=b.options.appId;if(!L)throw er.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw er.create("no-api-key");Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ur[L])throw er.create("already-exists",{id:L});if(!Ta){!function vd(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Po);const{wrappedGtag:ae,gtagCore:Se}=function ya(b,T,M,L,J){let ae=function(...Se){window[L].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ae=window[J]),window[J]=function Tu(b,T,M,L){function ae(){return(ae=(0,P.Z)(function*(Se,je,dt){try{"event"===Se?yield Ao(b,T,M,je,dt):"config"===Se?yield df(b,T,M,L,je,dt):"consent"===Se?b("consent","update",dt):b("set",je)}catch(_t){Sn.error(_t)}})).apply(this,arguments)}return function J(Se,je,dt){return ae.apply(this,arguments)}}(ae,b,T,M),{gtagCore:ae,wrappedGtag:window[J]}}(Ur,Ms,No,Po,"gtag");Xs=ae,ko=Se,Ta=!0}return Ur[L]=function Mo(b,T,M,L,J,ae,Se){return Ro.apply(this,arguments)}(b,Ms,No,T,ko,Po,M),new Nu(b)}function iv(){return hf.apply(this,arguments)}function hf(){return(hf=(0,P.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const as="@firebase/analytics";!function Sr(){(0,oe._registerComponent)(new fe.wA(Co,(T,{options:M})=>nv(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new fe.wA("analytics-internal",function b(T){try{const M=T.getProvider(Co).getImmediate();return{logEvent:(L,J,ae)=>function ku(b,T,M,L){b=(0,re.m9)(b),function Id(b,T,M,L,J){return As.apply(this,arguments)}(Xs,Ur[b.app.options.appId],T,M,L).catch(J=>Sn.error(J))}(M,L,J,ae)}}catch(M){throw er.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(as,"0.8.0"),(0,oe.registerVersion)(as,"0.8.0","esm2017")}();var Oi=O(4408),mi=O(7565);const Xl=new class eo extends mi.v{}(class Jl extends Oi.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,M,L):(T.flush(this),0)}});var bd=O(4986),ec=O(8505),Sa=O(9468),tc=O(5363);const Yr=new m.GfV("7.4.1"),Lo="__angularfire_symbol__analyticsIsSupportedValue",Qr="__angularfire_symbol__analyticsIsSupported",Ca="__angularfire_symbol__remoteConfigIsSupportedValue",to="__angularfire_symbol__remoteConfigIsSupported",Td="__angularfire_symbol__messagingIsSupportedValue",Lu="__angularfire_symbol__messagingIsSupported";function xa(b,T,M){if(T){if(1===T.length)return T[0];const ae=T.filter(Se=>Se.app===M);if(1===ae.length)return ae[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Qr]||(globalThis[Qr]=iv().then(b=>globalThis[Lo]=b).catch(()=>globalThis[Lo]=!1)),globalThis[Lu]||(globalThis[Lu]=pd().then(b=>globalThis[Td]=b).catch(()=>globalThis[Td]=!1)),globalThis[to]||(globalThis[to]=iu().then(b=>globalThis[Ca]=b).catch(()=>globalThis[Ca]=!1));const Fo=(b,T)=>{const M=T?[T]:(0,te.C6)(),L=[];return M.forEach(J=>{J.container.getProvider(b).instances.forEach(Se=>{L.includes(Se)||L.push(Se)})}),L};function Ma(){}class Li{constructor(T,M=Xl){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,L){const J=this.zone;return this.delegate.schedule(function(Se){J.runGuarded(()=>{T.apply(this,[Se])})},M,L)}}class nc{constructor(T){this.zone=T,this.task=null}call(T,M){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ma,{},Ma,Ma)),M.pipe((0,ec.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fu=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Li(Zone.current)),this.insideAngular=M.run(()=>new Li(Zone.current,bd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Rs(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Ns(b){return Rs(),function Cd(b){return function(M){return(M=M.lift(new nc(b.ngZone))).pipe((0,Sa.R)(b.outsideAngular),(0,tc.Q)(b.insideAngular))}}(Rs())(b)}},2090:(ot,Ce,O)=>{O.d(Ce,{$s:()=>Ji,BH:()=>Fe,G6:()=>Be,L:()=>he,LL:()=>ke,Sg:()=>Me,UG:()=>ye,US:()=>fe,ZB:()=>j,ZR:()=>ne,b$:()=>nt,eu:()=>me,hl:()=>V,jU:()=>ge,m9:()=>zt,ne:()=>wo,pd:()=>kr,r3:()=>Er,ru:()=>Je,tV:()=>pe,uI:()=>Xe,vZ:()=>Nr,w1:()=>_e,xO:()=>vs,xb:()=>en,z$:()=>Ee,zI:()=>Y,zd:()=>xi});const oe=function(K){const $=[];let U=0;for(let H=0;H<K.length;H++){let W=K.charCodeAt(H);W<128?$[U++]=W:W<2048?($[U++]=W>>6|192,$[U++]=63&W|128):55296==(64512&W)&&H+1<K.length&&56320==(64512&K.charCodeAt(H+1))?(W=65536+((1023&W)<<10)+(1023&K.charCodeAt(++H)),$[U++]=W>>18|240,$[U++]=W>>12&63|128,$[U++]=W>>6&63|128,$[U++]=63&W|128):($[U++]=W>>12|224,$[U++]=W>>6&63|128,$[U++]=63&W|128)}return $},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,$){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let W=0;W<K.length;W+=3){const be=K[W],Ue=W+1<K.length,rt=Ue?K[W+1]:0,ln=W+2<K.length,Qt=ln?K[W+2]:0;let kt=(15&rt)<<2|Qt>>6,gn=63&Qt;ln||(gn=64,Ue||(kt=64)),H.push(U[be>>2],U[(3&be)<<4|rt>>4],U[kt],U[gn])}return H.join("")},encodeString(K,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(K):this.encodeByteArray(oe(K),$)},decodeString(K,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(K):function(K){const $=[];let U=0,H=0;for(;U<K.length;){const W=K[U++];if(W<128)$[H++]=String.fromCharCode(W);else if(W>191&&W<224){const be=K[U++];$[H++]=String.fromCharCode((31&W)<<6|63&be)}else if(W>239&&W<365){const ln=((7&W)<<18|(63&K[U++])<<12|(63&K[U++])<<6|63&K[U++])-65536;$[H++]=String.fromCharCode(55296+(ln>>10)),$[H++]=String.fromCharCode(56320+(1023&ln))}else{const be=K[U++],Ue=K[U++];$[H++]=String.fromCharCode((15&W)<<12|(63&be)<<6|63&Ue)}}return $.join("")}(this.decodeStringToByteArray(K,$))},decodeStringToByteArray(K,$){this.init_();const U=$?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let W=0;W<K.length;){const be=U[K.charAt(W++)],rt=W<K.length?U[K.charAt(W)]:0;++W;const Qt=W<K.length?U[K.charAt(W)]:64;++W;const Ut=W<K.length?U[K.charAt(W)]:64;if(++W,null==be||null==rt||null==Qt||null==Ut)throw Error();H.push(be<<2|rt>>4),64!==Qt&&(H.push(rt<<4&240|Qt>>2),64!==Ut&&H.push(Qt<<6&192|Ut))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},he=function(K){return function(K){const $=oe(K);return fe.encodeByteArray($,!0)}(K).replace(/\./g,"")},pe=function(K){try{return fe.decodeString(K,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function j(K,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return $}for(const U in $)!$.hasOwnProperty(U)||!Q(U)||(K[U]=j(K[U],$[U]));return K}function Q(K){return"__proto__"!==K}class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,U)=>{this.resolve=$,this.reject=U})}wrapCallback($){return(U,H)=>{U?this.reject(U):this.resolve(H),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(U):$(U,H))}}}function Me(K,$){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=$||"demo-project",W=K.iat||0,be=K.sub||K.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:W,exp:W+3600,auth_time:W,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},K);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ue)),""].join(".")}function Ee(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ge(){return"object"==typeof self&&self.self===self}function Je(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){const K=Ee();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Be(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){return"object"==typeof indexedDB}function me(){return new Promise((K,$)=>{try{let U=!0;const H="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(H);W.onsuccess=()=>{W.result.close(),U||self.indexedDB.deleteDatabase(H),K(!0)},W.onupgradeneeded=()=>{U=!1},W.onerror=()=>{var be;$((null===(be=W.error)||void 0===be?void 0:be.message)||"")}}catch(U){$(U)}})}function Y(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor($,U,H){super(U),this.code=$,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor($,U,H){this.service=$,this.serviceName=U,this.errors=H}create($,...U){const H=U[0]||{},W=`${this.service}/${$}`,be=this.errors[$],Ue=be?function Ne(K,$){return K.replace(ct,(U,H)=>{const W=$[H];return null!=W?String(W):`<${H}?>`})}(be,H):"Error";return new ne(W,`${this.serviceName}: ${Ue} (${W}).`,H)}}const ct=/\{\$([^}]+)}/g;function Er(K,$){return Object.prototype.hasOwnProperty.call(K,$)}function en(K){for(const $ in K)if(Object.prototype.hasOwnProperty.call(K,$))return!1;return!0}function Nr(K,$){if(K===$)return!0;const U=Object.keys(K),H=Object.keys($);for(const W of U){if(!H.includes(W))return!1;const be=K[W],Ue=$[W];if(hr(be)&&hr(Ue)){if(!Nr(be,Ue))return!1}else if(be!==Ue)return!1}for(const W of H)if(!U.includes(W))return!1;return!0}function hr(K){return null!==K&&"object"==typeof K}function vs(K){const $=[];for(const[U,H]of Object.entries(K))Array.isArray(H)?H.forEach(W=>{$.push(encodeURIComponent(U)+"="+encodeURIComponent(W))}):$.push(encodeURIComponent(U)+"="+encodeURIComponent(H));return $.length?"&"+$.join("&"):""}function xi(K){const $={};return K.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[W,be]=H.split("=");$[decodeURIComponent(W)]=decodeURIComponent(be)}}),$}function kr(K){const $=K.indexOf("?");if(!$)return"";const U=K.indexOf("#",$);return K.substring($,U>0?U:void 0)}function wo(K,$){const U=new Ke(K,$);return U.subscribe.bind(U)}class Ke{constructor($,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{$(this)}).catch(H=>{this.error(H)})}next($){this.forEachObserver(U=>{U.next($)})}error($){this.forEachObserver(U=>{U.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,U,H){let W;if(void 0===$&&void 0===U&&void 0===H)throw new Error("Missing Observer.");W=function Qi(K,$){if("object"!=typeof K||null===K)return!1;for(const U of $)if(U in K&&"function"==typeof K[U])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:U,complete:H},void 0===W.next&&(W.next=xn),void 0===W.error&&(W.error=xn),void 0===W.complete&&(W.complete=xn);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),be}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,$)}sendOne($,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{U(this.observers[$])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xn(){}function Ji(K,$=1e3,U=2){const H=$*Math.pow(U,K),W=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+W)}function zt(K){return K&&K._delegate?K._delegate:K}},9424:(ot,Ce,O)=>{var m=O(4650);let te=null;function P(){return te}const le=new m.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function pe(){return(0,m.LFG)(j)}()},providedIn:"platform"}),n})();const B=new m.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){Q()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){Q()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Fe(){return new j((0,m.LFG)(le))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Je)},providedIn:"root"}),n})();const ge=new m.OlP("appBaseHref");let Je=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+Xe(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+Xe(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+Xe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+Xe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ee(Ve(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Me,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(m.LFG(ye))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function _e(){return new Ae((0,m.LFG)(ye))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}class oa{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let js=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,c)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new oa(s.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),Is(f,s)}});for(let s=0,u=r.length;s<u;s++){const f=r.get(s).context;f.index=s,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Is(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Is(n,e){n.context.$implicit=e.item}let Jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Cl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Cl{constructor(){this.$implicit=null,this.ngIf=null}}function Xn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Nl=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw function Wn(n,e){return new m.vHH(2100,!1)}();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=m.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),la=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function ar(n){return"server"===n}let ou=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new uf((0,m.LFG)(le),window)}),n})();class uf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Tr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Kr(this.window.history)||Kr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Kr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zs extends class fd extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){te||(te=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wu(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==t?null:function Fr(n){Kn=Kn||document.createElement("a"),Kn.setAttribute("href",n);const e=Kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function nu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Kn,qs=null;const pn=new m.OlP("TRANSITION_ID"),zl=[{provide:m.ip1,useFactory:function pd(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[pn,le,m.zs3],multi:!0}];let ql=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=new m.OlP("EventManagerPlugins");let gd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Eu),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Wl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let To=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),So=(()=>{class n extends To{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(md),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(md))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function md(n){P().remove(n)}const Co={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yd=/%COMP%/g;function bu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?bu(n,s,t):(s=s.replace(yd,n),t.push(s))}return t}function vd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ks=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Ao(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new _d(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case m.ifc.ShadowDom:return new wd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=bu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(gd),m.LFG(So),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Co[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ya(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ya(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Co[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Co[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,s&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vd(r)):this.eventManager.addEventListener(e,t,vd(r))}}function ya(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _d extends Ao{constructor(e,t,r,s){super(e),this.component=r;const u=bu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Sn(n){return"_ngcontent-%COMP%".replace(yd,n)}(s+"-"+r.id),this.hostAttr=function Du(n){return"_nghost-%COMP%".replace(yd,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class wd extends Ao{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=bu(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let er=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const va=["alt","control","meta","shift"],_a={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ki={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wa=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),va.forEach(I=>{const C=r.indexOf(I);C>-1&&(r.splice(C,1),c+=I+".")}),c+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let s=_a[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),va.forEach(c=>{c!==s&&(0,ki[c])(t)&&(u+=c+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Au=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Su(){zs.makeCurrent()},multi:!0},{provide:le,useFactory:function Ia(){return(0,m.RDi)(document),document},deps:[]}]),Cs=new m.OlP(""),Id=[{provide:m.rWj,useClass:class cf{addToWindow(e){m.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const s=m.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const f=function(_){c=c||_,u--,0==u&&r(c)};s.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],As=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Ys(){return new m.qLn},deps:[]},{provide:Eu,useClass:er,multi:!0,deps:[le,m.R0b,m.Lbi]},{provide:Eu,useClass:wa,multi:!0,deps:[le]},{provide:Ks,useClass:Ks,deps:[gd,So,m.AFp]},{provide:m.FYo,useExisting:Ks},{provide:To,useExisting:So},{provide:So,useClass:So,deps:[le]},{provide:gd,useClass:gd,deps:[Eu,m.R0b]},{provide:class Do{},useClass:ql,deps:[]},[]];let xu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:pn,useExisting:m.AFp},zl]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Cs,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...As,...Id],imports:[la,m.hGG]}),n})(),os=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function xo(){return new os((0,m.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;class ku{}const as="*";function Ou(n,e){return{type:7,name:n,definitions:e,options:{}}}function Sr(n,e=null){return{type:4,styles:e,timings:n}}function Jl(n,e=null){return{type:2,steps:n,options:e}}function mi(n){return{type:6,styles:n,offset:null}}function ff(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Lo(n){Promise.resolve().then(n)}class Qr{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Lo(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ca{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const u=this.players.length;0==u?Lo(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++s==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Lu(n){return new m.vHH(3e3,!1)}function Bo(){return typeof window<"u"&&typeof window.document<"u"}function Fi(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Cr(n){switch(n.length){case 0:return new Qr;case 1:return n[0];default:return new Ca(n)}}function ro(n,e,t,r,s=new Map,u=new Map){const c=[],f=[];let _=-1,I=null;if(r.forEach(C=>{const x=C.get("offset"),F=x==_,z=F&&I||new Map;C.forEach((Z,ue)=>{let Ie=ue,We=Z;if("offset"!==ue)switch(Ie=e.normalizePropertyName(Ie,c),We){case"!":We=s.get(ue);break;case as:We=u.get(ue);break;default:We=e.normalizeStyleValue(ue,Ie,We,c)}z.set(Ie,We)}),F||f.push(z),I=z,_=x}),c.length)throw function J(n){return new m.vHH(3502,!1)}();return f}function ls(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Uu(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Uu(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Uu(t,"destroy",n)))}}function Uu(n,e,t){const u=Ad(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function Ad(n,e,t,r,s="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:u,disabled:!!c}}function yi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Eg(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let xd=(n,e)=>!1,ic=(n,e,t)=>[],Vu=null;function mf(n){const e=n.parentNode||n.host;return e===Vu?null:e}(Fi()||typeof Element<"u")&&(Bo()?(Vu=(()=>document.documentElement)(),xd=(n,e)=>{for(;e;){if(e===n)return!0;e=mf(e)}return!1}):xd=(n,e)=>n.contains(e),ic=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let jo=null,uv=!1;const Na=xd,Md=ic;let Dg=(()=>{class n{validateStyleProperty(t){return function yf(n){jo||(jo=function Ig(){return typeof document<"u"?document.body:null}()||{},uv=!!jo.style&&"WebkitAppearance"in jo.style);let e=!0;return jo.style&&!function M0(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in jo.style,!e&&uv&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in jo.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Na(t,r)}getParentElement(t){return mf(t)}query(t,r,s){return Md(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,u,c,f=[],_){return new Qr(s,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),vf=(()=>{class n{}return n.NOOP=new Dg,n})();const Rd="ng-enter",oc="ng-leave",ac="ng-trigger",Pa=".ng-trigger",bg="ng-animating",uc=".ng-animating";function io(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Nd(parseFloat(e[1]),e[2])}function Nd(n,e){return"s"===e?1e3*n:n}function Pd(n,e,t){return n.hasOwnProperty("duration")?n:function Ps(n,e,t){let s,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(Lu()),{duration:0,delay:0,easing:""};s=Nd(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(u=Nd(parseFloat(_),f[4]));const I=f[5];I&&(c=I)}else s=n;if(!t){let f=!1,_=e.length;s<0&&(e.push(function Aa(){return new m.vHH(3100,!1)}()),f=!0),u<0&&(e.push(function _g(){return new m.vHH(3101,!1)}()),f=!0),f&&e.splice(_,0,Lu())}return{duration:s,delay:u,easing:c}}(n,e,t)}function so(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function wf(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function ka(n,e=new Map,t){if(t)for(let[r,s]of t)e.set(r,s);for(let[r,s]of n)e.set(r,s);return e}function dv(n,e,t){return t?e+":"+t+";":""}function P0(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=dv(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=dv(0,Tg(t),n.style[t]));n.setAttribute("style",e)}function pr(n,e,t){n.style&&(e.forEach((r,s)=>{const u=Od(s);t&&!t.has(s)&&t.set(s,n.style[u]),n.style[u]=r}),Fi()&&P0(n))}function Oa(n,e){n.style&&(e.forEach((t,r)=>{const s=Od(r);n.style[s]=""}),Fi()&&P0(n))}function lc(n){return Array.isArray(n)?1==n.length?n[0]:Jl(n):n}const If=new RegExp("{{\\s*(.+?)\\s*}}","g");function ju(n){let e=[];if("string"==typeof n){let t;for(;t=If.exec(n);)e.push(t[1]);If.lastIndex=0}return e}function vi(n,e,t){const r=n.toString(),s=r.replace(If,(u,c)=>{let f=e[c];return null==f&&(t.push(function wg(n){return new m.vHH(3003,!1)}()),f=""),f.toString()});return s==r?n:s}function $o(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const kd=/-+([a-z0-9])/g;function Od(n){return n.replace(kd,(...e)=>e[1].toUpperCase())}function Tg(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ui(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function xa(n){return new m.vHH(3004,!1)}()}}function Ld(n,e){return window.getComputedStyle(n)[e]}function Ag(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Ud(n,e,t){if(":"==n[0]){const _=function Vd(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function b(n){return new m.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function gf(n){return new m.vHH(3015,!1)}()),e;const s=r[1],u=r[2],c=r[3];e.push(Un(s,c));"<"==u[0]&&!("*"==s&&"*"==c)&&e.push(Un(c,s))}(r,t,e)):t.push(n),t}const Gu=new Set(["true","1"]),Bd=new Set(["false","0"]);function Un(n,e){const t=Gu.has(n)||Bd.has(n),r=Gu.has(e)||Bd.has(e);return(s,u)=>{let c="*"==n||n==s,f="*"==e||e==u;return!c&&t&&"boolean"==typeof s&&(c=s?Gu.has(n):Bd.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?Gu.has(e):Bd.has(e)),c&&f}}const pv=new RegExp("s*:selfs*,?","g");function cc(n,e,t,r){return new gv(n).build(e,t,r)}class gv{constructor(e){this._driver=e}build(e,t,r){const s=new xg(t);return this._resetContextStyleTimingState(s),Ui(this,lc(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Ma(){return new m.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,I=_.name;I.toString().split(/\s*,\s*/).forEach(C=>{_.name=C,u.push(this.visitState(_,t))}),_.name=I}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,s+=_.depCount,c.push(_)}else t.errors.push(function Li(){return new m.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=s||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(_=>{ju(_).forEach(I=>{c.hasOwnProperty(I)||u.add(I)})})}),u.size&&($o(u.values()),t.errors.push(function nc(n,e){return new m.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ui(this,lc(e.animation),t);return{type:1,matchers:Ag(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:zu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ui(this,r,t)),options:zu(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Ui(this,c,t);return s=Math.max(s,t.currentTime),f});return t.currentTime=s,{type:3,steps:u,options:zu(e.options)}}visitAnimate(e,t){const r=function L0(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return La(Pd(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=La(0,0,"");return u.dynamic=!0,u.strValue=t,u}const s=Pd(t,e);return La(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,u=e.styles?e.styles:mi({});if(5==u.type)s=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const I={};r.easing&&(I.easing=r.easing),c=mi(I)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=f,s=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of s)"string"==typeof f?f===as?r.push(f):t.errors.push(new m.vHH(3002,!1)):r.push(wf(f));let u=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!u))for(let _ of f.values())if(_.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,_)=>{const I=t.collectedStyles.get(t.currentQuerySelector),C=I.get(_);let x=!0;C&&(u!=s&&u>=C.startTime&&s<=C.endTime&&(t.errors.push(function rc(n,e,t,r,s){return new m.vHH(3010,!1)}()),x=!1),u=C.startTime),x&&I.set(_,{startTime:u,endTime:s}),t.options&&function Ef(n,e,t){const r=e.params||{},s=ju(n);s.length&&s.forEach(u=>{r.hasOwnProperty(u)||t.push(function Sd(n){return new m.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function us(){return new m.vHH(3011,!1)}()),r;let u=0;const c=[];let f=!1,_=!1,I=0;const C=e.steps.map(We=>{const tt=this._makeStyleAst(We,t);let gt=null!=tt.offset?tt.offset:function yv(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(tt.styles),it=0;return null!=gt&&(u++,it=tt.offset=gt),_=_||it<0||it>1,f=f||it<I,I=it,c.push(it),tt});_&&t.errors.push(function pf(){return new m.vHH(3012,!1)}()),f&&t.errors.push(function Uo(){return new m.vHH(3200,!1)}());const x=e.steps.length;let F=0;u>0&&u<x?t.errors.push(function Ns(){return new m.vHH(3202,!1)}()):0==u&&(F=1/(x-1));const z=x-1,Z=t.currentTime,ue=t.currentAnimateTimings,Ie=ue.duration;return C.forEach((We,tt)=>{const gt=F>0?tt==z?1:F*tt:c[tt],it=gt*Ie;t.currentTime=Z+ue.delay+it,ue.duration=it,this._validateStyleAst(We,t),We.offset=gt,r.styles.push(We)}),r}visitReference(e,t){return{type:8,animation:Ui(this,lc(e.animation),t),options:zu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:zu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:zu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function dc(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(pv,"")),n=n.replace(/@\*/g,Pa).replace(/@\w+/g,t=>Pa+"-"+t.slice(1)).replace(/:animating/g,uc),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,yi(t.collectedStyles,t.currentQuerySelector,new Map);const f=Ui(this,lc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:s.limit||0,optional:!!s.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:zu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Cd(){return new m.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Pd(e.timings,t.errors,!0);return{type:12,animation:Ui(this,lc(e.animation),t),timings:r,options:null}}}class xg{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function zu(n){return n?(n=so(n)).params&&(n.params=function mv(n){return n?so(n):null}(n.params)):n={},n}function La(n,e,t){return{duration:n,delay:e,easing:t}}function qu(n,e,t,r,s,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:u,totalTime:s+u,easing:c,subTimeline:f}}class Fa{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vv=new RegExp(":enter","g"),Mg=new RegExp(":leave","g");function gr(n,e,t,r,s,u=new Map,c=new Map,f,_,I=[]){return(new Hd).buildKeyframes(n,e,t,r,s,u,c,f,_,I)}class Hd{buildKeyframes(e,t,r,s,u,c,f,_,I,C=[]){I=I||new Fa;const x=new fc(e,t,I,s,u,C,[]);x.options=_;const F=_.delay?io(_.delay):0;x.currentTimeline.delayNextStep(F),x.currentTimeline.setStyles([c],null,x.errors,_),Ui(this,r,x);const z=x.timelines.filter(Z=>Z.containsAnimation());if(z.length&&f.size){let Z;for(let ue=z.length-1;ue>=0;ue--){const Ie=z[ue];if(Ie.element===t){Z=Ie;break}}Z&&!Z.allowOnlyTimelineStyles()&&Z.setStyles([f],null,x.errors,_)}return z.length?z.map(Z=>Z.buildKeyframes()):[qu(t,[],[],[],0,F,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,s,s.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const s of e){const u=s?.delay;if(u){const c="number"==typeof u?u:io(vi(u,s?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?io(r.duration):null,f=null!=r.delay?io(r.delay):null;return 0!==c&&e.forEach(_=>{const I=t.appendInstructionToTimeline(_,c,f);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Ui(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const u=e.options;if(u&&(u.params||u.delay)&&(s=t.createSubContext(u),s.transformIntoNewTimeline(),null!=u.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=hc);const c=io(u.delay);s.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Ui(this,c,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?io(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Ui(this,c,f),s=Math.max(s,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Pd(t.params?vi(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*u),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(s+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},u=s.delay?io(s.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=hc);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((I,C)=>{t.currentQueryIndex=C;const x=t.createSubContext(e.options,I);u&&x.delayNextStep(u),I===t.element&&(_=x.currentTimeline),Ui(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const C=t.currentTimeline;_&&C.delayNextStep(_);const x=C.currentTime;Ui(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-x+(s.startTime-r.currentTimeline.startTime)}}const hc={};class fc{constructor(e,t,r,s,u,c,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new Ua(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=io(r.duration)),null!=r.delay&&(s.delay=io(r.delay));const u=r.params;if(u){let c=s.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=vi(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,u=new fc(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=hc,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new Gd(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(u),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,u,c){let f=[];if(s&&f.push(this.element),e.length>0){e=(e=e.replace(vv,"."+this._enterClassName)).replace(Mg,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),f.push(...I)}return!u&&0==f.length&&c.push(function Nn(n){return new m.vHH(3014,!1)}()),f}}class Ua{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ua(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||as),this._currentKeyframe.set(t,as);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&this._previousKeyframe.set("easing",t);const u=s&&s.params||{},c=function Rg(n,e){const t=new Map;let r;return n.forEach(s=>{if("*"===s){r=r||e.keys();for(let u of r)t.set(u,as)}else ka(s,t)}),t}(e,this._globalTimelineStyles);for(let[f,_]of c){const I=vi(_,u,r);this._pendingStyles.set(f,I),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??as),this._updateStyle(f,I)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const s=this._styleSummary.get(r);(!s||t.time>s.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((f,_)=>{const I=ka(f,new Map,this._backFill);I.forEach((C,x)=>{"!"===C?e.add(x):C===as&&t.add(x)}),r||I.set("offset",_/this.duration),s.push(I)});const u=e.size?$o(e.values()):[],c=t.size?$o(t.values()):[];if(r){const f=s[0],_=new Map(f);f.set("offset",0),_.set("offset",1),s=[f,_]}return qu(this.element,s,u,c,this.duration,this.startTime,this.easing,!1)}}class Gd extends Ua{constructor(e,t,r,s,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,_=ka(e[0]);_.set("offset",0),u.push(_);const I=ka(e[0]);I.set("offset",Ho(f)),u.push(I);const C=e.length-1;for(let x=1;x<=C;x++){let F=ka(e[x]);const z=F.get("offset");F.set("offset",Ho((t+z*r)/c)),u.push(F)}r=c,t=0,s="",e=u}return qu(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function Ho(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class _i{}const Cf=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class zd extends _i{normalizePropertyName(e,t){return Od(e)}normalizeStyleValue(e,t,r,s){let u="";const c=r.toString().trim();if(Cf.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&s.push(function Fo(n,e){return new m.vHH(3005,!1)}())}return c+u}}function Go(n,e,t,r,s,u,c,f,_,I,C,x,F){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:_,preStyleProps:I,postStyleProps:C,totalTime:x,errors:F}}const pc={};class mr{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function Af(n,e,t,r,s){return n.some(u=>u(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,r):new Map}build(e,t,r,s,u,c,f,_,I,C){const x=[],F=this.ast.options&&this.ast.options.params||pc,Z=this.buildStyles(r,f&&f.params||pc,x),ue=_&&_.params||pc,Ie=this.buildStyles(s,ue,x),We=new Set,tt=new Map,gt=new Map,it="void"===s,St={params:kg(ue,F),delay:this.ast.options?.delay},At=C?[]:gr(e,t,this.ast.animation,u,c,Z,Ie,St,I,x);let Xt=0;if(At.forEach(rd=>{Xt=Math.max(rd.duration+rd.delay,Xt)}),x.length)return Go(t,this._triggerName,r,s,it,Z,Ie,[],[],tt,gt,Xt,x);At.forEach(rd=>{const id=rd.element,vR=yi(tt,id,new Set);rd.preStyleProps.forEach(ug=>vR.add(ug));const A0=yi(gt,id,new Set);rd.postStyleProps.forEach(ug=>A0.add(ug)),id!==t&&We.add(id)});const ys=$o(We.values());return Go(t,this._triggerName,r,s,it,Z,Ie,At,ys,tt,gt,Xt)}}function kg(n,e){const t=so(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Jr{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,s=so(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(s[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,f)=>{c&&(c=vi(c,s,t));const _=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,_,c,t),r.set(_,c)})}),r}}class Og{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new Jr(s.style,s.options&&s.options.params||{},r))}),Fg(this.states,"true","1"),Fg(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new mr(e,s,this.states))}),this.fallbackTransition=function Lg(n,e,t){return new mr(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(c=>c.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Fg(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const mc=new Fa;class wv{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=cc(this._driver,t,r,[]);if(r.length)throw function ae(n){return new m.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const s=e.element,u=ro(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],u=this._animations.get(e);let c;const f=new Map;if(u?(c=gr(this._driver,t,u,Rd,oc,new Map,new Map,r,mc,s),c.forEach(C=>{const x=yi(f,C.element,new Map);C.postStyleProps.forEach(F=>x.set(F,null))})):(s.push(function Se(){return new m.vHH(3300,!1)}()),c=[]),s.length)throw function je(n){return new m.vHH(3504,!1)}();f.forEach((C,x)=>{C.forEach((F,z)=>{C.set(z,this._driver.computeStyle(x,z,as))})});const I=Cr(c.map(C=>{const x=f.get(C.element);return this._buildPlayer(C,new Map,x)}));return this._playersById.set(e,I),I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function dt(n){return new m.vHH(3301,!1)}();return t}listen(e,t,r,s){const u=Ad(t,"","","");return ls(this._getPlayer(e),r,u,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const xf="ng-animate-queued",qd="ng-animate-disabled",w=[],A={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},N={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},G="__ng_removed";class ce{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Wu(n){return n??null}(r?e.value:e),r){const u=so(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const Oe="void",Ye=new ce(Oe);class wt{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Vr(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.has(t))throw function _t(n,e){return new m.vHH(3302,!1)}();if(null==r||0==r.length)throw function Pt(n){return new m.vHH(3303,!1)}();if(!function Mf(n){return"start"==n||"done"==n}(r))throw function ft(n,e){return new m.vHH(3400,!1)}();const u=yi(this._elementListeners,e,[]),c={name:t,phase:r,callback:s};u.push(c);const f=yi(this._engine.statesByElement,e,new Map);return f.has(t)||(Vr(e,ac),Vr(e,ac+"-"+t),f.set(t,Ye)),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function vn(n){return new m.vHH(3401,!1)}();return t}trigger(e,t,r,s=!0){const u=this._getTrigger(t),c=new Pn(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Vr(e,ac),Vr(e,ac+"-"+t),this._engine.statesByElement.set(e,f=new Map));let _=f.get(t);const I=new ce(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&I.absorbOptions(_.options),f.set(t,I),_||(_=Ye),I.value!==Oe&&_.value===I.value){if(!function Bg(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const u=t[s];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,I.params)){const ue=[],Ie=u.matchStyles(_.value,_.params,ue),We=u.matchStyles(I.value,I.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{Oa(e,Ie),pr(e,We)})}return}const F=yi(this._engine.playersByElement,e,[]);F.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==t&&ue.queued&&ue.destroy()});let z=u.matchTransition(_.value,I.value,e,I.params),Z=!1;if(!z){if(!s)return;z=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:z,fromState:_,toState:I,player:c,isFallbackTransition:Z}),Z||(Vr(e,xf),c.onStart(()=>{Ku(e,xf)})),c.onDone(()=>{let ue=this.players.indexOf(c);ue>=0&&this.players.splice(ue,1);const Ie=this._engine.playersByElement.get(e);if(Ie){let We=Ie.indexOf(c);We>=0&&Ie.splice(We,1)}}),this.players.push(c),F.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Pa,!0);r.forEach(s=>{if(s[G])return;const u=this._engine.fetchNamespacesByElement(s);u.size?u.forEach(c=>c.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(u.forEach((_,I)=>{if(c.set(I,_.value),this._triggers.has(I)){const C=this.trigger(e,I,Oe,s);C&&f.push(C)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Cr(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(u=>{const c=u.name;if(s.has(c))return;s.add(c);const _=this._triggers.get(c).fallbackTransition,I=r.get(c)||Ye,C=new ce(Oe),x=new Pn(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:I,toState:C,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)s=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[G];(!u||u===A)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Vr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const _=Ad(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,ls(r.player,f.phase,_,f.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const u=r.transition.ast.depCount,c=s.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class pt{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new wt(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const _=s.get(f);if(_){const I=r.indexOf(_);r.splice(I+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let s of r.values())if(s.namespaceId){const u=this._fetchNamespace(s.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,s){if(yc(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!yc(t))return;const u=t[G];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Vr(e,qd)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ku(e,qd))}removeNode(e,t,r,s){if(yc(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,u){this.collectedLeaveElements.push(t),t[G]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,s,u){return yc(t)?this._fetchNamespace(e).listen(t,r,s,u):()=>{}}_buildInstruction(e,t,r,s,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,Pa,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,uc,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Cr(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[G];if(t&&t.setForRemoval){if(e[G]=A,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(qd)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Vr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Cr(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function ur(n){return new m.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new Fa,s=[],u=new Map,c=[],f=new Map,_=new Map,I=new Map,C=new Set;this.disabledNodes.forEach(lt=>{C.add(lt);const It=this.driver.query(lt,".ng-animate-queued",!0);for(let xt=0;xt<It.length;xt++)C.add(It[xt])});const x=this.bodyNode,F=Array.from(this.statesByElement.keys()),z=Rf(F,this.collectedEnterElements),Z=new Map;let ue=0;z.forEach((lt,It)=>{const xt=Rd+ue++;Z.set(It,xt),lt.forEach(sn=>Vr(sn,xt))});const Ie=[],We=new Set,tt=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const It=this.collectedLeaveElements[lt],xt=It[G];xt&&xt.setForRemoval&&(Ie.push(It),We.add(It),xt.hasAnimation?this.driver.query(It,".ng-star-inserted",!0).forEach(sn=>We.add(sn)):tt.add(It))}const gt=new Map,it=Rf(F,Array.from(We));it.forEach((lt,It)=>{const xt=oc+ue++;gt.set(It,xt),lt.forEach(sn=>Vr(sn,xt))}),e.push(()=>{z.forEach((lt,It)=>{const xt=Z.get(It);lt.forEach(sn=>Ku(sn,xt))}),it.forEach((lt,It)=>{const xt=gt.get(It);lt.forEach(sn=>Ku(sn,xt))}),Ie.forEach(lt=>{this.processLeaveNode(lt)})});const St=[],At=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(t).forEach(xt=>{const sn=xt.player,ui=xt.element;if(St.push(sn),this.collectedEnterElements.length){const Yi=ui[G];if(Yi&&Yi.setForMove){if(Yi.previousTriggersValues&&Yi.previousTriggersValues.has(xt.triggerName)){const lg=Yi.previousTriggersValues.get(xt.triggerName),ia=this.statesByElement.get(xt.element);if(ia&&ia.has(xt.triggerName)){const Bb=ia.get(xt.triggerName);Bb.value=lg,ia.set(xt.triggerName,Bb)}}return void sn.destroy()}}const Dl=!x||!this.driver.containsElement(x,ui),_o=gt.get(ui),Xh=Z.get(ui),sr=this._buildInstruction(xt,r,Xh,_o,Dl);if(sr.errors&&sr.errors.length)return void At.push(sr);if(Dl)return sn.onStart(()=>Oa(ui,sr.fromStyles)),sn.onDestroy(()=>pr(ui,sr.toStyles)),void s.push(sn);if(xt.isFallbackTransition)return sn.onStart(()=>Oa(ui,sr.fromStyles)),sn.onDestroy(()=>pr(ui,sr.toStyles)),void s.push(sn);const ER=[];sr.timelines.forEach(Yi=>{Yi.stretchStartingKeyframe=!0,this.disabledNodes.has(Yi.element)||ER.push(Yi)}),sr.timelines=ER,r.append(ui,sr.timelines),c.push({instruction:sr,player:sn,element:ui}),sr.queriedElements.forEach(Yi=>yi(f,Yi,[]).push(sn)),sr.preStyleProps.forEach((Yi,lg)=>{if(Yi.size){let ia=_.get(lg);ia||_.set(lg,ia=new Set),Yi.forEach((Bb,lA)=>ia.add(lA))}}),sr.postStyleProps.forEach((Yi,lg)=>{let ia=I.get(lg);ia||I.set(lg,ia=new Set),Yi.forEach((Bb,lA)=>ia.add(lA))})});if(At.length){const lt=[];At.forEach(It=>{lt.push(function Vo(n,e){return new m.vHH(3505,!1)}())}),St.forEach(It=>It.destroy()),this.reportError(lt)}const Xt=new Map,ys=new Map;c.forEach(lt=>{const It=lt.element;r.has(It)&&(ys.set(It,It),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,Xt))}),s.forEach(lt=>{const It=lt.element;this._getPreviousPlayers(It,!1,lt.namespaceId,lt.triggerName,null).forEach(sn=>{yi(Xt,It,[]).push(sn),sn.destroy()})});const rd=Ie.filter(lt=>jg(lt,_,I)),id=new Map;Ug(id,this.driver,tt,I,as).forEach(lt=>{jg(lt,_,I)&&rd.push(lt)});const A0=new Map;z.forEach((lt,It)=>{Ug(A0,this.driver,new Set(lt),_,"!")}),rd.forEach(lt=>{const It=id.get(lt),xt=A0.get(lt);id.set(lt,new Map([...Array.from(It?.entries()??[]),...Array.from(xt?.entries()??[])]))});const ug=[],_R=[],wR={};c.forEach(lt=>{const{element:It,player:xt,instruction:sn}=lt;if(r.has(It)){if(C.has(It))return xt.onDestroy(()=>pr(It,sn.toStyles)),xt.disabled=!0,xt.overrideTotalTime(sn.totalTime),void s.push(xt);let ui=wR;if(ys.size>1){let _o=It;const Xh=[];for(;_o=_o.parentNode;){const sr=ys.get(_o);if(sr){ui=sr;break}Xh.push(_o)}Xh.forEach(sr=>ys.set(sr,ui))}const Dl=this._buildAnimation(xt.namespaceId,sn,Xt,u,A0,id);if(xt.setRealPlayer(Dl),ui===wR)ug.push(xt);else{const _o=this.playersByElement.get(ui);_o&&_o.length&&(xt.parentPlayer=Cr(_o)),s.push(xt)}}else Oa(It,sn.fromStyles),xt.onDestroy(()=>pr(It,sn.toStyles)),_R.push(xt),C.has(It)&&s.push(xt)}),_R.forEach(lt=>{const It=u.get(lt.element);if(It&&It.length){const xt=Cr(It);lt.setRealPlayer(xt)}}),s.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<Ie.length;lt++){const It=Ie[lt],xt=It[G];if(Ku(It,oc),xt&&xt.hasAnimation)continue;let sn=[];if(f.size){let Dl=f.get(It);Dl&&Dl.length&&sn.push(...Dl);let _o=this.driver.query(It,uc,!0);for(let Xh=0;Xh<_o.length;Xh++){let sr=f.get(_o[Xh]);sr&&sr.length&&sn.push(...sr)}}const ui=sn.filter(Dl=>!Dl.destroyed);ui.length?Vg(this,It,ui):this.processLeaveNode(It)}return Ie.length=0,ug.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const It=this.players.indexOf(lt);this.players.splice(It,1)}),lt.play()}),ug}elementContainsData(e,t){let r=!1;const s=t[G];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const _=!u||u==Oe;f.forEach(I=>{I.queued||!_&&I.triggerName!=s||c.push(I)})}}return(r||s)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||s&&s!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const I=_.element,C=I!==u,x=yi(r,I,[]);this._getPreviousPlayers(I,C,c,f,t.toState).forEach(z=>{const Z=z.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),z.destroy(),x.push(z)})}Oa(u,t.fromStyles)}_buildAnimation(e,t,r,s,u,c){const f=t.triggerName,_=t.element,I=[],C=new Set,x=new Set,F=t.timelines.map(Z=>{const ue=Z.element;C.add(ue);const Ie=ue[G];if(Ie&&Ie.removedBeforeQueried)return new Qr(Z.duration,Z.delay);const We=ue!==_,tt=function Iv(n){const e=[];return Dv(n,e),e}((r.get(ue)||w).map(Xt=>Xt.getRealPlayer())).filter(Xt=>!!Xt.element&&Xt.element===ue),gt=u.get(ue),it=c.get(ue),St=ro(0,this._normalizer,0,Z.keyframes,gt,it),At=this._buildPlayer(Z,St,tt);if(Z.subTimeline&&s&&x.add(ue),We){const Xt=new Pn(e,f,ue);Xt.setRealPlayer(At),I.push(Xt)}return At});I.forEach(Z=>{yi(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function Vi(n,e,t){let r=n.get(e);if(r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Z.element,Z))}),C.forEach(Z=>Vr(Z,bg));const z=Cr(F);return z.onDestroy(()=>{C.forEach(Z=>Ku(Z,bg)),pr(_,t.toStyles)}),x.forEach(Z=>{yi(s,Z,[]).push(z)}),z}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Qr(e.duration,e.delay)}}class Pn{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Qr,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(s=>ls(e,r,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){yi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function yc(n){return n&&1===n.nodeType}function vc(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Ug(n,e,t,r,s){const u=[];t.forEach(_=>u.push(vc(_)));const c=[];r.forEach((_,I)=>{const C=new Map;_.forEach(x=>{const F=e.computeStyle(I,x,s);C.set(x,F),(!F||0==F.length)&&(I[G]=N,c.push(I))}),n.set(I,C)});let f=0;return t.forEach(_=>vc(_,u[f++])),c}function Rf(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const s=new Set(e),u=new Map;function c(f){if(!f)return 1;let _=u.get(f);if(_)return _;const I=f.parentNode;return _=t.has(I)?I:s.has(I)?1:c(I),u.set(f,_),_}return e.forEach(f=>{const _=c(f);1!==_&&t.get(_).push(f)}),t}function Vr(n,e){n.classList?.add(e)}function Ku(n,e){n.classList?.remove(e)}function Vg(n,e,t){Cr(t).onDone(()=>n.processLeaveNode(e))}function Dv(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Ca?Dv(r.players,e):e.push(r)}}function jg(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(u=>s.add(u)):e.set(n,r),t.delete(n),!0}class Nf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,u)=>{},this._transitionEngine=new pt(e,t,r),this._timelineEngine=new wv(e,t,r),this._transitionEngine.onRemovalComplete=(s,u)=>this.onRemovalComplete(s,u)}registerTrigger(e,t,r,s,u){const c=e+"-"+s;let f=this._triggerCache[c];if(!f){const _=[],C=cc(this._driver,u,_,[]);if(_.length)throw function L(n,e){return new m.vHH(3404,!1)}();f=function gc(n,e,t){return new Og(n,e,t)}(s,C,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,s,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[u,c]=Eg(r);this._timelineEngine.command(u,t,c,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,u){if("@"==r.charAt(0)){const[c,f]=Eg(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,s,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let F0=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&pr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pr(this._element,this._initialStyles),this._endStyles&&(pr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Oa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Oa(this._element,this._endStyles),this._endStyles=null),pr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $g(n){let e=null;return n.forEach((t,r)=>{(function U0(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Hg{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,s)=>{"offset"!==s&&e.set(s,this._finished?r:Ld(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jb{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Na(e,t)}getParentElement(e){return mf(e)}query(e,t,r){return Md(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,u,c=[]){const _={duration:r,delay:s,fill:0==s?"both":"forwards"};u&&(_.easing=u);const I=new Map,C=c.filter(z=>z instanceof Hg);(function Sg(n,e){return 0===n||0===e})(r,s)&&C.forEach(z=>{z.currentSnapshot.forEach((Z,ue)=>I.set(ue,Z))});let x=function lv(n){return n.length?n[0]instanceof Map?n:n.map(e=>wf(e)):[]}(t).map(z=>ka(z));x=function k0(n,e,t){if(t.size&&e.length){let r=e[0],s=[];if(t.forEach((u,c)=>{r.has(c)||s.push(c),r.set(c,u)}),s.length)for(let u=1;u<e.length;u++){let c=e[u];s.forEach(f=>c.set(f,Ld(n,f)))}}return e}(e,x,I);const F=function bv(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=$g(e[0]),e.length>1&&(r=$g(e[e.length-1]))):e instanceof Map&&(t=$g(e)),t||r?new F0(n,t,r):null}(e,x);return new Hg(e,x,_,F)}}let Tv=(()=>{class n extends ku{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?Jl(t):t;return V0(this._renderer,null,r,"register",[s]),new Pf(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Pf extends class Oo{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new $b(this._id,e,t||{},this._renderer)}}class $b{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return V0(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function V0(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const Sv="@.disabled";let Hb=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=c?.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(u);return C||(C=new B0("",u,this.engine),this._rendererCache.set(u,C)),C}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=C=>{Array.isArray(C)?C.forEach(_):this.engine.registerTrigger(c,f,t,C.name,C)};return r.data.animation.forEach(_),new Gb(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(Nf),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class B0{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Sv?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Gb extends B0{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Sv?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function zb(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function Cv(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,s,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let qb=(()=>{class n extends Nf{constructor(t,r,s,u){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le),m.LFG(vf),m.LFG(_i),m.LFG(m.z2F))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Av=[{provide:ku,useClass:Tv},{provide:_i,useFactory:function Wb(){return new zd}},{provide:Nf,useClass:qb},{provide:m.FYo,useFactory:function Kb(n,e,t){return new Hb(n,e,t)},deps:[Ks,Nf,m.R0b]}],xv=[{provide:vf,useFactory:()=>new jb},{provide:m.QbO,useValue:"BrowserAnimations"},...Av],j0=[{provide:vf,useClass:Dg},{provide:m.QbO,useValue:"NoopAnimations"},...Av];let wi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?j0:xv}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:xv,imports:[xu]}),n})();var yr=O(8421),cs=O(9751),Br=O(5577),Yb=O(1144),zo=O(576),Mt=O(4004);const{isArray:Qb}=Array;function z0(n){return(0,Mt.U)(e=>function G0(n,e){return Qb(e)?n(...e):n(e)}(n,e))}const q0=["addListener","removeListener"],Jb=["addEventListener","removeEventListener"],Xb=["on","off"];function Mv(n,e,t,r){if((0,zo.m)(t)&&(r=t,t=void 0),r)return Mv(n,e,t).pipe(z0(r));const[s,u]=function Va(n){return(0,zo.m)(n.addEventListener)&&(0,zo.m)(n.removeEventListener)}(n)?Jb.map(c=>f=>n[c](e,f,t)):function eT(n){return(0,zo.m)(n.addListener)&&(0,zo.m)(n.removeListener)}(n)?q0.map(W0(n,e)):function Wd(n){return(0,zo.m)(n.on)&&(0,zo.m)(n.off)}(n)?Xb.map(W0(n,e)):[];if(!s&&(0,Yb.z)(n))return(0,Br.z)(c=>Mv(c,e,t))((0,yr.Xf)(n));if(!s)throw new TypeError("Invalid event target");return new cs.y(c=>{const f=(..._)=>c.next(1<_.length?_:_[0]);return s(f),()=>u(f)})}function W0(n,e){return t=>r=>n[t](e,r)}var _c=O(515),Ei=O(4482),Bi=O(5403);function kf(n){return n<=0?()=>_c.E:(0,Ei.e)((e,t)=>{let r=0;e.subscribe((0,Bi.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}var K0=O(4986),Vn=O(8996),ji=O(7669);function at(...n){const e=(0,ji.yG)(n);return(0,Vn.D)(n,e)}var vr=O(5813),Of=O(8189);function Rv(...n){return function Z0(){return(0,Of.J)(1)}()((0,Vn.D)(n,(0,ji.yG)(n)))}function Zu(...n){const e=(0,ji.yG)(n);return(0,Ei.e)((t,r)=>{(e?Rv(n,t,e):Rv(n,t)).subscribe(r)})}function Nv(){return(0,Ei.e)((n,e)=>{let t,r=!1;n.subscribe((0,Bi.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function tT(n,e,t,r,s){return(u,c)=>{let f=t,_=e,I=0;u.subscribe((0,Bi.x)(c,C=>{const x=I++;_=f?n(_,C,x):(f=!0,C),r&&c.next(_)},s&&(()=>{f&&c.next(_),c.complete()})))}}function wc(n,e){return(0,Ei.e)(tT(n,e,arguments.length>=2,!0))}var Ec=O(4671);function cA(n,e){return n===e}function Xr(n,e){return(0,Ei.e)((t,r)=>{let s=0;t.subscribe((0,Bi.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var ut,ds=O(2011),rT=(O(2476),O(3942)),ve=O(5861),Ic=O(9681),zg=O(4859),Yu=O(1877),tn=O(2090),iT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ba={},Lf=Lf||{},Rt=iT||self;function Kd(){}function qg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ff(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Wg="closure_uid_"+(1e9*Math.random()>>>0),Dc=0;function J0(n,e,t){return n.call.apply(n.bind,arguments)}function X0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function ei(n,e,t){return(ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?J0:X0).apply(null,arguments)}function Pv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function lr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[s].apply(r,c)}}function Qu(){this.s=this.s,this.o=this.o}var tE={};Qu.prototype.s=!1,Qu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Q0(n){return Object.prototype.hasOwnProperty.call(n,Wg)&&n[Wg]||(n[Wg]=++Dc)}(this);delete tE[n]}},Qu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Uf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ov(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(qg(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let c=0;c<u;c++)n[s+c]=r[c]}else n.push(r)}}function _r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_r.prototype.h=function(){this.defaultPrevented=!0};var Kg=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Kd,e),Rt.removeEventListener("test",Kd,e)}catch{}return n}();function Vf(n){return/^[\s\xa0]*$/.test(n)}var Zg=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Yg(n,e){return n<e?-1:n>e?1:0}function Zd(){var n=Rt.navigator;return n&&(n=n.userAgent)?n:""}function $i(n){return-1!=Zd().indexOf(n)}function Lv(n){return Lv[" "](n),n}Lv[" "]=Kd;var Qg,n,sT=$i("Opera"),Yd=$i("Trident")||$i("MSIE"),Fv=$i("Edge"),Bf=Fv||Yd,Uv=$i("Gecko")&&!(-1!=Zd().toLowerCase().indexOf("webkit")&&!$i("Edge"))&&!($i("Trident")||$i("MSIE"))&&!$i("Edge"),dA=-1!=Zd().toLowerCase().indexOf("webkit")&&!$i("Edge");function Vv(){var n=Rt.document;return n?n.documentMode:void 0}e:{var Jg="",Bv=(n=Zd(),Uv?/rv:([^\);]+)(\)|;)/.exec(n):Fv?/Edge\/([\d\.]+)/.exec(n):Yd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):dA?/WebKit\/(\S+)/.exec(n):sT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bv&&(Jg=Bv?Bv[1]:""),Yd){var jv=Vv();if(null!=jv&&jv>parseFloat(Jg)){Qg=String(jv);break e}}Qg=Jg}var oo={};var aT=Rt.document&&Yd&&(Vv()||parseInt(Qg,10))||void 0;function jf(n,e){if(_r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Uv){e:{try{Lv(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:uT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jf.X.h.call(this)}}lr(jf,_r);var uT={2:"touch",3:"pen",4:"mouse"};jf.prototype.h=function(){jf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qd="closure_listenable_"+(1e6*Math.random()|0),lT=0;function cT(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++lT,this.ba=this.ea=!1}function em(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Nt(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function $v(n){const e={};for(const t in n)e[t]=n[t];return e}const Hv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gv(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Hv.length;u++)t=Hv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function tm(n){this.src=n,this.g={},this.h=0}function zv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=kv(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(em(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function nm(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}tm.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=nm(n,e,r,s);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new cT(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var qv="closure_lm_"+(1e6*Math.random()|0),rm={};function iE(n,e,t,r,s){if(r&&r.once)return Wv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)iE(n,e[u],t,r,s);return null}return t=aE(t),n&&n[Qd]?n.N(e,t,Ff(r)?!!r.capture:!!r,s):sE(n,e,t,!1,r,s)}function sE(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=Ff(s)?!!s.capture:!!s,f=$f(n);if(f||(n[qv]=f=new tm(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function hA(){const e=Zv;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Kg||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(oE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Wv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Wv(n,e[u],t,r,s);return null}return t=aE(t),n&&n[Qd]?n.O(e,t,Ff(r)?!!r.capture:!!r,s):sE(n,e,t,!0,r,s)}function Kv(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Kv(n,e[u],t,r,s);else r=Ff(r)?!!r.capture:!!r,t=aE(t),n&&n[Qd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=nm(u=n.g[e],t,r,s))&&(em(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=$f(n))&&(e=n.g[e.toString()],n=-1,e&&(n=nm(e,t,r,s)),(t=-1<n?e[n]:null)&&ja(t))}function ja(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Qd])zv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(oE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=$f(e))?(zv(t,n),0==t.h&&(t.src=null,e[qv]=null)):em(n)}}}function oE(n){return n in rm?rm[n]:rm[n]="on"+n}function Zv(n,e){if(n.ba)n=!0;else{e=new jf(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ja(n),n=t.call(r,e)}return n}function $f(n){return(n=n[qv])instanceof tm?n:null}var Yv="__closure_events_fn_"+(1e9*Math.random()>>>0);function aE(n){return"function"==typeof n?n:(n[Yv]||(n[Yv]=function(e){return n.handleEvent(e)}),n[Yv])}function jr(){Qu.call(this),this.i=new tm(this),this.P=this,this.I=null}function ti(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new _r(e,n);else if(e instanceof _r)e.target=e.target||n;else{var s=e;Gv(e=new _r(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=im(c,r,!0,e)&&s}if(s=im(c=e.g=n,r,!0,e)&&s,s=im(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=im(c=e.g=t[u],r,!1,e)&&s}function im(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var f=c.listener,_=c.ha||c.src;c.ea&&zv(n.i,c),s=!1!==f.call(_,r)&&s}}return s&&!r.defaultPrevented}lr(jr,Qu),jr.prototype[Qd]=!0,jr.prototype.removeEventListener=function(n,e,t,r){Kv(this,n,e,t,r)},jr.prototype.M=function(){if(jr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)em(t[r]);delete n.g[e],n.h--}}this.I=null},jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var sm=Rt.JSON.stringify;function fA(){var n=cE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Qv,bc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new hT,n=>n.reset());class hT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function uE(n){Rt.setTimeout(()=>{throw n},0)}function Hf(n,e){Qv||function lE(){var n=Rt.Promise.resolve(void 0);Qv=function(){n.then(fT)}}(),Jv||(Qv(),Jv=!0),cE.add(n,e)}var Jv=!1,cE=new class dT{constructor(){this.h=this.g=null}add(e,t){const r=bc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fT(){for(var n;n=fA();){try{n.h.call(n.g)}catch(t){uE(t)}var e=bc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jv=!1}function om(n,e){jr.call(this),this.h=n||1,this.g=e||Rt,this.j=ei(this.kb,this),this.l=Date.now()}function Xv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function am(n,e,t){if("function"==typeof n)t&&(n=ei(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ei(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function dE(n){n.g=am(()=>{n.g=null,n.i&&(n.i=!1,dE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}lr(om,jr),(ut=om.prototype).ca=!1,ut.R=null,ut.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ti(this,"tick"),this.ca&&(Xv(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){om.X.M.call(this),Xv(this),delete this.g};class hE extends Qu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dE(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jd(n){Qu.call(this),this.h=n,this.g={}}lr(Jd,Qu);var um=[];function pT(n,e,t,r){Array.isArray(t)||(t&&(um[0]=t.toString()),t=um);for(var s=0;s<t.length;s++){var u=iE(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function lm(n){Nt(n.g,function(e,t){this.g.hasOwnProperty(t)&&ja(e)},n),n.g={}}function cm(){this.g=!0}function Tc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dm(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return sm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Jd.prototype.M=function(){Jd.X.M.call(this),lm(this)},Jd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cm.prototype.Aa=function(){this.g=!1},cm.prototype.info=function(){};var $r={},e_=null;function hm(){return e_=e_||new jr}function fm(n){_r.call(this,$r.Oa,n)}function hs(n){const e=hm();ti(e,new fm(e,n))}function pm(n,e){_r.call(this,$r.STAT_EVENT,n),this.stat=e}function ni(n){const e=hm();ti(e,new pm(e,n))}function gm(n,e){_r.call(this,$r.Pa,n),this.size=e}function mm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}$r.Oa="serverreachability",lr(fm,_r),$r.STAT_EVENT="statevent",lr(pm,_r),$r.Pa="timingevent",lr(gm,_r);var Gf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},gT={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function eh(){}function ym(){}eh.prototype.h=null;var t_,Sc={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function qf(){_r.call(this,"d")}function pE(){_r.call(this,"c")}function vm(){}function Wf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Jd(this),this.O=mE,this.T=new om(n=Bf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new gE}function gE(){this.i=null,this.g="",this.h=!1}lr(qf,_r),lr(pE,_r),lr(vm,eh),vm.prototype.g=function(){return new XMLHttpRequest},vm.prototype.i=function(){return{}},t_=new vm;var mE=45e3,yE={},_m={};function vE(n,e,t){n.K=1,n.v=Im(Ha(e)),n.s=t,n.P=!0,n_(n,null)}function n_(n,e){n.F=Date.now(),wm(n),n.A=Ha(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Zf(t.i,"t",r),n.C=0,t=n.l.H,n.h=new gE,n.g=ip(n.l,t?e:null,!n.s),0<n.N&&(n.L=new hE(ei(n.Ka,n,n.g),n.N)),pT(n.S,n.g,"readystatechange",n.hb),e=n.H?$v(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),hs(1),function pA(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),_=0;_<f.length;_++){var I=f[_].split("=");if(1<I.length){var C=I[0];I=I[1];var x=C.split("_");c=2<=x.length&&"type"==x[1]?c+(C+"=")+I+"&":c+(C+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function r_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function _E(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=i_(n,t),s==_m){4==e&&(n.o=4,ni(14),r=!1),Tc(n.j,n.m,null,"[Incomplete Response]");break}if(s==yE){n.o=4,ni(15),Tc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Tc(n.j,n.m,s,null),wE(n,s)}r_(n)&&s!=_m&&s!=yE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ni(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),OE(e),e.K=!0,ni(11))):(Tc(n.j,n.m,t,"[Invalid Chunked Response]"),th(n),Em(n))}function i_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?_m:(t=Number(e.substring(t,r)),isNaN(t)?yE:(r+=1)+t>e.length?_m:(e=e.substr(r,t),n.C=r+t,e))}function wm(n){n.V=Date.now()+n.O,mT(n,n.O)}function mT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=mm(ei(n.fb,n),e)}function s_(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Em(n){0==n.l.G||n.I||y_(n.l,n)}function th(n){s_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Xv(n.T),lm(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||SE(t.h,n)))if(!n.J&&SE(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;np(t),Mm(t)}tp(t),ni(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=mm(ei(t.bb,t),6e3));if(1>=TE(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ga(t,11)}else if((n.J||t.g==n)&&np(t),!Vf(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const C=I[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const x=I[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const F=I[5];null!=F&&"number"==typeof F&&0<F&&(t.J=r=1.5*F,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const Z=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.h;u.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(u_(u,u.h),u.h=null))}if(r.D){const ue=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.za=ue,_n(r.F,r.D,ue))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=rp(r,r.H?r.ka:null,r.V),c.J){l_(r.h,c);var f=c,_=r.J;_&&f.setTimeout(_),f.B&&(s_(f),wm(f)),r.g=c}else CT(r);0<t.i.length&&Nm(t)}else"stop"!=I[0]&&"close"!=I[0]||Ga(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Ga(t,7):g_(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}hs(4)}catch{}}function yT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(qg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function mA(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(qg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function gA(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(qg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=Wf.prototype).setTimeout=function(n){this.O=n},ut.hb=function(n){n=n.target;const e=this.L;e&&3==uo(n)?e.l():this.Ka(n)},ut.Ka=function(n){try{if(n==this.g)e:{const C=uo(this.g);var e=this.g.Ea();const x=this.g.aa();if(!(3>C)&&(3!=C||Bf||this.g&&(this.h.h||this.g.fa()||RE(this.g)))){this.I||4!=C||7==e||hs(8==e||0>=x?3:2),s_(this);var t=this.g.aa();this.Y=t;t:if(r_(this)){var r=RE(this.g);n="";var s=r.length,u=4==uo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){th(this),Em(this);var c="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function Xd(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vf(f)){var I=f;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,ni(12),th(this),Em(this);break e}Tc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wE(this,t)}this.P?(_E(this,C,c),Bf&&this.i&&3==C&&(pT(this.S,this.T,"tick",this.gb),this.T.start())):(Tc(this.j,this.m,c,null),wE(this,c)),4==C&&th(this),this.i&&!this.I&&(4==C?y_(this.l,this):(this.i=!1,wm(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ni(12)):(this.o=0,ni(13)),th(this),Em(this)}}}catch{}},ut.gb=function(){if(this.g){var n=uo(this.g),e=this.g.fa();this.C<e.length&&(s_(this),_E(this,n,e),this.i&&4!=n&&wm(this))}},ut.cancel=function(){this.I=!0,th(this)},ut.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function fE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hs(3),ni(17)),th(this),this.o=2,Em(this)):mT(this,this.V-n)};var vT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $a(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof $a){this.h=void 0!==e?e:n.h,Kf(this,n.j),this.s=n.s,this.g=n.g,nh(this,n.m),this.l=n.l,e=n.i;var t=new qo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),o_(this,t),this.o=n.o}else n&&(t=String(n).match(vT))?(this.h=!!e,Kf(this,t[1]||"",!0),this.s=ks(t[2]||""),this.g=ks(t[3]||"",!0),nh(this,t[4]),this.l=ks(t[5]||"",!0),o_(this,t[6]||"",!0),this.o=ks(t[7]||"")):(this.h=!!e,this.i=new qo(null,this.h))}function Ha(n){return new $a(n)}function Kf(n,e,t){n.j=t?ks(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function nh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function o_(n,e,t){e instanceof qo?(n.i=e,function DE(n,e){e&&!n.j&&(Wo(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Cc(this,r),Zf(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=rh(e,ET)),n.i=new qo(e,n.h))}function _n(n,e,t){n.i.set(e,t)}function Im(n){return _n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ks(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_T),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _T(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$a.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rh(e,EE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rh(e,EE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(rh(t,"/"==t.charAt(0)?wT:IE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rh(t,Dm)),n.join("")};var EE=/[#\/\?@]/g,IE=/[#\?:]/g,wT=/[#\?]/g,ET=/[#\?@]/g,Dm=/#/g;function qo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wo(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ju(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Cc(n,e){Wo(n),e=Ac(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function bm(n,e){return Wo(n),e=Ac(n,e),n.g.has(e)}function Zf(n,e,t){Cc(n,e),0<t.length&&(n.i=null,n.g.set(Ac(n,e),Uf(t)),n.h+=t.length)}function Ac(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Tm(n){this.l=n||bE,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ga&&Rt.g.Ga()&&Rt.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=qo.prototype).add=function(n,e){Wo(this),this.i=null,n=Ac(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Wo(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ut.oa=function(){Wo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ut.W=function(n){Wo(this);let e=[];if("string"==typeof n)bm(this,n)&&(e=e.concat(this.g.get(Ac(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return Wo(this),this.i=null,bm(this,n=Ac(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var s=u;""!==c[r]&&(s+="="+encodeURIComponent(String(c[r]))),n.push(s)}}return this.i=n.join("&")};var bE=10;function Sm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function TE(n){return n.h?1:n.g?n.g.size:0}function SE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function u_(n,e){n.g?n.g.add(e):n.h=e}function l_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function CE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Uf(n.i)}function Cm(){}function AE(){this.g=new Cm}function IT(n,e,t){const r=t||"";try{yT(n,function(s,u){let c=s;Ff(s)&&(c=sm(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Yf(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Qf(n){this.l=n.$b||null,this.j=n.ib||!1}function c_(n,e){jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=d_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tm.prototype.cancel=function(){if(this.i=CE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Cm.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Cm.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},lr(Qf,eh),Qf.prototype.g=function(){return new c_(this.l,this.j)},Qf.prototype.i=function(n){return function(){return n}}({}),lr(c_,jr);var d_=0;function Am(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function ih(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jf(n)}function Jf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=c_.prototype).open=function(n,e){if(this.readyState!=d_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jf(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ih(this)),this.readyState=d_},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jf(this)),this.g&&(this.readyState=3,Jf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof Rt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Am(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ih(this):Jf(this),3==this.readyState&&Am(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,ih(this))},ut.Ta=function(n){this.g&&(this.response=n,ih(this))},ut.ga=function(){this.g&&ih(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(c_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var DT=Rt.JSON.parse;function cr(n){jr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=h_,this.K=this.L=!1}lr(cr,jr);var h_="",bT=/^https?$/i,xE=["POST","PUT"];function ME(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,f_(n),xm(n)}function f_(n){n.D||(n.D=!0,ti(n,"complete"),ti(n,"error"))}function p_(n){if(n.h&&typeof Lf<"u"&&(!n.C[1]||4!=uo(n)||2!=n.aa()))if(n.v&&4==uo(n))am(n.Ha,0,n);else if(ti(n,"readystatechange"),4==uo(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var s=String(n.H).match(vT)[1]||null;if(!s&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;s=u.substr(0,u.length-1)}r=!bT.test(s?s.toLowerCase():"")}t=r}if(t)ti(n,"complete"),ti(n,"success");else{n.m=6;try{var c=2<uo(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",f_(n)}}finally{xm(n)}}}function xm(n,e){if(n.g){ao(n);const t=n.g,r=n.C[0]?Kd:null;n.g=null,n.C=null,e||ti(n,"ready");try{t.onreadystatechange=r}catch{}}}function ao(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function uo(n){return n.g?n.g.readyState:0}function RE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case h_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function NE(n){let e="";return Nt(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function PE(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=NE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):_n(n,e,t))}function sh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function kE(n){this.Ca=0,this.i=[],this.j=new cm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=sh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=sh("baseRetryDelayMs",5e3,n),this.ab=sh("retryDelaySeedMs",1e4,n),this.Za=sh("forwardChannelMaxRetries",2,n),this.ta=sh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Tm(n&&n.concurrentRequestLimit),this.Fa=new AE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function g_(n){if(Rm(n),3==n.G){var e=n.U++,t=Ha(n.F);_n(t,"SID",n.I),_n(t,"RID",e),_n(t,"TYPE","terminate"),xc(n,t),(e=new Wf(n,n.j,e,void 0)).K=2,e.v=Im(Ha(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ip(e.l,null),e.g.da(e.v)),e.F=Date.now(),wm(e)}Ko(n)}function Mm(n){n.g&&(OE(n),n.g.cancel(),n.g=null)}function Rm(n){Mm(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),np(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Nm(n){Sm(n.h)||n.m||(n.m=!0,Hf(n.Ja,n),n.C=0)}function Xf(n,e){var t;t=e?e.m:n.U++;const r=Ha(n.F);_n(r,"SID",n.I),_n(r,"RID",t),_n(r,"AID",n.T),xc(n,r),n.o&&n.s&&PE(r,n.o,n.s),t=new Wf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=ep(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),u_(n.h,t),vE(t,r,e)}function xc(n,e){n.ia&&Nt(n.ia,function(t,r){_n(e,r,t)}),n.l&&yT({},function(t,r){_n(e,r,t)})}function ep(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ei(n.l.Qa,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let _=0;_<t;_++){let I=s[_].h;const C=s[_].g;if(I-=u,0>I)u=Math.max(0,s[_].h-100),f=!1;else try{IT(C,c,"req"+I+"_")}catch{r&&r(C)}}if(f){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function CT(n){n.g||n.u||(n.Z=1,Hf(n.Ia,n),n.A=0)}function tp(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=mm(ei(n.Ia,n),v_(n,n.A)),n.A++,0))}function OE(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function m_(n){n.g=new Wf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ha(n.sa);_n(e,"RID","rpc"),_n(e,"SID",n.I),_n(e,"CI",n.L?"0":"1"),_n(e,"AID",n.T),_n(e,"TYPE","xmlhttp"),xc(n,e),n.o&&n.s&&PE(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Im(Ha(e)),t.s=null,t.P=!0,n_(t,n)}function np(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function y_(n,e){var t=null;if(n.g==e){np(n),OE(n),n.g=null;var r=2}else{if(!SE(n.h,e))return;t=e.D,l_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ti(r=hm(),new gm(r,t,e,s)),Nm(n)}else CT(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function ST(n,e){return!(TE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=mm(ei(n.Ja,n,e),v_(n,n.C)),n.C++,0)))}(n,e)||2==r&&tp(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Ga(n,5);break;case 4:Ga(n,10);break;case 3:Ga(n,6);break;default:Ga(n,2)}}function v_(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function Ga(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ei(n.jb,n);t||(t=new $a("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Kf(t,"https"),Im(t)),function fs(n,e){const t=new cm;if(Rt.Image){const r=new Image;r.onload=Pv(Yf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Pv(Yf,t,r,"TestLoadImage: error",!1,e),r.onabort=Pv(Yf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pv(Yf,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ni(2);n.G=0,n.l&&n.l.va(e),Ko(n),Rm(n)}function Ko(n){if(n.G=0,n.la=[],n.l){const e=CE(n.h);(0!=e.length||0!=n.i.length)&&(Ov(n.la,e),Ov(n.la,n.i),n.h.i.length=0,Uf(n.i),n.i.length=0),n.l.ua()}}function rp(n,e,t){var r=t instanceof $a?Ha(t):new $a(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),nh(r,r.m);else{var s=Rt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new $a(null,void 0);r&&Kf(u,r),e&&(u.g=e),s&&nh(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&_n(r,t,e),_n(r,"VER",n.ma),xc(n,r),r}function ip(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Da&&!n.ra?new Qf({ib:!0}):n.ra)).L=n.H,e}function oh(){}function Pm(){if(Yd&&!(10<=Number(aT)))throw Error("Environmental error: no available transport.")}function Ii(n,e){jr.call(this),this.g=new kE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Vf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ah(this)}function __(n){qf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function LE(){pE.call(this),this.status=1}function ah(n){this.g=n}(ut=cr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():t_.g(),this.C=function zf(n){return n.h||(n.h=n.i())}(this.u?this.u:t_),this.g.onreadystatechange=ei(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void ME(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Rt.FormData&&n instanceof Rt.FormData,!(0<=kv(xE,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ao(this),0<this.B&&((this.K=function TT(n){return Yd&&function oT(){return function nE(n){var e=oo;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Zg(String(Qg)).split("."),t=Zg("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Yg(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Yg(0==s[2].length,0==u[2].length)||Yg(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ei(this.qa,this)):this.A=am(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){ME(this,u)}},ut.qa=function(){typeof Lf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ti(this,"complete"),ti(this,"abort"),xm(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xm(this,!0)),cr.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?p_(this):this.eb())},ut.eb=function(){p_(this)},ut.aa=function(){try{return 2<uo(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),DT(e)}},ut.Ea=function(){return this.m},ut.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=kE.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Wf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=$v(u),Gv(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ep(this,s,e),_n(t=Ha(this.F),"RID",n),_n(t,"CVER",22),this.D&&_n(t,"X-HTTP-Session-Id",this.D),xc(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(NE(u)))+"&"+e:this.o&&PE(t,this.o,u)),u_(this.h,s),this.Xa&&_n(t,"TYPE","init"),this.O?(_n(t,"$req",e),_n(t,"SID","null"),s.Z=!0,vE(s,t,null)):vE(s,t,e),this.G=2}}else 3==this.G&&(n?Xf(this,n):0==this.i.length||Sm(this.h)||Xf(this))},ut.Ia=function(){if(this.u=null,m_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=mm(ei(this.cb,this),n)}},ut.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ni(10),Mm(this),m_(this))},ut.bb=function(){null!=this.v&&(this.v=null,Mm(this),tp(this),ni(19))},ut.jb=function(n){n?(this.j.info("Successfully pinged google.com"),ni(2)):(this.j.info("Failed to ping google.com"),ni(1))},(ut=oh.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Qa=function(){},Pm.prototype.g=function(n,e){return new Ii(n,e)},lr(Ii,jr),Ii.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ni(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=rp(n,null,n.V),Nm(n)},Ii.prototype.close=function(){g_(this.g)},Ii.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=sm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&Nm(e)},Ii.prototype.M=function(){this.g.l=null,delete this.j,g_(this.g),delete this.g,Ii.X.M.call(this)},lr(__,qf),lr(LE,pE),lr(ah,oh),ah.prototype.xa=function(){ti(this.g,"a")},ah.prototype.wa=function(n){ti(this.g,new __(n))},ah.prototype.va=function(n){ti(this.g,new LE(n))},ah.prototype.ua=function(){ti(this.g,"b")},Pm.prototype.createWebChannel=Pm.prototype.g,Ii.prototype.send=Ii.prototype.u,Ii.prototype.open=Ii.prototype.m,Ii.prototype.close=Ii.prototype.close,Gf.NO_ERROR=0,Gf.TIMEOUT=8,Gf.HTTP_ERROR=6,gT.COMPLETE="complete",ym.EventType=Sc,Sc.OPEN="a",Sc.CLOSE="b",Sc.ERROR="c",Sc.MESSAGE="d",jr.prototype.listen=jr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.Na,cr.prototype.getLastErrorCode=cr.prototype.Ea,cr.prototype.getStatus=cr.prototype.aa,cr.prototype.getResponseJson=cr.prototype.Ra,cr.prototype.getResponseText=cr.prototype.fa,cr.prototype.send=cr.prototype.da;var sp=Ba.createWebChannelTransport=function(){return new Pm},AT=Ba.getStatEventTarget=function(){return hm()},FE=Ba.ErrorCode=Gf,xT=Ba.EventType=gT,yA=Ba.Event=$r,UE=Ba.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},MT=Ba.FetchXmlHttpFactory=Qf,km=Ba.WebChannel=ym,VE=Ba.XhrIo=cr;const w_="@firebase/firestore";class Ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let Xu="9.10.0";const el=new Yu.Yd("@firebase/firestore");function E_(){return el.logLevel}function Pe(n,...e){if(el.logLevel<=Yu.in.DEBUG){const t=e.map(uh);el.debug(`Firestore (${Xu}): ${n}`,...t)}}function nr(n,...e){if(el.logLevel<=Yu.in.ERROR){const t=e.map(uh);el.error(`Firestore (${Xu}): ${n}`,...t)}}function Mc(n,...e){if(el.logLevel<=Yu.in.WARN){const t=e.map(uh);el.warn(`Firestore (${Xu}): ${n}`,...t)}}function uh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${Xu}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function Ct(n,e){n||Qe()}function qe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends tn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class lo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ap{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ar.UNAUTHENTICATED))}shutdown(){}}class ri{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Rc{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let c=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xr,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const I=c;e.enqueueRetryable((0,ve.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new lo(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Ar(e)}}class Om{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Os{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new Om(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Lm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lh{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.A=t.token,new Lm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ch(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Nc{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ch(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function co(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Pc(n){return n+"\0"}class dn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new dn(0,0))}static max(){return new mt(new dn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===dh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends dh{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const BE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends dh{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return BE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const f=e[s];if("\\"===f){if(s+1===e.length)throw new Re(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===f?(c=!c,s++):"."!==f||c?(r+=f,s++):(u(),s++)}if(u(),c)throw new Re(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(qt.fromString(e))}static fromName(e){return new He(qt.fromString(e).popFirst(5))}static empty(){return new He(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new qt(e.slice()))}}class lp{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Fm(n){return n.fields.find(e=>2===e.kind)}function tl(n){return n.fields.filter(e=>2!==e.kind)}lp.UNKNOWN_ID=-1;class Um{constructor(e,t){this.fieldPath=e,this.kind=t}}class hh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hh(0,Di.min())}}function $E(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=mt.fromTimestamp(1e9===r?new dn(t+1,0):new dn(t,r));return new Di(s,He.empty(),e)}function I_(n){return new Di(n.readTime,n.key,-1)}class Di{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Di(mt.min(),He.empty(),-1)}static max(){return new Di(mt.max(),He.empty(),-1)}}function cp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const HE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ho(n){return hp.apply(this,arguments)}function hp(){return hp=(0,ve.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==HE)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),hp.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let s=0,u=0,c=!1;e.forEach(f=>{++s,f.next(()=>{++u,c&&u===s&&t()},_=>r(_))}),c=!0,u===s&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(s=>s?se.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,s)=>{const u=e.length,c=new Array(u);let f=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(C=>{c[I]=C,++f,f===u&&r(c)},C=>s(C))}})}static doWhile(e,t){return new se((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class kc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new xr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new fh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Bm(r.target.error);this.P.reject(new fh(e,s))}}static open(e,t,r,s){try{return new kc(t,e.transaction(s,r))}catch(u){throw new fh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zE(t)}}class Hi{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Hi.D((0,tn.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),nl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,tn.hl)())return!1;if(Hi.N())return!0;const e=(0,tn.z$)(),t=Hi.D(e),r=0<t&&t<10,s=Hi.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new fh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;s("VersionError"===f.name?new Re(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new fh(e,f))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ve.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.F(e);const _=kc.open(u.db,e,c?"readonly":"readwrite",r),I=s(_).next(C=>(_.V(),C)).catch(C=>(_.abort(C),se.reject(C))).toPromise();return I.catch(()=>{}),yield _.v,I}catch(_){const I=_,C="FirebaseError"!==I.name&&f<3;if(Pe("SimpleDb","Transaction failed with error:",I.message,"Retrying:",C),u.close(),!C)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class GE{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return nl(this.U.delete())}}class fh extends Re{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zo(n){return"IndexedDbTransactionError"===n.name}class zE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),nl(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),nl(this.store.add(e))}get(e){return nl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),nl(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),nl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(c,f)=>{u.push(f)}).next(()=>u)}{const s=this.store.getAll(r.range);return new se((u,c)=>{s.onerror=f=>{c(f.target.error)},s.onsuccess=f=>{u(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,c,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new se((r,s)=>{t.onerror=u=>{const c=Bm(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}H(e,t){const r=[];return new se((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void s();const _=new GE(f),I=t(f.primaryKey,f.value,_);if(I instanceof se){const C=I.catch(x=>(_.done(),se.reject(x)));r.push(C)}_.isDone?s():null===_.G?f.continue():f.continue(_.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function nl(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Bm(r.target.error);t(s)}})}let Vm=!1;function Bm(n){const e=Hi.D((0,tn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vm||(Vm=!0,setTimeout(()=>{throw r},0)),r}}return n}class PT{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Zo(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ho(r)}yield t.nt(6e4)}))}}class qE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return se.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Pe("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,s).next(f=>{s-=f,r.add(c)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(s,u)).next(f=>(Pe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=I_(u);cp(c,r)>0&&(r=c)}),new Di(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function D_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}bi.at=-1;class Zn{constructor(e,t){this.comparator=e,this.root=t||Mr.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jm(this.root,e,this.comparator,!1)}getReverseIterator(){return new jm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jm(this.root,e,this.comparator,!0)}}class jm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Mr.RED,this.left=s??Mr.EMPTY,this.right=u??Mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Mr(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Mr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1,Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Mr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b_(this.data.getIterator())}getIteratorFrom(e){return new b_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class b_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oc(n){return n.hasNext()?n.getNext():void 0}class Gi{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Gi([])}unionWith(e){let t=new an(Bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new dr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const ZE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=ZE.exec(n);if(Ct(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ph(n){return"string"==typeof n?dr.fromBase64String(n):dr.fromUint8Array(n)}function T_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function YE(n){const e=n.mapValue.fields.__previous_value__;return T_(e)?YE(e):e}function gh(n){const e=za(n.mapValue.fields.__local_write_time__.timestampValue);return new dn(e.seconds,e.nanos)}class kT{constructor(e,t,r,s,u,c,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class wn{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wn("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wn&&e.projectId===this.projectId&&e.database===this.database}}function mh(n){return null==n}function fp(n){return 0===n&&1/n==-1/0}function QE(n){return"number"==typeof n&&Number.isInteger(n)&&!fp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const qa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$m={nullValue:"NULL_VALUE"};function il(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?T_(n)?4:go(n)?9007199254740991:10:Qe()}function fo(n,e){if(n===e)return!0;const t=il(n);if(t!==il(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gh(n).isEqual(gh(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=za(r.timestampValue),c=za(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ph(n.bytesValue).isEqual(ph(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return jn(r.geoPointValue.latitude)===jn(s.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return jn(r.integerValue)===jn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=jn(r.doubleValue),c=jn(s.doubleValue);return u===c?fp(u)===fp(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return co(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(D_(u)!==D_(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!fo(u[f],c[f])))return!1;return!0}(n,e);default:return Qe()}var s}function Yo(n,e){return void 0!==(n.values||[]).find(t=>fo(t,e))}function sl(n,e){if(n===e)return 0;const t=il(n),r=il(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=jn(s.integerValue||s.doubleValue),f=jn(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return JE(n.timestampValue,e.timestampValue);case 4:return JE(gh(n),gh(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(s,u){const c=ph(s),f=ph(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),f=u.split("/");for(let _=0;_<c.length&&_<f.length;_++){const I=Tt(c[_],f[_]);if(0!==I)return I}return Tt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=Tt(jn(s.latitude),jn(u.latitude));return 0!==c?c:Tt(jn(s.longitude),jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],f=u.values||[];for(let _=0;_<c.length&&_<f.length;++_){const I=sl(c[_],f[_]);if(I)return I}return Tt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===qa.mapValue&&u===qa.mapValue)return 0;if(s===qa.mapValue)return 1;if(u===qa.mapValue)return-1;const c=s.fields||{},f=Object.keys(c),_=u.fields||{},I=Object.keys(_);f.sort(),I.sort();for(let C=0;C<f.length&&C<I.length;++C){const x=Tt(f[C],I[C]);if(0!==x)return x;const F=sl(c[f[C]],_[I[C]]);if(0!==F)return F}return Tt(f.length,I.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function JE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=za(n),r=za(e),s=Tt(t.seconds,r.seconds);return 0!==s?s:Tt(t.nanos,r.nanos)}function Lc(n){return S_(n)}function S_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=za(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ph(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=S_(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of s)c?c=!1:u+=",",u+=`${f}:${S_(r.fields[f])}`;return u+"}"}(n.mapValue):Qe();var e}function ol(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function XE(n){return!!n&&"integerValue"in n}function yh(n){return!!n&&"arrayValue"in n}function C_(n){return!!n&&"nullValue"in n}function po(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hm(n){return!!n&&"mapValue"in n}function pp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function go(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function mo(n){return"nullValue"in n?$m:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ol(wn.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function yo(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ol(wn.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?qa:Qe()}function A_(n,e){const t=sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function x_(n,e){const t=sl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pp(t)}setAll(e){let t=Bn.emptyPath(),r={},s=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=f.popLast()}c?r[f.lastSegment()]=pp(c):s.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Hm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Hm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){rl(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Hr(pp(this.value))}}function eI(n){const e=[];return rl(n.fields,(t,r)=>{const s=new Bn([t]);if(Hm(r)){const u=eI(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new Gi(e)}class En{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new En(e,0,mt.min(),mt.min(),Hr.empty(),0)}static newFoundDocument(e,t,r){return new En(e,1,t,mt.min(),r,0)}static newNoDocument(e,t){return new En(e,2,t,mt.min(),Hr.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,mt.min(),Hr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class OT{constructor(e,t=null,r=[],s=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=f,this.ht=null}}function Gm(n,e=null,t=[],r=[],s=null,u=null,c=null){return new OT(n,e,t,r,s,u,c)}function vo(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Lc(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lc(r)).join(",")),e.ht=t}return e.ht}function vh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!aI(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!fo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uI(n.startAt,e.startAt)&&uI(n.endAt,e.endAt)}function zm(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gp(n,e){return n.filters.filter(t=>t instanceof Gr&&t.field.isEqual(e))}function M_(n,e,t){let r=$m,s=!0;for(const u of gp(n,e)){let c=$m,f=!0;switch(u.op){case"<":case"<=":c=mo(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=$m}A_({value:r,inclusive:s},{value:c,inclusive:f})<0&&(r=c,s=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];A_({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function mp(n,e,t){let r=qa,s=!0;for(const u of gp(n,e)){let c=qa,f=!0;switch(u.op){case">=":case">":c=yo(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=qa}x_({value:r,inclusive:s},{value:c,inclusive:f})>0&&(r=c,s=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];x_({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Gr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new tI(e,t,r):"array-contains"===t?new R_(e,r):"in"===t?new iI(e,r):"not-in"===t?new sI(e,r):"array-contains-any"===t?new oI(e,r):new Gr(e,t,r)}static lt(e,t,r){return"in"===t?new nI(e,r):new rI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(sl(t,this.value)):null!==t&&il(this.value)===il(t)&&this.ft(sl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class tI extends Gr{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.ft(t)}}class nI extends Gr{constructor(e,t){super(e,"in",t),this.keys=yp(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class rI extends Gr{constructor(e,t){super(e,"not-in",t),this.keys=yp(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yp(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class R_ extends Gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yh(t)&&Yo(t.arrayValue,this.value)}}class iI extends Gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yo(this.value.arrayValue,t)}}class sI extends Gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yo(this.value.arrayValue,t)}}class oI extends Gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yo(this.value.arrayValue,r))}}class Wa{constructor(e,t){this.position=e,this.inclusive=t}}class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function aI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function N_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):sl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function uI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}class Ka{constructor(e,t=null,r=[],s=[],u=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=_,this._t=null,this.wt=null}}function lI(n,e,t,r,s,u,c,f){return new Ka(n,e,t,r,s,u,c,f)}function _h(n){return new Ka(n)}function cI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function P_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function k_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function O_(n){return null!==n.collectionGroup}function wh(n){const e=qe(n);if(null===e._t){e._t=[];const t=k_(e),r=P_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Fc(t)),e._t.push(new Fc(Bn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Fc(Bn.keyField(),u))}}}return e._t}function zi(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=Gm(e.path,e.collectionGroup,wh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of wh(e))t.push(new Fc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Wa(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Wa(e.startAt.position,e.startAt.inclusive):null;e.wt=Gm(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function qm(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vp(n,e){return vh(zi(n),zi(e))&&n.limitType===e.limitType}function dI(n){return`${vo(zi(n))}|lt:${n.limitType}`}function L_(n){return`Query(target=${function LT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Lc(r.value)}`;var r}).join(", ")}]`),mh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Lc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Lc(t)).join(",")),`Target(${e})`}(zi(n))}; limitType=${n.limitType})`}function F_(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):He.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const f=N_(s,u,c);return s.inclusive?f<=0:f<0}(t.startAt,wh(t),r)||t.endAt&&!function(s,u,c){const f=N_(s,u,c);return s.inclusive?f>=0:f>0}(t.endAt,wh(t),r)));var t,r}function hI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fI(n){return(e,t)=>{let r=!1;for(const s of wh(n)){const u=FT(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function FT(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(s,u,c){const f=u.data.field(s),_=c.data.field(s);return null!==f&&null!==_?sl(f,_):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function U_(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fp(e)?"-0":e}}function V_(n){return{integerValue:""+n}}function B_(n,e){return QE(e)?V_(e):U_(n,e)}class _p{constructor(){this._=void 0}}function pI(n,e,t){return n instanceof Uc?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof al?$_(n,e):n instanceof ul?ll(n,e):function(r,s){const u=j_(r,s),c=mI(u)+mI(r.yt);return XE(u)&&XE(r.yt)?V_(c):U_(r.It,c)}(n,e)}function gI(n,e,t){return n instanceof al?$_(n,e):n instanceof ul?ll(n,e):t}function j_(n,e){return n instanceof Eh?XE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Uc extends _p{}class al extends _p{constructor(e){super(),this.elements=e}}function $_(n,e){const t=Vc(e);for(const r of n.elements)t.some(s=>fo(s,r))||t.push(r);return{arrayValue:{values:t}}}class ul extends _p{constructor(e){super(),this.elements=e}}function ll(n,e){let t=Vc(e);for(const r of n.elements)t=t.filter(s=>!fo(s,r));return{arrayValue:{values:t}}}class Eh extends _p{constructor(e,t){super(),this.It=e,this.yt=t}}function mI(n){return jn(n.integerValue||n.doubleValue)}function Vc(n){return yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wm{constructor(e,t){this.field=e,this.transform=t}}class vA{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class G_{}function Et(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new jc(n.key,Cn.none()):new Ih(n.key,n.data,Cn.none());{const t=n.data,r=Hr.empty();let s=new an(Bn.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new Ls(n.key,r,new Gi(s.toArray()),Cn.none())}}function UT(n,e,t){n instanceof Ih?function(r,s,u){const c=r.value.clone(),f=$n(r.fieldTransforms,s,u.transformResults);c.setAll(f),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ls?function(r,s,u){if(!wp(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=$n(r.fieldTransforms,s,u.transformResults),f=s.data;f.setAll(Ip(r)),f.setAll(c),s.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ep(n,e,t,r){return n instanceof Ih?function(s,u,c,f){if(!wp(s.precondition,u))return c;const _=s.value.clone(),I=BT(s.fieldTransforms,f,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ls?function(s,u,c,f){if(!wp(s.precondition,u))return c;const _=BT(s.fieldTransforms,f,u),I=u.data;return I.setAll(Ip(s)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===c?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,wp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function VT(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=j_(r.transform,s||null);null!=u&&(null===t&&(t=Hr.empty()),t.set(r.field,u))}return t||null}function Bc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&co(t,r,(s,u)=>function H_(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof al&&r instanceof al||t instanceof ul&&r instanceof ul?co(t.elements,r.elements,fo):t instanceof Eh&&r instanceof Eh?fo(t.yt,r.yt):t instanceof Uc&&r instanceof Uc);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ih extends G_{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ls extends G_{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ip(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $n(n,e,t){const r=new Map;Ct(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,f=e.data.field(u.field);r.set(u.field,gI(c,f,t[s]))}return r}function BT(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,pI(u,c,e))}return r}class jc extends G_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Km extends G_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jT{constructor(e){this.count=e}}var rr,Wt;function z_(n){switch(n){default:return Qe();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function q_(n){if(void 0===n)return nr("GRPC error has no .code"),de.UNKNOWN;switch(n){case rr.OK:return de.OK;case rr.CANCELLED:return de.CANCELLED;case rr.UNKNOWN:return de.UNKNOWN;case rr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case rr.INTERNAL:return de.INTERNAL;case rr.UNAVAILABLE:return de.UNAVAILABLE;case rr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case rr.NOT_FOUND:return de.NOT_FOUND;case rr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case rr.ABORTED:return de.ABORTED;case rr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case rr.DATA_LOSS:return de.DATA_LOSS;default:return Qe()}}(Wt=rr||(rr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return WE(this.inner)}size(){return this.innerSize}}const $T=new Zn(He.comparator);function qi(){return $T}const Dh=new Zn(He.comparator);function Dp(...n){let e=Dh;for(const t of n)e=e.insert(t.key,t);return e}function yI(n){let e=Dh;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qo(){return bh()}function bp(){return bh()}function bh(){return new cl(n=>n.toString(),(n,e)=>n.isEqual(e))}const vI=new Zn(He.comparator),_I=new an(He.comparator);function Ft(...n){let e=_I;for(const t of n)e=e.add(t);return e}const Tp=new an(Tt);function dl(){return Tp}class Sp{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sp(mt.min(),r,dl(),qi(),Ft())}}class Cp{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Cp(dr.EMPTY_BYTE_STRING,t,Ft(),Ft(),Ft())}}class Zm{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class W_{constructor(e,t){this.targetId=e,this.At=t}}class K_{constructor(e,t,r=dr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Z_{constructor(){this.Rt=0,this.bt=wI(),this.Pt=dr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ft(),t=Ft(),r=Ft();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Qe()}}),new Cp(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=wI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class HT{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=qi(),this.qt=Y_(),this.Kt=new an(Tt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(zm(u))if(0===r){const c=new He(u.path);this.jt(t,c,En.newNoDocument(c,mt.min()))}else Ct(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const f=this.Xt(c);if(f){if(u.current&&zm(f.target)){const _=new He(f.target.path);null!==this.Ut.get(_)||this.ee(c,_)||this.jt(c,_,En.newNoDocument(_,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Ft();this.qt.forEach((u,c)=>{let f=!0;c.forEachWhile(_=>{const I=this.Xt(_);return!I||2===I.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const s=new Sp(e,t,this.Kt,this.Ut,r);return this.Ut=qi(),this.qt=Y_(),this.Kt=new an(Tt),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new Z_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new an(Tt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Z_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Y_(){return new Zn(He.comparator)}function wI(){return new Zn(He.comparator)}const GT={asc:"ASCENDING",desc:"DESCENDING"},_A={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class wA{constructor(e,t){this.databaseId=e,this.gt=t}}function Ym(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zT(n,e){return n.gt?e.toBase64():e.toUint8Array()}function EI(n,e){return Ym(n,e.toTimestamp())}function ir(n){return Ct(!!n),mt.fromTimestamp(function(e){const t=za(e);return new dn(t.seconds,t.nanos)}(n))}function Q_(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function II(n){const e=qt.fromString(n);return Ct(Qm(e)),e}function Th(n,e){return Q_(n.databaseId,e.path)}function Wi(n,e){const t=II(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(bI(t))}function J_(n,e){return Q_(n.databaseId,e)}function DI(n){const e=II(n);return 4===e.length?qt.emptyPath():bI(e)}function Ap(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bI(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function TI(n,e,t){return{name:Th(n,e),fields:t.value.mapValue.fields}}function X_(n,e,t){const r=Wi(n,e.name),s=ir(e.updateTime),u=new Hr({mapValue:{fields:e.fields}}),c=En.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Za(n,e){let t;if(e instanceof Ih)t={update:TI(n,e.key,e.value)};else if(e instanceof jc)t={delete:Th(n,e.key)};else if(e instanceof Ls)t={update:TI(n,e.key,e.data),updateMask:QT(e.fieldMask)};else{if(!(e instanceof Km))return Qe();t={verify:Th(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof Uc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof al)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ul)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Eh)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:EI(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Qe()),t;var s}function ew(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Cn.updateTime(ir(s.updateTime)):void 0!==s.exists?Cn.exists(s.exists):Cn.none():Cn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let f=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),f=new Uc):"appendMissingElements"in c?f=new al(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new ul(c.removeAllFromArray.values||[]):"increment"in c?f=new Eh(u,c.increment):Qe();const _=Bn.fromServerFormat(c.fieldPath);return new Wm(_,f)}(n,s)):[];var s;if(e.update){const s=Wi(n,e.update.name),u=new Hr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Gi((e.updateMask.fieldPaths||[]).map(I=>Bn.fromServerFormat(I)));return new Ls(s,u,c,t,r)}return new Ih(s,u,t,r)}if(e.delete){const s=Wi(n,e.delete);return new jc(s,t)}if(e.verify){const s=Wi(n,e.verify);return new Km(s,t)}return Qe()}function CI(n,e){return{documents:[J_(n,e.path)]}}function tw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=J_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=J_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0===_.length)return;const I=_.map(C=>function(x){if("=="===x.op){if(po(x.value))return{unaryFilter:{field:$c(x.field),op:"IS_NAN"}};if(C_(x.value))return{unaryFilter:{field:$c(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(po(x.value))return{unaryFilter:{field:$c(x.field),op:"IS_NOT_NAN"}};if(C_(x.value))return{unaryFilter:{field:$c(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(x.field),op:KT(x.op),value:x.value}}}(C));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:$c((C=I).field),direction:nw(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.gt||mh(I)?I:{value:I});var I,f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function AI(n){let e=DI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ct(1===r);const C=t.from[0];C.allDescendants?s=C.collectionId:e=e.child(C.collectionId)}let u=[];t.where&&(u=MI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new Fc(Hc((x=C).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(C){let x;return x="object"==typeof C?C.value:C,mh(x)?null:x}(t.limit));let _=null;var C;t.startAt&&(_=new Wa((C=t.startAt).values||[],!!C.before));let I=null;return t.endAt&&(I=function(C){return new Wa(C.values||[],!C.before)}(t.endAt)),lI(e,s,c,u,f,"F",_,I)}function MI(n){return n?void 0!==n.unaryFilter?[YT(n)]:void 0!==n.fieldFilter?[ZT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>MI(e)).reduce((e,t)=>e.concat(t)):Qe():[]}function nw(n){return GT[n]}function KT(n){return _A[n]}function $c(n){return{fieldPath:n.canonicalString()}}function Hc(n){return Bn.fromServerFormat(n.fieldPath)}function ZT(n){return Gr.create(Hc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(n.fieldFilter.op),n.fieldFilter.value)}function YT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Hc(n.unaryFilter.field);return Gr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Hc(n.unaryFilter.field);return Gr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hc(n.unaryFilter.field);return Gr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Hc(n.unaryFilter.field);return Gr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}function QT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qm(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NI(e)),e=RI(n.get(t),e);return NI(e)}function RI(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function NI(n){return n+"\x01\x01"}function Jo(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&Qe(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let _;0===s.length?_=f:(s+=f,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:Qe()}u=c+2}return new qt(r)}const PI=["userId","batchId"];function Jm(n,e){return[n,Ti(e)]}function kI(n,e,t){return[n,Ti(e),t]}const JT={},XT=["prefixPath","collectionGroup","readTime","documentId"],eS=["prefixPath","collectionGroup","documentId"],OI=["collectionGroup","readTime","prefixPath","documentId"],LI=["canonicalId","targetId"],tS=["targetId","path"],nS=["path","targetId"],FI=["collectionId","parent"],rS=["indexId","uid"],iS=["uid","sequenceNumber"],sS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rw=["indexId","uid","orderedDocumentKey"],iw=["userId","collectionPath","documentId"],UI=["userId","collectionPath","largestBatchId"],sw=["userId","collectionGroup","largestBatchId"],VI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oS=[...VI,"documentOverlays"],Xm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BI=Xm,aS=[...BI,"indexConfiguration","indexState","indexEntries"];class hl extends dp{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function wr(n,e){const t=qe(n);return Hi.O(t.ie,e)}class ow{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&UT(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ep(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ep(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bp();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let f=this.applyToLocalView(c,u.mutatedFields);f=t.has(s.key)?null:f;const _=Et(c,f);null!==_&&r.set(s.key,_),c.isValidDocument()||c.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(t,r)=>Bc(t,r))&&co(this.baseMutations,e.baseMutations,(t,r)=>Bc(t,r))}}class jI{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ct(e.mutations.length===r.length);let s=vI;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new jI(e,t,r,s)}}class ey{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Xo{constructor(e,t,r,s,u=mt.min(),c=mt.min(),f=dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new Xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $I{constructor(e){this.re=e}}function HI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Th(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ym(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ya(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:Ya(e.version)}}var s,u;return r}function xp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ya(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fl(n){const e=new dn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function pl(n,e){const t=(e.baseMutations||[]).map(u=>ew(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ew(n.re,u)),s=dn.fromMillis(e.localWriteTimeMs);return new ow(e.batchId,s,t,r)}function Sh(n){const e=fl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fl(n.lastLimboFreeSnapshotVersion):mt.min();let r;var s;return void 0!==n.query.documents?(Ct(1===(s=n.query).documents.length),r=zi(_h(DI(s.documents[0])))):r=zi(AI(n.query)),new Xo(r,n.targetId,0,n.lastListenSequenceNumber,e,t,dr.fromBase64String(n.resumeToken))}function uw(n,e){const t=Ya(e.snapshotVersion),r=Ya(e.lastLimboFreeSnapshotVersion);let s;s=zm(e.target)?CI(n.re,e.target):tw(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vo(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function lw(n){const e=AI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qm(e,e.limit,"L"):e}function cw(n,e){return new ey(e.largestBatchId,ew(n.re,e.overlayMutation))}function GI(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}function zI(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ya(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class qI{getBundleMetadata(e,t){return uS(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:fl(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return uS(e).put({bundleId:(r=t).id,createTime:Ya(ir(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return dw(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:lw(s.bundledQuery),readTime:fl(s.readTime)};var s})}saveNamedQuery(e,t){return dw(e).put({name:(r=t).name,readTime:Ya(ir(r.readTime)),bundledQuery:r.bundledQuery});var r}}function uS(n){return wr(n,"bundles")}function dw(n){return wr(n,"namedQueries")}class ty{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ty(e,t.uid||"")}getOverlay(e,t){return Mp(e).get(GI(this.userId,t)).next(r=>r?cw(this.It,r):null)}getOverlays(e,t){const r=Qo();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const f=new ey(t,c);s.push(this.ue(e,f))}),se.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(Ti(c.getCollectionPath())));const u=[];return s.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Mp(e).Y("collectionPathOverlayIndex",f))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Qo(),u=Ti(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Mp(e).W("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const I=cw(this.It,_);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Qo();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mp(e).Z({index:"collectionGroupOverlayIndex",range:f},(_,I,C)=>{const x=cw(this.It,I);u.size()<s||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):C.done()}).next(()=>u)}ue(e,t){return Mp(e).put(function(r,s,u){const[c,f,_]=GI(s,u.mutation.key);return{userId:s,collectionPath:f,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Za(r.re,u.mutation)}}(this.It,this.userId,t))}}function Mp(n){return wr(n,"documentOverlays")}class Ch{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),fp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ph(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?go(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Qe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),He.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function EA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function WI(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=EA(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ch.Te=new Ch;class lS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=WI(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=WI(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class cS{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class dS{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Rp{constructor(){this.Be=new lS,this.Le=new cS(this.Be),this.Ue=new dS(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Gc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gc(this.indexId,this.documentKey,this.arrayValue,r)}}function zc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=KI(n.arrayValue,e.arrayValue),0!==t?t:(t=KI(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function KI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Fm(e);if(void 0!==t&&!this.ze(t))return!1;const r=tl(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const c=r[s];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fS{constructor(){this.Ye=new hw}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Di.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class hw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new an(qt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new an(qt.comparator)).toArray()}}const ny=new Uint8Array(0);class Np{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new hw,this.Ze=new cl(r=>vo(r),(r,s)=>vh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ti(s)};return fw(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Pc(t),""],!1,!0);return fw(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Jo(c.parent))}return r})}addFieldIndex(e,t){const r=Pp(e),s={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete s.indexId;const u=r.add(s);if(t.indexState){const c=xh(e);return u.next(f=>{c.put(zI(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Pp(e),s=xh(e),u=Ah(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ah(e);let s=!0;const u=new Map;return se.forEach(this.tn(t),c=>this.en(e,c).next(f=>{s&&(s=!!f),u.set(c,f)})).next(()=>{if(s){let c=Ft();const f=[];return se.forEach(u,(_,I)=>{var C;Pe("IndexedDbIndexManager",`Using index ${C=_,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${vo(t)}`);const x=function(gt,it){const St=Fm(it);if(void 0===St)return null;for(const At of gp(gt,St.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(I,_),F=function(gt,it){const St=new Map;for(const At of tl(it))for(const Xt of gp(gt,At.fieldPath))switch(Xt.op){case"==":case"in":St.set(At.fieldPath.canonicalString(),Xt.value);break;case"not-in":case"!=":return St.set(At.fieldPath.canonicalString(),Xt.value),Array.from(St.values())}return null}(I,_),z=function(gt,it){const St=[];let At=!0;for(const Xt of tl(it)){const ys=0===Xt.kind?M_(gt,Xt.fieldPath,gt.startAt):mp(gt,Xt.fieldPath,gt.startAt);St.push(ys.value),At&&(At=ys.inclusive)}return new Wa(St,At)}(I,_),Z=function(gt,it){const St=[];let At=!0;for(const Xt of tl(it)){const ys=0===Xt.kind?mp(gt,Xt.fieldPath,gt.endAt):M_(gt,Xt.fieldPath,gt.endAt);St.push(ys.value),At&&(At=ys.inclusive)}return new Wa(St,At)}(I,_),ue=this.nn(_,I,z),Ie=this.nn(_,I,Z),We=this.sn(_,I,F),tt=this.rn(_.indexId,x,ue,z.inclusive,Ie,Z.inclusive,We);return se.forEach(tt,gt=>r.J(gt,t.limit).next(it=>{it.forEach(St=>{const At=He.fromSegments(St.documentKey);c.has(At)||(c=c.add(At),f.push(At))})}))}).next(()=>f)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),C=[];for(let x=0;x<_;++x){const F=t?this.on(t[x/I]):ny,z=this.un(e,F,r[x%I],s),Z=this.cn(e,F,u[x%I],c),ue=f.map(Ie=>this.un(e,F,Ie,!0));C.push(...this.createRange(z,Z,ue))}return C}un(e,t,r,s){const u=new Gc(e,He.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new Gc(e,He.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new hS(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const f of u)r.We(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(c){let f=new an(Bn.comparator),_=!1;for(const I of c.filters){const C=I;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?_=!0:f=f.add(C.field))}for(const I of c.orderBy)I.field.isKeyField()||(f=f.add(I.field));return f.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Rp;for(const s of tl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.qe(s.kind);Ch.Te.ce(u,c)}return r.$e()}on(e){const t=new Rp;return Ch.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Rp;return Ch.Te.ce(ol(this.databaseId,t),r.qe(function(s){const u=tl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new Rp);let u=0;for(const c of tl(e)){const f=r[u++];for(const _ of s)if(this.ln(t,c.fieldPath)&&yh(f))s=this.fn(s,c,f);else{const I=_.qe(c.kind);Ch.Te.ce(f,I)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of s){const _=new Rp;_.seed(f.$e()),Ch.Te.ce(c,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Gr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Pp(e),s=xh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return se.forEach(u,f=>s.get([f.indexId,this.uid]).next(_=>{c.push(function(I,C){const x=C?new hh(C.sequenceNumber,new Di(fl(C.readTime),new He(Jo(C.documentKey)),C.largestBatchId)):hh.empty(),F=I.fields.map(([z,Z])=>new Um(Bn.fromServerFormat(z),Z));return new lp(I.indexId,I.collectionGroup,F,x)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Tt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Pp(e),u=xh(e);return this._n(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>se.forEach(f,_=>u.put(zI(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(f=>(r.set(s.collectionGroup,f),se.forEach(f,_=>this.wn(e,s,_).next(I=>{const C=this.mn(u,_);return I.isEqual(C)?se.resolve():this.gn(e,u,_,I,C)}))))})}yn(e,t,r,s){return Ah(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return Ah(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=Ah(e);let u=new an(zc);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,f)=>{u=u.add(new Gc(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}mn(e,t){let r=new an(zc);const s=this.an(t,e);if(null==s)return r;const u=Fm(t);if(null!=u){const c=e.data.field(u.fieldPath);if(yh(c))for(const f of c.arrayValue.values||[])r=r.add(new Gc(t.indexId,e.key,this.on(f),s))}else r=r.add(new Gc(t.indexId,e.key,ny,s));return r}gn(e,t,r,s,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,I,C,x){const F=f.getIterator(),z=_.getIterator();let Z=Oc(F),ue=Oc(z);for(;Z||ue;){let Ie=!1,We=!1;if(Z&&ue){const tt=I(Z,ue);tt<0?We=!0:tt>0&&(Ie=!0)}else null!=Z?We=!0:Ie=!0;Ie?(C(ue),ue=Oc(z)):We?(x(Z),Z=Oc(F)):(Z=Oc(F),ue=Oc(z))}}(s,u,zc,f=>{c.push(this.yn(e,t,r,f))},f=>{c.push(this.pn(e,t,r,f))}),se.waitFor(c)}_n(e){let t=1;return xh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>zc(c,f)).filter((c,f,_)=>!f||0!==zc(c,_[f-1]));const s=[];s.push(e);for(const c of r){const f=zc(c,e),_=zc(c,t);if(0===f)s[0]=e.Ke();else if(f>0&&_<0)s.push(c),s.push(c.Ke());else if(_>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,ny,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,ny,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pw)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||Qe())).next(pw)}}function fw(n){return wr(n,"collectionParents")}function Ah(n){return wr(n,"indexEntries")}function Pp(n){return wr(n,"indexConfiguration")}function xh(n){return wr(n,"indexState")}function pw(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;cp(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Di(e.readTime,e.documentKey,t)}const gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ki{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ki(e,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function pS(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.Z({range:c},(C,x,F)=>(f++,F.delete()));u.push(_.next(()=>{Ct(1===f)}));const I=[];for(const C of t.mutations){const x=kI(e,C.key.path,t.batchId);u.push(s.delete(x)),I.push(C.key)}return se.waitFor(u).next(()=>I)}function kp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}Ki.DEFAULT_COLLECTION_PERCENTILE=10,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ki.DEFAULT=new Ki(41943040,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ki.DISABLED=new Ki(-1,0,0);class ry{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ry(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gl(e).Z({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Mh(e),c=gl(e);return c.add({}).next(f=>{Ct("number"==typeof f);const _=new ow(f,t,r,s),I=function(F,z,Z){const ue=Z.baseMutations.map(We=>Za(F.re,We)),Ie=Z.mutations.map(We=>Za(F.re,We));return{userId:z,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ue,mutations:Ie}}(this.It,this.userId,_),C=[];let x=new an((F,z)=>Tt(F.canonicalString(),z.canonicalString()));for(const F of s){const z=kI(this.userId,F.key.path,f);x=x.add(F.key.path.popLast()),C.push(c.put(I)),C.push(u.put(z,JT))}return x.forEach(F=>{C.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.In[f]=_.keys()}),se.waitFor(C).next(()=>_)})}lookupMutationBatch(e,t){return gl(e).get(t).next(r=>r?(Ct(r.userId===this.userId),pl(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return gl(e).Z({index:"userMutationsIndex",range:s},(c,f,_)=>{f.userId===this.userId&&(Ct(f.batchId>=r),u=pl(this.It,f)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return gl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gl(e).W("userMutationsIndex",t).next(r=>r.map(s=>pl(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Mh(e).Z({range:s},(c,f,_)=>{const[I,C,x]=c,F=Jo(C);if(I===this.userId&&t.path.isEqual(F))return gl(e).get(x).next(z=>{if(!z)throw Qe();Ct(z.userId===this.userId),u.push(pl(this.It,z))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new an(Tt);const s=[];return t.forEach(u=>{const c=Jm(this.userId,u.path),f=IDBKeyRange.lowerBound(c),_=Mh(e).Z({range:f},(I,C,x)=>{const[F,z,Z]=I,ue=Jo(z);F===this.userId&&u.path.isEqual(ue)?r=r.add(Z):x.done()});s.push(_)}),se.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Jm(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new an(Tt);return Mh(e).Z({range:c},(_,I,C)=>{const[x,F,z]=_,Z=Jo(F);x===this.userId&&r.isPrefixOf(Z)?Z.length===s&&(f=f.add(z)):C.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(gl(e).get(u).next(c=>{if(null===c)throw Qe();Ct(c.userId===this.userId),r.push(pl(this.It,c))}))}),se.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return pS(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Mh(e).Z({range:r},(u,c,f)=>{if(u[0]===this.userId){const _=Jo(u[1]);s.push(_)}else f.done()}).next(()=>{Ct(0===s.length)})})}containsKey(e,t){return ZI(e,this.userId,t)}Rn(e){return Rh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ZI(n,e,t){const r=Jm(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Mh(n).Z({range:u,X:!0},(f,_,I)=>{const[C,x,F]=f;C===e&&x===s&&(c=!0),I.done()}).next(()=>c)}function gl(n){return wr(n,"mutations")}function Mh(n){return wr(n,"documentMutations")}function Rh(n){return wr(n,"mutationQueues")}class qc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new qc(0)}static vn(){return new qc(-1)}}class mw{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new qc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mt.fromTimestamp(new dn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Si(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Si(e).Z((c,f)=>{const _=Sh(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>se.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Si(e).Z((r,s)=>{const u=Sh(s);t(u)})}Vn(e){return YI(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Sn(e,t){return YI(e).put("targetGlobalKey",t)}Dn(e,t){return Si(e).put(uw(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Si(e).Z({range:s,index:"queryTargetsIndex"},(c,f,_)=>{const I=Sh(f);vh(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=ea(e);return t.forEach(c=>{const f=Ti(c.path);s.push(u.put({targetId:r,path:f})),s.push(this.referenceDelegate.addReference(e,r,c))}),se.waitFor(s)}removeMatchingKeys(e,t,r){const s=ea(e);return se.forEach(t,u=>{const c=Ti(u.path);return se.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ea(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ea(e);let u=Ft();return s.Z({range:r,X:!0},(c,f,_)=>{const I=Jo(c[1]),C=new He(I);u=u.add(C)}).next(()=>u)}containsKey(e,t){const r=Ti(t.path),s=IDBKeyRange.bound([r],[Pc(r)],!1,!0);let u=0;return ea(e).Z({index:"documentTargetsIndex",X:!0,range:s},([c,f],_,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}se(e,t){return Si(e).get(t).next(r=>r?Sh(r):null)}}function Si(n){return wr(n,"targets")}function YI(n){return wr(n,"targetGlobal")}function ea(n){return wr(n,"targetDocuments")}function Nh([n,e],[t,r]){const s=Tt(n,t);return 0===s?Tt(e,r):s}class gS{constructor(e){this.xn=e,this.buffer=new an(Nh),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Nh(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Zo(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ho(r)}yield t.Fn(3e5)}))}}class yS{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(bi.at);const r=new gS(t);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(gw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gw):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,c,f,_,I;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,c=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),E_()<=Yu.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${s} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(_-f)+`ms\n\tRemoved ${x} documents in `+(I-_)+`ms\nTotal Duration: ${I-C}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:x})))}}class iy{constructor(e,t){this.db=e,this.garbageCollector=new yS(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return Wc(e,r)}removeReference(e,t,r){return Wc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Wc(e,t)}Gn(e,t){return function(r,s){let u=!1;return Rh(r).tt(c=>ZI(r,c,s).next(f=>(f&&(u=!0),se.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(c,f)=>{if(f<=t){const _=this.Gn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,mt.min()),ea(e).delete([0,Ti(c.path)])))});s.push(_)}}).next(()=>se.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Wc(e,t)}Kn(e,t){const r=ea(e);let s,u=bi.at;return r.Z({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:I})=>{0===c?(u!==bi.at&&t(new He(Jo(s)),u),u=I,s=_):u=bi.at}).next(()=>{u!==bi.at&&t(new He(Jo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wc(n,e){return ea(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class QI{constructor(){this.changes=new cl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vS{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ml(e).put(r)}removeEntry(e,t,r){return ml(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],xp(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=En.newInvalidDocument(t);return ml(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Op(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:En.newInvalidDocument(t)};return ml(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Op(t))},(s,u)=>{r={document:this.jn(t,u),size:kp(u)}}).next(()=>r)}getEntries(e,t){let r=qi();return this.zn(e,t,(s,u)=>{const c=this.jn(s,u);r=r.insert(s,c)}).next(()=>r)}Hn(e,t){let r=qi(),s=new Zn(He.comparator);return this.zn(e,t,(u,c)=>{const f=this.jn(u,c);r=r.insert(u,f),s=s.insert(u,kp(c))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let s=new an(_S);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Op(s.first()),Op(s.last())),c=s.getIterator();let f=c.getNext();return ml(e).Z({index:"documentKeyIndex",range:u},(_,I,C)=>{const x=He.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;f&&_S(f,x)<0;)r(f,null),f=c.getNext();f&&f.isEqual(x)&&(r(f,I),f=c.hasNext()?c.getNext():null),f?C.j(Op(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),xp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ml(e).W(IDBKeyRange.bound(s,u,!0)).next(c=>{let f=qi();for(const _ of c){const I=this.jn(He.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(I.key,I)}return f})}getAllFromCollectionGroup(e,t,r,s){let u=qi();const c=XI(t,r),f=XI(t,Di.max());return ml(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,I,C)=>{const x=this.jn(He.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===s&&C.done()}).next(()=>u)}newChangeBuffer(e){return new JI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sy(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Qn(e,t){return sy(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function aw(n,e){let t;if(e.document)t=X_(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),s=fl(e.noDocument.readTime);t=En.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=He.fromSegments(e.unknownDocument.path),s=fl(e.unknownDocument.version);t=En.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new dn(r[0],r[1]);return mt.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return En.newInvalidDocument(e)}}function yw(n){return new vS(n)}class JI extends QI{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new cl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new an((u,c)=>Tt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const _=HI(this.Yn.It,c);s=s.add(u.path.popLast()),r+=kp(_)-f.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=f.size,this.trackRemovals){const _=HI(this.Yn.It,c.convertToNoDocument(mt.min()));t.push(this.Yn.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function sy(n){return wr(n,"remoteDocumentGlobal")}function ml(n){return wr(n,"remoteDocumentsV14")}function Op(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XI(n,e){const t=e.documentKey.path.toArray();return[n,xp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _S(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Tt(t[u],r[u]),s)return s;return s=Tt(t.length,r.length),s||(s=Tt(t[t.length-2],r[r.length-2]),s||Tt(t[t.length-1],r[r.length-1]))}class vw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oy{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&Ep(r.mutation,s,Gi.empty(),dn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ft()){const s=Qo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=Dp();return u.forEach((f,_)=>{c=c.insert(f,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Qo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ft()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,s){let u=qi();const c=bh(),f=bh();return t.forEach((_,I)=>{const C=r.get(I.key);s.has(I.key)&&(void 0===C||C.mutation instanceof Ls)?u=u.insert(I.key,I):void 0!==C&&(c.set(I.key,C.mutation.getFieldMask()),Ep(C.mutation,I,C.mutation.getFieldMask(),dn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,C)=>c.set(I,C)),t.forEach((I,C)=>{var x;return f.set(I,new vw(C,null!==(x=c.get(I))&&void 0!==x?x:null))}),f))}recalculateAndSaveOverlays(e,t){const r=bh();let s=new Zn((c,f)=>c-f),u=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let C=r.get(_)||Gi.empty();C=f.applyToLocalView(I,C),r.set(_,C);const x=(s.get(f.batchId)||Ft()).add(_);s=s.insert(f.batchId,x)})}).next(()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),I=_.key,C=_.value,x=bp();C.forEach(F=>{if(!u.has(F)){const z=Et(t.get(F),r.get(F));null!==z&&x.set(F,z),u=u.add(F)}}),c.push(this.documentOverlayCache.saveOverlays(e,I,x))}return se.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):O_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):se.resolve(Qo());let f=-1,_=u;return c.next(I=>se.forEach(I,(C,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),u.get(C)?se.resolve():this.getBaseDocument(e,C,x).next(F=>{_=_.insert(C,F)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,Ft())).next(C=>({batchId:f,changes:yI(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let s=Dp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Dp();return this.indexManager.getCollectionParents(e,s).next(c=>se.forEach(c,f=>{const _=(I=t,C=f.child(s),new Ka(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,C;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((C,x)=>{u=u.insert(C,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((f,_)=>{const I=_.getKey();null===s.get(I)&&(s=s.insert(I,En.newInvalidDocument(I)))});let c=Dp();return s.forEach((f,_)=>{const I=u.get(f);void 0!==I&&Ep(I.mutation,_,Gi.empty(),dn.now()),F_(t,_)&&(c=c.insert(f,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(En.newInvalidDocument(t))}}class eD{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ir(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:lw(r.bundledQuery),readTime:ir(r.readTime)}),se.resolve();var r}}class _w{constructor(){this.overlays=new Zn(He.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qo();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const s=Qo(),u=t.length+1,c=new He(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Zn((I,C)=>I-C);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let C=u.get(I.largestBatchId);null===C&&(C=Qo(),u=u.insert(I.largestBatchId,C)),C.set(I.getKey(),I)}}const f=Qo(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,C)=>f.set(I,C)),!(f.size()>=s)););return se.resolve(f)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ey(t,r));let u=this.es.get(t);void 0===u&&(u=Ft(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class Lp{constructor(){this.ns=new an(Rr.ss),this.rs=new an(Rr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Rr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Rr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new He(new qt([])),r=new Rr(t,e),s=new Rr(t,e+1),u=[];return this.rs.forEachInRange([r,s],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new He(new qt([])),r=new Rr(t,e),s=new Rr(t,e+1);let u=Ft();return this.rs.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Rr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Rr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return He.comparator(e.key,t.key)||Tt(e._s,t._s)}static os(e,t){return Tt(e._s,t._s)||He.comparator(e.key,t.key)}}class wS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new an(Rr.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const c=new ow(u,t,r,s);this.mutationQueue.push(c);for(const f of s)this.gs=this.gs.add(new Rr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Rr(t,0),s=new Rr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],c=>{const f=this.ys(c._s);u.push(f)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new an(Tt);return t.forEach(s=>{const u=new Rr(s,0),c=new Rr(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],f=>{r=r.add(f._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const c=new Rr(new He(u),0);let f=new an(Tt);return this.gs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(f=f.add(_._s)),!0)},c),se.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Ct(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,s=>{const u=new Rr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Rr(t,0),s=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ES{constructor(e){this.Es=e,this.docs=new Zn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=qi();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():En.newInvalidDocument(s))}),se.resolve(r)}getAllFromCollection(e,t,r){let s=qi();const u=new He(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:_}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||cp(I_(_),r)<=0||(s=s.insert(_.key,_.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,t,r,s){Qe()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new IS(this)}getSize(e){return se.resolve(this.size)}}class IS extends QI{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class tD{constructor(e){this.persistence=e,this.Rs=new cl(t=>vo(t),vh),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Lp,this.targetCount=0,this.vs=qc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new qc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),se.waitFor(u).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class ay{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new bi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new tD(this),this.indexManager=new fS,this.remoteDocumentCache=new ES(r=>this.referenceDelegate.xs(r)),this.It=new $I(t),this.Ns=new eD(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _w,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new wS(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new nD(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Ms(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class nD extends dp{constructor(e){super(),this.currentSequenceNumber=e}}class uy{constructor(e){this.persistence=e,this.Fs=new Lp,this.$s=null}static Bs(e){return new uy(e)}get Ls(){if(this.$s)return this.$s;throw Qe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const s=He.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class rD{constructor(e){this.It=e}$(e,t,r,s){const u=new kc("createOrUpgrade",t);var f;r<1&&s>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PI,{unique:!0}),f.createObjectStore("documentMutations"),ww(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=se.resolve();return r<3&&s>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),ww(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").W().next(I=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PI,{unique:!0});const C=_.store("mutations"),x=I.map(F=>C.put(F));return se.waitFor(x)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.qs(u))),r<6&&s>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(c=c.next(()=>this.Gs(u))),r<8&&s>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.js(u))),r<11&&s>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:iw});_.createIndex("collectionPathOverlayIndex",UI,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",sw,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:XT});_.createIndex("documentKeyIndex",eS),_.createIndex("collectionGroupIndex",OI)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&s>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:rS}).createIndex("sequenceNumberIndex",iS,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:sS}).createIndex("documentKeyIndex",rw,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=kp(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>se.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(f=>se.forEach(f,_=>{Ct(_.userId===u.userId);const I=pl(this.It,_);return pS(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((c,f)=>{const _=new qt(c),I=[0,Ti(_)];u.push(t.get(I).next(C=>C?se.resolve():t.put({targetId:0,path:Ti(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:FI});const r=t.store("collectionParents"),s=new hw,u=c=>{if(s.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:Ti(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,f)=>{const _=new qt(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,f,_],I)=>{const C=Jo(f);return u(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=Sh(s),c=uw(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,c)=>{const f=t.store("remoteDocumentsV14"),_=(I=c,I.document?new He(qt.fromString(I.document.name).popFirst(5)):I.noDocument?He.fromSegments(I.noDocument.path):I.unknownDocument?He.fromSegments(I.unknownDocument.path):Qe()).path.toArray();var I;const C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(f.put(C))}).next(()=>se.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=yw(this.It),u=new ay(uy.Bs,this.It.re);return r.W().next(c=>{const f=new Map;return c.forEach(_=>{var I;let C=null!==(I=f.get(_.userId))&&void 0!==I?I:Ft();pl(this.It,_).keys().forEach(x=>C=C.add(x)),f.set(_.userId,C)}),se.forEach(f,(_,I)=>{const C=new Ar(I),x=ty.oe(this.It,C),F=u.getIndexManager(C),z=ry.oe(C,this.It,F,u.referenceDelegate);return new oy(s,z,x,F).recalculateAndSaveOverlaysForDocumentKeys(new hl(t,bi.at),_).next()})})}}function ww(n){n.createObjectStore("targetDocuments",{keyPath:tS}).createIndex("documentTargetsIndex",nS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LI,{unique:!0}),n.createObjectStore("targetGlobal")}const Ew="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ly{constructor(e,t,r,s,u,c,f,_,I,C,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=f,this.Js=I,this.Ys=C,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=F=>Promise.resolve(),!ly.C())throw new Re(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iy(this,s),this.ii=t+"main",this.It=new $I(_),this.ri=new Hi(this.ii,this.Xs,new rD(this.It)),this.Cs=new mw(this.referenceDelegate,this.It),this.remoteDocumentCache=yw(this.It),this.Ns=new qI,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(de.FAILED_PRECONDITION,Ew);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new bi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ve.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Zo(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Ph(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return cy(e).delete(this.clientId)}yi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=wr(r,"clientMetadata");return s.W().next(u=>{const c=e.Ii(u,18e5),f=u.filter(_=>-1===c.indexOf(_));return se.forEach(f,_=>s.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):Ph(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(de.FAILED_PRECONDITION,Ew);return!1}}return!(!this.networkEnabled||!this.inForeground)||cy(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,f=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new hl(t,bi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>cy(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ry.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Np(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ty.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?aS:14===c?BI:13===c?Xm:12===c?oS:11===c?VI:void Qe();var c;let f;return this.ri.runTransaction(e,s,u,_=>(f=new hl(_,this.Ss?this.Ss.next():bi.at),"readwrite-primary"===t?this.fi(f).next(I=>!!I||this.di(f)).next(I=>{if(!I)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(de.FAILED_PRECONDITION,HE);return r(f)}).next(I=>this.wi(f).next(()=>I)):this.Vi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Vi(e){return Ph(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(de.FAILED_PRECONDITION,Ew)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ph(e).put("owner",t)}static C(){return Hi.C()}_i(e){const t=Ph(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,tn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ph(n){return wr(n,"owner")}function cy(n){return wr(n,"clientMetadata")}function dy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Ft(),s=Ft();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new hy(e,t.fromCache,r,s)}}class ii{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Mi(e,t,s,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(cI(t))return se.resolve(null);let r=zi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=qm(t,null,"F"),r=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Ft(...u);return this.Ni.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.Fi(t,f);return this.$i(t,I,c,_.readTime)?this.ki(e,qm(t,null,"F")):this.Bi(e,I,t,_)}))})))}Mi(e,t,r,s){return cI(t)||s.isEqual(mt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,s)?this.Oi(e,t):(E_()<=Yu.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),L_(t)),this.Bi(e,c,t,$E(s,-1)))})}Fi(e,t){let r=new an(fI(e));return t.forEach((s,u)=>{F_(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Oi(e,t){return E_()<=Yu.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",L_(t)),this.Ni.getDocumentsMatchingQuery(e,t,Di.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class kh{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new Zn(Tt),this.qi=new cl(u=>vo(u),vh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function iD(n,e,t,r){return new kh(n,e,t,r)}function sD(n,e){return oD.apply(this,arguments)}function oD(){return oD=(0,ve.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let _=Ft();for(const I of s){c.push(I.batchId);for(const C of I.mutations)_=_.add(C.key)}for(const I of u){f.push(I.batchId);for(const C of I.mutations)_=_.add(C.key)}return t.localDocuments.getDocuments(r,_).next(I=>({ji:I,removedBatchIds:c,addedBatchIds:f}))})})}),oD.apply(this,arguments)}function IA(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,f,_,I){const C=_.batch,x=C.keys();let F=se.resolve();return x.forEach(z=>{F=F.next(()=>I.getEntry(f,z)).next(Z=>{const ue=_.docVersions.get(z);Ct(null!==ue),Z.version.compareTo(ue)<0&&(C.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),I.addEntry(Z)))})}),F.next(()=>c.mutationQueue.removeMutationBatch(f,C))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Ft();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(f=f.add(c.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function Iw(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function aD(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const f=[];e.targetChanges.forEach((C,x)=>{const F=s.get(x);if(!F)return;f.push(t.Cs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(u,C.addedDocuments,x)));let z=F.withSequenceNumber(u.currentSequenceNumber);var Z,ue,Ie;e.targetMismatches.has(x)?z=z.withResumeToken(dr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):C.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(C.resumeToken,r)),s=s.insert(x,z),ue=z,Ie=C,(0===(Z=F).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(u,z))});let _=qi(),I=Ft();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),f.push(Oh(u,c,e.documentUpdates).next(C=>{_=C.Wi,I=C.zi})),!r.isEqual(mt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(u).next(x=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(C)}return se.waitFor(f).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ui=s,u))}function Oh(n,e,t){let r=Ft(),s=Ft();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=qi();return t.forEach((f,_)=>{const I=u.get(f);_.isFoundDocument()!==I.isFoundDocument()&&(s=s.add(f)),_.isNoDocument()&&_.version.isEqual(mt.min())?(e.removeEntry(f,_.readTime),c=c.insert(f,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),c=c.insert(f,_)):Pe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",I.version," Watch version:",_.version)}),{Wi:c,zi:s}})}function DS(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yl(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,se.resolve(s)):t.Cs.allocateTargetId(r).next(c=>(s=new Xo(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Lh(n,e,t){return fy.apply(this,arguments)}function fy(){return fy=(0,ve.Z)(function*(n,e,t){const r=qe(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Zo(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),fy.apply(this,arguments)}function py(n,e,t){const r=qe(n);let s=mt.min(),u=Ft();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,I){const C=qe(f),x=C.qi.get(I);return void 0!==x?se.resolve(C.Ui.get(x)):C.Cs.getTargetData(_,I)}(r,c,zi(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?s:mt.min(),t?u:Ft())).next(f=>(gy(r,hI(e),f),{documents:f,Hi:u})))}function uD(n,e){const t=qe(n),r=qe(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function lD(n,e){const t=qe(n),r=t.Ki.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,$E(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(gy(t,e,s),s))}function gy(n,e,t){let r=mt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function my(){return my=(0,ve.Z)(function*(n,e,t,r){const s=qe(n);let u=Ft(),c=qi();for(const I of t){const C=e.Ji(I.metadata.name);I.document&&(u=u.add(C));const x=e.Yi(I);x.setReadTime(e.Xi(I.metadata.readTime)),c=c.insert(C,x)}const f=s.Gi.newChangeBuffer({trackRemovals:!0}),_=yield yl(s,(I=r,zi(_h(qt.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>Oh(I,f,c).next(C=>(f.apply(I),C)).next(C=>s.Cs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>s.Cs.addMatchingKeys(I,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(I,C.Wi,C.zi)).next(()=>C.Wi)))}),my.apply(this,arguments)}function yy(n,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ve.Z)(function*(n,e,t=Ft()){const r=yield yl(n,zi(lw(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=ir(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Ns.saveNamedQuery(u,e);const f=r.withResumeToken(dr.EMPTY_BYTE_STRING,c);return s.Ui=s.Ui.insert(f.targetId,f),s.Cs.updateTargetData(u,f).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),Fp.apply(this,arguments)}function bS(n,e){return`firestore_clients_${n}_${e}`}function Dw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function bw(n,e){return`firestore_targets_${n}_${e}`}class Up{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new Re(s.error.code,s.error.message))),c?new Up(e,t,s.state,u):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ta{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new ta(e,r.state,s):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=dl();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=QE(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new vy(e,u):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _y{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _y(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Vp{constructor(){this.activeTargetIds=dl()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dD{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Zn(Tt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=bS(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Vp),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(bS(e.persistenceKey,s));if(u){const c=vy.Zi(s,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(bw(this.persistenceKey,e));if(r){const s=ta.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bw(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let c=bi.at;if(null!=u)try{const f=JSON.parse(u);Ct("number"==typeof f),c=f}catch(f){nr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);s!==bi.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Mr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new Up(this.currentUser,e,t,r),u=Dw(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=Dw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=bw(this.persistenceKey,e),u=new ta(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return vy.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return Up.Zi(new Ar(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return ta.Zi(s,t)}yr(e){return _y.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),c=[],f=[];return u.forEach(_=>{s.has(_)||c.push(_)}),s.forEach(_=>{u.has(_)||f.push(_)}),this.syncEngine.Br(c,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=dl();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class hD{constructor(){this.Lr=new Vp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Vp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DA{qr(e){}shutdown(){}}class fD{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const TS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class SS{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class pD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const c=this.ao(e,t);Pe("RestConnection","Sending: ",c,r);const f={};return this.ho(f,s,u),this.lo(e,c,f,r).then(_=>(Pe("RestConnection","Received: ",_),_),_=>{throw Mc("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}fo(e,t,r,s,u,c){return this.co(e,t,r,s,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ao(e,t){return`${this.oo}/v1/${t}:${TS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,s){return new Promise((u,c)=>{const f=new VE;f.listenOnce(xT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case FE.NO_ERROR:const I=f.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(I)),u(I);break;case FE.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new Re(de.DEADLINE_EXCEEDED,"Request time out"));break;case FE.HTTP_ERROR:const C=f.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',C,"response text:",f.getResponseText()),C>0){const x=f.getResponseJson().error;if(x&&x.status&&x.message){const F=function(z){const Z=z.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Z)>=0?Z:de.UNKNOWN}(x.status);c(new Re(F,x.message))}else c(new Re(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Re(de.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(s);f.send(t,"POST",_,r,15)})}_o(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=sp(),c=AT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new MT({})),this.ho(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=s.join("");Pe("Connection","Creating WebChannel: "+_,f);const I=u.createWebChannel(_,f);let C=!1,x=!1;const F=new SS({Hr:Z=>{x?Pe("Connection","Not sending because WebChannel is closed:",Z):(C||(Pe("Connection","Opening WebChannel transport."),I.open(),C=!0),Pe("Connection","WebChannel sending:",Z),I.send(Z))},Jr:()=>I.close()}),z=(Z,ue,Ie)=>{Z.listen(ue,We=>{try{Ie(We)}catch(tt){setTimeout(()=>{throw tt},0)}})};return z(I,km.EventType.OPEN,()=>{x||Pe("Connection","WebChannel transport opened.")}),z(I,km.EventType.CLOSE,()=>{x||(x=!0,Pe("Connection","WebChannel transport closed"),F.io())}),z(I,km.EventType.ERROR,Z=>{x||(x=!0,Mc("Connection","WebChannel transport errored:",Z),F.io(new Re(de.UNAVAILABLE,"The operation could not be completed")))}),z(I,km.EventType.MESSAGE,Z=>{var ue;if(!x){const Ie=Z.data[0];Ct(!!Ie);const We=Ie,tt=We.error||(null===(ue=We[0])||void 0===ue?void 0:ue.error);if(tt){Pe("Connection","WebChannel received error:",tt);const gt=tt.status;let it=function(At){const Xt=rr[At];if(void 0!==Xt)return q_(Xt)}(gt),St=tt.message;void 0===it&&(it=de.INTERNAL,St="Unknown error status: "+gt+" with message "+tt.message),x=!0,F.io(new Re(it,St)),I.close()}else Pe("Connection","WebChannel received:",Ie),F.ro(Ie)}}),z(c,yA.STAT_EVENT,Z=>{Z.stat===UE.PROXY?Pe("Connection","Detected buffering proxy"):Z.stat===UE.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.so()},0),F}}function Tw(){return typeof window<"u"?window:null}function wy(){return typeof document<"u"?document:null}function Fh(n){return new wA(n,!0)}class Ey{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=s,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class gD{constructor(e,t,r,s,u,c,f,_){this.Hs=e,this.Po=r,this.vo=s,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ey(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ve.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ve.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Re(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ve.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CS extends gD{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function WT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Qe(),s=e.targetChange.targetIds||[],u=function(_,I){return _.gt?(Ct(void 0===I||"string"==typeof I),dr.fromBase64String(I||"")):(Ct(void 0===I||I instanceof Uint8Array),dr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const I=void 0===_.code?de.UNKNOWN:q_(_.code);return new Re(I,_.message||"")}(c);t=new K_(r,s,u,f||null)}else if("documentChange"in e){const r=e.documentChange,s=Wi(n,r.document.name),u=ir(r.document.updateTime),c=new Hr({mapValue:{fields:r.document.fields}}),f=En.newFoundDocument(s,u,c);t=new Zm(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,s=Wi(n,r.document),u=r.readTime?ir(r.readTime):mt.min(),c=En.newNoDocument(s,u);t=new Zm([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=Wi(n,r.document);t=new Zm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,u=new jT(r.count||0);t=new W_(r.targetId,u)}}var _;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return mt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?ir(u.readTime):mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Ap(this.It),t.addTarget=function(s,u){let c;const f=u.target;return c=zm(f)?{documents:CI(s,f)}:{query:tw(s,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=zT(s,u.resumeToken):u.snapshotVersion.compareTo(mt.min())>0&&(c.readTime=Ym(s,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function xI(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Ap(this.It),t.removeTarget=e,this.Bo(t)}}class mD extends gD{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function SI(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,s){let u=ir(r.updateTime?r.updateTime:s);return u.isEqual(mt.min())&&(u=ir(s)),new vA(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.Zo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Ap(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Za(this.It,r))};this.Bo(t)}}class AS extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Re(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.Vo.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(de.UNKNOWN,s.toString())})}fo(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(de.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class yD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(nr(t),this.ou=!1):Pe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class vD{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var _;Kc(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ve.Z)(function*(I){const C=qe(I);C._u.add(4),yield Vh(C),C.gu.set("Unknown"),C._u.delete(4),yield Uh(C)}),function(I){return _.apply(this,arguments)})(c))}))}),this.gu=new yD(r,s)}}function Uh(n){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,ve.Z)(function*(n){if(Kc(n))for(const e of n.wu)yield e(!0)}),Iy.apply(this,arguments)}function Vh(n){return Sw.apply(this,arguments)}function Sw(){return Sw=(0,ve.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Sw.apply(this,arguments)}function Cw(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ED(t)?wD(t):Zc(t).ko()&&_D(t,e))}function Bh(n,e){const t=qe(n),r=Zc(t);t.du.delete(e),r.ko()&&xS(t,e),0===t.du.size&&(r.ko()?r.Fo():Kc(t)&&t.gu.set("Unknown"))}function _D(n,e){n.yu.Ot(e.targetId),Zc(n).zo(e)}function xS(n,e){n.yu.Ot(e),Zc(n).Ho(e)}function wD(n){n.yu=new HT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Zc(n).start(),n.gu.uu()}function ED(n){return Kc(n)&&!Zc(n).No()&&n.du.size>0}function Kc(n){return 0===qe(n)._u.size}function MS(n){n.yu=void 0}function bA(n){return ID.apply(this,arguments)}function ID(){return ID=(0,ve.Z)(function*(n){n.du.forEach((e,t)=>{_D(n,e)})}),ID.apply(this,arguments)}function Dy(n,e){return DD.apply(this,arguments)}function DD(){return DD=(0,ve.Z)(function*(n,e){MS(n),ED(n)?(n.gu.hu(e),wD(n)):n.gu.set("Unknown")}),DD.apply(this,arguments)}function bD(n,e,t){return jh.apply(this,arguments)}function jh(){return jh=(0,ve.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof K_&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(s,u){const c=u.cause;for(const f of u.targetIds)s.du.has(f)&&(yield s.remoteSyncer.rejectListen(f,c),s.du.delete(f),s.yu.removeTarget(f))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bp(n,r)}else if(e instanceof Zm?n.yu.Gt(e):e instanceof W_?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(mt.min()))try{const r=yield Iw(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.yu.te(u);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const I=s.du.get(_);I&&s.du.set(_,I.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const _=s.du.get(f);if(!_)return;s.du.set(f,_.withResumeToken(dr.EMPTY_BYTE_STRING,_.snapshotVersion)),xS(s,f);const I=new Xo(_.target,f,1,_.sequenceNumber);_D(s,I)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Bp(n,r)}var r}),jh.apply(this,arguments)}function Bp(n,e,t){return by.apply(this,arguments)}function by(){return by=(0,ve.Z)(function*(n,e,t){if(!Zo(e))throw e;n._u.add(1),yield Vh(n),n.gu.set("Offline"),t||(t=()=>Iw(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Uh(n)}))}),by.apply(this,arguments)}function RS(n,e){return e().catch(t=>Bp(n,t,e))}function vl(n){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,ve.Z)(function*(n){const e=qe(n),t=Qa(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;NS(e);)try{const s=yield DS(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,TD(e,s)}catch(s){yield Bp(e,s)}PS(e)&&SD(e)}),Ty.apply(this,arguments)}function NS(n){return Kc(n)&&n.fu.length<10}function TD(n,e){n.fu.push(e);const t=Qa(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function PS(n){return Kc(n)&&!Qa(n).No()&&n.fu.length>0}function SD(n){Qa(n).start()}function kS(n){return Aw.apply(this,arguments)}function Aw(){return Aw=(0,ve.Z)(function*(n){Qa(n).eu()}),Aw.apply(this,arguments)}function Sy(n){return xw.apply(this,arguments)}function xw(){return xw=(0,ve.Z)(function*(n){const e=Qa(n);for(const t of n.fu)e.Xo(t.mutations)}),xw.apply(this,arguments)}function TA(n,e,t){return CD.apply(this,arguments)}function CD(){return CD=(0,ve.Z)(function*(n,e,t){const r=n.fu.shift(),s=jI.from(r,e,t);yield RS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield vl(n)}),CD.apply(this,arguments)}function SA(n,e){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,ve.Z)(function*(n,e){var t;e&&Qa(n).Yo&&(yield(t=(0,ve.Z)(function*(r,s){if(z_(u=s.code)&&u!==de.ABORTED){const c=r.fu.shift();Qa(r).Oo(),yield RS(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield vl(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),PS(n)&&SD(n)}),Mw.apply(this,arguments)}function AD(n,e){return Rw.apply(this,arguments)}function Rw(){return Rw=(0,ve.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Kc(t);t._u.add(3),yield Vh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Uh(t)}),Rw.apply(this,arguments)}function xD(n,e){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,ve.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield Uh(t)):e||(t._u.add(2),yield Vh(t),t.gu.set("Unknown"))}),Nw.apply(this,arguments)}function Zc(n){return n.pu||(n.pu=function(e,t,r){const s=qe(e);return s.su(),new CS(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:bA.bind(null,n),Zr:Dy.bind(null,n),Wo:bD.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.pu.Oo(),ED(n)?wD(n):n.gu.set("Unknown")):(yield n.pu.stop(),MS(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Qa(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.su(),new mD(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:kS.bind(null,n),Zr:SA.bind(null,n),tu:Sy.bind(null,n),Zo:TA.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Oo(),yield vl(n)):(yield n.Iu.stop(),n.fu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class MD{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,f=new MD(e,t,c,s,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function si(n,e){if(nr("AsyncQueue",`${e}: ${n}`),Zo(n))return new Re(de.UNAVAILABLE,`${e}: ${n}`);throw n}class $h{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Dp(),this.sortedSet=new Zn(this.comparator)}static emptySet(e){return new $h(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $h)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $h;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Cy{constructor(){this.Tu=new Zn(He.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Qe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hh{constructor(e,t,r,s,u,c,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Hh(e,t,$h.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class Fs{constructor(){this.Au=void 0,this.listeners=[]}}class OS{constructor(){this.queries=new cl(e=>dI(e),vp),this.onlineState="Unknown",this.Ru=new Set}}function jp(n,e){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new Fs),s)try{u.Au=yield t.onListen(r)}catch(c){const f=si(c,`Initialization of query '${L_(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&Ow(t)}),Pw.apply(this,arguments)}function kw(n,e){return $p.apply(this,arguments)}function $p(){return $p=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),$p.apply(this,arguments)}function RD(n,e){const t=qe(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const f of c.listeners)f.Pu(s)&&(r=!0);c.Au=s}}r&&Ow(t)}function ND(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Ow(n){n.Ru.forEach(e=>{e.next()})}class Ay{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Hh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class PD{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class kD{constructor(e){this.It=e}Ji(e){return Wi(this.It,e)}Yi(e){return e.metadata.exists?X_(this.It,e.document,!1):En.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return ir(e)}}class OD{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LD(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new kD(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const c of s.metadata.queries){const f=(t.get(c)||Ft()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function cD(n,e,t,r){return my.apply(this,arguments)}(e.localStore,new kD(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const s of e.queries)yield yy(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function LD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class xy{constructor(e){this.key=e}}class Ja{constructor(e){this.key=e}}class Lw{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ft(),this.mutatedKeys=Ft(),this.Ku=fI(e),this.Gu=new $h(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new Cy,s=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,f=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((C,x)=>{const F=s.get(C),z=F_(this.query,x)?x:null,Z=!!F&&this.mutatedKeys.has(F.key),ue=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Ie=!1;F&&z?F.data.isEqual(z.data)?Z!==ue&&(r.track({type:3,doc:z}),Ie=!0):this.zu(F,z)||(r.track({type:2,doc:z}),Ie=!0,(_&&this.Ku(z,_)>0||I&&this.Ku(z,I)<0)&&(f=!0)):!F&&z?(r.track({type:0,doc:z}),Ie=!0):F&&!z&&(r.track({type:1,doc:F}),Ie=!0,(_||I)&&(f=!0)),Ie&&(z?(c=c.add(z),u=ue?u.add(C):u.delete(C)):(c=c.delete(C),u=u.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),u=u.delete(C.key),r.track({type:1,doc:C})}return{Gu:c,Wu:r,$i:f,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((I,C)=>function(x,F){const z=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return z(x)-z(F)}(I.type,C.type)||this.Ku(I.doc,C.doc)),this.Hu(r);const c=t?this.Ju():[],f=0===this.qu.size&&this.current?1:0,_=f!==this.Uu;return this.Uu=f,0!==u.length||_?{snapshot:new Hh(this.query,e.Gu,s,u,e.mutatedKeys,0===f,_,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Cy,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ft(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new Ja(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new xy(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ft();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Hh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Fw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Xa{constructor(e){this.key=e,this.ec=!1}}class LS{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new cl(f=>dI(f),vp),this.ic=new Map,this.rc=new Set,this.oc=new Zn(He.comparator),this.uc=new Map,this.cc=new Lp,this.ac={},this.hc=new Map,this.lc=qc.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function CA(n,e){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,ve.Z)(function*(n,e){const t=zp(n);let r,s;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.tc();else{const c=yield yl(t.localStore,zi(e));t.isPrimaryClient&&Cw(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield Vw(t,e,r,"current"===f)}return s}),Uw.apply(this,arguments)}function Vw(n,e,t,r){return Bw.apply(this,arguments)}function Bw(){return Bw=(0,ve.Z)(function*(n,e,t,r){n.dc=(C,x,F)=>{return(z=(0,ve.Z)(function*(Z,ue,Ie,We){let tt=ue.view.ju(Ie);tt.$i&&(tt=yield py(Z.localStore,ue.query,!1).then(({documents:St})=>ue.view.ju(St,tt)));const gt=We&&We.targetChanges.get(ue.targetId),it=ue.view.applyChanges(tt,Z.isPrimaryClient,gt);return Gw(Z,ue.targetId,it.Yu),it.snapshot}),function(Z,ue,Ie,We){return z.apply(this,arguments)})(n,C,x,F);var z};const s=yield py(n.localStore,e,!0),u=new Lw(e,s.Hi),c=u.ju(s.documents),f=Cp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,f);Gw(n,t,_.Yu);const I=new Fw(e,t,u);return n.sc.set(e,I),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),_.snapshot}),Bw.apply(this,arguments)}function FS(n,e){return My.apply(this,arguments)}function My(){return My=(0,ve.Z)(function*(n,e){const t=qe(n),r=t.sc.get(e),s=t.ic.get(r.targetId);if(s.length>1)return t.ic.set(r.targetId,s.filter(u=>!vp(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Bh(t.remoteStore,r.targetId),Yc(t,r.targetId)}).catch(ho))):(Yc(t,r.targetId),yield Lh(t.localStore,r.targetId,!0))}),My.apply(this,arguments)}function Ry(){return Ry=(0,ve.Z)(function*(n,e,t){const r=zh(n);try{const s=yield function(u,c){const f=qe(u),_=dn.now(),I=c.reduce((F,z)=>F.add(z.key),Ft());let C,x;return f.persistence.runTransaction("Locally write mutations","readwrite",F=>{let z=qi(),Z=Ft();return f.Gi.getEntries(F,I).next(ue=>{z=ue,z.forEach((Ie,We)=>{We.isValidDocument()||(Z=Z.add(Ie))})}).next(()=>f.localDocuments.getOverlayedDocuments(F,z)).next(ue=>{C=ue;const Ie=[];for(const We of c){const tt=VT(We,C.get(We.key).overlayedDocument);null!=tt&&Ie.push(new Ls(We.key,tt,eI(tt.value.mapValue),Cn.exists(!0)))}return f.mutationQueue.addMutationBatch(F,_,Ie,c)}).next(ue=>{x=ue;const Ie=ue.applyToLocalDocumentSet(C,Z);return f.documentOverlayCache.saveOverlays(F,ue.batchId,Ie)})}).then(()=>({batchId:x.batchId,changes:yI(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,f){let _=u.ac[u.currentUser.toKey()];_||(_=new Zn(Tt)),_=_.insert(c,f),u.ac[u.currentUser.toKey()]=_}(r,s.batchId,t),yield _l(r,s.changes),yield vl(r.remoteStore)}catch(s){const u=si(s,"Failed to persist write");t.reject(u)}}),Ry.apply(this,arguments)}function FD(n,e){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,ve.Z)(function*(n,e){const t=qe(n);try{const r=yield aD(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.uc.get(u);c&&(Ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.ec=!0:s.modifiedDocuments.size>0?Ct(c.ec):s.removedDocuments.size>0&&(Ct(c.ec),c.ec=!1))}),yield _l(t,r,e)}catch(r){yield ho(r)}}),Ny.apply(this,arguments)}function US(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.sc.forEach((u,c)=>{const f=c.view.bu(e);f.snapshot&&s.push(f.snapshot)}),function(u,c){const f=qe(u);f.onlineState=c;let _=!1;f.queries.forEach((I,C)=>{for(const x of C.listeners)x.bu(c)&&(_=!0)}),_&&Ow(f)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jw(n,e,t){return Py.apply(this,arguments)}function Py(){return Py=(0,ve.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.uc.get(e),u=s&&s.key;if(u){let c=new Zn(He.comparator);c=c.insert(u,En.newNoDocument(u,mt.min()));const f=Ft().add(u),_=new Sp(mt.min(),new Map,new an(Tt),c,f);yield FD(r,_),r.oc=r.oc.remove(u),r.uc.delete(e),BD(r)}else yield Lh(r.localStore,e,!1).then(()=>Yc(r,e,t)).catch(ho)}),Py.apply(this,arguments)}function UD(n,e){return ky.apply(this,arguments)}function ky(){return ky=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield IA(t.localStore,e);$w(t,r,null),Fy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _l(t,s)}catch(s){yield ho(s)}}),ky.apply(this,arguments)}function VD(n,e,t){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,ve.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,c){const f=qe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return f.mutationQueue.lookupMutationBatch(_,c).next(C=>(Ct(null!==C),I=C.keys(),f.mutationQueue.removeMutationBatch(_,C))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,I,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>f.localDocuments.getDocuments(_,I))})}(r.localStore,e);$w(r,e,t),Fy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _l(r,s)}catch(s){yield ho(s)}}),Oy.apply(this,arguments)}function Gh(){return Gh=(0,ve.Z)(function*(n,e){const t=qe(n);Kc(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const s=t.hc.get(r)||[];s.push(e),t.hc.set(r,s)}catch(r){const s=si(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Gh.apply(this,arguments)}function Fy(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function $w(n,e,t){const r=qe(n);let s=r.ac[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function Yc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||Hw(n,r)})}function Hw(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Bh(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),BD(n))}function Gw(n,e,t){for(const r of t)r instanceof xy?(n.cc.addReference(r.key,e),VS(n,r)):r instanceof Ja?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||Hw(n,r.key)):Qe()}function VS(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.rc.add(r),BD(n))}function BD(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new He(qt.fromString(e)),r=n.lc.next();n.uc.set(r,new Xa(t)),n.oc=n.oc.insert(t,r),Cw(n.remoteStore,new Xo(zi(_h(t.path)),r,2,bi.at))}}function _l(n,e,t){return Uy.apply(this,arguments)}function Uy(){return Uy=(0,ve.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],c=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,_)=>{c.push(r.dc(_,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I.fromCache?"not-current":"current"),s.push(I);const C=hy.Ci(_.targetId,I);u.push(C)}}))}),yield Promise.all(c),r.nc.Wo(s),yield(f=(0,ve.Z)(function*(_,I){const C=qe(_);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>se.forEach(I,F=>se.forEach(F.Si,z=>C.persistence.referenceDelegate.addReference(x,F.targetId,z)).next(()=>se.forEach(F.Di,z=>C.persistence.referenceDelegate.removeReference(x,F.targetId,z)))))}catch(x){if(!Zo(x))throw x;Pe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const F=x.targetId;if(!x.fromCache){const z=C.Ui.get(F),ue=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);C.Ui=C.Ui.insert(F,ue)}}}),function(_,I){return f.apply(this,arguments)})(r.localStore,u))}),Uy.apply(this,arguments)}function BS(n,e){return zw.apply(this,arguments)}function zw(){return zw=(0,ve.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield sD(t.localStore,e);t.currentUser=e,(s=t).hc.forEach(c=>{c.forEach(f=>{f.reject(new Re(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _l(t,r.ji)}var s}),zw.apply(this,arguments)}function jS(n,e){const t=qe(n),r=t.uc.get(e);if(r&&r.ec)return Ft().add(r.key);{let s=Ft();const u=t.ic.get(e);if(!u)return s;for(const c of u){const f=t.sc.get(c);s=s.unionWith(f.view.Qu)}return s}}function xA(n,e){return jD.apply(this,arguments)}function jD(){return jD=(0,ve.Z)(function*(n,e){const t=qe(n),r=yield py(t.localStore,e.query,!0),s=e.view.Zu(r);return t.isPrimaryClient&&Gw(t,e.targetId,s.Yu),s}),jD.apply(this,arguments)}function MA(n,e){return $D.apply(this,arguments)}function $D(){return $D=(0,ve.Z)(function*(n,e){const t=qe(n);return lD(t.localStore,e).then(r=>_l(t,r))}),$D.apply(this,arguments)}function RA(n,e,t,r){return qw.apply(this,arguments)}function qw(){return qw=(0,ve.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(c,f){const _=qe(c),I=qe(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",C=>I.Tn(C,f).next(x=>x?_.localDocuments.getDocuments(C,x):se.resolve(null)))}(s.localStore,e);var f;null!==u?("pending"===t?yield vl(s.remoteStore):"acknowledged"===t||"rejected"===t?($w(s,e,r||null),Fy(s,e),f=e,qe(qe(s.localStore).mutationQueue).An(f)):Qe(),yield _l(s,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),qw.apply(this,arguments)}function Ww(){return Ww=(0,ve.Z)(function*(n,e){const t=qe(n);if(zp(t),zh(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield HD(t,r.toArray());t.fc=!0,yield xD(t.remoteStore,!0);for(const u of s)Cw(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let s=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(Yc(t,c),Lh(t.localStore,c,!0))),Bh(t.remoteStore,c)}),yield s,yield HD(t,r),function(u){const c=qe(u);c.uc.forEach((f,_)=>{Bh(c.remoteStore,_)}),c.cc.fs(),c.uc=new Map,c.oc=new Zn(He.comparator)}(t),t.fc=!1,yield xD(t.remoteStore,!1)}}),Ww.apply(this,arguments)}function HD(n,e,t){return By.apply(this,arguments)}function By(){return By=(0,ve.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const c of e){let f;const _=r.ic.get(c);if(_&&0!==_.length){f=yield yl(r.localStore,zi(_[0]));for(const I of _){const C=r.sc.get(I),x=yield xA(r,C);x.snapshot&&u.push(x.snapshot)}}else{const I=yield uD(r.localStore,c);f=yield yl(r.localStore,I),yield Vw(r,wl(I),c,!1)}s.push(f)}return r.nc.Wo(u),s}),By.apply(this,arguments)}function wl(n){return lI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function GD(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Kw(n,e,t,r){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,ve.Z)(function*(n,e,t,r){const s=qe(n);if(s.fc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=s.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield lD(s.localStore,hI(u[0])),f=Sp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield _l(s,c,f);break}case"rejected":yield Lh(s.localStore,e,!0),Yc(s,e,r);break;default:Qe()}}),Hp.apply(this,arguments)}function $S(n,e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,ve.Z)(function*(n,e,t){const r=zp(n);if(r.fc){for(const s of e){if(r.ic.has(s)){Pe("SyncEngine","Adding an already active target "+s);continue}const u=yield uD(r.localStore,s),c=yield yl(r.localStore,u);yield Vw(r,wl(u),c.targetId,!1),Cw(r.remoteStore,c)}for(const s of t)r.ic.has(s)&&(yield Lh(r.localStore,s,!1).then(()=>{Bh(r.remoteStore,s),Yc(r,s)}).catch(ho))}}),Gp.apply(this,arguments)}function zp(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jw.bind(null,e),e.nc.Wo=RD.bind(null,e.eventManager),e.nc._c=ND.bind(null,e.eventManager),e}function zh(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VD.bind(null,e),e}class HS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.It=Fh(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return iD(this.persistence,new ii,e.initialUser,this.It)}gc(e){return new ay(uy.Bs,this.It)}mc(e){return new hD}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GS extends HS{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield zh(r.Ec.syncEngine),yield vl(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return iD(this.persistence,new ii,e.initialUser,this.It)}Ic(e,t){return new mS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new qE(t,this.persistence);return new PT(e.asyncQueue,r)}gc(e){const t=dy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ki.withCacheSize(this.cacheSizeBytes):Ki.DEFAULT;return new ly(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Tw(),wy(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new hD}}class PA extends GS{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const s=r.Ec.syncEngine;r.sharedClientState instanceof dD&&(r.sharedClientState.syncEngine={Fr:RA.bind(null,s),$r:Kw.bind(null,s),Br:$S.bind(null,s),vi:GD.bind(null,s),Or:MA.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ve.Z)(function*(c){yield function Vy(n,e){return Ww.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=Tw();if(!dD.C(t))throw new Re(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jy{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>US(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=BS.bind(null,r.syncEngine),yield xD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OS}createDatastore(e){const t=Fh(e.databaseInfo.databaseId),r=new pD(e.databaseInfo);return new AS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=f=>US(this.syncEngine,f,0),c=fD.C()?new fD:new DA,new vD(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,f,_,I){const C=new LS(r,s,u,c,f,_);return I&&(C.fc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=qe(t);Pe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Vh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zD(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $y{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zS{constructor(e,t){this.bc=e,this.It=t,this.metadata=new xr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),s=Number(r);isNaN(s)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(s);return new PD(JSON.parse(u),t.length+s)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ve.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ve.Z)(function*(u,c){const f=qe(u),_=Ap(f.It)+"/documents",I={documents:c.map(z=>Th(f.It,z))},C=yield f.fo("BatchGetDocuments",_,I,c.length),x=new Map;C.forEach(z=>{const Z=function qT(n,e){return"found"in e?function(t,r){Ct(!!r.found);const s=Wi(t,r.found.name),u=ir(r.found.updateTime),c=new Hr({mapValue:{fields:r.found.fields}});return En.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const s=Wi(t,r.missing),u=ir(r.readTime);return En.newNoDocument(s,u)}(n,e):Qe()}(f.It,z);x.set(Z.key.toString(),Z)});const F=[];return c.forEach(z=>{const Z=x.get(z.toString());Ct(!!Z),F.push(Z)}),F}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=He.fromPath(s);e.mutations.push(new Km(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(s,u){const c=qe(s),f=Ap(c.It)+"/documents",_={writes:u.map(I=>Za(c.It,I))};yield c.co("Commit",f,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Cn.exists(!1):Cn.updateTime(t):Cn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Re(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cn.updateTime(t)}return Cn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qD{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new Ey(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ve.Z)(function*(){const t=new qS(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Oc(u)}))}).catch(s=>{e.Oc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!mh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!z_(t)}return!1}}class WD{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Ar.UNAUTHENTICATED,this.clientId=Nc.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(f){Pe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=si(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Zw(n,e){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ve.Z)(function*(u){r.isEqual(u)||(yield sD(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Yw.apply(this,arguments)}function KD(n,e){return Hy.apply(this,arguments)}function Hy(){return Hy=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qp(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>AD(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>AD(e.remoteStore,u)),n.onlineComponents=e}),Hy.apply(this,arguments)}function qp(n){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,ve.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield Zw(n,new HS)),n.offlineComponents}),ZD.apply(this,arguments)}function Wp(n){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,ve.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield KD(n,new jy)),n.onlineComponents}),Kp.apply(this,arguments)}function YD(n){return qp(n).then(e=>e.persistence)}function Gy(n){return qp(n).then(e=>e.localStore)}function WS(n){return Wp(n).then(e=>e.remoteStore)}function QD(n){return Wp(n).then(e=>e.syncEngine)}function qh(n){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,ve.Z)(function*(n){const e=yield Wp(n),t=e.eventManager;return t.onListen=CA.bind(null,e.syncEngine),t.onUnlisten=FS.bind(null,e.syncEngine),t}),Qw.apply(this,arguments)}function ZS(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(s,u,c,f,_){const I=new $y({next:x=>{u.enqueueAndForget(()=>kw(s,C));const F=x.docs.has(c);!F&&x.fromCache?_.reject(new Re(de.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&x.fromCache&&f&&"server"===f.source?_.reject(new Re(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),C=new Ay(_h(c.path),I,{includeMetadataChanges:!0,Nu:!0});return jp(s,C)}(yield qh(n),n.asyncQueue,e,t,r)})),r.promise}function YS(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(s,u,c,f,_){const I=new $y({next:x=>{u.enqueueAndForget(()=>kw(s,C)),x.fromCache&&"server"===f.source?_.reject(new Re(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),C=new Ay(c,I,{includeMetadataChanges:!0,Nu:!0});return jp(s,C)}(yield qh(n),n.asyncQueue,e,t,r)})),r.promise}const JS=new Map;function JD(n,e,t){if(!t)throw new Re(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XS(n,e,t,r){if(!0===e&&!0===r)throw new Re(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function i(n){if(!He.isDocumentKey(n))throw new Re(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o(n){if(He.isDocumentKey(n))throw new Re(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function a(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function l(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=a(n);throw new Re(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function d(n,e){if(e<=0)throw new Re(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class p{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,XS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ap;switch(t.type){case"gapi":return new Os(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JS.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),JS.delete(e),t.terminate())}(this),Promise.resolve()}}class D{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new R(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new D(this.firestore,e,this._key)}}class S{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new S(this.firestore,e,this._query)}}class R extends S{constructor(e,t,r){super(e,t,_h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new D(this.firestore,null,new He(e))}withConverter(e){return new R(this.firestore,e,this._path)}}function k(n,e,...t){if(n=(0,tn.m9)(n),JD("collection","path",e),n instanceof v){const r=qt.fromString(e,...t);return o(r),new R(n,null,r)}{if(!(n instanceof D||n instanceof R))throw new Re(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return o(r),new R(n.firestore,null,r)}}function ee(n,e,...t){if(n=(0,tn.m9)(n),1===arguments.length&&(e=Nc.R()),JD("doc","path",e),n instanceof v){const r=qt.fromString(e,...t);return i(r),new D(n,null,new He(r))}{if(!(n instanceof D||n instanceof R))throw new Re(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return i(r),new D(n.firestore,n instanceof R?n.converter:null,new He(r))}}function we(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),(n instanceof D||n instanceof R)&&(e instanceof D||e instanceof R)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Le(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),n instanceof S&&e instanceof S&&n.firestore===e.firestore&&vp(n._query,e._query)&&n.converter===e.converter}class Ge{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Ey(this,"async_queue_retry"),this.jc=()=>{const t=wy();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=wy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=wy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new xr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Zo(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const s=MD.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(s),s}Wc(){this.qc&&Qe()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function et(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class yt{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ze extends v{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Ge,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zy(this),this._firestoreClient.terminate()}}function In(n){return n._firestoreClient||zy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zy(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kT(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new WD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function qy(n,e,t){const r=new xr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield Zw(n,t),yield KD(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(c=u).name?c.code===de.FAILED_PRECONDITION||c.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;Mc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function BA(n){if(n._initialized||n._terminated)throw new Re(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class El{constructor(e){this._byteString=e}static fromBase64String(e){try{return new El(dr.fromBase64String(e))}catch(t){throw new Re(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new El(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zp{constructor(e){this._methodName=e}}class eb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const bR=/^__.*__$/;class TR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ih(e,this.data,t,this.fieldTransforms)}}class jA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $A(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class tb{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new tb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return ib(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if($A(this.na)&&bR.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class SR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Fh(e)}fa(e,t,r,s=!1){return new tb({na:e,methodName:t,la:r,path:Bn.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Yp(n){const e=n._freezeSettings(),t=Fh(n._databaseId);return new SR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nb(n,e,t,r,s,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,s);rC("Data must be an object, but it was:",c,r);const f=zA(r,c);let _,I;if(u.merge)_=new Gi(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const C=[];for(const x of u.mergeFields){const F=iC(e,x,t);if(!c.contains(F))throw new Re(de.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);WA(C,F)||C.push(F)}_=new Gi(C),I=c.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,I=c.fieldTransforms;return new TR(new Hr(f),_,I)}class s0 extends Zp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}function HA(n,e,t){return new tb({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class eC extends Zp{_toFieldTransform(e){return new Wm(e.path,new Uc)}isEqual(e){return e instanceof eC}}class CR extends Zp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=HA(this,e,!0),r=this.da.map(u=>Qp(u,t)),s=new al(r);return new Wm(e.path,s)}isEqual(e){return this===e}}class AR extends Zp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=HA(this,e,!0),r=this.da.map(u=>Qp(u,t)),s=new ul(r);return new Wm(e.path,s)}isEqual(e){return this===e}}class xR extends Zp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Eh(e.It,B_(e.It,this._a));return new Wm(e.path,t)}isEqual(e){return this===e}}function tC(n,e,t,r){const s=n.fa(1,e,t);rC("Data must be an object, but it was:",s,r);const u=[],c=Hr.empty();rl(r,(_,I)=>{const C=rb(e,_,t);I=(0,tn.m9)(I);const x=s.ua(C);if(I instanceof s0)u.push(C);else{const F=Qp(I,x);null!=F&&(u.push(C),c.set(C,F))}});const f=new Gi(u);return new jA(c,f,s.fieldTransforms)}function nC(n,e,t,r,s,u){const c=n.fa(1,e,t),f=[iC(e,r,t)],_=[s];if(u.length%2!=0)throw new Re(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)f.push(iC(e,u[F])),_.push(u[F+1]);const I=[],C=Hr.empty();for(let F=f.length-1;F>=0;--F)if(!WA(I,f[F])){const z=f[F];let Z=_[F];Z=(0,tn.m9)(Z);const ue=c.ua(z);if(Z instanceof s0)I.push(z);else{const Ie=Qp(Z,ue);null!=Ie&&(I.push(z),C.set(z,Ie))}}const x=new Gi(I);return new jA(C,x,c.fieldTransforms)}function GA(n,e,t,r=!1){return Qp(t,n.fa(r?4:3,e))}function Qp(n,e){if(qA(n=(0,tn.m9)(n)))return rC("Unsupported field value:",e,n),zA(n,e);if(n instanceof Zp)return function(t,r){if(!$A(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let f=Qp(c,r.ca(u));null==f&&(f={nullValue:"NULL_VALUE"}),s.push(f),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,tn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return B_(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=dn.fromDate(t);return{timestampValue:Ym(r.It,s)}}if(t instanceof dn){const s=new dn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ym(r.It,s)}}if(t instanceof eb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof El)return{bytesValue:zT(r.It,t._byteString)};if(t instanceof D){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Q_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${a(t)}`)}(n,e)}function zA(n,e){const t={};return WE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rl(n,(r,s)=>{const u=Qp(s,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function qA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof dn||n instanceof eb||n instanceof El||n instanceof D||n instanceof Zp)}function rC(n,e,t){if(!qA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=a(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function iC(n,e,t){if((e=(0,tn.m9)(e))instanceof Qc)return e._internalPath;if("string"==typeof e)return rb(n,e);throw ib("Field path arguments must be of type string or ",n,!1,void 0,t)}const MR=new RegExp("[~\\*/\\[\\]]");function rb(n,e,t){if(e.search(MR)>=0)throw ib(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch{throw ib(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ib(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${s}`),_+=")"),new Re(de.INVALID_ARGUMENT,f+n+_)}function WA(n,e){return n.some(t=>t.isEqual(e))}class o0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new D(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new RR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class RR extends o0{data(){return super.data()}}function sb(n,e){return"string"==typeof e?rb(n,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}class Jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jc extends o0{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends Jc{data(e={}){return super.data(e)}}class Wh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Jp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new Jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Jp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const f=new a0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Jp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:NR(c.type),doc:f,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function KA(n,e){return n instanceof Jc&&e instanceof Jc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wh&&e instanceof Wh&&n._firestore===e._firestore&&Le(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ZA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}function Kh(n,...e){for(const t of e)n=t._apply(n);return n}class PR extends u0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Yp(e.firestore),r=function(s,u,c,f,_,I,C){let x;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Re(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){tx(C,I);const z=[];for(const Z of C)z.push(ex(f,s,Z));x={arrayValue:{values:z}}}else x=ex(f,s,C)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||tx(C,I),x=GA(c,"where",C,"in"===I||"not-in"===I);const F=Gr.create(_,I,x);return function(z,Z){if(Z.dt()){const Ie=k_(z);if(null!==Ie&&!Ie.isEqual(Z.field))throw new Re(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ie.toString()}' and '${Z.field.toString()}'`);const We=P_(z);null!==We&&nx(0,Z.field,We)}const ue=function(Ie,We){for(const tt of Ie.filters)if(We.indexOf(tt.op)>=0)return tt.op;return null}(z,function(Ie){switch(Ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ue)throw new Re(de.INVALID_ARGUMENT,ue===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ue.toString()}' filters.`)}(s,F),F}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new S(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new Ka(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class OR extends u0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Fc(s,u);return function(f,_){if(null===P_(f)){const I=k_(f);null!==I&&nx(0,I,_.field)}}(r,c),c}(e._query,this.wa,this.ya);return new S(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Ka(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YA extends u0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new S(e.firestore,e.converter,qm(e._query,this.pa,this.Ia))}}class QA extends u0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=XA(e,this.type,this.Ta,this.Ea);return new S(e.firestore,e.converter,(s=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class JA extends u0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=XA(e,this.type,this.Ta,this.Ea);return new S(e.firestore,e.converter,(s=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function XA(n,e,t,r){if(t[0]=(0,tn.m9)(t[0]),t[0]instanceof o0)return function(s,u,c,f,_){if(!f)throw new Re(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const C of wh(s))if(C.field.isKeyField())I.push(ol(u,f.key));else{const x=f.data.field(C.field);if(T_(x))throw new Re(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const F=C.field.canonicalString();throw new Re(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}I.push(x)}return new Wa(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Yp(n.firestore);return function(u,c,f,_,I,C){const x=u.explicitOrderBy;if(I.length>x.length)throw new Re(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let z=0;z<I.length;z++){const Z=I[z];if(x[z].field.isKeyField()){if("string"!=typeof Z)throw new Re(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!O_(u)&&-1!==Z.indexOf("/"))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const ue=u.path.child(qt.fromString(Z));if(!He.isDocumentKey(ue))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Ie=new He(ue);F.push(ol(c,Ie))}else{const ue=GA(f,_,Z);F.push(ue)}}return new Wa(F,C)}(n._query,n.firestore._databaseId,s,e,t,r)}}function ex(n,e,t){if("string"==typeof(t=(0,tn.m9)(t))){if(""===t)throw new Re(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O_(e)&&-1!==t.indexOf("/"))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!He.isDocumentKey(r))throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ol(n,new He(r))}if(t instanceof D)return ol(n,t._key);throw new Re(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${a(t)}.`)}function tx(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nx(n,e,t){if(!t.isEqual(e))throw new Re(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const HR={maxAttempts:5};class sC{convertValue(e,t="none"){switch(il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ph(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return rl(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new eb(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=YE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gh(e));default:return null}}convertTimestamp(e){const t=za(e);return new dn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);Ct(Qm(r));const s=new wn(r.get(1),r.get(3)),u=new He(r.popFirst(5));return s.isEqual(t)||nr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ob(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class GR extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new El(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new D(this.firestore,null,t)}}class rx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yp(e)}set(e,t,r){this._verifyNotCommitted();const s=Zh(e,this._firestore),u=ob(s.converter,t,r),c=nb(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,Cn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Zh(e,this._firestore);let c;return c="string"==typeof(t=(0,tn.m9)(t))||t instanceof Qc?nC(this._dataReader,"WriteBatch.update",u._key,t,r,s):tC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Zh(e,this._firestore);return this._mutations=this._mutations.concat(new jc(t._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zh(n,e){if((n=(0,tn.m9)(n)).firestore!==e)throw new Re(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Xp extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new El(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new D(this.firestore,null,t)}}function ix(n,e,t){n=l(n,D);const r=l(n.firestore,Ze),s=ob(n.converter,e,t);return Wy(r,[nb(Yp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Cn.none())])}function sx(n,e,t,...r){n=l(n,D);const s=l(n.firestore,Ze),u=Yp(s);let c;return c="string"==typeof(e=(0,tn.m9)(e))||e instanceof Qc?nC(u,"updateDoc",n._key,e,t,r):tC(u,"updateDoc",n._key,e),Wy(s,[c.toMutation(n._key,Cn.exists(!0))])}function ox(n,...e){var t,r,s;n=(0,tn.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||et(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(et(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let _,I,C;if(n instanceof D)I=l(n.firestore,Ze),C=_h(n._key.path),_={next:x=>{e[c]&&e[c](oC(I,n,x))},error:e[c+1],complete:e[c+2]};else{const x=l(n,S);I=l(x.firestore,Ze),C=x._query;const F=new Xp(I);_={next:z=>{e[c]&&e[c](new Wh(I,F,x,z))},error:e[c+1],complete:e[c+2]},ZA(n._query)}return function(x,F,z,Z){const ue=new $y(Z),Ie=new Ay(F,ue,z);return x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return jp(yield qh(x),Ie)})),()=>{ue.Rc(),x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return kw(yield qh(x),Ie)}))}}(In(I),C,f,_)}function Wy(n,e){return function(t,r){const s=new xr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function AA(n,e,t){return Ry.apply(this,arguments)}(yield QD(t),r,s)})),s.promise}(In(n),e)}function oC(n,e,t){const r=t.docs.get(e._key),s=new Xp(n);return new Jc(n,s,e._key,r,new Jp(t.hasPendingWrites,t.fromCache),e.converter)}class eN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yp(e)}get(e){const t=Zh(e,this._firestore),r=new GR(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Qe();const u=s[0];if(u.isFoundDocument())return new o0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new o0(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const s=Zh(e,this._firestore),u=ob(s.converter,t,r),c=nb(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=Zh(e,this._firestore);let c;return c="string"==typeof(t=(0,tn.m9)(t))||t instanceof Qc?nC(this._dataReader,"Transaction.update",u._key,t,r,s):tC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Zh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zh(e,this._firestore),r=new Xp(this._firestore);return super.get(e).then(s=>new Jc(this._firestore,r,t._key,s._document,new Jp(!1,!1),t.converter))}}function aC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ux(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function lx(){if(!function KE(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xu=Ic.SDK_VERSION,(0,Ic._registerComponent)(new zg.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),c=new Ze(new Rc(t.getProvider("auth-internal")),new lh(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wn(f.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),(0,Ic.registerVersion)(w_,"3.5.0",n),(0,Ic.registerVersion)(w_,"3.5.0","esm2017")}();class l0{constructor(e){this._delegate=e}static fromBase64String(e){return lx(),new l0(El.fromBase64String(e))}static fromUint8Array(e){return ux(),new l0(El.fromUint8Array(e))}toBase64(){return lx(),this._delegate.toBase64()}toUint8Array(){return ux(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uC(n){return function lN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class cN{enableIndexedDbPersistence(e,t){return function Jw(n,e){BA(n=l(n,Ze));const t=In(n),r=n._freezeSettings(),s=new jy;return qy(t,s,new GS(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Xw(n){BA(n=l(n,Ze));const e=In(n),t=n._freezeSettings(),r=new jy;return qy(e,r,new PA(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function e0(n){if(n._initialized&&!n._terminated)throw new Re(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Hi.C())return Promise.resolve();const s=r+"main";yield Hi.delete(s)}),function(r){return t.apply(this,arguments)})(dy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wn||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function E(n,e,t,r={}){var s;const u=(n=l(n,v))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Mc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Ar.MOCK_USER;else{c=(0,tn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Re(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ar(_)}n._authCredentials=new ri(new lo(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function n0(n){return function KS(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield YD(n),t=yield WS(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s._u.delete(0),Uh(s)}(t)}))}(In(n=l(n,Ze)))}(this._delegate)}disableNetwork(){return function r0(n){return function kA(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield YD(n),t=yield WS(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(s){const u=qe(s);u._u.add(0),yield Vh(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(In(n=l(n,Ze)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function t0(n){return function(e){const t=new xr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Ly(n,e){return Gh.apply(this,arguments)}(yield QD(e),t)})),t.promise}(In(n=l(n,Ze)))}(this._delegate)}onSnapshotsInSync(e){return function XR(n,e){return function QS(n,e){const t=new $y(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield qh(n),s=t,qe(r).Ru.add(s),void s.next();var r,s})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield qh(n),s=t,void qe(r).Ru.delete(s);var r,s}))}}(In(n=l(n,Ze)),et(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ky(this,k(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new na(this,ee(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function q(n,e){if(n=l(n,v),JD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new S(n,null,(t=e,new Ka(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tN(n,e,t){n=l(n,Ze);const r=Object.assign(Object.assign({},HR),t);return function(s){if(s.maxAttempts<1)throw new Re(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function FA(n,e,t){const r=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const s=yield(u=n,Wp(u).then(c=>c.datastore));var u;new qD(n.asyncQueue,s,t,e,r).run()})),r.promise}(In(n),s=>e(new eN(n,s)),r)}(this._delegate,t=>e(new dx(this,t)))}batch(){return In(this._delegate),new hx(new rx(this._delegate,e=>Wy(this._delegate,e)))}loadBundle(e){return function IR(n,e){const t=In(n=l(n,Ze)),r=new yt;return function UA(n,e,t,r){const s=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return zD(_,I);if(_ instanceof ArrayBuffer)return zD(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new zS(_,c);var _}(t,Fh(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function NA(n,e,t){const r=qe(n);var s;(s=(0,ve.Z)(function*(u,c,f){try{const _=yield c.getMetadata();if(yield function(F,z){const Z=qe(F),ue=ir(z.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Ie=>Z.Ns.getBundleMetadata(Ie,z.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(ue)>=0)}(u.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(LD(_));const I=new OD(_,u.localStore,c.It);let C=yield c.wc();for(;C;){const F=yield I.Ou(C);F&&f._updateProgress(F),C=yield c.wc()}const x=yield I.complete();return yield _l(u,x.Bu,void 0),yield function(F,z){const Z=qe(F);return Z.persistence.runTransaction("Save bundle","readwrite",ue=>Z.Ns.saveBundleMetadata(ue,z))}(u.localStore,_),f._completeWith(x.progress),Promise.resolve(x.$u)}catch(_){return Mc("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var F}),function(u,c,f){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield QD(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function DR(n,e){return function VA(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield Gy(n),e)}))}(In(n=l(n,Ze)),e).then(t=>t?new S(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class ab extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new l0(new El(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return na.forKey(t,this.firestore,null)}}class dx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ab(e)}get(e){const t=tg(e);return this._delegate.get(t).then(r=>new c0(this._firestore,new Jc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=tg(e);return r?(aC("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=tg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=tg(e);return this._delegate.delete(t),this}}class hx{constructor(e){this._delegate=e}set(e,t,r){const s=tg(e);return r?(aC("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=tg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=tg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class eg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new d0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=eg.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new eg(e,new ab(e),t),s.set(t,u)),u}}eg.INSTANCES=new WeakMap;class na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ab(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new na(t,new D(t._delegate,r,new He(e)))}static forKey(e,t,r){return new na(t,new D(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ky(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ky(this.firestore,k(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tn.m9)(e))instanceof D&&we(this._delegate,e)}set(e,t){t=aC("DocumentReference.set",t);try{return t?ix(this._delegate,e,t):ix(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sx(this._delegate,e):sx(this._delegate,e,t,...r)}catch(s){throw ps(s,"updateDoc()","DocumentReference.update()")}}delete(){return function QR(n){return Wy(l(n.firestore,Ze),[new jc(n._key,Cn.none())])}(this._delegate)}onSnapshot(...e){const t=fx(e),r=px(e,s=>new c0(this.firestore,new Jc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return ox(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function qR(n){n=l(n,D);const e=l(n.firestore,Ze),t=In(e),r=new Xp(e);return function OA(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(s,u,c){try{const f=yield function(_,I){const C=qe(_);return C.persistence.runTransaction("read document","readonly",x=>C.localDocuments.getDocument(x,I))}(s,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Re(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=si(f,`Failed to get document '${u} from cache`);c.reject(_)}}),function(s,u,c){return r.apply(this,arguments)})(yield Gy(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Jc(e,r,n._key,s,new Jp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function WR(n){n=l(n,D);const e=l(n.firestore,Ze);return ZS(In(e),n._key,{source:"server"}).then(t=>oC(e,n,t))}(this._delegate):function zR(n){n=l(n,D);const e=l(n.firestore,Ze);return ZS(In(e),n._key).then(t=>oC(e,n,t))}(this._delegate),t.then(r=>new c0(this.firestore,new Jc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new na(this.firestore,this._delegate.withConverter(e?eg.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function fx(n){for(const e of n)if("object"==typeof e&&!uC(e))return e;return{}}function px(n,e){var t,r;let s;return s=uC(n[0])?n[0]:uC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class c0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return KA(this._delegate,e._delegate)}}class d0 extends c0{data(e){const t=this._delegate.data(e);return function op(n,e){n||Qe()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ab(e)}where(e,t,r){try{return new gs(this.firestore,Kh(this._delegate,function kR(n,e,t){const r=e,s=sb("where",n);return new PR(s,r,t)}(e,t,r)))}catch(s){throw ps(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,Kh(this._delegate,function LR(n,e="asc"){const t=e,r=sb("orderBy",n);return new OR(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,Kh(this._delegate,function FR(n){return d("limit",n),new YA("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,Kh(this._delegate,function UR(n){return d("limitToLast",n),new YA("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,Kh(this._delegate,function VR(...n){return new QA("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,Kh(this._delegate,function BR(...n){return new QA("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,Kh(this._delegate,function jR(...n){return new JA("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,Kh(this._delegate,function $R(...n){return new JA("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return Le(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ZR(n){n=l(n,S);const e=l(n.firestore,Ze),t=In(e),r=new Xp(e);return function LA(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(s,u,c){try{const f=yield py(s,u,!0),_=new Lw(u,f.Hi),I=_.ju(f.documents),C=_.applyChanges(I,!1);c.resolve(C.snapshot)}catch(f){const _=si(f,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(s,u,c){return r.apply(this,arguments)})(yield Gy(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Wh(e,r,n,s))}(this._delegate):"server"===e?.source?function YR(n){n=l(n,S);const e=l(n.firestore,Ze),t=In(e),r=new Xp(e);return YS(t,n._query,{source:"server"}).then(s=>new Wh(e,r,n,s))}(this._delegate):function KR(n){n=l(n,S);const e=l(n.firestore,Ze),t=In(e),r=new Xp(e);return ZA(n._query),YS(t,n._query).then(s=>new Wh(e,r,n,s))}(this._delegate),t.then(r=>new lC(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fx(e),r=px(e,s=>new lC(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return ox(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?eg.getInstance(this.firestore,e):null))}}class hN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new d0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new d0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new hN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new d0(this._firestore,r))})}isEqual(e){return KA(this._delegate,e._delegate)}}class Ky extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new na(this.firestore,e):null}doc(e){try{return new na(this.firestore,void 0===e?ee(this._delegate):ee(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function JR(n,e){const t=l(n.firestore,Ze),r=ee(n),s=ob(n.converter,e);return Wy(t,[nb(Yp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new na(this.firestore,t))}isEqual(e){return we(this._delegate,e._delegate)}withConverter(e){return new Ky(this.firestore,this._delegate.withConverter(e?eg.getInstance(this.firestore,e):null))}}function tg(n){return l(n,D)}class cC{constructor(...e){this._delegate=new Qc(...e)}static documentId(){return new cC(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,tn.m9)(e))instanceof Qc&&this._delegate._internalPath.isEqual(e._internalPath)}}class ng{constructor(e){this._delegate=e}static serverTimestamp(){const e=function rN(){return new eC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ng(e)}static delete(){const e=function nN(){return new s0("deleteField")}();return e._methodName="FieldValue.delete",new ng(e)}static arrayUnion(...e){const t=function iN(...n){return new CR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ng(t)}static arrayRemove(...e){const t=function sN(...n){return new AR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ng(t)}static increment(e){const t=function oN(n){return new xR("increment",n)}(e);return t._methodName="FieldValue.increment",new ng(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fN={Firestore:cx,GeoPoint:eb,Timestamp:dn,Blob:l0,Transaction:dx,WriteBatch:hx,DocumentReference:na,DocumentSnapshot:c0,Query:gs,QueryDocumentSnapshot:d0,QuerySnapshot:lC,CollectionReference:Ky,FieldPath:cC,FieldValue:ng,setLogLevel:function dN(n){!function RT(n){el.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function gN(n){(function pN(n,e){n.INTERNAL.registerComponent(new zg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},fN)))})(n,(e,t)=>new cx(e,t,new cN)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(rT.Z);var Xc=O(7579),mN=O(6451),ub=O(5363);function oi(n,e){return(0,Ei.e)((t,r)=>{let s=null,u=0,c=!1;const f=()=>c&&!s&&r.complete();t.subscribe((0,Bi.x)(r,_=>{s?.unsubscribe();let I=0;const C=u++;(0,yr.Xf)(n(_,C)).subscribe(s=(0,Bi.x)(r,x=>r.next(e?e(_,x,C,I++):x),()=>{s=null,f()}))},()=>{c=!0,f()}))})}var yN=O(6063);class vN extends Xc.x{constructor(e=1/0,t=1/0,r=yN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}var _N=O(3099);function gx(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,_N.B)({connector:()=>new vN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}const lb=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function cb(n){return(0,Ei.e)((e,t)=>{let r=!1;e.subscribe((0,Bi.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function mx(n=EN){return(0,Ei.e)((e,t)=>{let r=!1;e.subscribe((0,Bi.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function EN(){return new lb}function ed(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xr((s,u)=>n(s,u,r)):Ec.y,kf(1),t?cb(e):mx(()=>new lb))}function yx(n,e){return(0,zo.m)(e)?oi(()=>n,e):oi(()=>n)}var dC=O(9468);O(5867);const _x=new Map,SN={activated:!1,tokenObservers:[]},CN={initialized:!1,enabled:!1};function ai(n){return _x.get(n)||SN}function eu(n,e){_x.set(n,e)}function hb(){return CN}class NN{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new tn.BH,yield function PN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new tn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new tn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ex(n){if(!ai(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function gC(n,e){return mC.apply(this,arguments)}function mC(){return mC=(0,ve.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const z=yield c.getHeartbeatsHeader();z&&(u["X-Firebase-Client"]=z)}const f={method:"POST",body:JSON.stringify(e),headers:u};let _,I;try{_=yield fetch(n,f)}catch(z){throw ms.create("fetch-network-error",{originalErrorMessage:null===(r=z)||void 0===r?void 0:r.message})}if(200!==_.status)throw ms.create("fetch-status-error",{httpStatus:_.status});try{I=yield _.json()}catch(z){throw ms.create("fetch-parse-error",{originalErrorMessage:null===(s=z)||void 0===s?void 0:s.message})}const C=I.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const x=1e3*Number(C[1]),F=Date.now();return{token:I.token,expireTimeMillis:F+x,issuedAtTimeMillis:F}}),mC.apply(this,arguments)}function FN(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const h0="firebase-app-check-store";let gb=null;function Dx(){return gb||(gb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(ms.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(h0,{keyPath:"compositeKey"})}}catch(r){e(ms.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),gb)}function yC(){return yC=(0,ve.Z)(function*(n,e){const r=(yield Dx()).transaction(h0,"readwrite"),u=r.objectStore(h0).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var I;f(ms.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),yC.apply(this,arguments)}const f0=new Yu.Yd("@firebase/app-check");function Cx(n,e){return(0,tn.hl)()?function jN(n,e){return function bx(n,e){return yC.apply(this,arguments)}(function Sx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{f0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ax(){return hb().enabled}function xx(){return EC.apply(this,arguments)}function EC(){return EC=(0,ve.Z)(function*(){const n=hb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),EC.apply(this,arguments)}const WN={error:"UNKNOWN_ERROR"};function KN(n){return tn.US.encodeString(JSON.stringify(n),!1)}function mb(n){return IC.apply(this,arguments)}function IC(){return IC=(0,ve.Z)(function*(n,e=!1){const t=n.app;Ex(t);const r=ai(t);let u,s=r.token;if(!s){const _=yield r.cachedTokenPromise;_&&yb(_)&&(s=_)}if(!e&&s&&yb(s))return{token:s.token};let f,c=!1;if(Ax()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gC(FN(t,yield xx()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),c=!0);const _=yield r.exchangeTokenPromise;return yield Cx(t,_),eu(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),s=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?f0.warn(_.message):f0.error(_),u=_}return s?(f={token:s.token},eu(t,Object.assign(Object.assign({},r),{token:s})),yield Cx(t,s)):f=YN(u),c&&Rx(t,f),f}),IC.apply(this,arguments)}function bC(n,e){const t=ai(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),eu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Mx(n){const{app:e}=n,t=ai(e);let r=t.tokenRefresher;r||(r=function ZN(n){const{app:e}=n;return new NN((0,ve.Z)(function*(){let r;if(r=ai(e).token?yield mb(n,!0):yield mb(n),r.error)throw r.error}),()=>!0,()=>{const t=ai(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),eu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Rx(n,e){const t=ai(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function yb(n){return n.expireTimeMillis-Date.now()>0}function YN(n){return{token:KN(WN),error:n}}class QN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ai(this.app);for(const t of e)bC(this.app,t.next);return Promise.resolve()}}const Vx="app-check-internal";!function dP(){(0,Ic._registerComponent)(new zg.wA("app-check",n=>function JN(n,e){return new QN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Vx).initialize()})),(0,Ic._registerComponent)(new zg.wA(Vx,n=>function XN(n){return{getToken:e=>mb(n,e),addTokenListener:e=>function DC(n,e,t,r){const{app:s}=n,u=ai(s),c={next:t,error:r,type:e};if(eu(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&yb(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),Mx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Mx(n))}(n,"INTERNAL",e),removeTokenListener:e=>bC(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ic.registerVersion)("@firebase/app-check","0.5.12")}();class AC{constructor(){return(0,vr.vb)("app-check")}}typeof window<"u"&&window;var mP=O(127);const jx=new m.OlP("angularfire2.auth.use-emulator"),$x=new m.OlP("angularfire2.auth.settings"),Hx=new m.OlP("angularfire2.auth.tenant-id"),Gx=new m.OlP("angularfire2.auth.langugage-code"),zx=new m.OlP("angularfire2.auth.use-device-language"),qx=new m.OlP("angularfire.auth.persistence"),Wx=(n,e,t,r,s,u,c,f)=>(0,ds.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),c)for(const[I,C]of Object.entries(c))_.settings[I]=C;return f&&_.setPersistence(f),_},[t,r,s,u,c,f]);let Kx=(()=>{class n{constructor(t,r,s,u,c,f,_,I,C,x,F,z){const Z=new Xc.x,ue=at(void 0).pipe((0,ub.Q)(c.outsideAngular),oi(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,2476)))),(0,Mt.U)(()=>(0,ds.on)(t,u,r)),(0,Mt.U)(Ie=>Wx(Ie,u,f,I,C,x,_,F)),gx({bufferSize:1,refCount:!1}));if(ar(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ue.pipe(ed()).subscribe();const We=ue.pipe(oi(it=>it.getRedirectResult().then(St=>St,()=>null)),vr.iC,gx({bufferSize:1,refCount:!1})),tt=ue.pipe(oi(it=>new cs.y(St=>({unsubscribe:u.runOutsideAngular(()=>it.onAuthStateChanged(At=>St.next(At),At=>St.error(At),()=>St.complete()))})))),gt=ue.pipe(oi(it=>new cs.y(St=>({unsubscribe:u.runOutsideAngular(()=>it.onIdTokenChanged(At=>St.next(At),At=>St.error(At),()=>St.complete()))}))));this.authState=We.pipe(yx(tt),(0,dC.R)(c.outsideAngular),(0,ub.Q)(c.insideAngular)),this.user=We.pipe(yx(gt),(0,dC.R)(c.outsideAngular),(0,ub.Q)(c.insideAngular)),this.idToken=this.user.pipe(oi(it=>it?(0,Vn.D)(it.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(oi(it=>it?(0,Vn.D)(it.getIdTokenResult()):at(null))),this.credential=(0,mN.T)(We,Z,this.authState.pipe(Xr(it=>!it))).pipe((0,Mt.U)(it=>it?.user?it:null),(0,dC.R)(c.outsideAngular),(0,ub.Q)(c.insideAngular))}return(0,ds.pX)(this,ue,u,{spy:{apply:(Ie,We,tt)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&tt.then(gt=>Z.next(gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ds.Dh),m.LFG(ds.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(vr.HU),m.LFG(jx,8),m.LFG($x,8),m.LFG(Hx,8),m.LFG(Gx,8),m.LFG(zx,8),m.LFG(qx,8),m.LFG(AC,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Zx(n,e){return function vP(n,e=K0.z){return new cs.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function MC(n,e){return Zx(n,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function _b(n,e){return MC(n,e).pipe(Zu(void 0),Nv(),(0,Mt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=s.find(C=>C.doc.ref.isEqual(c.ref)),I=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function Yx(n,e,t){return _b(n,t).pipe(wc((r,s)=>function wP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function EP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return RC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return RC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return RC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function Y0(n,e=Ec.y){return n=n??cA,(0,Ei.e)((t,r)=>{let s,u=!0;t.subscribe((0,Bi.x)(r,c=>{const f=e(c);(u||!n(s,f))&&(u=!1,s=f,r.next(c))}))})}(),(0,Mt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function RC(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Qx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Jx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_b(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Zu(void 0),Nv(),Xr(([r,s])=>s.length>0||!r),(0,Mt.U)(([r,s])=>s),vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(wc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qx(e);return Yx(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return MC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vr.iC)}get(e){return(0,Vn.D)(this.query.get(e)).pipe(vr.iC)}add(e){return this.ref.add(e)}doc(e){return new Xx(this.ref.doc(e),this.afs)}}class Xx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=nM(r,t);return new Jx(s,u,this.afs)}snapshotChanges(){return function _P(n,e){return Zx(n,e).pipe(Zu(void 0),Nv(),(0,Mt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Vn.D)(this.ref.get(e)).pipe(vr.iC)}}class IP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_b(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xr(t=>t.length>0),vr.iC):_b(this.query,this.afs.schedulers.outsideAngular).pipe(vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(wc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qx(e);return Yx(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return MC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),vr.iC)}get(e){return(0,Vn.D)(this.query.get(e)).pipe(vr.iC)}}const eM=new m.OlP("angularfire2.enableFirestorePersistence"),tM=new m.OlP("angularfire2.firestore.persistenceSettings"),DP=new m.OlP("angularfire2.firestore.settings"),bP=new m.OlP("angularfire2.firestore.use-emulator");function nM(n,e=(t=>t)){return{query:e(n),ref:n}}let rM=(()=>{class n{constructor(t,r,s,u,c,f,_,I,C,x,F,z,Z,ue,Ie,We,tt){this.schedulers=_;const gt=(0,ds.on)(t,f,r),it=C;x&&Wx(gt,f,F,Z,ue,Ie,z,We),[this.firestore,this.persistenceEnabled$]=(0,ds.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const St=f.runOutsideAngular(()=>gt.firestore());if(u&&St.settings(u),it&&St.useEmulator(...it),s&&!ar(c)){const At=()=>{try{return(0,Vn.D)(St.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Xt){return typeof console<"u"&&console.warn(Xt),at(!1)}};return[St,f.runOutsideAngular(At)]}return[St,at(!1)]},[u,it,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=nM(s,r),f=this.schedulers.ngZone.run(()=>u);return new Jx(f,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new IP(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new Xx(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ds.Dh),m.LFG(ds.xv,8),m.LFG(eM,8),m.LFG(DP,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(vr.HU),m.LFG(tM,8),m.LFG(bP,8),m.LFG(Kx,8),m.LFG(jx,8),m.LFG($x,8),m.LFG(Hx,8),m.LFG(Gx,8),m.LFG(zx,8),m.LFG(qx,8),m.LFG(AC,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TP=(()=>{class n{constructor(){mP.Z.registerVersion("angularfire",vr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eM,useValue:!0},{provide:tM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[rM]}),n})(),iM=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="certifications"}getAlbum(){return this.firestore.collection(this.collectionName).valueChanges().pipe(kf(1))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(rM))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class tu extends Xc.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:SP}=Array,{getPrototypeOf:CP,prototype:AP,keys:xP}=Object;var PP=O(9672);function sM(...n){const e=(0,ji.yG)(n),t=(0,ji.jO)(n),{args:r,keys:s}=function MP(n){if(1===n.length){const e=n[0];if(SP(e))return{args:e,keys:null};if(function RP(n){return n&&"object"==typeof n&&CP(n)===AP}(e)){const t=xP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Vn.D)([],e);const u=new cs.y(function kP(n,e,t=Ec.y){return r=>{oM(e,()=>{const{length:s}=n,u=new Array(s);let c=s,f=s;for(let _=0;_<s;_++)oM(e,()=>{const I=(0,Vn.D)(n[_],e);let C=!1;I.subscribe((0,Bi.x)(r,x=>{u[_]=x,C||(C=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>function NP(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,c):Ec.y));return t?u.pipe(z0(t)):u}function oM(n,e,t){n?(0,PP.f)(t,n,e):e()}function aM(n){return new cs.y(e=>{(0,yr.Xf)(n()).subscribe(e)})}var OP=O(9635);function p0(n,e){const t=(0,zo.m)(n)?n:()=>n,r=s=>s.error(t());return new cs.y(e?s=>e.schedule(r,0,s):r)}var uM=O(727);function NC(){return(0,Ei.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Bi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class lM extends cs.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ei.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new uM.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Bi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=uM.w0.EMPTY)}return e}refCount(){return NC()(this)}}function rg(n,e){return(0,zo.m)(e)?(0,Br.z)(n,e,1):(0,Br.z)(n,1)}var Zi=O(8505);function Yh(n){return(0,Ei.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Bi.x)(t,void 0,void 0,c=>{u=(0,yr.Xf)(n(c,Yh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function PC(n){return n<=0?()=>_c.E:(0,Ei.e)((e,t)=>{let r=[];e.subscribe((0,Bi.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function cM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xr((s,u)=>n(s,u,r)):Ec.y,PC(1),t?cb(e):mx(()=>new lb))}function kC(n){return(0,Ei.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const $t="primary",g0=Symbol("RouteTitle");class UP{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zy(n){return new UP(n)}function VP(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))s[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Il(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!dM(n[s],e[s]))return!1;return!0}function dM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function hM(n){return Array.prototype.concat.apply([],n)}function fM(n){return n.length>0?n[n.length-1]:null}function Ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Qh(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Vn.D)(Promise.resolve(n)):at(n)}const $P={exact:function mM(n,e,t){if(!sg(n.segments,e.segments)||!wb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!mM(n.children[r],e.children[r],t))return!1;return!0},subset:yM},pM={exact:function HP(n,e){return Il(n,e)},subset:function GP(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dM(n[t],e[t]))},ignored:()=>!0};function gM(n,e,t){return $P[t.paths](n.root,e.root,t.matrixParams)&&pM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function yM(n,e,t){return vM(n,e,e.segments,t)}function vM(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!sg(s,t)||e.hasChildren()||!wb(s,t,r))}if(n.segments.length===t.length){if(!sg(n.segments,t)||!wb(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!yM(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(sg(n.segments,s)&&wb(n.segments,s,r)&&n.children[$t])&&vM(n.children[$t],e,u,r)}}function wb(n,e,t){return e.every((r,s)=>pM[t](n[s].parameters,r.parameters))}class ig{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zy(this.queryParams)),this._queryParamMap}toString(){return WP.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ci(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Eb(this)}}class m0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zy(this.parameters)),this._parameterMap}toString(){return IM(this)}}function sg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let _M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new LC},providedIn:"root"}),n})();class LC{parse(e){const t=new nk(e);return new ig(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${y0(e.root,!0)}`,r=function YP(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Ib(t)}=${Ib(s)}`).join("&"):`${Ib(t)}=${Ib(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),s="string"==typeof e.fragment?`#${function KP(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${s}`}}const WP=new LC;function Eb(n){return n.segments.map(e=>IM(e)).join("/")}function y0(n,e){if(!n.hasChildren())return Eb(n);if(e){const t=n.children[$t]?y0(n.children[$t],!1):"",r=[];return Ci(n.children,(s,u)=>{u!==$t&&r.push(`${u}:${y0(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function qP(n,e){let t=[];return Ci(n.children,(r,s)=>{s===$t&&(t=t.concat(e(r,s)))}),Ci(n.children,(r,s)=>{s!==$t&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===$t?[y0(n.children[$t],!1)]:[`${s}:${y0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${Eb(n)}/${t[0]}`:`${Eb(n)}/(${t.join("//")})`}}function wM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ib(n){return wM(n).replace(/%3B/gi,";")}function FC(n){return wM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Db(n){return decodeURIComponent(n)}function EM(n){return Db(n.replace(/\+/g,"%20"))}function IM(n){return`${FC(n.path)}${function ZP(n){return Object.keys(n).map(e=>`;${FC(e)}=${FC(n[e])}`).join("")}(n.parameters)}`}const QP=/^[^\/()?;=#]+/;function bb(n){const e=n.match(QP);return e?e[0]:""}const JP=/^[^=?&#]+/,ek=/^[^&#]+/;class nk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new Gt(e,t)),r}parseSegment(){const e=bb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new m0(Db(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=bb(this.remaining);s&&(r=s,this.capture(r))}e[Db(t)]=Db(r)}parseQueryParam(e){const t=function XP(n){const e=n.match(JP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function tk(n){const e=n.match(ek);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=EM(t),u=EM(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bb(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new m.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=$t);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[$t]:new Gt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function UC(n){return n.segments.length>0?new Gt([],{[$t]:n}):n}function Tb(n){const e={};for(const r of Object.keys(n.children)){const u=Tb(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function rk(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function og(n){return n instanceof ig}function ok(n,e,t,r,s){if(0===t.length)return Yy(e.root,e.root,e.root,r,s);const u=function TM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new bM(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Ci(u.outlets,(_,I)=>{f[I]="string"==typeof _?_.split("/"):_}),[...s,{outlets:f}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&s.push(f))}),s):[...s,u]},[]);return new bM(t,e,r)}(t);return u.toRoot()?Yy(e.root,e.root,new Gt([],{}),r,s):function c(_){const I=function uk(n,e,t,r){if(n.isAbsolute)return new Qy(e.root,!0,0);if(-1===r)return new Qy(t,t===e.root,0);return function SM(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new m.vHH(4005,!1);s=r.segments.length}return new Qy(r,!1,s-u)}(t,r+(v0(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),C=I.processChildren?w0(I.segmentGroup,I.index,u.commands):BC(I.segmentGroup,I.index,u.commands);return Yy(e.root,I.segmentGroup,C,r,s)}(n.snapshot?._lastPathIndex)}function v0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _0(n){return"object"==typeof n&&null!=n&&n.outlets}function Yy(n,e,t,r,s){let c,u={};r&&Ci(r,(_,I)=>{u[I]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),c=n===e?t:DM(n,e,t);const f=UC(Tb(c));return new ig(f,u,s)}function DM(n,e,t){const r={};return Ci(n.children,(s,u)=>{r[u]=s===e?t:DM(s,e,t)}),new Gt(n.segments,r)}class bM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&v0(r[0]))throw new m.vHH(4003,!1);const s=r.find(_0);if(s&&s!==fM(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function BC(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return w0(n,e,t);const r=function ck(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],f=t[r];if(_0(f))break;const _=`${f}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!AM(_,I,c))return u;r+=2}else{if(!AM(_,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Gt(n.segments.slice(0,r.pathIndex),{});return u.children[$t]=new Gt(n.segments.slice(r.pathIndex),n.children),w0(u,0,s)}return r.match&&0===s.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?jC(n,e,t):r.match?w0(n,0,s):jC(n,e,t)}function w0(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function lk(n){return _0(n[0])?n[0].outlets:{[$t]:n}}(t),s={};return Ci(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=BC(n.children[c],e,u))}),Ci(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new Gt(n.segments,s)}}function jC(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(_0(u)){const _=dk(u.outlets);return new Gt(r,_)}if(0===s&&v0(t[0])){r.push(new m0(n.segments[e].path,CM(t[0]))),s++;continue}const c=_0(u)?u.outlets[$t]:`${u}`,f=s<t.length-1?t[s+1]:null;c&&f&&v0(f)?(r.push(new m0(c,CM(f))),s+=2):(r.push(new m0(c,{})),s++)}return new Gt(r,{})}function dk(n){const e={};return Ci(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jC(new Gt([],{}),0,t))}),e}function CM(n){const e={};return Ci(n,(t,r)=>e[r]=`${t}`),e}function AM(n,e,t){return n==t.path&&Il(e,t.parameters)}class td{constructor(e,t){this.id=e,this.url=t}}class $C extends td{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ag extends td{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sb extends td{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xM extends td{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hk extends td{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fk extends td{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pk extends td{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gk extends td{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mk extends td{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yk{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vk{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _k{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wk{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ek{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ik{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class RM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=HC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=HC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=GC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return GC(e,this._root).map(t=>t.value)}}function HC(n,e){if(n===e.value)return e;for(const t of e.children){const r=HC(n,t);if(r)return r}return null}function GC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=GC(n,t);if(r.length)return r.unshift(e),r}return[]}class nd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Jy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NM extends RM{constructor(e,t){super(e),this.snapshot=t,zC(this,e)}toString(){return this.snapshot.toString()}}function PM(n,e){const t=function bk(n,e){const c=new Cb([],{},{},"",{},$t,e,null,n.root,-1,{});return new OM("",new nd(c,[]))}(n,e),r=new tu([new m0("",{})]),s=new tu({}),u=new tu({}),c=new tu({}),f=new tu(""),_=new Jh(r,s,c,f,u,$t,e,t.root);return _.snapshot=t.root,new NM(new nd(_,[]),t)}class Jh{constructor(e,t,r,s,u,c,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,Mt.U)(I=>I[g0]))??at(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>Zy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>Zy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Tk(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Cb{constructor(e,t,r,s,u,c,f,_,I,C,x,F){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.[g0],this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=C,this._correctedLastPathIndex=F??C,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class OM extends RM{constructor(e,t){super(t),this.url=e,zC(this,t)}toString(){return LM(this._root)}}function zC(n,e){e.value._routerState=n,e.children.forEach(t=>zC(n,t))}function LM(n){const e=n.children.length>0?` { ${n.children.map(LM).join(", ")} } `:"";return`${n.value}${e}`}function qC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Il(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Il(e.params,t.params)||n.params.next(t.params),function BP(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Il(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Il(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function WC(n,e){const t=Il(n.params,e.params)&&function zP(n,e){return sg(n,e)&&n.every((t,r)=>Il(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||WC(n.parent,e.parent))}function E0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Ck(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return E0(n,r,s);return E0(n,r)})}(n,e,t);return new nd(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>E0(n,f)),c}}const r=function Ak(n){return new Jh(new tu(n.url),new tu(n.params),new tu(n.queryParams),new tu(n.fragment),new tu(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>E0(n,u));return new nd(r,s)}}const KC="ngNavigationCancelingError";function FM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=og(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=UM(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function UM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[KC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function VM(n){return BM(n)&&og(n.url)}function BM(n){return n&&n[KC]}class xk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new I0,this.attachRef=null}}let I0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ab=!1;let jM=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=s||$t,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Ab);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Ab);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Ab);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,Ab);this._activatedRoute=t;const s=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new Mk(t,f,s.injector);if(r&&function Rk(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(c);this.activated=s.createComponent(I,s.length,_)}else this.activated=s.createComponent(c,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(I0),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Mk{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Jh?this.route:e===I0?this.childContexts:this.parent.get(e,t)}}let ZC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[jM],encapsulation:2}),n})();function $M(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function QC(n){const e=n.children&&n.children.map(QC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=ZC),t}function ra(n){return n.outlet||$t}function HM(n,e){const t=n.filter(r=>ra(r)===e);return t.push(...n.filter(r=>ra(r)!==e)),t}function D0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Lk{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Jy(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),Ci(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Jy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Jy(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Jy(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Ik(u.value.snapshot))}),e.children.length&&this.forwardEvent(new wk(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(qC(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const f=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),qC(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=D0(s.snapshot),_=f?.get(m._Vd)??null;c.attachRef=null,c.route=s,c.resolver=_,c.injector=f,c.outlet&&c.outlet.activateWith(s,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class GM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xb{constructor(e,t){this.component=e,this.route=t}}function Fk(n,e,t){const r=n._root;return b0(r,e?e._root:null,t,[r.value])}function Xy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function b0(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Jy(e);return n.children.forEach(c=>{(function Vk(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function Bk(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!sg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!sg(n.url,e.url)||!Il(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!WC(n,e)||!Il(n.queryParams,e.queryParams);default:return!WC(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new GM(r)):(u.data=c.data,u._resolvedData=c._resolvedData),b0(n,e,u.component?f?f.children:null:t,r,s),_&&f&&f.outlet&&f.outlet.isActivated&&s.canDeactivateChecks.push(new xb(f.outlet.component,c))}else c&&T0(e,f,s),s.canActivateChecks.push(new GM(r)),b0(n,null,u.component?f?f.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),Ci(u,(c,f)=>T0(c,t.getContext(f),s)),s}function T0(n,e,t){const r=Jy(n),s=n.value;Ci(r,(u,c)=>{T0(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new xb(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function S0(n){return"function"==typeof n}function JC(n){return n instanceof lb||"EmptyError"===n?.name}const Mb=Symbol("INITIAL_VALUE");function ev(){return oi(n=>sM(n.map(e=>e.pipe(kf(1),Zu(Mb)))).pipe((0,Mt.U)(e=>{for(const t of e)if(!0!==t){if(t===Mb)return Mb;if(!1===t||t instanceof ig)return t}return!0}),Xr(e=>e!==Mb),kf(1)))}function zM(n){return(0,OP.z)((0,Zi.b)(e=>{if(og(e))throw FM(0,e)}),(0,Mt.U)(e=>!0===e))}const XC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qM(n,e,t,r,s){const u=eA(n,e,t);return u.matched?function rO(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?at(s.map(c=>{const f=Xy(c,n);return Qh(function qk(n){return n&&S0(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(ev(),zM()):at(!0)}(r=$M(e,r),e,t).pipe((0,Mt.U)(c=>!0===c?u:{...XC})):at(u)}function eA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...XC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||VP)(t,n,e);if(!s)return{...XC};const u={};Ci(s.posParams,(f,_)=>{u[_]=f.path});const c=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:c,positionalParamSegments:s.posParams??{}}}function Rb(n,e,t,r,s="corrected"){if(t.length>0&&function oO(n,e,t){return t.some(r=>Nb(n,e,r)&&ra(r)!==$t)}(n,t,r)){const c=new Gt(e,function sO(n,e,t,r){const s={};s[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ra(u)!==$t){const c=new Gt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[ra(u)]=c}return s}(n,e,r,new Gt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function aO(n,e,t){return t.some(r=>Nb(n,e,r))}(n,t,r)){const c=new Gt(n.segments,function iO(n,e,t,r,s,u){const c={};for(const f of r)if(Nb(n,t,f)&&!s[ra(f)]){const _=new Gt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[ra(f)]=_}return{...s,...c}}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Gt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Nb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function WM(n,e,t,r){return!!(ra(n)===r||r!==$t&&Nb(e,t,n))&&("**"===n.path||eA(e,n,t).matched)}function KM(n,e,t){return 0===e.length&&!n.children[t]}const Pb=!1;class kb{constructor(e){this.segmentGroup=e||null}}class ZM{constructor(e){this.urlTree=e}}function C0(n){return p0(new kb(n))}function YM(n){return p0(new ZM(n))}class dO{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=Rb(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,$t).pipe((0,Mt.U)(u=>this.createUrlTree(Tb(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yh(u=>{if(u instanceof ZM)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof kb?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,$t).pipe((0,Mt.U)(s=>this.createUrlTree(Tb(s),e.queryParams,e.fragment))).pipe(Yh(s=>{throw s instanceof kb?this.noMatchError(s):s}))}noMatchError(e){return new m.vHH(4002,Pb)}createUrlTree(e,t,r){const s=UC(e);return new ig(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Mt.U)(u=>new Gt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Vn.D)(s).pipe(rg(u=>{const c=r.children[u],f=HM(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Mt.U)(_=>({segment:_,outlet:u})))}),wc((u,c)=>(u[c.outlet]=c.segment,u),{}),cM())}expandSegment(e,t,r,s,u,c){return(0,Vn.D)(r).pipe(rg(f=>this.expandSegmentAgainstRoute(e,t,r,f,s,u,c).pipe(Yh(I=>{if(I instanceof kb)return at(null);throw I}))),ed(f=>!!f),Yh((f,_)=>{if(JC(f))return KM(t,s,u)?at(new Gt([],{})):C0(t);throw f}))}expandSegmentAgainstRoute(e,t,r,s,u,c,f){return WM(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):C0(t):C0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?YM(u):this.lineralizeSegments(r,u).pipe((0,Br.z)(c=>{const f=new Gt(c,{});return this.expandSegment(e,f,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:f,consumedSegments:_,remainingSegments:I,positionalParamSegments:C}=eA(t,s,u);if(!f)return C0(t);const x=this.applyRedirectCommands(_,s.redirectTo,C);return s.redirectTo.startsWith("/")?YM(x):this.lineralizeSegments(s,x).pipe((0,Br.z)(F=>this.expandSegment(e,t,r,F.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=$M(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Mt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Gt(s,{})))):at(new Gt(s,{}))):qM(t,r,s,e).pipe(oi(({matched:c,consumedSegments:f,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Br.z)(C=>{const x=C.injector??e,F=C.routes,{segmentGroup:z,slicedSegments:Z}=Rb(t,f,_,F),ue=new Gt(z.segments,z.children);if(0===Z.length&&ue.hasChildren())return this.expandChildren(x,F,ue).pipe((0,Mt.U)(gt=>new Gt(f,gt)));if(0===F.length&&0===Z.length)return at(new Gt(f,{}));const Ie=ra(r)===u;return this.expandSegment(x,ue,F,Z,Ie?$t:u,!0).pipe((0,Mt.U)(tt=>new Gt(f.concat(tt.segments),tt.children)))})):C0(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function nO(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?at(!0):at(s.map(c=>{const f=Xy(c,n);return Qh(function $k(n){return n&&S0(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(ev(),zM())}(e,t,r).pipe((0,Br.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Zi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function lO(n){return p0(UM(Pb,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return at(r);if(s.numberOfChildren>1||!s.children[$t])return p0(new m.vHH(4e3,Pb));s=s.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ig(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ci(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const f=s.substring(1);r[u]=t[f]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return Ci(t.children,(f,_)=>{c[_]=this.createSegmentGroup(e,f,r,s)}),new Gt(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new m.vHH(4001,Pb);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class fO{}class mO{constructor(e,t,r,s,u,c,f,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=_}recognize(){const e=Rb(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,$t).pipe((0,Mt.U)(t=>{if(null===t)return null;const r=new Cb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new nd(r,t),u=new OM(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=kM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Vn.D)(Object.keys(r.children)).pipe(rg(s=>{const u=r.children[s],c=HM(t,s);return this.processSegmentGroup(e,c,u,s)}),wc((s,u)=>s&&u?(s.push(...u),s):null),function LP(n,e=!1){return(0,Ei.e)((t,r)=>{let s=0;t.subscribe((0,Bi.x)(r,u=>{const c=n(u,s++);(c||e)&&r.next(u),!c&&r.complete()}))})}(s=>null!==s),cb(null),cM(),(0,Mt.U)(s=>{if(null===s)return null;const u=QM(s);return function yO(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Vn.D)(t).pipe(rg(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,s,u)),ed(c=>!!c),Yh(c=>{if(JC(c))return KM(r,s,u)?at([]):at(null);throw c}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!WM(t,r,s,u))return at(null);let c;if("**"===t.path){const f=s.length>0?fM(s).parameters:{},_=XM(r)+s.length;c=at({snapshot:new Cb(s,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tR(t),ra(t),t.component??t._loadedComponent??null,t,JM(r),_,nR(t),_),consumedSegments:[],remainingSegments:[]})}else c=qM(r,t,s,e).pipe((0,Mt.U)(({matched:f,consumedSegments:_,remainingSegments:I,parameters:C})=>{if(!f)return null;const x=XM(r)+_.length;return{snapshot:new Cb(_,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tR(t),ra(t),t.component??t._loadedComponent??null,t,JM(r),x,nR(t),x),consumedSegments:_,remainingSegments:I}}));return c.pipe(oi(f=>{if(null===f)return at(null);const{snapshot:_,consumedSegments:I,remainingSegments:C}=f;e=t._injector??e;const x=t._loadedInjector??e,F=function vO(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:Z}=Rb(r,I,C,F.filter(Ie=>void 0===Ie.redirectTo),this.relativeLinkResolution);if(0===Z.length&&z.hasChildren())return this.processChildren(x,F,z).pipe((0,Mt.U)(Ie=>null===Ie?null:[new nd(_,Ie)]));if(0===F.length&&0===Z.length)return at([new nd(_,[])]);const ue=ra(t)===u;return this.processSegment(x,F,z,Z,ue?$t:u).pipe((0,Mt.U)(Ie=>null===Ie?null:[new nd(_,Ie)]))}))}}function _O(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QM(n){const e=[],t=new Set;for(const r of n){if(!_O(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=QM(r.children);e.push(new nd(r.value,s))}return e.filter(r=>!t.has(r))}function JM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function XM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tR(n){return n.data||{}}function nR(n){return n.resolve||{}}function rR(n){return"string"==typeof n.title||null===n.title}function tA(n){return oi(e=>{const t=n(e);return t?(0,Vn.D)(t).pipe((0,Mt.U)(()=>e)):at(e)})}let iR=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===$t);return r}getResolvedTitleForRoute(t){return t.data[g0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(sR)},providedIn:"root"}),n})(),sR=(()=>{class n extends iR{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(os))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class CO{}class xO extends class AO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Lb=new m.OlP("",{providedIn:"root",factory:()=>({})}),nA=new m.OlP("ROUTES");let rA=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Qh(t.loadComponent()).pipe((0,Zi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),kC(()=>{this.componentLoaders.delete(t)})),s=new lM(r,()=>new Xc.x).pipe(NC());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Mt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,I,C=!1;Array.isArray(f)?I=f:(_=f.create(t).injector,I=hM(_.get(nA,[],m.XFs.Self|m.XFs.Optional)));return{routes:I.map(QC),injector:_}}),kC(()=>{this.childrenLoaders.delete(r)})),c=new lM(u,()=>new Xc.x).pipe(NC());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Qh(t()).pipe((0,Br.z)(r=>r instanceof m.YKP||Array.isArray(r)?at(r):(0,Vn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class RO{}class NO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function PO(n){throw n}function kO(n,e,t){return e.parse("/")}const OO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function aR(){const n=(0,m.f3M)(_M),e=(0,m.f3M)(I0),t=(0,m.f3M)(Ae),r=(0,m.f3M)(m.zs3),s=(0,m.f3M)(m.Sil),u=(0,m.f3M)(nA,{optional:!0})??[],c=(0,m.f3M)(Lb,{optional:!0})??{},f=(0,m.f3M)(sR),_=(0,m.f3M)(iR,{optional:!0}),I=(0,m.f3M)(RO,{optional:!0}),C=(0,m.f3M)(CO,{optional:!0}),x=new Ai(null,n,e,t,r,s,hM(u));return I&&(x.urlHandlingStrategy=I),C&&(x.routeReuseStrategy=C),x.titleStrategy=_??f,function FO(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,x),x}let Ai=(()=>{class n{constructor(t,r,s,u,c,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xc.x,this.errorHandler=PO,this.malformedUriErrorHandler=kO,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new NO,this.routeReuseStrategy=new xO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(rA),this.configLoader.onLoadEndListener=F=>this.triggerEvent(new vk(F)),this.configLoader.onLoadStartListener=F=>this.triggerEvent(new yk(F)),this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const x=c.get(m.R0b);this.isNgZoneEnabled=x instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function jP(){return new ig(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=PM(this.currentUrlTree,this.rootComponentType),this.transitions=new tu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Xr(s=>0!==s.id),(0,Mt.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),oi(s=>{let u=!1,c=!1;return at(s).pipe((0,Zi.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),oi(f=>{const _=this.browserUrlTree.toString(),I=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return uR(f.source)&&(this.browserUrlTree=f.extractedUrl),at(f).pipe(oi(x=>{const F=this.transitions.getValue();return r.next(new $C(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),F!==this.transitions.getValue()?_c.E:Promise.resolve(x)}),function hO(n,e,t,r){return oi(s=>function cO(n,e,t,r,s){return new dO(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Mt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zi.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},s.urlAfterRedirects=x.urlAfterRedirects}),function EO(n,e,t,r,s,u){return(0,Br.z)(c=>function gO(n,e,t,r,s,u,c="emptyOnly",f="legacy"){return new mO(n,e,t,r,s,c,f,u).recognize().pipe(oi(_=>null===_?function pO(n){return new cs.y(e=>e.error(n))}(new fO):at(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,s,u).pipe((0,Mt.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zi.b)(x=>{if(s.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(z,x)}this.browserUrlTree=x.urlAfterRedirects}const F=new hk(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(F)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:z,source:Z,restoredState:ue,extras:Ie}=f,We=new $C(F,this.serializeUrl(z),Z,ue);r.next(We);const tt=PM(z,this.rootComponentType).snapshot;return at(s={...f,targetSnapshot:tt,urlAfterRedirects:z,extras:{...Ie,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),_c.E}),(0,Zi.b)(f=>{const _=new fk(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,Mt.U)(f=>s={...f,guards:Fk(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function Kk(n,e){return(0,Br.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?at({...t,guardsResult:!0}):function Zk(n,e,t,r){return(0,Vn.D)(n).pipe((0,Br.z)(s=>function tO(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(f=>{const _=D0(e)??s,I=Xy(f,_);return Qh(function zk(n){return n&&S0(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(ed())})).pipe(ev()):at(!0)}(s.component,s.route,t,e,r)),ed(s=>!0!==s,!0))}(c,r,s,n).pipe((0,Br.z)(f=>f&&function jk(n){return"boolean"==typeof n}(f)?function Yk(n,e,t,r){return(0,Vn.D)(e).pipe(rg(s=>Rv(function Jk(n,e){return null!==n&&e&&e(new _k(n)),at(!0)}(s.route.parent,r),function Qk(n,e){return null!==n&&e&&e(new Ek(n)),at(!0)}(s.route,r),function eO(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function Uk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>aM(()=>at(c.guards.map(_=>{const I=D0(c.node)??t,C=Xy(_,I);return Qh(function Gk(n){return n&&S0(n.canActivateChild)}(C)?C.canActivateChild(r,n):I.runInContext(()=>C(r,n))).pipe(ed())})).pipe(ev())));return at(u).pipe(ev())}(n,s.path,t),function Xk(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const s=r.map(u=>aM(()=>{const c=D0(e)??t,f=Xy(u,c);return Qh(function Hk(n){return n&&S0(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(ed())}));return at(s).pipe(ev())}(n,s.route,t))),ed(s=>!0!==s,!0))}(r,u,n,e):at(f)),(0,Mt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Zi.b)(f=>{if(s.guardsResult=f.guardsResult,og(f.guardsResult))throw FM(0,f.guardsResult);const _=new pk(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Xr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),tA(f=>{if(f.guards.canActivateChecks.length)return at(f).pipe((0,Zi.b)(_=>{const I=new gk(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),oi(_=>{let I=!1;return at(_).pipe(function IO(n,e){return(0,Br.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return at(t);let u=0;return(0,Vn.D)(s).pipe(rg(c=>function DO(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!rR(s)&&(u[g0]=s.title),function bO(n,e,t,r){const s=function TO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return at({});const u={};return(0,Vn.D)(s).pipe((0,Br.z)(c=>function SO(n,e,t,r){const s=D0(e)??r,u=Xy(n,s);return Qh(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(ed(),(0,Zi.b)(f=>{u[c]=f}))),PC(1),function FP(n){return(0,Mt.U)(()=>n)}(u),Yh(c=>JC(c)?_c.E:p0(c)))}(u,n,e,r).pipe((0,Mt.U)(c=>(n._resolvedData=c,n.data=kM(n,t).resolve,s&&rR(s)&&(n.data[g0]=s.title),null)))}(c.route,r,n,e)),(0,Zi.b)(()=>u++),PC(1),(0,Br.z)(c=>u===s.length?at(t):_c.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zi.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Zi.b)(_=>{const I=new mk(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}))}),tA(f=>{const _=I=>{const C=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Zi.b)(x=>{I.component=x}),(0,Mt.U)(()=>{})));for(const x of I.children)C.push(..._(x));return C};return sM(_(f.targetSnapshot.root)).pipe(cb(),kf(1))}),tA(()=>this.afterPreactivation()),(0,Mt.U)(f=>{const _=function Sk(n,e,t){const r=E0(n,e._root,t?t._root:void 0);return new NM(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return s={...f,targetRouterState:_}}),(0,Zi.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Mt.U)(r=>(new Lk(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Zi.b)({next(){u=!0},complete(){u=!0}}),kC(()=>{u||c||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Yh(f=>{if(c=!0,BM(f)){VM(f)||(this.navigated=!0,this.restoreHistory(s,!0));const _=new Sb(s.id,this.serializeUrl(s.extractedUrl),f.message,f.cancellationCode);if(r.next(_),VM(f)){const I=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),C={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uR(s.source)};this.scheduleNavigation(I,"imperative",null,C,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const _=new xM(s.id,this.serializeUrl(s.extractedUrl),f,s.targetSnapshot??void 0);r.next(_);try{s.resolve(this.errorHandler(f))}catch(I){s.reject(I)}}return _c.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const f={...u};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(QC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:_}=r,I=s||this.routerState.root,C=_?this.currentUrlTree.fragment:c;let x=null;switch(f){case"merge":x={...this.currentUrlTree.queryParams,...u};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),ok(I,this.currentUrlTree,t,x,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=og(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function UO(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...OO}:!1===r?{...LO}:r,og(t))return gM(this.currentUrlTree,t,s);const u=this.parseUrl(t);return gM(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ag(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){if(this.disposed)return Promise.resolve(!1);let f,_,I;c?(f=c.resolve,_=c.reject,I=c.promise):I=new Promise((F,z)=>{f=F,_=z});const C=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),x=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:C,targetPageId:x,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:f,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(F=>Promise.reject(F))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new Sb(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return aR()},providedIn:"root"}),n})();function uR(n){return"imperative"!==n}class lR{}let jO=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Xr(t=>t instanceof ag),rg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,f=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,Vn.D)(s).pipe((0,Of.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const u=s.pipe((0,Br.z)(c=>null===c?at(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Vn.D)([u,c]).pipe((0,Of.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ai),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(lR),m.LFG(rA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oA=new m.OlP("");let cR=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $C?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ag&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof MM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new MM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function tv(n,e){return{\u0275kind:n,\u0275providers:e}}function aA(n){return[{provide:nA,multi:!0,useValue:n}]}function hR(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Ai),s=n.get(fR);1===n.get(uA)&&r.initialNavigation(),n.get(pR,null,m.XFs.Optional)?.setUpPreloading(),n.get(oA,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const fR=new m.OlP("",{factory:()=>new Xc.x}),uA=new m.OlP("",{providedIn:"root",factory:()=>1});const pR=new m.OlP("");function zO(n){return tv(0,[{provide:pR,useExisting:jO},{provide:lR,useExisting:n}])}const gR=new m.OlP("ROUTER_FORROOT_GUARD"),qO=[Ae,{provide:_M,useClass:LC},{provide:Ai,useFactory:aR},I0,{provide:Jh,useFactory:function dR(n){return n.routerState.root},deps:[Ai]},rA];function WO(){return new m.PXZ("Router",Ai)}let KO=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[qO,[],aA(t),{provide:gR,useFactory:JO,deps:[[Ai,new m.FiY,new m.tp0]]},{provide:Lb,useValue:r||{}},r?.useHash?{provide:ye,useClass:nt}:{provide:ye,useClass:Je},{provide:oA,useFactory:()=>{const n=(0,m.f3M)(Ai),e=(0,m.f3M)(ou),t=(0,m.f3M)(Lb);return t.scrollOffset&&e.setOffset(t.scrollOffset),new cR(n,e,t)}},r?.preloadingStrategy?zO(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:WO},r?.initialNavigation?XO(r):[],[{provide:mR,useFactory:hR},{provide:m.tb,multi:!0,useExisting:mR}]]}}static forChild(t){return{ngModule:n,providers:[aA(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(gR,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[ZC]}),n})();function JO(n){return"guarded"}function XO(n){return["disabled"===n.initialNavigation?tv(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Ai);return()=>{e.setUpLocationChangeListener()}}},{provide:uA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?tv(2,[{provide:uA,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(Ai),f=e.get(fR);(function s(u){e.get(Ai).events.pipe(Xr(f=>f instanceof ag||f instanceof Sb||f instanceof xM),(0,Mt.U)(f=>f instanceof ag||f instanceof Sb&&(0===f.code||1===f.code)&&null),Xr(f=>null!==f),kf(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||f.closed?at(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const mR=new m.OlP("");function t1(n,e){if(1&n&&(m.TgZ(0,"option",17),m._uU(1),m.ALo(2,"uppercase"),m.qZA()),2&n){const t=e.$implicit,r=m.oxw(2);m.Q6J("value",t),m.xp6(1),m.AsE(" ",m.lcZ(2,3,t)," (",r.certifications[t].length,") ")}}function n1(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",23)(1,"img",24),m.NdJ("click",function(){m.CHM(t);const s=m.oxw().$implicit,u=m.oxw(3);return m.KtG(u.openPreview(s))}),m.qZA()()}if(2&n){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("src",t.image,m.LSH)}}function r1(n,e){if(1&n&&(m.ynx(0),m.YNc(1,n1,2,1,"div",22),m.BQk()),2&n){const t=e.$implicit,r=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",t.date.startsWith(r))}}function i1(n,e){if(1&n&&(m.TgZ(0,"div",11)(1,"h2",18),m._uU(2),m.qZA(),m._UZ(3,"hr",19),m.TgZ(4,"div",20),m.YNc(5,r1,2,1,"ng-container",21),m.qZA()()),2&n){const t=e.$implicit,r=m.oxw(2);m.xp6(2),m.AsE(" ",t," (",r.filteredCertificationsByYear[t].length,") "),m.xp6(3),m.Q6J("ngForOf",r.filteredCertificationsByYear[t])}}function s1(n,e){if(1&n){const t=m.EpF();m.ynx(0),m.TgZ(1,"div",11)(2,"select",12,13),m.NdJ("change",function(){m.CHM(t);const s=m.MAs(3),u=m.oxw();return m.KtG(u.filterCertifications(s.value))}),m.TgZ(4,"option",14),m._uU(5),m.qZA(),m.YNc(6,t1,3,5,"option",15),m.qZA()(),m.YNc(7,i1,6,3,"div",16),m.BQk()}if(2&n){const t=m.oxw();m.xp6(2),m.Q6J("value",t.filter),m.xp6(3),m.hij("ALL (",t.certifications.all.length,")"),m.xp6(1),m.Q6J("ngForOf",t.categories),m.xp6(1),m.Q6J("ngForOf",t.years)}}function o1(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",25)(1,"button",26),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.fetchCertifications())}),m._uU(2," Reload certifications "),m.qZA()()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("disabled",t.loading)}}function a1(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",27),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.closePreview())}),m.TgZ(1,"img",28),m.NdJ("click",function(s){return s.stopPropagation()}),m.qZA(),m._UZ(2,"button",29),m.qZA()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("src",t.certification.image,m.LSH)}}function u1(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",30),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.scrollToTop())}),m._UZ(1,"img",31),m.qZA()}2&n&&m.Q6J("@inOutAnimation",void 0)}function l1(n,e){1&n&&(m.TgZ(0,"div",32)(1,"div",33)(2,"span",34),m._uU(3,"Loading..."),m.qZA()()())}let c1=(()=>{class n{constructor(t,r,s){this.galleryService=t,this.route=r,this.location=s,this.loading=!1,this.filteredCertifications=[],this.filteredCertificationsByYear={},this.filter="",this.preview=!1,this.showScrollToTop=!1,this.categories=["career","edteam","platzi","udemy"],this.certifications={all:[],career:[],edteam:[],platzi:[],udemy:[]},this.years=[]}ngOnInit(){this.fetchCertifications(),Mv(document,"scroll").subscribe(()=>this.showScrollToTop=window.pageYOffset/window.screen.height>.5)}filterCertifications(t){this.filteredCertifications=t&&this.categories.includes(t)?this.certifications[t]:[...this.certifications.all],this.years=[...new Set(this.filteredCertifications.map(r=>r.date.slice(0,4)))],this.years.forEach(r=>this.filteredCertificationsByYear[r]=this.filteredCertifications.filter(s=>s.date.startsWith(r)))}openPreview(t){document.body.style.overflowY="hidden",this.preview=!0,this.certification=t}closePreview(){document.body.style.overflowY="",this.preview=!1}scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}fetchCertifications(){this.loading=!0,this.galleryService.getAlbum().subscribe({next:t=>{this.certifications.all=t.sort((r,s)=>s.date.localeCompare(r.date)),this.categories.forEach(r=>this.certifications[r]=this.certifications.all.filter(s=>s.category===r)),this.filter=this.route.snapshot.queryParamMap.get("filter")||"",this.location.replaceState(""),this.filterCertifications(this.filter),this.loading=!1},error:()=>this.loading=!1})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(iM),m.Y36(Jh),m.Y36(Ae))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:16,vars:5,consts:[[1,"navbar","navbar-dark","bg-primary","mb-4","shadow-sm"],[1,"container"],[1,"navbar-brand","mx-auto"],[1,"min-vh-100"],[4,"ngIf","ngIfElse"],["reloadCertifications",""],[1,"bg-white","text-center","py-3","shadow-sm"],["href","https://jpin730.github.io/","target","_blank"],["class","d-flex vh-100 vw-100 position-fixed top-0 start-0 bg-dark bg-opacity-75 px-md-5",3,"click",4,"ngIf"],["title","Go to top","class","scroll-to-top bg-primary clickable position-fixed bottom-0 end-0 p-3 m-3 m-lg-5 rounded",3,"click",4,"ngIf"],["class","position-fixed top-0 start-0 d-flex bg-dark bg-opacity-75 min-vh-100 min-vw-100",4,"ngIf"],[1,"container","mb-4"],[1,"form-select","clickable","shadow-sm",3,"value","change"],["categorySelect",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","container mb-4",4,"ngFor","ngForOf"],[3,"value"],[1,"d-inline-block","position-sticky","top-0","my-0"],[1,"m-0","mt-1","pb-2"],[1,"row","row-cols-1","row-cols-md-2","row-cols-xl-3"],[4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["loading","lazy","title","Click to preview image",1,"clickable","w-100","shadow-sm",3,"src","click"],[1,"container","text-center"],["type","button",1,"btn","btn-primary","btn-lg","m-5",3,"disabled","click"],[1,"d-flex","vh-100","vw-100","position-fixed","top-0","start-0","bg-dark","bg-opacity-75","px-md-5",3,"click"],[1,"preview-img","m-auto",3,"src","click"],["type","button",1,"btn-close","btn-close-white","position-fixed","top-0","end-0","m-3"],["title","Go to top",1,"scroll-to-top","bg-primary","clickable","position-fixed","bottom-0","end-0","p-3","m-3","m-lg-5","rounded",3,"click"],["loading","eager","src","assets/top-arrow.svg","width","24","height","24"],[1,"position-fixed","top-0","start-0","d-flex","bg-dark","bg-opacity-75","min-vh-100","min-vw-100"],[1,"spinner-grow","text-light","m-auto",2,"width","10rem","height","10rem"],[1,"visually-hidden"]],template:function(t,r){if(1&t&&(m.TgZ(0,"nav",0)(1,"div",1)(2,"h1",2),m._uU(3,"Jaime's Certifications Gallery"),m.qZA()()(),m.TgZ(4,"div",3),m.YNc(5,s1,8,4,"ng-container",4),m.YNc(6,o1,3,1,"ng-template",null,5,m.W1O),m.qZA(),m.TgZ(8,"footer",6)(9,"a",7),m._uU(10,"Jaime Pineda"),m.qZA(),m.TgZ(11,"span"),m._uU(12,"\xa0\xa9\xa02022"),m.qZA()(),m.YNc(13,a1,3,1,"div",8),m.YNc(14,u1,2,1,"div",9),m.YNc(15,l1,4,0,"div",10)),2&t){const s=m.MAs(7);m.xp6(5),m.Q6J("ngIf",0!==r.certifications.all.length)("ngIfElse",s),m.xp6(8),m.Q6J("ngIf",r.preview),m.xp6(1),m.Q6J("ngIf",r.showScrollToTop&&!r.preview),m.xp6(1),m.Q6J("ngIf",r.loading)}},dependencies:[js,Jn,Nl],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.preview-img[_ngcontent-%COMP%]{max-height:100vh;max-width:100%}.scroll-to-top[_ngcontent-%COMP%]{opacity:.5;transition:opacity .3s}.scroll-to-top[_ngcontent-%COMP%]:hover{opacity:.75}"],data:{animation:[Ou("inOutAnimation",[ff(":enter",[mi({opacity:0}),Sr("300ms ease-out",mi({opacity:.5}))]),ff(":leave",[mi({opacity:.5}),Sr("300ms ease-in",mi({opacity:0}))])])]}}),n})();const yR_firebase={projectId:"portfolio-jpin730",appId:"1:733714402019:web:a1301af4562abe9ecc53d6",storageBucket:"portfolio-jpin730.appspot.com",apiKey:"AIzaSyCUOML6rLU4b0uImZsqoGSpcIdponc0qA8",authDomain:"portfolio-jpin730.firebaseapp.com",messagingSenderId:"733714402019"};let d1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[c1]}),n.\u0275inj=m.cJS({providers:[iM],imports:[xu,wi,KO.forRoot([]),ds.hO.initializeApp(yR_firebase),TP]}),n})();(0,m.G48)(),Au().bootstrapModule(d1).catch(n=>console.error(n))},5867:(ot,Ce,O)=>{O.d(Ce,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=O(9681);(0,m.registerVersion)("firebase","9.10.0","app")},127:(ot,Ce,O)=>{O.d(Ce,{Z:()=>m.Z});var m=O(3942);m.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(ot,Ce,O)=>{O.r(Ce);var m=O(5861),te=O(3942),P=O(2090),oe=O(9681),re=O(655),fe=O(1877),le=O(4859);const Ee=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new fe.Yd("@firebase/auth");function nt(y,...h){Je.logLevel<=fe.in.ERROR&&Je.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw Be(y,...h)}function _e(y,...h){return Be(y,...h)}function De(y,h,g){const w=Object.assign(Object.assign({},Xe()),{[h]:g});return new P.LL("auth","Firebase",w).create(h,{appName:y.name})}function Ve(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Ae(y,"argument-error"),De(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return ye.create(y,...h)}function V(y,h,...g){if(!y)throw Be(h,...g)}function me(y){const h="INTERNAL ASSERTION FAILED: "+y;throw nt(h),new Error(h)}function Y(y,h){y||me(h)}const X=new Map;function ie(y){Y(y instanceof Function,"Expected a class definition");let h=X.get(y);return h?(Y(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,X.set(y,h),h)}function Ne(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class nn{constructor(h,g){this.shortDelay=h,this.longDelay=g,Y(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function An(y,h){Y(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Kt{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Er=new nn(3e4,6e4);function Lt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function en(y,h,g,w){return sa.apply(this,arguments)}function sa(){return(sa=(0,m.Z)(function*(y,h,g,w,A={}){return Nr(y,A,(0,m.Z)(function*(){let N={},G={};w&&("GET"===h?G=w:N={body:JSON.stringify(w)});const ce=(0,P.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Oe=yield y._getAdditionalHeaders();return Oe["Content-Type"]="application/json",y.languageCode&&(Oe["X-Firebase-Locale"]=y.languageCode),Kt.fetch()(xi(y,y.config.apiHost,g,ce),Object.assign({method:h,headers:Oe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Nr(y,h,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,m.Z)(function*(y,h,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Zt),h);try{const A=new kr(y),N=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw li(y,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const ce=N.ok?G.errorMessage:G.error.message,[Oe,Ye]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw li(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Oe)throw li(y,"email-already-in-use",G);if("USER_DISABLED"===Oe)throw li(y,"user-disabled",G);const wt=w[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw De(y,wt,Ye);Ae(y,wt)}}catch(A){if(A instanceof P.ZR)throw A;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Pr(y,h,g,w){return vs.apply(this,arguments)}function vs(){return(vs=(0,m.Z)(function*(y,h,g,w,A={}){const N=yield en(y,h,g,w,A);return"mfaPendingCredential"in N&&Ae(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function xi(y,h,g,w){const A=`${h}${g}?${w}`;return y.config.emulator?An(y.config,A):`${y.config.apiScheme}://${A}`}class kr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),Er.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function li(y,h,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=_e(y,h,w);return A.customData._tokenResponse=g,A}function Ke(){return(Ke=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Or(y,h){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xn(y,h){return ci.apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function zr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function hn(){return(hn=(0,m.Z)(function*(y,h=!1){const g=(0,P.m9)(y),w=yield g.getIdToken(h),A=st(w);V(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,G=N?.sign_in_provider;return{claims:A,token:w,authTime:zr(ht(A.auth_time)),issuedAtTime:zr(ht(A.iat)),expirationTime:zr(ht(A.exp)),signInProvider:G||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(y){return 1e3*Number(y)}function st(y){var h;const[g,w,A]=y.split(".");if(void 0===g||void 0===w||void 0===A)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,P.tV)(w);return N?JSON.parse(N):(nt("Failed to decode base64 JWT payload"),null)}catch(N){return nt("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function Yn(y,h){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,m.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof P.ZR&&Ir(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Ir({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Dt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,m.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class Ji{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(y){return di.apply(this,arguments)}function di(){return(di=(0,m.Z)(function*(y){var h;const g=y.auth,w=yield y.getIdToken(),A=yield Yn(y,xn(g,{idToken:w}));V(A?.users.length,g,"internal-error");const N=A.users[0];y._notifyReloadListener(N);const G=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?U(N.providerUserInfo):[],ce=$(y.providerData,G),wt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ce?.length),pt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ce,metadata:new Ji(N.createdAt,N.lastLoginAt),isAnonymous:wt};Object.assign(y,pt)})).apply(this,arguments)}function K(){return(K=(0,m.Z)(function*(y){const h=(0,P.m9)(y);yield Yt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function $(y,h){return[...y.filter(w=>!h.some(A=>A.providerId===w.providerId)),...h]}function U(y){return y.map(h=>{var{providerId:g}=h,w=(0,re._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function W(){return(W=(0,m.Z)(function*(y,h){const g=yield Nr(y,{},(0,m.Z)(function*(){const w=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:N}=y.config,G=xi(y,A,"/v1/token",`key=${N}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Kt.fetch()(G,{method:"POST",headers:ce,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class be{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function on(y){const h=st(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,m.Z)(function*(){return V(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:G}=yield function H(y,h){return W.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(A,N,Number(G))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:A,expirationTime:N}=g,G=new be;return w&&(V("string"==typeof w,"internal-error",{appName:h}),G.refreshToken=w),A&&(V("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),N&&(V("number"==typeof N,"internal-error",{appName:h}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new be,this.toJSON())}_performRefresh(){return me("not implemented")}}function Ue(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class rt{constructor(h){var{uid:g,auth:w,stsTokenManager:A}=h,N=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Ji(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,m.Z)(function*(){const w=yield Yn(g,g.stsTokenManager.getToken(g.auth,h));return V(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function Gn(y){return hn.apply(this,arguments)}(this,h)}reload(){return function zt(y){return K.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new rt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,m.Z)(function*(){let A=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield Yt(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,m.Z)(function*(){const g=yield h.getIdToken();return yield Yn(h,function wo(y,h){return Ke.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,A,N,G,ce,Oe,Ye,wt;const pt=null!==(w=g.displayName)&&void 0!==w?w:void 0,Pn=null!==(A=g.email)&&void 0!==A?A:void 0,Vi=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Wu=null!==(G=g.photoURL)&&void 0!==G?G:void 0,yc=null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,Mf=null!==(Oe=g._redirectEventId)&&void 0!==Oe?Oe:void 0,vc=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,Ug=null!==(wt=g.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:Rf,emailVerified:Vr,isAnonymous:Ku,providerData:Vg,stsTokenManager:Iv}=g;V(Rf&&Iv,h,"internal-error");const Dv=be.fromJSON(this.name,Iv);V("string"==typeof Rf,h,"internal-error"),Ue(pt,h.name),Ue(Pn,h.name),V("boolean"==typeof Vr,h,"internal-error"),V("boolean"==typeof Ku,h,"internal-error"),Ue(Vi,h.name),Ue(Wu,h.name),Ue(yc,h.name),Ue(Mf,h.name),Ue(vc,h.name),Ue(Ug,h.name);const Bg=new rt({uid:Rf,auth:h,email:Pn,emailVerified:Vr,displayName:pt,isAnonymous:Ku,photoURL:Wu,phoneNumber:Vi,tenantId:yc,stsTokenManager:Dv,createdAt:vc,lastLoginAt:Ug});return Vg&&Array.isArray(Vg)&&(Bg.providerData=Vg.map(jg=>Object.assign({},jg))),Mf&&(Bg._redirectEventId=Mf),Bg}static _fromIdTokenResponse(h,g,w=!1){return(0,m.Z)(function*(){const A=new be;A.updateFromServerResponse(g);const N=new rt({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:w});return yield Yt(N),N})()}}const Qt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,m.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,m.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,m.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function zn(y,h,g){return`firebase:${y}:${h}:${g}`}class Ut{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:A,name:N}=this.auth;this.fullUserKey=zn(this.userKey,A.apiKey,N),this.fullPersistenceKey=zn("persistence",A.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?rt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,m.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,m.Z)(function*(){if(!g.length)return new Ut(ie(Qt),h,w);const A=(yield Promise.all(g.map(function(){var Ye=(0,m.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let N=A[0]||ie(Qt);const G=zn(w,h.config.apiKey,h.name);let ce=null;for(const Ye of g)try{const wt=yield Ye._get(G);if(wt){const pt=rt._fromJSON(h,wt);Ye!==N&&(ce=pt),N=Ye;break}}catch{}const Oe=A.filter(Ye=>Ye._shouldAllowMigration);return N._shouldAllowMigration&&Oe.length?(N=Oe[0],ce&&(yield N._set(G,ce.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,m.Z)(function*(wt){if(wt!==N)try{yield wt._remove(G)}catch{}});return function(wt){return Ye.apply(this,arguments)}}())),new Ut(N,h,w)):new Ut(N,h,w)})()}}function kt(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Dr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(gn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if($e(h))return"Blackberry";if(vt(h))return"Webos";if(kn(h))return"Safari";if((h.includes("chrome/")||Mi(h))&&!h.includes("edge/"))return"Chrome";if(On(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function gn(y=(0,P.z$)()){return/firefox\//i.test(y)}function kn(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Mi(y=(0,P.z$)()){return/crios\//i.test(y)}function Dr(y=(0,P.z$)()){return/iemobile/i.test(y)}function On(y=(0,P.z$)()){return/android/i.test(y)}function $e(y=(0,P.z$)()){return/blackberry/i.test(y)}function vt(y=(0,P.z$)()){return/webos/i.test(y)}function Jt(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Us(y=(0,P.z$)()){return Jt(y)||On(y)||vt(y)||$e(y)||/windows phone/i.test(y)||Dr(y)}function _s(y,h=[]){let g;switch(y){case"Browser":g=kt((0,P.z$)());break;case"Worker":g=`${kt((0,P.z$)())}-${y}`;break;default:g=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${w}`}class Eo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const w=N=>new Promise((G,ce)=>{try{G(h(N))}catch(Oe){ce(Oe)}});w.onAbort=g,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,m.Z)(function*(){var w;if(g.auth.currentUser===h)return;const A=[];try{for(const N of g.queue)yield N(h),N.onAbort&&A.push(N.onAbort)}catch(N){A.reverse();for(const G of A)try{G()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Ot{constructor(h,g,w){this.app=h,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new Eo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A,N;if(!w._deleted&&(w.persistenceManager=yield Ut.create(w,h),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,m.Z)(function*(){var w;const A=yield g.assertedPersistence.getCurrentUser();let N=A,G=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ce=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Oe=N?._redirectEventId,Ye=yield g.tryRedirectSignIn(h);(!ce||ce===Oe)&&Ye?.user&&(N=Ye.user,G=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(N)}catch(ce){N=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ce))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return V(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,m.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,m.Z)(function*(){var w;try{yield Yt(h)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,m.Z)(function*(){const w=h?(0,P.m9)(h):null;return w&&V(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h,g=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return h&&V(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,m.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&ie(h)||g._popupRedirectResolver;V(w,g,"argument-error"),g.redirectPersistenceManager=yield Ut.create(g,[ie(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,m.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,m.Z)(function*(){if(h===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,A){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,w,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=_s(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var g;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function mn(y){return(0,P.m9)(y)}class Vs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ri(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function ws(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class or{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return me("not implemented")}_getIdTokenResponse(h){return me("not implemented")}_linkToIdToken(h,g){return me("not implemented")}_getReauthenticationResolver(h){return me("not implemented")}}function Fn(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:resetPassword",Lt(y,h))})).apply(this,arguments)}function rn(y,h){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sl(y,h){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:update",Lt(y,h))})).apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signInWithPassword",Lt(y,h))})).apply(this,arguments)}function Is(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:sendOobCode",Lt(y,h))})).apply(this,arguments)}function Jn(y,h){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function Xn(y,h){return br.apply(this,arguments)}function br(){return(br=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function ru(y,h){return aa.apply(this,arguments)}function aa(){return(aa=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function Al(y,h){return fr.apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(y,h){return Is(y,h)})).apply(this,arguments)}function sd(){return(sd=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signInWithEmailLink",Lt(y,h))})).apply(this,arguments)}function xl(){return(xl=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signInWithEmailLink",Lt(y,h))})).apply(this,arguments)}class Ml extends or{constructor(h,g,w,A=null){super("password",w),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new Ml(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new Ml(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function oa(y,h){return js.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function ef(y,h){return sd.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return rn(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function tf(y,h){return xl.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Wn(y,h){return od.apply(this,arguments)}function od(){return(od=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signInWithIdp",Lt(y,h))})).apply(this,arguments)}class Xi extends or{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Xi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Ae("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A}=g,N=(0,re._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const G=new Xi(w,A);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Wn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Wn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,P.xO)(g)}return h}}function dg(y,h){return ad.apply(this,arguments)}function ad(){return(ad=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:sendVerificationCode",Lt(y,h))})).apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,h))})).apply(this,arguments)}function Nl(){return(Nl=(0,m.Z)(function*(y,h){const g=yield Pr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,h));if(g.temporaryProof)throw li(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const fg={USER_NOT_FOUND:"user-not-found"};function ud(){return(ud=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),fg)})).apply(this,arguments)}class bs extends or{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new bs({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new bs({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Rl(y,h){return Ds.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function hg(y,h){return Nl.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function pg(y,h){return ud.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:N}=h;return w||g||A||N?new bs({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:N}):null}}class iu{constructor(h){var g,w,A,N,G,ce;const Oe=(0,P.zd)((0,P.pd)(h)),Ye=null!==(g=Oe.apiKey)&&void 0!==g?g:null,wt=null!==(w=Oe.oobCode)&&void 0!==w?w:null,pt=function ld(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Oe.mode)&&void 0!==A?A:null);V(Ye&&wt&&pt,"argument-error"),this.apiKey=Ye,this.operation=pt,this.code=wt,this.continueUrl=null!==(N=Oe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Oe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ce=Oe.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const g=function cd(y){const h=(0,P.zd)((0,P.pd)(y)).link,g=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,w=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(w?(0,P.zd)((0,P.pd)(w)).link:null)||w||g||h||y}(h);try{return new iu(g)}catch{return null}}}let Ni=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return Ml._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=iu.parseLink(w);return V(A,"argument-error"),Ml._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class es{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ts extends es{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class $s extends ts{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return V("providerId"in g&&"signInMethod"in g,"argument-error"),Xi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return $s.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return $s.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:N,nonce:G,providerId:ce}=h;if(!w&&!A&&!g&&!N||!ce)return null;try{return new $s(ce)._credential({idToken:g,accessToken:w,nonce:G,pendingToken:N})}catch{return null}}}let ua=(()=>{class y extends ts{constructor(){super("facebook.com")}static credential(g){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),su=(()=>{class y extends ts{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Pl=(()=>{class y extends ts{constructor(){super("github.com")}static credential(g){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class la extends or{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Wn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Wn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A,pendingToken:N}=g;return w&&A&&N&&w===A?new la(w,N):null}static _create(h,g){return new la(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wr extends es{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Wr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Wr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=la.fromJSON(h);return V(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return la._create(w,g)}catch{return null}}}let Lr=(()=>{class y extends ts{constructor(){super("twitter.com")}static credential(g,w){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Io(y,h){return dd.apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signUp",Lt(y,h))})).apply(this,arguments)}class ar{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,A=!1){return(0,m.Z)(function*(){const N=yield rt._fromIdTokenResponse(h,w,A),G=sf(w);return new ar({user:N,providerId:G,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const A=sf(w);return new ar({user:h,providerId:A,_tokenResponse:w,operationType:g})})()}}function sf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Dn(){return(Dn=(0,m.Z)(function*(y){var h;const g=mn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new ar({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Io(g,{returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class ou extends P.ZR{constructor(h,g,w,A){var N;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,ou.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,A){return new ou(h,g,w,A)}}function uf(y,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?ou._fromErrorAndOperation(y,N,h,w):N})}function Kr(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function au(){return(au=(0,m.Z)(function*(y,h){const g=(0,P.m9)(y);yield jt(!0,g,h);const{providerUserInfo:w}=yield Or(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=Kr(w||[]);return g.providerData=g.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Do(y,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,m.Z)(function*(y,h,g=!1){const w=yield Yn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return ar._forOperation(y,"link",w)})).apply(this,arguments)}function jt(y,h,g){return uu.apply(this,arguments)}function uu(){return(uu=(0,m.Z)(function*(y,h,g){yield Yt(h);const A=!1===y?"provider-already-linked":"no-such-provider";V(Kr(h.providerData).has(g)===y,h.auth,A)})).apply(this,arguments)}function Hs(y,h){return lu.apply(this,arguments)}function lu(){return(lu=(0,m.Z)(function*(y,h,g=!1){var w;const{auth:A}=y,N="reauthenticate";try{const G=yield Yn(y,uf(A,N,h,y),g);V(G.idToken,A,"internal-error");const ce=st(G.idToken);V(ce,A,"internal-error");const{sub:Oe}=ce;return V(y.uid===Oe,A,"user-mismatch"),ar._forOperation(y,N,G)}catch(G){throw"auth/user-not-found"===(null===(w=G)||void 0===w?void 0:w.code)&&Ae(A,"user-mismatch"),G}})).apply(this,arguments)}function pi(y,h){return cu.apply(this,arguments)}function cu(){return(cu=(0,m.Z)(function*(y,h,g=!1){const w="signIn",A=yield uf(y,w,h),N=yield ar._fromIdTokenResponse(y,w,A);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function yn(y,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,m.Z)(function*(y,h){return pi(mn(y),h)})).apply(this,arguments)}function du(y,h){return lf.apply(this,arguments)}function lf(){return(lf=(0,m.Z)(function*(y,h){const g=(0,P.m9)(y);return yield jt(!1,g,h.providerId),Do(g,h)})).apply(this,arguments)}function hu(y,h){return fu.apply(this,arguments)}function fu(){return(fu=(0,m.Z)(function*(y,h){return Hs((0,P.m9)(y),h)})).apply(this,arguments)}function kl(y,h){return is.apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(y,h){return Pr(y,"POST","/v1/accounts:signInWithCustomToken",Lt(y,h))})).apply(this,arguments)}function ca(){return(ca=(0,m.Z)(function*(y,h){const g=mn(y),w=yield kl(g,{token:h,returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Te{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Vt._fromServerResponse(h,g):Ae(h,"internal-error")}}class Vt extends Te{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Vt(g)}}function pu(y,h,g){var w;V((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),V(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(V(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(V(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function bn(){return(bn=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y),A={requestType:"PASSWORD_RESET",email:h};g&&pu(w,A,g),yield Xn(w,A)})).apply(this,arguments)}function bo(){return(bo=(0,m.Z)(function*(y,h,g){yield Fn((0,P.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function da(){return(da=(0,m.Z)(function*(y,h){yield Sl((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function ha(y,h){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,m.Z)(function*(y,h){const g=(0,P.m9)(y),w=yield Fn(g,{oobCode:h}),A=w.requestType;switch(V(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(w.mfaInfo,g,"internal-error");default:V(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=Te._fromServerResponse(mn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function hd(){return(hd=(0,m.Z)(function*(y,h){const{data:g}=yield ha((0,P.m9)(y),h);return g.email})).apply(this,arguments)}function Tn(){return(Tn=(0,m.Z)(function*(y,h,g){const w=mn(y),A=yield Io(w,{returnSecureToken:!0,email:h,password:g}),N=yield ar._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Gs(){return(Gs=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};V(g.handleCodeInApp,w,"argument-error"),g&&pu(w,A,g),yield ru(w,A)})).apply(this,arguments)}function pa(){return(pa=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y),A=Ni.credentialWithLink(h,g||Ne());return V(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),yn(w,A)})).apply(this,arguments)}function mg(y,h){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:createAuthUri",Lt(y,h))})).apply(this,arguments)}function ga(){return(ga=(0,m.Z)(function*(y,h){const w={identifier:h,continueUri:ct()?Ne():"http://localhost"},{signinMethods:A}=yield mg((0,P.m9)(y),w);return A||[]})).apply(this,arguments)}function ma(){return(ma=(0,m.Z)(function*(y,h){const g=(0,P.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&pu(g.auth,A,h);const{email:N}=yield Jn(g.auth,A);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function vu(){return(vu=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&pu(w.auth,N,g);const{email:G}=yield Al(w.auth,N);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function _u(y,h){return $l.apply(this,arguments)}function $l(){return($l=(0,m.Z)(function*(y,h){return en(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Gl(){return(Gl=(0,m.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,P.m9)(y),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},G=yield Yn(w,_u(w.auth,N));w.displayName=G.displayName||null,w.photoURL=G.photoUrl||null;const ce=w.providerData.find(({providerId:Oe})=>"password"===Oe);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(G)})).apply(this,arguments)}function qs(y,h,g){return wu.apply(this,arguments)}function wu(){return(wu=(0,m.Z)(function*(y,h,g){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const G=yield Yn(y,rn(w,N));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Fr{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class pn extends Fr{constructor(h,g,w,A){super(h,g,w),this.username=A}}class pd extends Fr{constructor(h,g){super(h,"facebook.com",g)}}class zl extends pn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class cf extends Fr{constructor(h,g){super(h,"google.com",g)}}class ql extends pn{constructor(h,g,w){super(h,"twitter.com",g,w)}}function Eu(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Kn(y){var h,g;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const G=null===(g=null===(h=st(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new Fr(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!w)return null;switch(w){case"facebook.com":return new pd(N,A);case"github.com":return new zl(N,A);case"google.com":return new cf(N,A);case"twitter.com":return new ql(N,A,y.screenName||null);case"custom":case"anonymous":return new Fr(N,null);default:return new Fr(N,w,A)}}(g)}class Ws{constructor(h,g,w){this.type=h,this.credential=g,this.auth=w}static _fromIdtoken(h,g){return new Ws("enroll",h,g)}static _fromMfaPendingCredential(h){return new Ws("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ws._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return Ws._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Iu{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=mn(h),A=g.customData._serverResponse,N=(A.mfaInfo||[]).map(ce=>Te._fromServerResponse(w,ce));V(A.mfaPendingCredential,w,"internal-error");const G=Ws._fromMfaPendingCredential(A.mfaPendingCredential);return new Iu(G,N,function(){var ce=(0,m.Z)(function*(Oe){const Ye=yield Oe._process(w,G);delete A.mfaInfo,delete A.mfaPendingCredential;const wt=Object.assign(Object.assign({},A),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const pt=yield ar._fromIdTokenResponse(w,g.operationType,wt);return yield w._updateCurrentUser(pt.user),pt;case"reauthenticate":return V(g.user,w,"internal-error"),ar._forOperation(g.user,g.operationType,wt);default:Ae(w,"internal-error")}});return function(Oe){return ce.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,m.Z)(function*(){return g.signInResolver(h)})()}}function Du(y,h){return en(y,"POST","/v2/accounts/mfaEnrollment:start",Lt(y,h))}class df{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Te._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new df(h)}getSession(){var h=this;return(0,m.Z)(function*(){return Ws._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var w=this;return(0,m.Z)(function*(){const A=h,N=yield w.getSession(),G=yield Yn(w.user,A._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(G),w.user.reload()})()}unenroll(h){var g=this;return(0,m.Z)(function*(){var w;const A="string"==typeof h?h:h.uid,N=yield g.user.getIdToken(),G=yield Yn(g.user,function vd(y,h){return en(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(y,h))}(g.user.auth,{idToken:N,mfaEnrollmentId:A}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ce})=>ce!==A),yield g.user._updateTokensIfNecessary(G);try{yield g.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(w=ce)||void 0===w?void 0:w.code))throw ce}})()}}const Ks=new WeakMap,Zs="__sak";class Tu{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const va=(()=>{class y extends Tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ya(){const y=(0,P.z$)();return kn(y)||Jt(y)}()&&function fn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Us(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),N=this.localCache[w];A!==N&&g(w,N,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ce,Oe,Ye)=>{this.notifyListeners(ce,Ye)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(g.newValue!==ce)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const N=()=>{const ce=this.storage.getItem(A);!w&&this.localCache[A]===ce||this.notifyListeners(A,ce)},G=this.storage.getItem(A);!function qn(){return(0,P.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,N=this;return(0,m.Z)(function*(){yield A().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,m.Z)(function*(){const N=yield w().call(A,g);return A.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,A=this;return(0,m.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),ki=(()=>{class y extends Tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let Ed=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,m.Z)(function*(){const A=g,{eventId:N,eventType:G,data:ce}=A.data,Oe=w.handlersMap[G];if(!Oe?.size)return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Ye=Array.from(Oe).map(function(){var pt=(0,m.Z)(function*(Pn){return Pn(A.origin,ce)});return function(Pn){return pt.apply(this,arguments)}}()),wt=yield function wa(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(Ye);A.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:wt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ea(y="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return y+g}class Kl{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var A=this;return(0,m.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,ce;return new Promise((Oe,Ye)=>{const wt=Ea("",20);N.port1.start();const pt=setTimeout(()=>{Ye(new Error("unsupported_event"))},w);ce={messageChannel:N,onMessage(Pn){const Vi=Pn;if(Vi.data.eventId===wt)switch(Vi.data.status){case"ack":clearTimeout(pt),G=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Oe(Vi.data.response);break;default:clearTimeout(pt),clearTimeout(G),Ye(new Error("invalid_response"))}}},A.handlers.add(ce),N.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:h,eventId:wt,data:g},[N.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function Rn(){return window}function Su(){return typeof Rn().WorkerGlobalScope<"u"&&"function"==typeof Rn().importScripts}function Ia(){return(Ia=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Cs="firebaseLocalStorageDb",As="firebaseLocalStorage",xu="fbase_key";class Qs{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Da(y,h){return y.transaction([As],h?"readwrite":"readonly").objectStore(As)}function xo(){const y=indexedDB.open(Cs,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(As,{keyPath:xu})}catch(A){g(A)}}),y.addEventListener("success",(0,m.Z)(function*(){const w=y.result;w.objectStoreNames.contains(As)?h(w):(w.close(),yield function Dd(){const y=indexedDB.deleteDatabase(Cs);return new Qs(y).toPromise()}(),h(yield xo()))}))})}function os(y,h,g){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,m.Z)(function*(y,h,g){const w=Da(y,!0).put({[xu]:h,value:g});return new Qs(w).toPromise()})).apply(this,arguments)}function ba(){return(ba=(0,m.Z)(function*(y,h){const g=Da(y,!1).get(h),w=yield new Qs(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Js(y,h){const g=Da(y,!0).delete(h);return new Qs(g).toPromise()}const Mo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield xo()),g.db})()}_withRetries(g){var w=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(A++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return Su()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Ed._getInstance(function Au(){return Su()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(A,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(A,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function Ys(){return Ia.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Kl(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Cu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield xo();return yield os(g,Zs,"1"),yield Js(g,Zs),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(N=>os(N,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,m.Z)(function*(){const A=yield w._withRetries(N=>function Mu(y,h){return ba.apply(this,arguments)}(N,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(A=>Js(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const w=yield g._withRetries(G=>{const ce=Da(G,!1).getAll();return new Qs(ce).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:G,value:ce}of w)N.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(ce)&&(g.notifyListeners(G,ce),A.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!N.has(G)&&(g.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ro(y,h){return en(y,"POST","/v2/accounts/mfaSignIn:start",Lt(y,h))}function Ms(){return(Ms=(0,m.Z)(function*(y){return(yield en(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Po(y){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=A=>{const N=_e("internal-error");N.customData=A,g(N)},w.type="text/javascript",w.charset="UTF-8",function No(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function Pu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ta=1e12;class cn{constructor(h){this.auth=h,this.counter=Ta,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new yg(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||Ta;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ta))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,m.Z)(function*(){var w;return null===(w=g._widgets.get(h||Ta))||void 0===w||w.execute(),""})()}}class yg{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;V(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nv(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vg=Pu("rcb"),rv=new nn(3e4,6e4);class hf{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Rn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return V(function x0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Rn().grecaptcha):new Promise((w,A)=>{const N=Rn().setTimeout(()=>{A(_e(h,"network-request-failed"))},rv.get());Rn()[vg]=()=>{Rn().clearTimeout(N),delete Rn()[vg];const ce=Rn().grecaptcha;if(!ce)return void A(_e(h,"internal-error"));const Oe=ce.render;ce.render=(Ye,wt)=>{const pt=Oe(Ye,wt);return this.counter++,pt},this.hostLanguage=g,w(ce)},Po(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:vg,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),A(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Rn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ql{load(h){return(0,m.Z)(function*(){return new cn(h)})()}clearedOneInstance(){}}const sv="recaptcha",ov={theme:"light",type:"image"};class tr{constructor(h,g=Object.assign({},ov),w){this.parameters=g,this.type=sv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(w),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;V(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ql:new hf,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const G=ce=>{!ce||(h.tokenChangeListeners.delete(G),N(ce))};h.tokenChangeListeners.add(G),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=Rn()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){V(ct()&&!Su(),h.auth,"internal-error"),yield function ku(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Ur(y){return Ms.apply(this,arguments)}(h.auth);V(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Oo{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=bs._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Ou(){return(Ou=(0,m.Z)(function*(y,h,g){const w=mn(y),A=yield eo(w,h,(0,P.m9)(g));return new Oo(A,N=>yn(w,N))})).apply(this,arguments)}function Oi(){return(Oi=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y);yield jt(!1,w,"phone");const A=yield eo(w.auth,h,(0,P.m9)(g));return new Oo(A,N=>du(w,N))})).apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y),A=yield eo(w.auth,h,(0,P.m9)(g));return new Oo(A,N=>hu(w,N))})).apply(this,arguments)}function eo(y,h,g){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,m.Z)(function*(y,h,g){var w;const A=yield g.verify();try{let N;if(V("string"==typeof A,y,"argument-error"),V(g.type===sv,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const G=N.session;if("phoneNumber"in N)return V("enroll"===G.type,y,"internal-error"),(yield Du(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const ce=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return V(ce,y,"missing-multi-factor-info"),(yield Ro(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield dg(y,{phoneNumber:N.phoneNumber,recaptchaToken:A});return G}}finally{g._reset()}})).apply(this,arguments)}function bd(){return(bd=(0,m.Z)(function*(y,h){yield Do((0,P.m9)(y),h)})).apply(this,arguments)}let ec=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=mn(g)}verifyPhoneNumber(g,w){return eo(this.auth,g,(0,P.m9)(w))}static credential(g,w){return bs._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?bs._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Sa(y,h){return h?ie(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class tc extends or{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Wn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Wn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Wn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Yr(y){return pi(y.auth,new tc(y),y.bypassAuthState)}function Lo(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Hs(g,new tc(y),y.bypassAuthState)}function Qr(y){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,m.Z)(function*(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Do(g,new tc(y),y.bypassAuthState)})).apply(this,arguments)}class to{constructor(h,g,w,A,N=!1){this.auth=h,this.resolver=w,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,m.Z)(function*(w,A){h.pendingPromise={resolve:w,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:N,tenantId:G,error:ce,type:Oe}=h;if(ce)return void g.reject(ce);const Ye={auth:g.auth,requestUri:w,sessionId:A,tenantId:G||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Oe)(Ye))}catch(wt){g.reject(wt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Yr;case"linkViaPopup":case"linkViaRedirect":return Qr;case"reauthViaPopup":case"reauthViaRedirect":return Lo;default:Ae(this.auth,"internal-error")}}resolve(h){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Td=new nn(2e3,1e4);function Aa(){return(Aa=(0,m.Z)(function*(y,h,g){const w=mn(y);Ve(y,h,es);const A=Sa(w,g);return new Fo(w,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Sd(){return(Sd=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y);Ve(w.auth,h,es);const A=Sa(w.auth,g);return new Fo(w.auth,"reauthViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y);Ve(w.auth,h,es);const A=Sa(w.auth,g);return new Fo(w.auth,"linkViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}let Fo=(()=>{class y extends to{constructor(g,w,A,N,G){super(g,w,N,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const w=yield g.execute();return V(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,m.Z)(function*(){Y(1===g.filter.length,"Popup operations only handle one event");const w=Ea();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Td.get())};g()}}return y.currentPopupAction=null,y})();const Li=new Map;class nc extends to{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,m.Z)(function*(){let w=Li.get(g.auth._key());if(!w){try{const N=(yield function Fu(y,h){return Rs.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(N)}catch(A){w=()=>Promise.reject(A)}Li.set(g.auth._key(),w)}return g.bypassAuthState||Li.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const A=yield w.auth._redirectUserForId(h.eventId);if(A)return w.user=A,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Rs(){return(Rs=(0,m.Z)(function*(y,h){const g=Cd(h),w=Ns(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function rc(y,h){return us.apply(this,arguments)}function us(){return(us=(0,m.Z)(function*(y,h){return Ns(y)._set(Cd(h),"true")})).apply(this,arguments)}function Uo(y,h){Li.set(y._key(),h)}function Ns(y){return ie(y._redirectPersistence)}function Cd(y){return zn("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,m.Z)(function*(y,h,g){const w=mn(y);Ve(y,h,es);const A=Sa(w,g);return yield rc(A,w),A._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y);Ve(w.auth,h,es);const A=Sa(w.auth,g);yield rc(A,w.auth);const N=yield ft(w);return A._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Se(){return(Se=(0,m.Z)(function*(y,h,g){const w=(0,P.m9)(y);Ve(w.auth,h,es);const A=Sa(w.auth,g);yield jt(!1,w,h.providerId),yield rc(A,w.auth);const N=yield ft(w);return A._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(y,h){return yield mn(y)._initializationPromise,_t(y,h,!1)})).apply(this,arguments)}function _t(y,h){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(y,h,g=!1){const w=mn(y),A=Sa(w,h),G=yield new nc(w,A,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield w._persistUserIfCurrent(G.user),yield w._setRedirectUser(null,h)),G})).apply(this,arguments)}function ft(y){return vn.apply(this,arguments)}function vn(){return(vn=(0,m.Z)(function*(y){const h=Ea(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ra{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Bo(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return no(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!no(h)){const A=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vo(h))}saveEventToCache(h){this.cachedEventUids.add(Vo(h)),this.lastProcessedEventTime=Date.now()}}function Vo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function no({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Fi(y){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,m.Z)(function*(y,h={}){return en(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ls=/^https?/;function Ad(){return(Ad=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Fi(y);for(const g of h)try{if(yi(g))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function yi(y){const h=Ne(),{protocol:g,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===w}if(!ls.test(g))return!1;if(ro.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Eg=new nn(3e4,6e4);function xd(){const y=Rn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Vu=null;function mf(y){return Vu=Vu||function ic(y){return new Promise((h,g)=>{var w,A,N;function G(){xd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{xd(),g(_e(y,"network-request-failed"))},timeout:Eg.get()})}if(null!==(A=null===(w=Rn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(N=Rn().gapi)||void 0===N||!N.load){const ce=Pu("iframefcb");return Rn()[ce]=()=>{gapi.load?G():g(_e(y,"network-request-failed"))},Po(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Oe=>g(Oe))}G()}}).catch(h=>{throw Vu=null,h})}(y),Vu}const av=new nn(5e3,15e3),uv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R0(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?An(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},A=yf.get(y.config.apiHost);A&&(w.eid=A);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,P.xO)(w).slice(1)}`}function Na(){return Na=(0,m.Z)(function*(y){const h=yield mf(y),g=Rn().gapi;return V(g,y,"internal-error"),h.open({where:document.body,url:R0(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uv,dontclear:!0},w=>new Promise(function(){var A=(0,m.Z)(function*(N,G){yield w.restyle({setHideOnLeave:!1});const ce=_e(y,"network-request-failed"),Oe=Rn().setTimeout(()=>{G(ce)},av.get());function Ye(){Rn().clearTimeout(Oe),N(w)}w.ping(Ye).then(Ye,()=>{G(ce)})});return function(N,G){return A.apply(this,arguments)}}()))}),Na.apply(this,arguments)}const Md={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bu{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pa(y,h,g,w,A,N){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:oe.SDK_VERSION,eventId:A};if(h instanceof es){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Oe,Ye]of Object.entries(N||{}))G[Oe]=Ye}if(h instanceof ts){const Oe=h.getScopes().filter(Ye=>""!==Ye);Oe.length>0&&(G.scopes=Oe.join(","))}y.tenantId&&(G.tid=y.tenantId);const ce=G;for(const Oe of Object.keys(ce))void 0===ce[Oe]&&delete ce[Oe];return`${function bg({config:y}){return y.emulator?An(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(ce).slice(1)}`}const uc="webStorageSupport";class Ps extends class Pd{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ps(h)}_finalizeEnroll(h,g,w){return function bu(y,h){return en(y,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(y,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Nu(y,h){return en(y,"POST","/v2/accounts/mfaSignIn:finalize",Lt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let so=(()=>{class y{constructor(){}static assertion(g){return Ps._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var wf="@firebase/auth";class cv{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var A;h((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pr(){return window}function Ef(){return(Ef=(0,m.Z)(function*(y,h,g){var w;const{BuildInfo:A}=pr();Y(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Tg(h.sessionId),G={};return Jt()?G.ibi=A.packageName:On()?G.apn=A.packageName:Ae(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=N,Pa(y,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,G)})).apply(this,arguments)}function ju(){return(ju=(0,m.Z)(function*(y){const{BuildInfo:h}=pr(),g={};Jt()?g.iosBundleId=h.packageName:On()?g.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield Fi(y,g)})).apply(this,arguments)}function kd(){return(kd=(0,m.Z)(function*(y,h,g){const{cordova:w}=pr();let A=()=>{};try{yield new Promise((N,G)=>{let ce=null;function Oe(){var pt;N();const Pn=null===(pt=w.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof Pn&&Pn(),"function"==typeof g?.close&&g.close()}function Ye(){ce||(ce=window.setTimeout(()=>{G(_e(y,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===document?.visibilityState&&Ye()}h.addPassiveListener(Oe),document.addEventListener("resume",Ye,!1),On()&&document.addEventListener("visibilitychange",wt,!1),A=()=>{h.removePassiveListener(Oe),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",wt,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function Tg(y){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,m.Z)(function*(y){const h=k0(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function k0(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function dv(y){(0,oe._registerComponent)(new le.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:N,authDomain:G}=w.options;return((ce,Oe)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:ce.name}),V(!G?.includes(":"),"argument-error",{appName:ce.name});const Ye={apiKey:N,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_s(y)},wt=new Ot(ce,Oe,Ye);return function ke(y,h){const g=h?.persistence||[],w=(Array.isArray(g)?g:[g]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(wt,g),wt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",h=>{const g=mn(h.getProvider("auth").getImmediate());return new cv(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(wf,"0.20.7",function ka(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(wf,"0.20.7","esm2017")}("Browser");class Ld extends Ra{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function hv(y){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,m.Z)(function*(y){const h=yield Cg()._get(Hu(y));return h&&(yield Cg()._remove(Hu(y))),h})).apply(this,arguments)}function O0(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function Cg(){return ie(va)}function Hu(y){return zn("authEvent",y.config.apiKey,y.name)}function Vd(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function bf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function dc(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function xg(y=(0,P.z$)()){return!("file:"!==dc()&&"ionic:"!==dc()&&"capacitor:"!==dc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function qu(){try{const y=self.localStorage,h=Ea();if(y)return y.setItem(h,"1"),y.removeItem(h),!function La(y=(0,P.z$)()){return function L0(){return(0,P.w1)()&&11===document?.documentMode}()||function zu(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return Fa()&&(0,P.hl)()}return!1}function Fa(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jd(){return(function mv(){return"http:"===dc()||"https:"===dc()}()||(0,P.ru)()||xg())&&!function yv(){return(0,P.b$)()||(0,P.UG)()}()&&qu()&&!Fa()}function Sf(){return xg()&&typeof document<"u"}function $d(){return($d=(0,m.Z)(function*(){return!!Sf()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const gr={LOCAL:"local",NONE:"none",SESSION:"session"},Hd=V,hc="persistence";function Ua(y){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,m.Z)(function*(y){yield y._initializationPromise;const h=Rg(),g=zn(hc,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Rg(){var y;try{return(null===(y=function Mg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Ng=V;class _i{constructor(){this.browserResolver=ie(class io{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ki,this._completeRedirectFn=_t,this._overrideRedirectResult=Uo}_openPopup(h,g,w,A){var N=this;return(0,m.Z)(function*(){var G;Y(null===(G=N.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ce=Pa(h,g,w,Ne(),A);return function _f(y,h,g,w=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const Oe=Object.assign(Object.assign({},Md),{width:w.toString(),height:A.toString(),top:N,left:G}),Ye=(0,P.z$)().toLowerCase();g&&(ce=Mi(Ye)?"_blank":g),gn(Ye)&&(h=h||"http://localhost",Oe.scrollbars="yes");const wt=Object.entries(Oe).reduce((Pn,[Vi,Wu])=>`${Pn}${Vi}=${Wu},`,"");if(function hi(y=(0,P.z$)()){var h;return Jt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ye)&&"_self"!==ce)return function Rd(y,h){const g=document.createElement("a");g.href=y,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",ce),new Bu(null);const pt=window.open(h||"",ce,wt);V(pt,y,"popup-blocked");try{pt.focus()}catch{}return new Bu(pt)}(h,ce,Ea())})()}_openRedirect(h,g,w,A){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(h),function gi(y){Rn().location.href=y}(Pa(h,g,w,Ne(),A)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:N}=this.eventManagers[g];return A?Promise.resolve(A):(Y(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,m.Z)(function*(){const w=yield function Ig(y){return Na.apply(this,arguments)}(h),A=new Ra(h);return w.register("authEvent",N=>(V(N?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=w,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(uc,{type:uc},A=>{var N;const G=null===(N=A?.[0])||void 0===N?void 0:N[uc];void 0!==G&&g(!!G),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Uu(y){return Ad.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Us()||kn()||Jt()}}),this.cordovaResolver=ie(class Bd{constructor(){this._redirectPersistence=ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_t,this._overrideRedirectResult=Uo}_initialize(h){var g=this;return(0,m.Z)(function*(){const w=h._key();let A=g.eventManagers.get(w);return A||(A=new Ld(h),g.eventManagers.set(w,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,A){var N=this;return(0,m.Z)(function*(){!function Od(y){var h,g,w,A,N,G,ce,Oe,Ye,wt;const pt=pr();V("function"==typeof(null===(h=pt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(g=pt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(A=null===(w=pt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Oe=null===(ce=null===(G=pt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Oe?void 0:Oe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(wt=null===(Ye=pt?.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===wt?void 0:wt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield N._initialize(h);yield G.initialized(),G.resetRedirect(),function pf(){Li.clear()}(),yield N._originValidation(h);const ce=function $u(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:O0(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,w,A);yield function Df(y,h){return Cg()._set(Hu(y),h)}(h,ce);const Oe=yield function lc(y,h,g){return Ef.apply(this,arguments)}(h,ce,g),Ye=yield function vi(y){const{cordova:h}=pr();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let A=null;w?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function qr(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Oe);return function $o(y,h,g){return kd.apply(this,arguments)}(h,G,Ye)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function If(y){return ju.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:N}=pr(),G=setTimeout((0,m.Z)(function*(){yield hv(h),g.onEvent(bf())}),500),ce=function(){var wt=(0,m.Z)(function*(pt){clearTimeout(G);const Pn=yield hv(h);let Vi=null;Pn&&pt?.url&&(Vi=function fv(y,h){var g,w;const A=function Ud(y){const h=Vd(y),g=h.link?decodeURIComponent(h.link):void 0,w=Vd(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Vd(A).link||A||w||g||y}(h);if(A.includes("/__/auth/callback")){const N=Vd(A),G=N.firebaseError?function Ag(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ce=null===(w=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Oe=ce?_e(ce):null;return Oe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Pn,pt.url)),g.onEvent(Vi||bf())});return function(Pn){return wt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const Oe=A,Ye=`${N.packageName.toLowerCase()}://`;pr().handleOpenURL=function(){var wt=(0,m.Z)(function*(pt){if(pt.toLowerCase().startsWith(Ye)&&ce({url:pt}),"function"==typeof Oe)try{Oe(pt)}catch(Pn){console.error(Pn)}});return function(pt){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ki,this._completeRedirectFn=_t,this._overrideRedirectResult=Uo}_initialize(h){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,A){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,w,A)})()}_openRedirect(h,g,w,A){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,w,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Sf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ng(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const g=yield function vv(){return $d.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function _v(y){return y.unwrap()}function zd(y){return pc(y)}function pc(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ec.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=su;break;case"facebook.com":w=ua;break;case"github.com":w=Pl;break;case"twitter.com":w=Lr;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:ce,nonce:Oe}=h;return N||G||A||ce?ce?g.startsWith("saml.")?la._create(g,ce):Xi._fromParams({providerId:g,signInMethod:g,pendingToken:ce,idToken:A,accessToken:N}):new $s(g).credential({idToken:A,accessToken:N,rawNonce:Oe}):null}return y instanceof P.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function mr(y,h){return h.catch(g=>{throw g instanceof P.ZR&&function Go(y,h){var g,w;const A=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new kg(y,function Sn(y,h){var g;const w=(0,P.m9)(y),A=h;return V(h.customData.operationType,w,"argument-error"),V(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Iu._fromError(w,A)}(y,h));else if(A){const N=pc(h),G=h;N&&(G.credential=N,G.tenantId=A.tenantId||void 0,G.email=A.email||void 0,G.phoneNumber=A.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:zd(g),additionalUserInfo:Eu(g),user:Jr.getOrCreate(A)}})}function Pg(y,h){return Af.apply(this,arguments)}function Af(){return(Af=(0,m.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>mr(y,g.confirm(w))}})).apply(this,arguments)}class kg{constructor(h,g){this.resolver=g,this.auth=function Cf(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return mr(_v(this.auth),this.resolver.resolveSignIn(h))}}class Jr{constructor(h){this._delegate=h,this.multiFactor=function Ao(y){const h=(0,P.m9)(y);return Ks.has(h)||Ks.set(h,df._fromUser(h)),Ks.get(h)}(h)}static getOrCreate(h){return Jr.USER_MAP.has(h)||Jr.USER_MAP.set(h,new Jr(h)),Jr.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,m.Z)(function*(){return mr(g.auth,du(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,m.Z)(function*(){return Pg(w.auth,function Sr(y,h,g){return Oi.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,m.Z)(function*(){return mr(g.auth,function wg(y,h,g){return xa.apply(this,arguments)}(g._delegate,h,_i))})()}linkWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Ua(mn(g.auth)),function J(y,h,g){return function ae(y,h,g){return Se.apply(this,arguments)}(y,h,g)}(g._delegate,h,_i)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,m.Z)(function*(){return mr(g.auth,hu(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Pg(this.auth,function Jl(y,h,g){return mi.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return mr(this.auth,function _g(y,h,g){return Sd.apply(this,arguments)}(this._delegate,h,_i))}reauthenticateWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Ua(mn(g.auth)),function T(y,h,g){return function M(y,h,g){return L.apply(this,arguments)}(y,h,g)}(g._delegate,h,_i)})()}sendEmailVerification(h){return function Bl(y,h){return ma.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,m.Z)(function*(){return yield function Tr(y,h){return au.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function fd(y,h){return qs((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function zs(y,h){return qs((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ff(y,h){return bd.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Hl(y,h){return Gl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function jl(y,h,g){return vu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Jr.USER_MAP=new WeakMap;const gc=V;let Og=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;gc(A,"invalid-api-key",{appName:g.name}),gc(A,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?_i:void 0;this._delegate=w.initialize({options:{persistence:Fg(A,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ee),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Jr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function bl(y,h,g){const w=mn(y);V(w._canInitEmulator,w,"emulator-config-failed"),V(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const A=!!g?.disableWarnings,N=Ri(h),{host:G,port:ce}=function Ln(y){const h=Ri(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const N=A[1];return{host:N,port:ws(w.substr(N.length+1))}}{const[N,G]=w.split(":");return{host:N,port:ws(G)}}}(h);w.config.emulator={url:`${N}//${G}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:G,port:ce,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Es(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function Zr(y,h){return da.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ha(this._delegate,g)}confirmPasswordReset(g,w){return function mu(y,h,g){return bo.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,m.Z)(function*(){return mr(A._delegate,function fa(y,h,g){return Tn.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function yu(y,h){return ga.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ss(y,h){return"EMAIL_SIGNIN"===iu.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){gc(jd(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function je(y,h){return dt.apply(this,arguments)}(g._delegate,_i);return w?mr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function pv(y,h){mn(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:N,error:G,complete:ce}=Lg(g,w,A);return this._delegate.onAuthStateChanged(N,G,ce)}onIdTokenChanged(g,w,A){const{next:N,error:G,complete:ce}=Lg(g,w,A);return this._delegate.onIdTokenChanged(N,G,ce)}sendSignInLinkToEmail(g,w){return function Ul(y,h,g){return Gs.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function gu(y,h,g){return bn.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,m.Z)(function*(){let A;switch(function fc(y,h){Hd(Object.values(gr).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?Hd(h!==gr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Hd(h===gr.NONE,y,"unsupported-persistence-type"):Fa()?Hd(h===gr.NONE||h===gr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Hd(h===gr.NONE||qu(),y,"unsupported-persistence-type")}(w._delegate,g),g){case gr.SESSION:A=ki;break;case gr.LOCAL:A=(yield ie(Mo)._isAvailable())?Mo:va;break;case gr.NONE:A=Qt;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return mr(this._delegate,function af(y){return Dn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return mr(this._delegate,yn(this._delegate,g))}signInWithCustomToken(g){return mr(this._delegate,function Ol(y,h){return ca.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return mr(this._delegate,function Pi(y,h,g){return yn((0,P.m9)(y),Ni.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return mr(this._delegate,function gg(y,h,g){return pa.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Pg(this._delegate,function as(y,h,g){return Ou.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,m.Z)(function*(){return gc(jd(),w._delegate,"operation-not-supported-in-this-environment"),mr(w._delegate,function Lu(y,h,g){return Aa.apply(this,arguments)}(w._delegate,g,_i))})()}signInWithRedirect(g){var w=this;return(0,m.Z)(function*(){return gc(jd(),w._delegate,"operation-not-supported-in-this-environment"),yield Ua(w._delegate),function Nn(y,h,g){return function gf(y,h,g){return b.apply(this,arguments)}(y,h,g)}(w._delegate,g,_i)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Fl(y,h){return hd.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=gr,y})();function Lg(y,h,g){let w=y;"function"!=typeof y&&({next:w,error:h,complete:g}=y);const A=w;return{next:G=>A(G&&Jr.getOrCreate(G)),error:h,complete:g}}function Fg(y,h){const g=function Ho(y,h){const g=Rg();if(!g)return[];const w=zn(hc,y,h);switch(g.getItem(w)){case gr.NONE:return[Qt];case gr.LOCAL:return[Mo,ki];case gr.SESSION:return[ki];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(Mo)&&g.push(Mo),typeof window<"u")for(const w of[va,ki])g.includes(w)||g.push(w);return g.includes(Qt)||g.push(Qt),g}class mc{constructor(){this.providerId="phone",this._delegate=new ec(_v(te.Z.auth()))}static credential(h,g){return ec.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}mc.PHONE_SIGN_IN_METHOD=ec.PHONE_SIGN_IN_METHOD,mc.PROVIDER_ID=ec.PROVIDER_ID;const wv=V;class xf{constructor(h,g,w=te.Z.app()){var A;wv(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new tr(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qd(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Og(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ni,FacebookAuthProvider:ua,GithubAuthProvider:Pl,GoogleAuthProvider:su,OAuthProvider:$s,SAMLAuthProvider:Wr,PhoneAuthProvider:mc,PhoneMultiFactorGenerator:so,RecaptchaVerifier:xf,TwitterAuthProvider:Lr,Auth:Og,AuthCredential:or,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.20")}(te.Z)},9751:(ot,Ce,O)=>{O.d(Ce,{y:()=>he});var m=O(2961),te=O(727),P=O(8822),oe=O(9635),re=O(2416),fe=O(576),le=O(2806);let he=(()=>{class Q{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Ee=new Q;return Ee.source=this,Ee.operator=Me,Ee}subscribe(Me,Ee,Xe){const ye=function j(Q){return Q&&Q instanceof m.Lv||function B(Q){return Q&&(0,fe.m)(Q.next)&&(0,fe.m)(Q.error)&&(0,fe.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(Me)?Me:new m.Hp(Me,Ee,Xe);return(0,le.x)(()=>{const{operator:ge,source:Je}=this;ye.add(ge?ge.call(ye,Je):Je?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Ee){Me.error(Ee)}}forEach(Me,Ee){return new(Ee=pe(Ee))((Xe,ye)=>{const ge=new m.Hp({next:Je=>{try{Me(Je)}catch(nt){ye(nt),ge.unsubscribe()}},error:ye,complete:Xe});this.subscribe(ge)})}_subscribe(Me){var Ee;return null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(Me)}[P.L](){return this}pipe(...Me){return(0,oe.U)(Me)(this)}toPromise(Me){return new(Me=pe(Me))((Ee,Xe)=>{let ye;this.subscribe(ge=>ye=ge,ge=>Xe(ge),()=>Ee(ye))})}}return Q.create=Fe=>new Q(Fe),Q})();function pe(Q){var Fe;return null!==(Fe=Q??re.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(ot,Ce,O)=>{O.d(Ce,{x:()=>le});var m=O(9751),te=O(727);const oe=(0,O(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=O(8737),fe=O(2806);let le=(()=>{class pe extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new he(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:Fe,observers:Me}=this;return Q||Fe?te.Lc:(this.currentObservers=null,Me.push(j),new te.w0(()=>{this.currentObservers=null,(0,re.P)(Me,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:Fe,isStopped:Me}=this;Q?j.error(Fe):Me&&j.complete()}asObservable(){const j=new m.y;return j.source=this,j}}return pe.create=(B,j)=>new he(B,j),pe})();class he extends le{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,B)}error(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Q?Q:te.Lc}}},2961:(ot,Ce,O)=>{O.d(Ce,{Hp:()=>Xe,Lv:()=>Q});var m=O(576),te=O(727),P=O(2416),oe=O(7849);function re(){}const fe=pe("C",void 0,void 0);function pe(Ae,_e,De){return{kind:Ae,value:_e,error:De}}var B=O(3410),j=O(2806);class Q extends te.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,te.Nn)(_e)&&_e.add(this)):this.destination=nt}static create(_e,De,Ve){return new Xe(_e,De,Ve)}next(_e){this.isStopped?Je(function he(Ae){return pe("N",Ae,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Je(function le(Ae){return pe("E",void 0,Ae)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Je(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function Me(Ae,_e){return Fe.call(Ae,_e)}class Ee{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:De}=this;if(De.next)try{De.next(_e)}catch(Ve){ye(Ve)}}error(_e){const{partialObserver:De}=this;if(De.error)try{De.error(_e)}catch(Ve){ye(Ve)}else ye(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(De){ye(De)}}}class Xe extends Q{constructor(_e,De,Ve){let Be;if(super(),(0,m.m)(_e)||!_e)Be={next:_e??void 0,error:De??void 0,complete:Ve??void 0};else{let V;this&&P.v.useDeprecatedNextContext?(V=Object.create(_e),V.unsubscribe=()=>this.unsubscribe(),Be={next:_e.next&&Me(_e.next,V),error:_e.error&&Me(_e.error,V),complete:_e.complete&&Me(_e.complete,V)}):Be=_e}this.destination=new Ee(Be)}}function ye(Ae){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ae):(0,oe.h)(Ae)}function Je(Ae,_e){const{onStoppedNotification:De}=P.v;De&&B.z.setTimeout(()=>De(Ae,_e))}const nt={closed:!0,next:re,error:function ge(Ae){throw Ae},complete:re}},727:(ot,Ce,O)=>{O.d(Ce,{Lc:()=>fe,w0:()=>re,Nn:()=>le});var m=O(576);const P=(0,O(3888).d)(pe=>function(j){pe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,Fe)=>`${Fe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=O(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Me of j)Me.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,m.m)(Q))try{Q()}catch(Me){B=Me instanceof P?Me.errors:[Me]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const Me of Fe)try{he(Me)}catch(Ee){B=B??[],Ee instanceof P?B=[...B,...Ee.errors]:B.push(Ee)}}if(B)throw new P(B)}}add(B){var j;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const fe=re.EMPTY;function le(pe){return pe instanceof re||pe&&"closed"in pe&&(0,m.m)(pe.remove)&&(0,m.m)(pe.add)&&(0,m.m)(pe.unsubscribe)}function he(pe){(0,m.m)(pe)?pe():pe.unsubscribe()}},2416:(ot,Ce,O)=>{O.d(Ce,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Ce,O)=>{O.d(Ce,{E:()=>te});const te=new(O(9751).y)(re=>re.complete())},8996:(ot,Ce,O)=>{O.d(Ce,{D:()=>_e});var m=O(8421),te=O(5363),P=O(9468),fe=O(9751),he=O(2202),pe=O(576),B=O(9672);function Q(De,Ve){if(!De)throw new Error("Iterable cannot be null");return new fe.y(Be=>{(0,B.f)(Be,Ve,()=>{const V=De[Symbol.asyncIterator]();(0,B.f)(Be,Ve,()=>{V.next().then(me=>{me.done?Be.complete():Be.next(me.value)})},0,!0)})})}var Fe=O(3670),Me=O(8239),Ee=O(1144),Xe=O(6495),ye=O(2206),ge=O(4532),Je=O(3260);function _e(De,Ve){return Ve?function Ae(De,Ve){if(null!=De){if((0,Fe.c)(De))return function oe(De,Ve){return(0,m.Xf)(De).pipe((0,P.R)(Ve),(0,te.Q)(Ve))}(De,Ve);if((0,Ee.z)(De))return function le(De,Ve){return new fe.y(Be=>{let V=0;return Ve.schedule(function(){V===De.length?Be.complete():(Be.next(De[V++]),Be.closed||this.schedule())})})}(De,Ve);if((0,Me.t)(De))return function re(De,Ve){return(0,m.Xf)(De).pipe((0,P.R)(Ve),(0,te.Q)(Ve))}(De,Ve);if((0,ye.D)(De))return Q(De,Ve);if((0,Xe.T)(De))return function j(De,Ve){return new fe.y(Be=>{let V;return(0,B.f)(Be,Ve,()=>{V=De[he.h](),(0,B.f)(Be,Ve,()=>{let me,Y;try{({value:me,done:Y}=V.next())}catch(X){return void Be.error(X)}Y?Be.complete():Be.next(me)},0,!0)}),()=>(0,pe.m)(V?.return)&&V.return()})}(De,Ve);if((0,Je.L)(De))return function nt(De,Ve){return Q((0,Je.Q)(De),Ve)}(De,Ve)}throw(0,ge.z)(De)}(De,Ve):(0,m.Xf)(De)}},8421:(ot,Ce,O)=>{O.d(Ce,{Xf:()=>Fe});var m=O(655),te=O(1144),P=O(8239),oe=O(9751),re=O(3670),fe=O(2206),le=O(4532),he=O(6495),pe=O(3260),B=O(576),j=O(7849),Q=O(8822);function Fe(Ae){if(Ae instanceof oe.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function Me(Ae){return new oe.y(_e=>{const De=Ae[Q.L]();if((0,B.m)(De.subscribe))return De.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,te.z)(Ae))return function Ee(Ae){return new oe.y(_e=>{for(let De=0;De<Ae.length&&!_e.closed;De++)_e.next(Ae[De]);_e.complete()})}(Ae);if((0,P.t)(Ae))return function Xe(Ae){return new oe.y(_e=>{Ae.then(De=>{_e.closed||(_e.next(De),_e.complete())},De=>_e.error(De)).then(null,j.h)})}(Ae);if((0,fe.D)(Ae))return ge(Ae);if((0,he.T)(Ae))return function ye(Ae){return new oe.y(_e=>{for(const De of Ae)if(_e.next(De),_e.closed)return;_e.complete()})}(Ae);if((0,pe.L)(Ae))return function Je(Ae){return ge((0,pe.Q)(Ae))}(Ae)}throw(0,le.z)(Ae)}function ge(Ae){return new oe.y(_e=>{(function nt(Ae,_e){var De,Ve,Be,V;return(0,m.mG)(this,void 0,void 0,function*(){try{for(De=(0,m.KL)(Ae);!(Ve=yield De.next()).done;)if(_e.next(Ve.value),_e.closed)return}catch(me){Be={error:me}}finally{try{Ve&&!Ve.done&&(V=De.return)&&(yield V.call(De))}finally{if(Be)throw Be.error}}_e.complete()})})(Ae,_e).catch(De=>_e.error(De))})}},6451:(ot,Ce,O)=>{O.d(Ce,{T:()=>fe});var m=O(8189),te=O(8421),P=O(515),oe=O(7669),re=O(8996);function fe(...le){const he=(0,oe.yG)(le),pe=(0,oe._6)(le,1/0),B=le;return B.length?1===B.length?(0,te.Xf)(B[0]):(0,m.J)(pe)((0,re.D)(B,he)):P.E}},5403:(ot,Ce,O)=>{O.d(Ce,{x:()=>te});var m=O(2961);function te(oe,re,fe,le,he){return new P(oe,re,fe,le,he)}class P extends m.Lv{constructor(re,fe,le,he,pe,B){super(re),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=fe?function(j){try{fe(j)}catch(Q){re.error(Q)}}:super._next,this._error=he?function(j){try{he(j)}catch(Q){re.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ot,Ce,O)=>{O.d(Ce,{U:()=>P});var m=O(4482),te=O(5403);function P(oe,re){return(0,m.e)((fe,le)=>{let he=0;fe.subscribe((0,te.x)(le,pe=>{le.next(oe.call(re,pe,he++))}))})}},8189:(ot,Ce,O)=>{O.d(Ce,{J:()=>P});var m=O(5577),te=O(4671);function P(oe=1/0){return(0,m.z)(te.y,oe)}},5577:(ot,Ce,O)=>{O.d(Ce,{z:()=>he});var m=O(4004),te=O(8421),P=O(4482),oe=O(9672),re=O(5403),le=O(576);function he(pe,B,j=1/0){return(0,le.m)(B)?he((Q,Fe)=>(0,m.U)((Me,Ee)=>B(Q,Me,Fe,Ee))((0,te.Xf)(pe(Q,Fe))),j):("number"==typeof B&&(j=B),(0,P.e)((Q,Fe)=>function fe(pe,B,j,Q,Fe,Me,Ee,Xe){const ye=[];let ge=0,Je=0,nt=!1;const Ae=()=>{nt&&!ye.length&&!ge&&B.complete()},_e=Ve=>ge<Q?De(Ve):ye.push(Ve),De=Ve=>{Me&&B.next(Ve),ge++;let Be=!1;(0,te.Xf)(j(Ve,Je++)).subscribe((0,re.x)(B,V=>{Fe?.(V),Me?_e(V):B.next(V)},()=>{Be=!0},void 0,()=>{if(Be)try{for(ge--;ye.length&&ge<Q;){const V=ye.shift();Ee?(0,oe.f)(B,Ee,()=>De(V)):De(V)}Ae()}catch(V){B.error(V)}}))};return pe.subscribe((0,re.x)(B,_e,()=>{nt=!0,Ae()})),()=>{Xe?.()}}(Q,Fe,pe,j)))}},5363:(ot,Ce,O)=>{O.d(Ce,{Q:()=>oe});var m=O(9672),te=O(4482),P=O(5403);function oe(re,fe=0){return(0,te.e)((le,he)=>{le.subscribe((0,P.x)(he,pe=>(0,m.f)(he,re,()=>he.next(pe),fe),()=>(0,m.f)(he,re,()=>he.complete(),fe),pe=>(0,m.f)(he,re,()=>he.error(pe),fe)))})}},3099:(ot,Ce,O)=>{O.d(Ce,{B:()=>re});var m=O(8421),te=O(7579),P=O(2961),oe=O(4482);function re(le={}){const{connector:he=(()=>new te.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=le;return Q=>{let Fe,Me,Ee,Xe=0,ye=!1,ge=!1;const Je=()=>{Me?.unsubscribe(),Me=void 0},nt=()=>{Je(),Fe=Ee=void 0,ye=ge=!1},Ae=()=>{const _e=Fe;nt(),_e?.unsubscribe()};return(0,oe.e)((_e,De)=>{Xe++,!ge&&!ye&&Je();const Ve=Ee=Ee??he();De.add(()=>{Xe--,0===Xe&&!ge&&!ye&&(Me=fe(Ae,j))}),Ve.subscribe(De),!Fe&&Xe>0&&(Fe=new P.Hp({next:Be=>Ve.next(Be),error:Be=>{ge=!0,Je(),Me=fe(nt,pe,Be),Ve.error(Be)},complete:()=>{ye=!0,Je(),Me=fe(nt,B),Ve.complete()}}),(0,m.Xf)(_e).subscribe(Fe))})(Q)}}function fe(le,he,...pe){if(!0===he)return void le();if(!1===he)return;const B=new P.Hp({next:()=>{B.unsubscribe(),le()}});return he(...pe).subscribe(B)}},9468:(ot,Ce,O)=>{O.d(Ce,{R:()=>te});var m=O(4482);function te(P,oe=0){return(0,m.e)((re,fe)=>{fe.add(P.schedule(()=>re.subscribe(fe),oe))})}},8505:(ot,Ce,O)=>{O.d(Ce,{b:()=>re});var m=O(576),te=O(4482),P=O(5403),oe=O(4671);function re(fe,le,he){const pe=(0,m.m)(fe)||le||he?{next:fe,error:le,complete:he}:fe;return pe?(0,te.e)((B,j)=>{var Q;null===(Q=pe.subscribe)||void 0===Q||Q.call(pe);let Fe=!0;B.subscribe((0,P.x)(j,Me=>{var Ee;null===(Ee=pe.next)||void 0===Ee||Ee.call(pe,Me),j.next(Me)},()=>{var Me;Fe=!1,null===(Me=pe.complete)||void 0===Me||Me.call(pe),j.complete()},Me=>{var Ee;Fe=!1,null===(Ee=pe.error)||void 0===Ee||Ee.call(pe,Me),j.error(Me)},()=>{var Me,Ee;Fe&&(null===(Me=pe.unsubscribe)||void 0===Me||Me.call(pe)),null===(Ee=pe.finalize)||void 0===Ee||Ee.call(pe)}))}):oe.y}},4408:(ot,Ce,O)=>{O.d(Ce,{o:()=>re});var m=O(727);class te extends m.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const P={setInterval(fe,le,...he){const{delegate:pe}=P;return pe?.setInterval?pe.setInterval(fe,le,...he):setInterval(fe,le,...he)},clearInterval(fe){const{delegate:le}=P;return(le?.clearInterval||clearInterval)(fe)},delegate:void 0};var oe=O(8737);class re extends te{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){var pe;if(this.closed)return this;this.state=le;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,he)),this.pending=!0,this.delay=he,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(j,this.id,he),this}requestAsyncId(le,he,pe=0){return P.setInterval(le.flush.bind(le,this),pe)}recycleAsyncId(le,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;null!=he&&P.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(le,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let B,pe=!1;try{this.work(le)}catch(j){pe=!0,B=j||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Ce,O)=>{O.d(Ce,{v:()=>P});var m=O(6063);class te{constructor(re,fe=te.now){this.schedulerActionCtor=re,this.now=fe}schedule(re,fe=0,le){return new this.schedulerActionCtor(this,re).schedule(le,fe)}}te.now=m.l.now;class P extends te{constructor(re,fe=te.now){super(re,fe),this.actions=[],this._active=!1}flush(re){const{actions:fe}=this;if(this._active)return void fe.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=fe.shift());if(this._active=!1,le){for(;re=fe.shift();)re.unsubscribe();throw le}}}},4986:(ot,Ce,O)=>{O.d(Ce,{z:()=>P});var m=O(4408);const P=new(O(7565).v)(m.o)},6063:(ot,Ce,O)=>{O.d(Ce,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ot,Ce,O)=>{O.d(Ce,{z:()=>m});const m={setTimeout(te,P,...oe){const{delegate:re}=m;return re?.setTimeout?re.setTimeout(te,P,...oe):setTimeout(te,P,...oe)},clearTimeout(te){const{delegate:P}=m;return(P?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(ot,Ce,O)=>{O.d(Ce,{h:()=>te});const te=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Ce,O)=>{O.d(Ce,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Ce,O)=>{O.d(Ce,{_6:()=>fe,jO:()=>oe,yG:()=>re});var m=O(576);function P(le){return le[le.length-1]}function oe(le){return(0,m.m)(P(le))?le.pop():void 0}function re(le){return function te(le){return le&&(0,m.m)(le.schedule)}(P(le))?le.pop():void 0}function fe(le,he){return"number"==typeof P(le)?le.pop():he}},8737:(ot,Ce,O)=>{function m(te,P){if(te){const oe=te.indexOf(P);0<=oe&&te.splice(oe,1)}}O.d(Ce,{P:()=>m})},3888:(ot,Ce,O)=>{function m(te){const oe=te(re=>{Error.call(re),re.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Ce,{d:()=>m})},2806:(ot,Ce,O)=>{O.d(Ce,{O:()=>oe,x:()=>P});var m=O(2416);let te=null;function P(re){if(m.v.useDeprecatedSynchronousErrorHandling){const fe=!te;if(fe&&(te={errorThrown:!1,error:null}),re(),fe){const{errorThrown:le,error:he}=te;if(te=null,le)throw he}}else re()}function oe(re){m.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=re)}},9672:(ot,Ce,O)=>{function m(te,P,oe,re=0,fe=!1){const le=P.schedule(function(){oe(),fe?te.add(this.schedule(null,re)):this.unsubscribe()},re);if(te.add(le),!fe)return le}O.d(Ce,{f:()=>m})},4671:(ot,Ce,O)=>{function m(te){return te}O.d(Ce,{y:()=>m})},1144:(ot,Ce,O)=>{O.d(Ce,{z:()=>m});const m=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(ot,Ce,O)=>{O.d(Ce,{D:()=>te});var m=O(576);function te(P){return Symbol.asyncIterator&&(0,m.m)(P?.[Symbol.asyncIterator])}},576:(ot,Ce,O)=>{function m(te){return"function"==typeof te}O.d(Ce,{m:()=>m})},3670:(ot,Ce,O)=>{O.d(Ce,{c:()=>P});var m=O(8822),te=O(576);function P(oe){return(0,te.m)(oe[m.L])}},6495:(ot,Ce,O)=>{O.d(Ce,{T:()=>P});var m=O(2202),te=O(576);function P(oe){return(0,te.m)(oe?.[m.h])}},8239:(ot,Ce,O)=>{O.d(Ce,{t:()=>te});var m=O(576);function te(P){return(0,m.m)(P?.then)}},3260:(ot,Ce,O)=>{O.d(Ce,{L:()=>oe,Q:()=>P});var m=O(655),te=O(576);function P(re){return(0,m.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:he,done:pe}=yield(0,m.qq)(le.read());if(pe)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(he)}}finally{le.releaseLock()}})}function oe(re){return(0,te.m)(re?.getReader)}},4482:(ot,Ce,O)=>{O.d(Ce,{A:()=>te,e:()=>P});var m=O(576);function te(oe){return(0,m.m)(oe?.lift)}function P(oe){return re=>{if(te(re))return re.lift(function(fe){try{return oe(fe,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ot,Ce,O)=>{O.d(Ce,{U:()=>P,z:()=>te});var m=O(4671);function te(...oe){return P(oe)}function P(oe){return 0===oe.length?m.y:1===oe.length?oe[0]:function(fe){return oe.reduce((le,he)=>he(le),fe)}}},7849:(ot,Ce,O)=>{O.d(Ce,{h:()=>P});var m=O(2416),te=O(3410);function P(oe){te.z.setTimeout(()=>{const{onUnhandledError:re}=m.v;if(!re)throw oe;re(oe)})}},4532:(ot,Ce,O)=>{function m(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ce,{z:()=>m})},655:(ot,Ce,O)=>{function oe(Y,X){var ie={};for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&X.indexOf(ne)<0&&(ie[ne]=Y[ne]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(ne=Object.getOwnPropertySymbols(Y);ke<ne.length;ke++)X.indexOf(ne[ke])<0&&Object.prototype.propertyIsEnumerable.call(Y,ne[ke])&&(ie[ne[ke]]=Y[ne[ke]])}return ie}function he(Y,X,ie,ne){return new(ie||(ie=Promise))(function(Ne,ct){function Ht(nn){try{ze(ne.next(nn))}catch(An){ct(An)}}function Bt(nn){try{ze(ne.throw(nn))}catch(An){ct(An)}}function ze(nn){nn.done?Ne(nn.value):function ke(Ne){return Ne instanceof ie?Ne:new ie(function(ct){ct(Ne)})}(nn.value).then(Ht,Bt)}ze((ne=ne.apply(Y,X||[])).next())})}function ye(Y){return this instanceof ye?(this.v=Y,this):new ye(Y)}function ge(Y,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ne=ie.apply(Y,X||[]),Ne=[];return ke={},ct("next"),ct("throw"),ct("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ct(Kt){ne[Kt]&&(ke[Kt]=function(Zt){return new Promise(function(Er,Lt){Ne.push([Kt,Zt,Er,Lt])>1||Ht(Kt,Zt)})})}function Ht(Kt,Zt){try{!function Bt(Kt){Kt.value instanceof ye?Promise.resolve(Kt.value.v).then(ze,nn):An(Ne[0][2],Kt)}(ne[Kt](Zt))}catch(Er){An(Ne[0][3],Er)}}function ze(Kt){Ht("next",Kt)}function nn(Kt){Ht("throw",Kt)}function An(Kt,Zt){Kt(Zt),Ne.shift(),Ne.length&&Ht(Ne[0][0],Ne[0][1])}}function nt(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=Y[Symbol.asyncIterator];return X?X.call(Y):(Y=function Q(Y){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&Y[X],ne=0;if(ie)return ie.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ne>=Y.length&&(Y=void 0),{value:Y&&Y[ne++],done:!Y}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Ne){ie[Ne]=Y[Ne]&&function(ct){return new Promise(function(Ht,Bt){!function ke(Ne,ct,Ht,Bt){Promise.resolve(Bt).then(function(ze){Ne({value:ze,done:Ht})},ct)}(Ht,Bt,(ct=Y[Ne](ct)).done,ct.value)})}}}O.d(Ce,{FC:()=>ge,KL:()=>nt,_T:()=>oe,mG:()=>he,qq:()=>ye})},4650:(ot,Ce,O)=>{O.d(Ce,{$8M:()=>Nu,$Z:()=>Tc,AFp:()=>Bp,ALo:()=>gw,AaK:()=>he,AsE:()=>R_,BQk:()=>Hi,CHM:()=>pu,CRH:()=>ww,CZH:()=>jh,CqO:()=>nl,D6c:()=>KS,EJc:()=>xw,EpF:()=>fh,F4k:()=>zE,FYo:()=>Oe,FiY:()=>je,G48:()=>VS,GfV:()=>Pn,JOm:()=>ji,KtG:()=>gu,LFG:()=>Nn,LSH:()=>cc,Lbi:()=>NS,Lck:()=>ow,MAs:()=>I_,MMx:()=>aw,NdJ:()=>Vm,OlP:()=>cn,PXZ:()=>Vw,Q6J:()=>Di,QGY:()=>Zo,QP$:()=>Mi,QbO:()=>SD,Qsj:()=>Ye,R0b:()=>Fs,RDi:()=>R0,Rgc:()=>Nh,SBq:()=>N,Sil:()=>AD,Suo:()=>rD,TTD:()=>ts,TgZ:()=>dp,W1O:()=>hy,X6Q:()=>Gw,XFs:()=>Ke,Xpm:()=>H,Xts:()=>qu,Y36:()=>Xd,YKP:()=>wr,YNc:()=>hh,Yjl:()=>Ut,Yz7:()=>Zt,Z0I:()=>sa,ZZ4:()=>qp,_UZ:()=>hp,_Vd:()=>g,_c5:()=>qh,_uU:()=>nI,aQg:()=>Kp,c2e:()=>kS,cJS:()=>Lt,cg1:()=>H_,dDg:()=>kD,dqk:()=>on,eFA:()=>Ry,eoX:()=>OD,f3M:()=>b,g9A:()=>Ty,h0i:()=>hl,hGG:()=>Qw,hij:()=>yp,iGM:()=>nD,ifc:()=>st,ip1:()=>bD,jDz:()=>xp,kL8:()=>Cn,lG2:()=>zn,lcZ:()=>kp,lqb:()=>Go,lri:()=>Ay,oAB:()=>rt,oxw:()=>rl,q4F:()=>Vi,qLn:()=>Pf,qZA:()=>ho,rWj:()=>PD,sBO:()=>BS,sIi:()=>op,s_b:()=>Wc,soG:()=>Sy,tb:()=>TD,tp0:()=>_t,uIk:()=>Lm,vHH:()=>Ee,vpe:()=>Si,wAp:()=>Et,xp6:()=>$v,ynx:()=>kc,z2F:()=>Ly,zSh:()=>Ng,zs3:()=>ja});var m=O(7579),te=O(727),P=O(9751),oe=O(6451),re=O(3099);function fe(i){for(let o in i)if(i[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=fe({__forward_ref__:fe});function j(i){return i.__forward_ref__=j,i.toString=function(){return he(this())},i}function Q(i){return function Fe(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}(i)?i():i}class Ee extends Error{constructor(o,a){super(function Xe(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,o){throw new Ee(-201,!1)}function Bt(i,o){null==i&&function ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Lt(i){return{providers:i.providers||[],imports:i.imports||[]}}function en(i){return Nr(i,xi)||Nr(i,li)}function sa(i){return null!==en(i)}function Nr(i,o){return i.hasOwnProperty(o)?i[o]:null}function vs(i){return i&&(i.hasOwnProperty(kr)||i.hasOwnProperty(wo))?i[kr]:null}const xi=fe({\u0275prov:fe}),kr=fe({\u0275inj:fe}),li=fe({ngInjectableDef:fe}),wo=fe({ngInjectorDef:fe});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Or;function xn(i){const o=Or;return Or=i,o}function ci(i,o,a){const l=en(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ke.Optional?null:void 0!==o?o:void _e(he(i))}function Mn(i){return{toString:i}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),st=(()=>{return(i=st||(st={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",st;var i})();const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ir={},Dt=[],Ji=fe({\u0275cmp:fe}),Yt=fe({\u0275dir:fe}),di=fe({\u0275pipe:fe}),zt=fe({\u0275mod:fe}),K=fe({\u0275fac:fe}),$=fe({__NG_ELEMENT_ID__:fe});let U=0;function H(i){return Mn(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||st.Emulated,id:"c"+U++,styles:i.styles||Dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,v=i.features;return d.inputs=Qt(i.inputs,l),d.outputs=Qt(i.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(be).filter(Ue):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(kn).filter(Ue):null,d})}function be(i){return kt(i)||gn(i)}function Ue(i){return null!==i}function rt(i){return Mn(()=>({type:i.type,bootstrap:i.bootstrap||Dt,declarations:i.declarations||Dt,imports:i.imports||Dt,exports:i.exports||Dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Qt(i,o){if(null==i)return Ir;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const zn=H;function Ut(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function kt(i){return i[Ji]||null}function gn(i){return i[Yt]||null}function kn(i){return i[di]||null}function Mi(i){const o=kt(i)||gn(i)||kn(i);return null!==o&&o.standalone}function Dr(i,o){const a=i[zt]||null;if(!a&&!0===o)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function Xn(i){return Array.isArray(i)&&"object"==typeof i[1]}function br(i){return Array.isArray(i)&&!0===i[1]}function ru(i){return 0!=(8&i.flags)}function aa(i){return 2==(2&i.flags)}function Al(i){return 1==(1&i.flags)}function fr(i){return null!==i.template}function ef(i){return 0!=(256&i[2])}function Ni(i,o){return i.hasOwnProperty(K)?i[K]:null}class es{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ts(){return $s}function $s(i){return i.type.prototype.ngOnChanges&&(i.setInput=su),ua}function ua(){const i=rf(this),o=i?.current;if(o){const a=i.previous;if(a===Ir)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function su(i,o,a,l){const d=rf(i)||function la(i,o){return i[Pl]=o}(i,{previous:Ir,current:null}),p=d.current||(d.current={}),v=d.previous,E=this.declaredInputs[a],D=v[E];p[E]=new es(D&&D.currentValue,o,v===Ir),i[l]=o}ts.ngInherit=!0;const Pl="__ngSimpleChanges__";function rf(i){return i[Pl]||null}function Dn(i){for(;Array.isArray(i);)i=i[0];return i}function Tr(i,o){return Dn(o[i.index])}function Do(i,o){return i.data[o]}function rs(i,o){return i[o]}function jt(i,o){const a=o[i];return Xn(a)?a:a[0]}function Hs(i){return 64==(64&i[2])}function pi(i,o){return null==o?null:i[o]}function cu(i){i[18]=0}function yn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const bt={lFrame:Hl(null),bindingsEnabled:!0};function is(){return bt.bindingsEnabled}function Te(){return bt.lFrame.lView}function Vt(){return bt.lFrame.tView}function pu(i){return bt.lFrame.contextLView=i,i[8]}function gu(i){return bt.lFrame.contextLView=null,i}function bn(){let i=mu();for(;null!==i&&64===i.type;)i=i.parent;return i}function mu(){return bt.lFrame.currentTNode}function Zr(i,o){const a=bt.lFrame;a.currentTNode=i,a.isParent=o}function da(){return bt.lFrame.isParent}function ha(){bt.lFrame.isParent=!1}function Gs(){return bt.lFrame.bindingIndex++}function mg(i,o){const a=bt.lFrame;a.bindingIndex=a.bindingRootIndex=i,yu(o)}function yu(i){bt.lFrame.currentDirectiveIndex=i}function Bl(){return bt.lFrame.currentQueryIndex}function ma(i){bt.lFrame.currentQueryIndex=i}function jl(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function vu(i,o,a){if(a&Ke.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&Ke.Host||(d=jl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const l=bt.lFrame=$l();return l.currentTNode=o,l.lView=i,!0}function _u(i){const o=$l(),a=i[1];bt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function $l(){const i=bt.lFrame,o=null===i?null:i.child;return null===o?Hl(i):o}function Hl(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Gl(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const fd=Gl;function zs(){const i=Gl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Kn(){return bt.lFrame.selectedIndex}function Fr(i){bt.lFrame.selectedIndex=i}function pn(){const i=bt.lFrame;return Do(i.tView,i.selectedIndex)}function Wl(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:R}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),D&&(i.viewHooks||(i.viewHooks=[])).push(-a,D),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function To(i,o,a){Co(i,o,3,a)}function So(i,o,a,l){(3&i[2])===a&&Co(i,o,a,l)}function md(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Co(i,o,a,l){const p=l??-1,v=o.length-1;let E=0;for(let D=void 0!==l?65535&i[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=l&&E>=l)break}else o[D]<0&&(i[18]+=65536),(E<p||-1==p)&&(yd(i,a,o,D),i[18]=(4294901760&i[18])+D+2),D++}function yd(i,o,a,l){const d=a[l]<0,p=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Ss{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ao(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const p=a[l++],v=a[l++],E=a[l++];i.setAttribute(o,v,E,p)}else{const p=d,v=a[++l];Tu(p)?i.setProperty(o,p,v):i.setAttribute(o,p,v),l++}}return l}function Zs(i){return 3===i||4===i||6===i}function Tu(i){return 64===i.charCodeAt(0)}function ya(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||_d(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function _d(i,o,a,l,d){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function wd(i){return-1!==i}function er(i){return 32767&i}function _a(i,o){let a=function va(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let ki=!0;function wa(i){const o=ki;return ki=i,o}let Rn=0;const gi={};function Ys(i,o){const a=Cu(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,Ia(l.data,i),Ia(o,null),Ia(l.blueprint,null));const d=Au(i,o),p=i.injectorIndex;if(wd(d)){const v=er(d),E=_a(d,o),D=E[1].data;for(let S=0;S<8;S++)o[p+S]=E[v+S]|D[v+S]}return o[p+8]=d,p}function Ia(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Cu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Au(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Ro(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Cs(i,o,a){!function Su(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty($)&&(l=a[$]),null==l&&(l=a[$]=Rn++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function As(i,o,a){if(a&Ke.Optional||void 0!==i)return i;_e()}function xu(i,o,a,l){if(a&Ke.Optional&&void 0===l&&(l=null),0==(a&(Ke.Self|Ke.Host))){const d=i[9],p=xn(void 0);try{return d?d.get(o,l,a&Ke.Optional):ci(o,l,a&Ke.Optional)}finally{xn(p)}}return As(l,0,a)}function Qs(i,o,a,l=Ke.Default,d){if(null!==i){if(1024&o[2]){const v=function Mo(i,o,a,l,d){let p=i,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=Da(p,v,a,l|Ke.Self,gi);if(E!==gi)return E;let D=p.parent;if(!D){const S=v[21];if(S){const R=S.get(a,gi,l);if(R!==gi)return R}D=Ro(v),v=v[15]}p=D}return d}(i,o,a,l,gi);if(v!==gi)return v}const p=Da(i,o,a,l,gi);if(p!==gi)return p}return xu(o,a,l,d)}function Da(i,o,a,l,d){const p=function Zl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty($)?i[$]:void 0;return"number"==typeof o?o>=0?255&o:Yl:o}(a);if("function"==typeof p){if(!vu(o,i,l))return l&Ke.Host?As(d,0,l):xu(o,a,l,d);try{const v=p(l);if(null!=v||l&Ke.Optional)return v;_e()}finally{fd()}}else if("number"==typeof p){let v=null,E=Cu(i,o),D=-1,S=l&Ke.Host?o[16][6]:null;for((-1===E||l&Ke.SkipSelf)&&(D=-1===E?Au(i,o):o[E+8],-1!==D&&ba(l,!1)?(v=o[1],E=er(D),o=_a(D,o)):E=-1);-1!==E;){const R=o[1];if(Mu(p,E,R.data)){const k=Dd(E,o,a,v,l,S);if(k!==gi)return k}D=o[E+8],-1!==D&&ba(l,o[1].data[E+8]===S)&&Mu(p,E,o)?(v=R,E=er(D),o=_a(D,o)):E=-1}}return d}function Dd(i,o,a,l,d,p){const v=o[1],E=v.data[i+8],R=xo(E,v,a,null==l?aa(E)&&ki:l!=v&&0!=(3&E.type),d&Ke.Host&&p===E);return null!==R?os(o,v,R,E):gi}function xo(i,o,a,l,d){const p=i.providerIndexes,v=o.data,E=1048575&p,D=i.directiveStart,R=p>>20,q=d?E+R:i.directiveEnd;for(let ee=l?E:E+R;ee<q;ee++){const we=v[ee];if(ee<D&&a===we||ee>=D&&we.type===a)return ee}if(d){const ee=v[D];if(ee&&fr(ee)&&ee.type===a)return D}return null}function os(i,o,a,l){let d=i[a];const p=o.data;if(function Ws(i){return i instanceof Ss}(d)){const v=d;v.resolving&&function Je(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ge(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}(p[a]));const E=wa(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?xn(v.injectImpl):null;vu(i,l,Ke.Default);try{d=i[a]=v.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function gd(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=$s(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==D&&xn(D),wa(E),v.resolving=!1,fd()}}return d}function Mu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function ba(i,o){return!(i&Ke.Self||i&Ke.Host&&o)}class Js{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Qs(this._tNode,this._lView,o,l,a)}}function Yl(){return new Js(bn(),Te())}function Ro(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Nu(i){return function Id(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(Zs(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(bn(),i)}const Ms="__parameters__";function ko(i,o,a){return Mn(()=>{const l=function Pu(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return E.annotation=v,E;function E(D,S,R){const k=D.hasOwnProperty(Ms)?D[Ms]:Object.defineProperty(D,Ms,{value:[]})[Ms];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class cn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),Sr(l,o)):o!==i&&o.push(l)}return o}function Oi(i,o){i.forEach(a=>Array.isArray(a)?Oi(a,o):o(a))}function Jl(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function mi(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}const Li={},nc="__NG_DI_FLAG__",Fu="ngTempTokenPath",rc=/\n/gm,pf="__source";let Uo;function Ns(i){const o=Uo;return Uo=i,o}function Cd(i,o=Ke.Default){if(void 0===Uo)throw new Ee(-203,!1);return null===Uo?ci(i,void 0,o):Uo.get(i,o&Ke.Optional?null:void 0,o)}function Nn(i,o=Ke.Default){return(function Qi(){return Or}()||Cd)(Q(i),o)}function b(i,o=Ke.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Nn(i,o)}function T(i){const o=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ee(900,!1);let d,p=Ke.Default;for(let v=0;v<l.length;v++){const E=l[v],D=L(E);"number"==typeof D?-1===D?d=E.token:p|=D:d=E}o.push(Nn(d,p))}else o.push(Nn(l))}return o}function M(i,o){return i[nc]=o,i.prototype[nc]=o,i}function L(i){return i[nc]}const je=M(ko("Optional"),8),_t=M(ko("SkipSelf"),4);let yf;function R0(i){yf=i}class Pa{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const If=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Un=(()=>((Un=Un||{})[Un.NONE=0]="NONE",Un[Un.HTML=1]="HTML",Un[Un.STYLE=2]="STYLE",Un[Un.SCRIPT=3]="SCRIPT",Un[Un.URL=4]="URL",Un[Un.RESOURCE_URL=5]="RESOURCE_URL",Un))();function cc(i){const o=function La(){const i=Te();return i&&i[12]}();return o?o.sanitize(Un.URL,i)||"":function so(i,o){const a=function wf(i){return i instanceof Pa&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?function Ps(i){return i instanceof Pa?i.changingThisBreaksApplicationSecurity:i}(i):function ju(i){return(i=String(i)).match(If)?i:"unsafe:"+i}(ye(i))}const qu=new cn("ENVIRONMENT_INITIALIZER"),Fa=new cn("INJECTOR",-1),jd=new cn("INJECTOR_DEF_TYPES");class Sf{get(o,a=Li){if(a===Li){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}function vv(...i){return{\u0275providers:$d(0,i)}}function $d(i,...o){const a=[],l=new Set;let d;return Oi(o,p=>{const v=p;gr(v,a,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&Mg(d,a),a}function Mg(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Oi(d,p=>{o.push(p)})}}function gr(i,o,a,l){if(!(i=Q(i)))return!1;let d=null,p=vs(i);const v=!p&&kt(i);if(p||v){if(v&&!v.standalone)return!1;d=i}else{const D=i.ngModule;if(p=vs(D),!p)return!1;d=D}const E=l.has(d);if(v){if(E)return!1;if(l.add(d),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of D)gr(S,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let S;l.add(d);try{Oi(p.imports,R=>{gr(R,o,a,l)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&Mg(S,o)}if(!E){const S=Ni(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Dt},{provide:jd,useValue:d,multi:!0},{provide:qu,useValue:()=>Nn(d),multi:!0})}const D=p.providers;null==D||E||Oi(D,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}const hc=fe({provide:String,useValue:fe});function fc(i){return null!==i&&"object"==typeof i&&hc in i}function Ho(i){return"function"==typeof i}const Ng=new cn("Set Injector scope."),_i={},_v={};let Cf;function zd(){return void 0===Cf&&(Cf=new Sf),Cf}class Go{}class pc extends Go{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mc(o,v=>this.processProvider(v)),this.records.set(Fa,Jr(void 0,this)),d.has("environment")&&this.records.set(Go,Jr(void 0,this));const p=this.records.get(Ng);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(jd.multi,Dt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Ns(this),l=xn(void 0);try{return o()}finally{Ns(a),xn(l)}}get(o,a=Li,l=Ke.Default){this.assertNotDestroyed();const d=Ns(this),p=xn(void 0);try{if(!(l&Ke.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function Lg(i){return"function"==typeof i||"object"==typeof i&&i instanceof cn}(o)&&en(o);E=D&&this.injectableDefInScope(D)?Jr(mr(o),_i):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Ke.Self?zd():this.parent).get(o,a=l&Ke.Optional&&a===Li?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Fu]=v[Fu]||[]).unshift(he(o)),d)throw v;return function J(i,o,a,l){const d=i[Fu];throw o[pf]&&d.unshift(o[pf]),i.message=function ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):he(E)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(rc,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Fu]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{xn(p),Ns(d)}}resolveInjectorInitializers(){const o=Ns(this),a=xn(void 0);try{const l=this.get(qu.multi,Dt,Ke.Self);for(const d of l)d()}finally{Ns(o),xn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(he(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(o){let a=Ho(o=Q(o))?o:Q(o&&o.provide);const l=function Af(i){return fc(i)?Jr(void 0,i.useValue):Jr(function kg(i,o,a){let l;if(Ho(i)){const d=Q(i);return Ni(d)||mr(d)}if(fc(i))l=()=>Q(i.useValue);else if(function Gd(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...T(i.deps||[]));else if(function Ua(i){return!(!i||!i.useExisting)}(i))l=()=>Nn(Q(i.useExisting));else{const d=Q(i&&(i.useClass||i.provide));if(!function gc(i){return!!i.deps}(i))return Ni(d)||mr(d);l=()=>new d(...T(i.deps))}return l}(i),_i)}(o);if(Ho(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Jr(void 0,_i,!0),d.factory=()=>T(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===_i&&(a.value=_v,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Og(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function mr(i){const o=en(i),a=null!==o?o.factory:Ni(i);if(null!==a)return a;if(i instanceof cn)throw new Ee(204,!1);if(i instanceof Function)return function Pg(i){const o=i.length;if(o>0)throw function eo(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Ee(204,!1);const a=function hr(i){const o=i&&(i[xi]||i[li]);if(o){const a=function Pr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ee(204,!1)}function Jr(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Fg(i){return!!i.\u0275providers}function mc(i,o){for(const a of i)Array.isArray(a)?mc(a,o):Fg(a)?mc(a.\u0275providers,o):o(a)}class xf{}class h{resolveComponentFactory(o){throw function Ev(i){const o=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let g=(()=>{class i{}return i.NULL=new h,i})();function w(){return A(bn(),Te())}function A(i,o){return new N(Tr(i,o))}let N=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=w,i})();function G(i){return i instanceof N?i.nativeElement:i}class Oe{}let Ye=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function wt(){const i=Te(),a=jt(bn().index,i);return(Xn(a)?a:i)[11]}(),i})(),pt=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Pn{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Vi=new Pn("14.2.4"),Wu={};function Tv(i){return i.ngOriginalError}class Pf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Tv(o);for(;a&&Tv(a);)a=Tv(a);return a||null}}const Cv=new Map;let qb=0;const H0="__ngContext__";function yr(i,o){Xn(o)?(i[H0]=o[20],function Kb(i){Cv.set(i[20],i)}(o)):i[H0]=o}function Va(i){return i instanceof Function?i():i}var ji=(()=>((ji=ji||{})[ji.Important=1]="Important",ji[ji.DashCase=2]="DashCase",ji))();function vr(i,o){return undefined(i,o)}function Zu(i){const o=i[3];return br(o)?o[3]:o}function wc(i){return Y0(i[13])}function Ec(i){return Y0(i[4])}function Y0(i){for(;null!==i&&!br(i);)i=i[4];return i}function Xr(i,o,a,l,d){if(null!=l){let p,v=!1;br(l)?p=l:Xn(l)&&(v=!0,l=l[0]);const E=Dn(l);0===i&&null!==a?null==d?J0(o,a,E):Dc(o,a,E,d||null,!0):1===i&&null!==a?Dc(o,a,E,d||null,!0):2===i?function Yg(i,o,a){const l=lr(i,o);l&&function ei(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,E,v):3===i&&o.destroyNode(E),null!=p&&function sT(i,o,a,l,d){const p=a[7];p!==Dn(a)&&Xr(o,i,l,p,d);for(let E=10;E<a.length;E++){const D=a[E];$i(D[1],D,i,o,l,p)}}(o,i,p,a,d)}}function ve(i,o,a){return i.createElement(o,a)}function ut(i,o){const a=i[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,yn(d,-1)),a.splice(l,1)}function Lf(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&ut(d,l),o>0&&(i[a-1][4]=l[4]);const p=mi(i,10+o);!function Ic(i,o){$i(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Rt(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&$i(i,o,a,3,null,null),function tn(i){let o=i[13];if(!o)return Kd(i[1],i);for(;o;){let a=null;if(Xn(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Xn(o)&&Kd(o[1],o),o=o[3];null===o&&(o=i),Xn(o)&&Kd(o[1],o),a=o&&o[4]}o=a}}(o)}}function Kd(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Ff(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Ss)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=d[p[v]],D=p[v+1];try{D.call(E)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function qg(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],E="function"==typeof v?v(o):Dn(o[v]),D=l[d=a[p+2]],S=a[p+3];"boolean"==typeof S?E.removeEventListener(a[p],D,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),p+=2}else{const v=l[d=a[p+1]];a[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)(0,l[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&br(o[3])){a!==o[3]&&ut(a,o);const l=o[19];null!==l&&l.detachView(i)}!function xv(i){Cv.delete(i[20])}(o)}}function Q0(i,o,a){return function Wg(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===st.None||d===st.Emulated)return null}return Tr(l,a)}(i,o.parent,a)}function Dc(i,o,a,l,d){i.insertBefore(o,a,l,d)}function J0(i,o,a){i.appendChild(o,a)}function X0(i,o,a,l,d){null!==l?Dc(i,o,a,l,d):J0(i,o,a)}function lr(i,o){return i.parentNode(o)}let kv=function tE(i,o,a){return 40&i.type?Tr(i,a):null};function _r(i,o,a,l){const d=Q0(i,l,o),p=o[11],E=function eE(i,o,a){return kv(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)X0(p,d,a[D],E,!1);else X0(p,d,a,E,!1)}function Kg(i,o){if(null!==o){const a=o.type;if(3&a)return Tr(o,i);if(4&a)return Zg(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Kg(i,l);{const d=i[o.index];return br(d)?Zg(-1,d):Dn(d)}}if(32&a)return vr(o,i)()||Dn(i[o.index]);{const l=Vf(i,o);return null!==l?Array.isArray(l)?l[0]:Kg(Zu(i[16]),l):Kg(i,o.next)}}return null}function Vf(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Zg(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Kg(l,d)}return o[7]}function Zd(i,o,a,l,d,p,v){for(;null!=a;){const E=l[a.index],D=a.type;if(v&&0===o&&(E&&yr(Dn(E),l),a.flags|=4),64!=(64&a.flags))if(8&D)Zd(i,o,a.child,l,d,p,!1),Xr(o,i,d,E,p);else if(32&D){const S=vr(a,l);let R;for(;R=S();)Xr(o,i,d,R,p);Xr(o,i,d,E,p)}else 16&D?nE(i,o,l,a,d,p):Xr(o,i,d,E,p);a=v?a.projectionNext:a.next}}function $i(i,o,a,l,d,p){Zd(a,l,i.firstChild,o,d,p,!1)}function nE(i,o,a,l,d,p){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Xr(o,i,d,D[S],p);else Zd(i,o,D,v[3],d,p,!0)}function Fv(i,o,a){i.setAttribute(o,"style",a)}function Bf(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Uv(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const Vv="ng-template";function Qg(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Uv(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Jg(i){return 4===i.type&&i.value!==Vv}function Bv(i,o,a){return o===(4!==i.type||a?i.value:Vv)}function jv(i,o,a){let l=4;const d=i.attrs||[],p=function aT(i){for(let o=0;o<i.length;o++)if(Zs(i[o]))return o;return i.length}(d);let v=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!Bv(i,D,a)||""===D&&1===o.length){if(oo(l))return!1;v=!0}}else{const S=8&l?D:o[++E];if(8&l&&null!==i.attrs){if(!Qg(i.attrs,S,a)){if(oo(l))return!1;v=!0}continue}const k=oT(8&l?"class":D,d,Jg(i),a);if(-1===k){if(oo(l))return!1;v=!0;continue}if(""!==S){let q;q=k>p?"":d[k+1].toLowerCase();const ee=8&l?q:null;if(ee&&-1!==Uv(ee,S,0)||2&l&&S!==q){if(oo(l))return!1;v=!0}}}}else{if(!v&&!oo(l)&&!oo(D))return!1;if(v&&oo(D))continue;v=!1,l=D|1&l}}return oo(l)||v}function oo(i){return 0==(1&i)}function oT(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function jf(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function Xg(i,o,a=!1){for(let l=0;l<o.length;l++)if(jv(i,o[l],a))return!0;return!1}function Qd(i,o){return i?":not("+o.trim()+")":o}function lT(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const E=i[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!oo(v)&&(o+=Qd(p,d),d=""),l=v,p=p||!oo(l);a++}return""!==d&&(o+=Qd(p,d)),o}const Nt={};function $v(i){Hv(Vt(),Te(),Kn()+i,!1)}function Hv(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&To(o,p,a)}else{const p=i.preOrderHooks;null!==p&&So(o,p,0,a)}Fr(a)}function Wv(i,o=null,a=null,l){const d=Kv(i,o,a,l);return d.resolveInjectorInitializers(),d}function Kv(i,o=null,a=null,l,d=new Set){const p=[a||Dt,vv(i)];return l=l||("object"==typeof i?void 0:he(i)),new pc(p,o||zd(),l||null,d)}let ja=(()=>{class i{static create(a,l){if(Array.isArray(a))return Wv({name:""},l,a,"");{const d=a.name??"";return Wv({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Li,i.NULL=new Sf,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>Nn(Fa)}),i.__NG_ELEMENT_ID__=-1,i})();function Xd(i,o=Ke.Default){const a=Te();return null===a?Nn(i,o):Qs(bn(),a,Q(i),o)}function Tc(){throw new Error("invalid")}function IE(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const v=i.data[p];ma(d),v.contentQueries(2,o[p],p)}}}function Dm(i,o,a,l,d,p,v,E,D,S,R){const k=o.blueprint.slice();return k[0]=d,k[2]=76|l,(null!==R||i&&1024&i[2])&&(k[2]|=1024),cu(k),k[3]=k[15]=i,k[8]=a,k[10]=v||i&&i[10],k[11]=E||i&&i[11],k[12]=D||i&&i[12]||null,k[9]=S||i&&i[9]||null,k[6]=p,k[20]=function Wb(){return qb++}(),k[21]=R,k[16]=2==o.type?i[16]:k,k}function qo(i,o,a,l,d){let p=i.data[o];if(null===p)p=function Wo(i,o,a,l,d){const p=mu(),v=da(),D=i.data[o]=function CE(i,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=D),null!==p&&(v?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(i,o,a,l,d),function gg(){return bt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const v=function bo(){const i=bt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Zr(p,!0),p}function Cc(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function bm(i,o,a){_u(o);try{const l=i.viewQuery;null!==l&&tp(1,l,a);const d=i.template;null!==d&&Ac(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&IE(i,o),i.staticViewQueries&&tp(2,i.viewQuery,a);const p=i.components;null!==p&&function ET(i,o){for(let a=0;a<o.length;a++)Nm(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,zs()}}function Zf(i,o,a,l){const d=o[2];if(128!=(128&d)){_u(o);try{cu(o),function Ul(i){return bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ac(i,o,a,2,l);const v=3==(3&d);if(v){const S=i.preOrderCheckHooks;null!==S&&To(o,S,null)}else{const S=i.preOrderHooks;null!==S&&So(o,S,0,null),md(o,0)}if(function g_(i){for(let o=wc(i);null!==o;o=Ec(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(512&d[2])&&yn(p,1),d[2]|=512}}}(o),function kE(i){for(let o=wc(i);null!==o;o=Ec(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Hs(l)&&Zf(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&IE(i,o),v){const S=i.contentCheckHooks;null!==S&&To(o,S)}else{const S=i.contentHooks;null!==S&&So(o,S,1),md(o,1)}!function EE(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Fr(~d);else{const p=d,v=a[++l],E=a[++l];mg(v,p),E(2,o[p])}}}finally{Fr(-1)}}(i,o);const E=i.components;null!==E&&function wT(i,o){for(let a=0;a<o.length;a++)Mm(i,o[a])}(o,E);const D=i.viewQuery;if(null!==D&&tp(2,D,l),v){const S=i.viewCheckHooks;null!==S&&To(o,S)}else{const S=i.viewHooks;null!==S&&So(o,S,2),md(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,yn(o[3],-1))}finally{zs()}}}function Ac(i,o,a,l,d){const p=Kn(),v=2&l;try{Fr(-1),v&&o.length>22&&Hv(i,o,22,!1),a(l,d)}finally{Fr(p)}}function DE(i,o,a){if(ru(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}function a_(i,o,a){!is()||(function DT(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Ys(a,o),yr(l,o);const v=a.initialInputs;for(let E=d;E<p;E++){const D=i.data[E],S=fr(D);S&&xm(o,a,D);const R=os(o,i,E,a);yr(R,o),null!==v&&RE(0,E-d,R,D,0,v),S&&(jt(a.index,o)[8]=R)}}(i,o,a,Tr(a,o)),128==(128&a.flags)&&function cr(i,o,a){const l=a.directiveStart,d=a.directiveEnd,p=a.index,v=function Vl(){return bt.lFrame.currentDirectiveIndex}();try{Fr(p);for(let E=l;E<d;E++){const D=i.data[E],S=o[E];yu(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&h_(D,S)}}finally{Fr(-1),yu(v)}}(i,o,a))}function Tm(i,o,a=Tr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],E=-1===v?a(o,i):i[v];i[d++]=E}}}function bE(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Sm(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Sm(i,o,a,l,d,p,v,E,D,S){const R=22+l,k=R+d,q=function TE(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Nt);return a}(R,k),ee="function"==typeof S?S():S;return q[1]={type:i,blueprint:q,template:a,queries:null,viewQuery:E,declTNode:o,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:ee,incompleteFirstPass:!1}}function l_(i,o,a,l){const d=m_(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&np(i).push(l,d.length-1))}function Cm(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function AE(i,o){const l=o.directiveEnd,d=i.data,p=o.attrs,v=[];let E=null,D=null;for(let S=o.directiveStart;S<l;S++){const R=d[S],k=R.inputs,q=null===p||Jg(o)?null:NE(k,p);v.push(q),E=Cm(k,S,E),D=Cm(R.outputs,S,D)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=D}function Yf(i,o){const a=jt(o,i);16&a[2]||(a[2]|=32)}function Am(i,o,a,l){let d=!1;if(is()){const p=function bT(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];Xg(a,v.selectors,!1)&&(d||(d=[]),Cs(Ys(a,o),i,v.type),fr(v)?(xE(i,a),d.unshift(v)):d.push(v))}return d}(i,o,a),v=null===l?null:{"":-1};if(null!==p){d=!0,f_(a,i.data.length,p.length);for(let R=0;R<p.length;R++){const k=p[R];k.providersResolver&&k.providersResolver(k)}let E=!1,D=!1,S=Cc(i,o,p.length,null);for(let R=0;R<p.length;R++){const k=p[R];a.mergedAttrs=ya(a.mergedAttrs,k.hostAttrs),p_(i,a,o,S,k),ME(S,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const q=k.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!D&&(q.ngOnChanges||q.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),D=!0),S++}AE(i,a)}v&&function TT(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Ee(-301,!1);l.push(o[d],p)}}}(a,l,v)}return a.mergedAttrs=ya(a.mergedAttrs,a.attrs),d}function ih(i,o,a,l,d,p){const v=p.hostBindings;if(v){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const D=~o.index;(function Jf(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=D&&E.push(D),E.push(l,d,v)}}function h_(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function xE(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function ME(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;fr(o)&&(a[""]=i)}}function f_(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function p_(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=Ni(d.type)),v=new Ss(p,fr(d),Xd);i.blueprint[l]=v,a[l]=v,ih(i,o,0,l,Cc(i,a,d.hostVars,Nt),d)}function xm(i,o,a){const l=Tr(o,i),d=bE(a),p=i[10],v=Xf(i,Dm(i,d,null,a.onPush?32:16,l,o,p,p.createRenderer(l,a),null,null,null));i[o.index]=v}function ao(i,o,a,l,d,p){const v=Tr(i,o);!function uo(i,o,a,l,d,p,v){if(null==p)i.removeAttribute(o,d,a);else{const E=null==v?ye(p):v(p,l||"",d);i.setAttribute(o,d,E,a)}}(o[11],v,p,i.value,a,l,d)}function RE(i,o,a,l,d,p){const v=p[o];if(null!==v){const E=l.setInput;for(let D=0;D<v.length;){const S=v[D++],R=v[D++],k=v[D++];null!==E?l.setInput(a,k,S,R):a[R]=k}}}function NE(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function sh(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function Mm(i,o){const a=jt(o,i);if(Hs(a)){const l=a[1];48&a[2]?Zf(l,a,l.template,a[8]):a[5]>0&&Rm(a)}}function Rm(i){for(let l=wc(i);null!==l;l=Ec(l))for(let d=10;d<l.length;d++){const p=l[d];if(Hs(p))if(512&p[2]){const v=p[1];Zf(v,p,v.template,p[8])}else p[5]>0&&Rm(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=jt(a[l],i);Hs(d)&&d[5]>0&&Rm(d)}}function Nm(i,o){const a=jt(o,i),l=a[1];(function ST(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),bm(l,a,a[8])}function Xf(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function xc(i){for(;i;){i[2]|=32;const o=Zu(i);if(ef(i)&&!o)return i;i=o}return null}function ep(i,o,a,l=!0){const d=o[10];d.begin&&d.begin();try{Zf(i,o,i.template,a)}catch(v){throw l&&v_(o,v),v}finally{d.end&&d.end()}}function tp(i,o,a){ma(0),o(i,a)}function m_(i){return i[7]||(i[7]=[])}function np(i){return i.cleanup||(i.cleanup=[])}function v_(i,o){const a=i[9],l=a?a.get(Pf,null):null;l&&l.handleError(o)}function Ga(i,o,a,l,d){for(let p=0;p<a.length;){const v=a[p++],E=a[p++],D=o[v],S=i.data[v];null!==S.setInput?S.setInput(D,d,l,E):D[E]=d}}function Ko(i,o,a){const l=function Kr(i,o){return Dn(o[i])}(o,i);!function nT(i,o,a){i.setValue(o,a)}(i[11],l,a)}function rp(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?p=E:1==p?d=pe(d,E):2==p&&(l=pe(l,E+": "+o[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function ip(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(Dn(p)),br(p))for(let E=10;E<p.length;E++){const D=p[E],S=D[1].firstChild;null!==S&&ip(D[1],D,S,l)}const v=a.type;if(8&v)ip(i,o,a.child,l);else if(32&v){const E=vr(a,o);let D;for(;D=E();)l.push(D)}else if(16&v){const E=Vf(o,a);if(Array.isArray(E))l.push(...E);else{const D=Zu(o[16]);ip(D[1],D,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class oh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return ip(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(br(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Lf(o,l),mi(a,l))}this._attachedToViewContainer=!1}Rt(this._lView[1],this._lView)}onDestroy(o){l_(this._lView[1],this._lView,null,o)}markForCheck(){xc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ep(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Yu(i,o){$i(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=o}}class Pm extends oh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ep(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Ii extends g{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=kt(o);return new sp(a,this.ngModule)}}function __(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class ah{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Wu,l);return d!==Wu||a===Wu?d:this.parentInjector.get(o,a,l)}}class sp extends xf{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function cT(i){return i.map(lT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return __(this.componentDef.inputs)}get outputs(){return __(this.componentDef.outputs)}create(o,a,l,d){let p=(d=d||this.ngModule)instanceof Go?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new ah(o,p):o,E=v.get(Oe,null);if(null===E)throw new Ee(407,!1);const D=v.get(pt,null),S=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",k=l?function u_(i,o,a){return i.selectRootElement(o,a===st.ShadowDom)}(S,l,this.componentDef.encapsulation):ve(E.createRenderer(null,this.componentDef),R,function LE(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),q=this.componentDef.onPush?288:272,ee=Sm(0,null,null,1,0,null,null,null,null,null),we=Dm(null,ee,null,q,null,null,E,S,D,v,null);let Le,Ge;_u(we);try{const et=function UE(i,o,a,l,d,p){const v=a[1];a[22]=i;const D=qo(v,22,2,"#host",null),S=D.mergedAttrs=o.hostAttrs;null!==S&&(rp(D,S,!0),null!==i&&(Ao(d,i,S),null!==D.classes&&Bf(d,i,D.classes),null!==D.styles&&Fv(d,i,D.styles)));const R=l.createRenderer(i,o),k=Dm(a,bE(o),null,o.onPush?32:16,a[22],D,l,R,p||null,null,null);return v.firstCreatePass&&(Cs(Ys(D,a),v,o.type),xE(v,D),f_(D,a.length,1)),Xf(a,k),a[22]=k}(k,this.componentDef,we,E,S);if(k)if(l)Ao(S,k,["ng-version",Vi.full]);else{const{attrs:yt,classes:xe}=function em(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!oo(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);yt&&Ao(S,k,yt),xe&&xe.length>0&&Bf(S,k,xe.join(" "))}if(Ge=Do(ee,22),void 0!==a){const yt=Ge.projection=[];for(let xe=0;xe<this.ngContentSelectors.length;xe++){const Ze=a[xe];yt.push(null!=Ze?Array.from(Ze):null)}}Le=function MT(i,o,a,l){const d=a[1],p=function d_(i,o,a){const l=bn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),p_(i,l,o,Cc(i,o,1,null),a),AE(i,l));const d=os(o,i,l.directiveStart,l);yr(d,o);const p=Tr(l,o);return p&&yr(p,o),d}(d,a,o);if(i[8]=a[8]=p,null!==l)for(const E of l)E(p,o);if(o.contentQueries){const E=bn();o.contentQueries(1,p,E.directiveStart)}const v=bn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Fr(v.index),ih(a[1],v,0,v.directiveStart,v.directiveEnd,o),h_(o,p)),p}(et,this.componentDef,we,[km]),bm(ee,we,null)}finally{zs()}return new xT(this.componentType,Le,A(Ge,we),we,Ge)}}class xT extends class wv{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Pm(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const p=this._rootLView;Ga(p[1],p,d,o,a),Yf(p,this._tNode.index)}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function km(){const i=bn();Wl(Te()[1],i)}let uh=null;function Qe(){if(!uh){const i=on.Symbol;if(i&&i.iterator)uh=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(uh=l)}}}return uh}function op(i){return!!Re(i)&&(Array.isArray(i)||!(i instanceof Map)&&Qe()in i)}function Re(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ri(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Lm(i,o,a,l){const d=Te();return ri(d,Gs(),o)&&(Vt(),ao(pn(),d,i,o,a,l)),Lm}function ch(i,o,a,l,d,p){const E=function Rc(i,o,a,l){const d=ri(i,o,a);return ri(i,o+1,l)||d}(i,function Pi(){return bt.lFrame.bindingIndex}(),a,d);return function ss(i){const o=bt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2),E?o+ye(a)+l+ye(d)+p:Nt}function hh(i,o,a,l,d,p,v,E){const D=Te(),S=Vt(),R=i+22,k=S.firstCreatePass?function NT(i,o,a,l,d,p,v,E,D){const S=o.consts,R=qo(o,i,4,v||null,pi(S,E));Am(o,a,R,pi(S,D)),Wl(o,R);const k=R.tViews=Sm(2,R,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),k.queries=o.queries.embeddedTView(R)),R}(R,S,D,o,a,l,d,p,v):S.data[R];Zr(k,!1);const q=D[11].createComment("");_r(S,D,q,k),yr(q,D),Xf(D,D[R]=sh(q,D,q,k)),Al(k)&&a_(S,D,k),null!=v&&Tm(D,k,E)}function I_(i){return rs(function Fl(){return bt.lFrame.contextLView}(),22+i)}function Di(i,o,a){const l=Te();return ri(l,Gs(),o)&&function fs(i,o,a,l,d,p,v,E){const D=Tr(o,a);let R,S=o.inputs;!E&&null!=S&&(R=S[l])?(Ga(i,a,R,l,d),aa(o)&&Yf(a,o.index)):3&o.type&&(l=function IT(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=v?v(d,o.value||"",l):d,p.setProperty(D,l,d))}(Vt(),pn(),l,i,o,l[11],a,!1),Di}function cp(i,o,a,l,d){const v=d?"class":"style";Ga(i,a,o.inputs[v],v,l)}function dp(i,o,a,l){const d=Te(),p=Vt(),v=22+i,E=d[11],D=d[v]=ve(E,o,function Eu(){return bt.lFrame.currentNamespace}()),S=p.firstCreatePass?function HE(i,o,a,l,d,p,v){const E=o.consts,S=qo(o,i,2,d,pi(E,p));return Am(o,a,S,pi(E,v)),null!==S.attrs&&rp(S,S.attrs,!1),null!==S.mergedAttrs&&rp(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,p,d,0,o,a,l):p.data[v];Zr(S,!0);const R=S.mergedAttrs;null!==R&&Ao(E,D,R);const k=S.classes;null!==k&&Bf(E,D,k);const q=S.styles;return null!==q&&Fv(E,D,q),64!=(64&S.flags)&&_r(p,d,D,S),0===function hu(){return bt.lFrame.elementDepthCount}()&&yr(D,d),function fu(){bt.lFrame.elementDepthCount++}(),Al(S)&&(a_(p,d,S),DE(p,S,d)),null!==l&&Tm(d,S),dp}function ho(){let i=bn();da()?ha():(i=i.parent,Zr(i,!1));const o=i;!function kl(){bt.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(Wl(a,i),ru(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function bu(i){return 0!=(16&i.flags)}(o)&&cp(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function vd(i){return 0!=(32&i.flags)}(o)&&cp(a,o,Te(),o.stylesWithoutHost,!1),ho}function hp(i,o,a,l){return dp(i,o,a,l),ho(),hp}function kc(i,o,a){const l=Te(),d=Vt(),p=i+22,v=d.firstCreatePass?function se(i,o,a,l,d){const p=o.consts,v=pi(p,l),E=qo(o,i,8,"ng-container",v);return null!==v&&rp(E,v,!0),Am(o,a,E,pi(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,l,o,a):d.data[p];Zr(v,!0);const E=l[p]=l[11].createComment("");return _r(d,l,E,v),yr(E,l),Al(v)&&(a_(d,l,v),DE(d,v,l)),null!=a&&Tm(l,v),kc}function Hi(){let i=bn();const o=Vt();return da()?ha():(i=i.parent,Zr(i,!1)),o.firstCreatePass&&(Wl(o,i),ru(i)&&o.queries.elementEnd(i)),Hi}function fh(){return Te()}function Zo(i){return!!i&&"function"==typeof i.then}function zE(i){return!!i&&"function"==typeof i.subscribe}const nl=zE;function Vm(i,o,a,l){const d=Te(),p=Vt(),v=bn();return function qE(i,o,a,l,d,p,v,E){const D=Al(l),R=i.firstCreatePass&&np(i),k=o[8],q=m_(o);let ee=!0;if(3&l.type||E){const Ge=Tr(l,o),et=E?E(Ge):Ge,yt=q.length,xe=E?un=>E(Dn(un[l.index])):l.index;let Ze=null;if(!E&&D&&(Ze=function PT(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===l){const E=o[7],D=d[p+2];return E.length>D?E[D]:null}"string"==typeof v&&(p+=2)}return null}(i,o,d,l.index)),null!==Ze)(Ze.__ngLastListenerFn__||Ze).__ngNextListenerFn__=p,Ze.__ngLastListenerFn__=p,ee=!1;else{p=D_(l,o,k,p,!1);const un=a.listen(et,d,p);q.push(p,un),R&&R.push(d,xe,yt,yt+1)}}else p=D_(l,o,k,p,!1);const we=l.outputs;let Le;if(ee&&null!==we&&(Le=we[d])){const Ge=Le.length;if(Ge)for(let et=0;et<Ge;et+=2){const Hn=o[Le[et]][Le[et+1]].subscribe(p),In=q.length;q.push(p,Hn),R&&R.push(d,l.index,In,-(In+1))}}}(p,d,d[11],v,i,o,0,l),Vm}function bi(i,o,a,l){try{return!1!==a(l)}catch(d){return v_(i,d),!1}}function D_(i,o,a,l,d){return function p(v){if(v===Function)return l;xc(2&i.flags?jt(i.index,o):o);let D=bi(o,0,l,v),S=p.__ngNextListenerFn__;for(;S;)D=bi(o,0,S,v)&&D,S=S.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function rl(i=1){return function qs(i){return(bt.lFrame.contextLView=function wu(i,o){for(;i>0;)o=o[15],i--;return o}(i,bt.lFrame.contextLView))[8]}(i)}function nI(i,o=""){const a=Te(),l=Vt(),d=i+22,p=l.firstCreatePass?qo(l,d,1,o,null):l.data[d],v=a[d]=function ds(i,o){return i.createText(o)}(a[11],o);_r(l,a,v,p),Zr(p,!1)}function yp(i,o,a){const l=Te(),d=function up(i,o,a,l){return ri(i,Gs(),a)?o+ye(a)+l:Nt}(l,i,o,a);return d!==Nt&&Ko(l,Kn(),d),yp}function R_(i,o,a,l,d){const p=Te(),v=ch(p,i,o,a,l,d);return v!==Nt&&Ko(p,Kn(),v),R_}const ll=void 0;var mI=["en",[["a","p"],["AM","PM"],ll],[["AM","PM"],ll,ll],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ll,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ll,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ll,"{1} 'at' {0}",ll],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Eh(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Vc={};function H_(i){const o=function UT(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=wp(o);if(a)return a;const l=o.split("-")[0];if(a=wp(l),a)return a;if("en"===l)return mI;throw new Ee(701,!1)}function Cn(i){return H_(i)[Et.PluralCase]}function wp(i){return i in Vc||(Vc[i]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[i]),Vc[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Bc="en-US";let jc=Bc;class hl{}class wr{}function ow(i,o){return new ey(i,o??null)}class ey extends hl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ii(this);const l=Dr(o);this._bootstrapComponents=Va(l.bootstrap),this._r3Injector=Kv(o,a,[{provide:hl,useValue:this},{provide:g,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xo extends wr{constructor(o){super(),this.moduleType=o}create(o){return new ey(this.moduleType,o)}}class $I extends hl{constructor(o,a,l){super(),this.componentFactoryResolver=new Ii(this),this.instance=null;const d=new pc([...o,{provide:hl,useValue:this},{provide:g,useValue:this.componentFactoryResolver}],a||zd(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function aw(i,o,a=null){return new $I(i,o,a).injector}let HI=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=$d(0,a.type),d=l.length>0?aw([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Zt({token:i,providedIn:"environment",factory:()=>new i(Nn(Go))}),i})();function xp(i){i.getStandaloneInjector=o=>o.get(HI).getOrCreateStandaloneInjector(i)}function fw(i,o,a,l,d,p){const v=o+a;return ri(i,v,d)?function lo(i,o,a){return i[o]=a}(i,v+1,p?l.call(p,d):l(d)):function Np(i,o){const a=i[o];return a===Nt?void 0:a}(i,v+1)}function gw(i,o){const a=Vt();let l;const d=i+22;a.firstCreatePass?(l=function Ki(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=Ni(l.type)),v=xn(Xd);try{const E=wa(!1),D=p();return wa(E),function $E(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Te(),d,D),D}finally{xn(v)}}function kp(i,o,a){const l=i+22,d=Te(),p=rs(d,l);return function Rh(i,o){return i[1].data[o].pure}(d,l)?fw(d,function Tn(){const i=bt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function mw(i){return o=>{setTimeout(i,void 0,o)}}const Si=class qc extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,p=a||(()=>null),v=l;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),p=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(p=mw(p),d&&(d=mw(d)),v&&(v=mw(v)));const E=super.subscribe({next:d,error:p,complete:v});return o instanceof te.w0&&o.add(E),E}};function YI(){return this._results[Qe()]()}class ea{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Qe(),l=ea.prototype;l[a]||(l[a]=YI)}get changes(){return this._changes||(this._changes=new Si)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Sr(o);(this._changesDetected=!function Ou(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nh=(()=>{class i{}return i.__NG_ELEMENT_ID__=yS,i})();const gS=Nh,mS=class extends gS{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Dm(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(l)),bm(l,d,o),new oh(d)}};function yS(){return iy(bn(),Te())}function iy(i,o){return 4&i.type?new mS(o,i,A(i,o)):null}let Wc=(()=>{class i{}return i.__NG_ELEMENT_ID__=QI,i})();function QI(){return ml(bn(),Te())}const vS=Wc,yw=class extends vS{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return A(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const o=Au(this._hostTNode,this._hostLView);if(wd(o)){const a=_a(o,this._hostLView),l=er(o);return new Js(a[1].data[l+8],a)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=JI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const v=o.createEmbeddedView(a||{},p);return this.insert(v,d),v}createComponent(o,a,l,d,p){const v=o&&!function Oo(i){return"function"==typeof i}(o);let E;if(v)E=a;else{const k=a||{};E=k.index,l=k.injector,d=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const D=v?o:new sp(kt(o)),S=l||this.parentInjector;if(!p&&null==D.ngModule){const q=(v?S:this.parentInjector).get(Go,null);q&&(p=q)}const R=D.create(S,d,void 0,p);return this.insert(R.hostView,E),R}insert(o,a){const l=o._lView,d=l[1];if(function lu(i){return br(i[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const k=l[3],q=new yw(k,k[6],k[3]);q.detach(q.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function iT(i,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],Jl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Ba(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(d,l,v,p);const E=Zg(p,v),D=l[11],S=lr(D,v[7]);return null!==S&&function zg(i,o,a,l,d,p){l[0]=d,l[6]=o,$i(i,l,a,1,d,p)}(d,v[6],D,l,S,E),o.attachToViewContainerRef(),Jl(sy(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=JI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Lf(this._lContainer,a);l&&(mi(sy(this._lContainer),a),Rt(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Lf(this._lContainer,a);return l&&null!=mi(sy(this._lContainer),a)?new oh(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function JI(i){return i[8]}function sy(i){return i[8]||(i[8]=[])}function ml(i,o){let a;const l=o[i.index];if(br(l))a=l;else{let d;if(8&i.type)d=Dn(l);else{const p=o[11];d=p.createComment("");const v=Tr(i,o);Dc(p,lr(p,v),d,function Qu(i,o){return i.nextSibling(o)}(p,v),!1)}o[i.index]=a=sh(l,o,d,i),Xf(o,a)}return new yw(a,i,o)}class vw{constructor(o){this.queryList=o,this.matches=null}clone(){return new vw(this.queryList)}setDirty(){this.queryList.setDirty()}}class oy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new oy(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==dy(o,a).matches&&this.queries[a].setDirty()}}class eD{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class _w{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new _w(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Lp{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Lp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,Rr(a,p)),this.matchTNodeWithReadOption(o,a,xo(a,o,p,!1,!1))}else l===Nh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,xo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===N||d===Wc||d===Nh&&4&a.type)this.addMatch(a.index,-2);else{const p=xo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Rr(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function ES(i,o,a,l){return-1===a?function wS(i,o){return 11&i.type?A(i,o):4&i.type?iy(i,o):null}(o,i):-2===a?function IS(i,o,a){return a===N?A(o,i):a===Nh?iy(o,i):a===Wc?ml(o,i):void 0}(i,o,l):os(i,i[1],a,o)}function tD(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=i.data,v=a.matches,E=[];for(let D=0;D<v.length;D+=2){const S=v[D];E.push(S<0?null:ES(o,p[S],v[D+1],a.metadata.read))}d.matches=E}return d.matches}function ay(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const v=tD(i,o,d,a);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)l.push(v[E/2]);else{const S=p[E+1],R=o[-D];for(let k=10;k<R.length;k++){const q=R[k];q[17]===q[3]&&ay(q[1],q,S,l)}if(null!==R[9]){const k=R[9];for(let q=0;q<k.length;q++){const ee=k[q];ay(ee[1],ee,S,l)}}}}}return l}function nD(i){const o=Te(),a=Vt(),l=Bl();ma(l+1);const d=dy(a,l);if(i.dirty&&function uu(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?ay(a,o,l,[]):tD(a,o,d,l);i.reset(p,G),i.notifyOnChanges()}return!0}return!1}function rD(i,o,a,l){const d=Vt();if(d.firstCreatePass){const p=bn();(function Ph(i,o,a){null===i.queries&&(i.queries=new _w),i.queries.track(new Lp(o,a))})(d,new eD(o,a,l),p.index),function cy(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function ly(i,o,a){const l=new ea(4==(4&a));l_(i,o,l,l.destroy),null===o[19]&&(o[19]=new oy),o[19].queries.push(new vw(l))}(d,Te(),a)}function ww(){return function Ew(i,o){return i[19].queries[o].queryList}(Te(),Bl())}function dy(i,o){return i.queries.getByIndex(o)}function hy(i,o){return iy(i,o)}function Dy(...i){}const bD=new cn("Application Initializer");let jh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Dy,this.reject=Dy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Zo(p))a.push(p);else if(nl(p)){const v=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Nn(bD,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Bp=new cn("AppId",{providedIn:"root",factory:function by(){return`${vl()}${vl()}${vl()}`}});function vl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ty=new cn("Platform Initializer"),NS=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),TD=new cn("appBootstrapListener"),SD=new cn("AnimationModuleType");let kS=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Sy=new cn("LocaleId",{providedIn:"root",factory:()=>b(Sy,Ke.Optional|Ke.SkipSelf)||function Aw(){return typeof $localize<"u"&&$localize.locale||Bc}()}),xw=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Mw{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let AD=(()=>{class i{compileModuleSync(a){return new Xo(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Va(Dr(a).declarations).reduce((v,E)=>{const D=kt(E);return D&&v.push(new sp(D)),v},[]);return new Mw(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const $h=(()=>Promise.resolve(0))();function Cy(i){typeof Zone>"u"?$h.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Fs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Si(!1),this.onMicrotaskEmpty=new Si(!1),this.onStable=new Si(!1),this.onError=new Si(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Hh(){let i=on.requestAnimationFrame,o=on.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function kw(i){const o=()=>{!function Pw(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(on,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,$p(i),i.isCheckStableRunning=!0,jp(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),$p(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,v,E)=>{try{return RD(i),a.invokeTask(d,p,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),ND(i)}},onInvoke:(a,l,d,p,v,E,D)=>{try{return RD(i),a.invoke(d,p,v,E,D)}finally{i.shouldCoalesceRunChangeDetection&&o(),ND(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,$p(i),jp(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fs.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Fs.isInAngularZone())throw new Ee(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,OS,Dy,Dy);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const OS={};function jp(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function $p(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function RD(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ND(i){i._nesting--,jp(i)}class Ow{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Si,this.onMicrotaskEmpty=new Si,this.onStable=new Si,this.onError=new Si}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Ay=new cn(""),PD=new cn("");let xy,kD=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xy||(function LD(i){xy=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fs.assertNotInAngularZone(),Cy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cy(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Nn(Fs),Nn(OD),Nn(PD))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),OD=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return xy?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ja=null;const Lw=new cn("AllowMultipleToken"),Fw=new cn("PlatformDestroyListeners");class Vw{constructor(o,a){this.name=o,this.token=a}}function Ry(i,o,a=[]){const l=`Platform: ${o}`,d=new cn(l);return(p=[])=>{let v=jw();if(!v||v.injector.get(Lw,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function Bw(i){if(Ja&&!Ja.get(Lw,!1))throw new Ee(400,!1);Ja=i;const o=i.get(Py);(function My(i){const o=i.get(Ty,null);o&&o.forEach(a=>a())})(i)}(function Ny(i=[],o){return ja.create({name:o,providers:[{provide:Ng,useValue:"platform"},{provide:Fw,useValue:new Set([()=>Ja=null])},...i]})}(E,l))}return function FD(i){const o=jw();if(!o)throw new Ee(401,!1);return o}()}}function jw(){return Ja?.get(Py)??null}let Py=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function ky(i,o){let a;return a="noop"===i?new Ow:("zone.js"===i?void 0:i)||new Fs(o),a}(l?.ngZone,function UD(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:Fs,useValue:d}];return d.run(()=>{const v=ja.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(v),D=E.injector.get(Pf,null);if(!D)throw new Ee(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{D.handleError(R)}});E.onDestroy(()=>{Gh(this._modules,E),S.unsubscribe()})}),function VD(i,o,a){try{const l=a();return Zo(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(D,d,()=>{const S=E.injector.get(jh);return S.runInitializers(),S.donePromise.then(()=>(function Km(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(jc=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Sy,Bc)||Bc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=Oy({},l);return function LS(i,o,a){const l=new Xo(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Ly);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ee(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Fw,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Nn(ja))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Oy(i,o){return Array.isArray(o)?o.reduce(Oy,i):{...i,...o}}let Ly=(()=>{class i{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new P.y(E=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Fs.assertNotInAngularZone(),Cy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{D.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(p,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof xf;if(!this._injector.get(jh).done)throw!d&&Mi(a),new Ee(405,false);let v;v=d?a:this._injector.get(g).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function Uw(i){return i.isBoundToModule}(v)?void 0:this._injector.get(hl),S=v.create(ja.NULL,[],l||v.selector,E),R=S.location.nativeElement,k=S.injector.get(Ay,null);return k?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),Gh(this.components,S),k?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Gh(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(TD,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Gh(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ee(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Nn(Fs),Nn(Go),Nn(Pf))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Gh(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let Yc=!0,Hw=!1;function Gw(){return Hw=!0,Yc}function VS(){if(Hw)throw new Error("Cannot enable prod mode after platform setup.");Yc=!1}let BS=(()=>{class i{}return i.__NG_ELEMENT_ID__=zw,i})();function zw(i){return function jS(i,o,a){if(aa(i)&&!a){const l=jt(i.index,o);return new oh(l,l)}return 47&i.type?new oh(o[16],o):null}(bn(),Te(),16==(16&i))}class jy{constructor(){}supports(o){return op(o)}create(o){return new $y(o)}}const zD=(i,o)=>o;class $y{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||zD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<WD(l,d,p)?a:l,E=WD(v,d,p),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const S=E-d,R=D-d;if(S!=R){for(let q=0;q<S;q++){const ee=q<p.length?p[q]:p[q]=0,we=ee+q;R<=we&&we<S&&(p[q]=ee+1)}p[v.previousIndex]=R-S}}E!==D&&o(v,E,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!op(o))throw new Ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],v=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,E),l=!0),a=a._next}else d=0,function de(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Qe()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new zS(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new qD),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class zS{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class qD{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new qS,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function WD(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Zw{constructor(){}supports(o){return o instanceof Map||Re(o)}create(){return new Yw}}class Yw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Re(o)))throw new Ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new KD(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class KD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hy(){return new qp([new jy])}let qp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Hy()),deps:[[i,new _t,new je]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ee(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:Hy}),i})();function Wp(){return new Kp([new Zw])}let Kp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Wp()),deps:[[i,new _t,new je]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Ee(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:Wp}),i})();const qh=Ry(null,"core",[]);let Qw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Nn(Ly))},i.\u0275mod=rt({type:i}),i.\u0275inj=Lt({}),i})();function KS(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,Ce,O)=>{O.d(Ce,{Z:()=>Ee});var m=O(2090),te=O(4859),P=O(9681),oe=O(1877);class re{constructor(ye,ge){this._delegate=ye,this.firebase=ge,(0,P._addComponent)(ye,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ye,ge=P._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(ye);return!nt.isInitialized()&&"EXPLICIT"===(null===(Je=nt.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:ge})}_removeServiceInstance(ye,ge=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(ge)}_addComponent(ye){(0,P._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,P._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Xe=function he(Xe){const ye={},ge={__esModule:!0,initializeApp:function Ae(Be,V={}){const me=P.initializeApp(Be,V);if((0,m.r3)(ye,me.name))return ye[me.name];const Y=new Xe(me,ge);return ye[me.name]=Y,Y},app:nt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function De(Be){const V=Be.name,me=V.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const Y=(X=nt())=>{if("function"!=typeof X[me])throw le.create("invalid-app-argument",{appName:V});return X[me]()};void 0!==Be.serviceProps&&(0,m.ZB)(Y,Be.serviceProps),ge[me]=Y,Xe.prototype[me]=function(...X){return this._getService.bind(this,V).apply(this,Be.multipleInstances?X:[])}}return"PUBLIC"===Be.type?ge[me]:null},removeApp:function Je(Be){delete ye[Be]},useAsService:function Ve(Be,V){return"serverAuth"===V?null:V},modularAPIs:P}};function nt(Be){if(!(0,m.r3)(ye,Be=Be||P._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Be});return ye[Be]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function _e(){return Object.keys(ye).map(Be=>ye[Be])}}),nt.App=Xe,ge}(re);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ye(ge){(0,m.ZB)(Xe,ge)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Xe}(),j=new oe.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ee=B;!function Me(Xe){(0,P.registerVersion)("@firebase/app-compat","0.1.34",Xe)}()},9681:(ot,Ce,O)=>{O.r(Ce),O.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>vs,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Kt,_addOrOverwriteComponent:()=>Zt,_apps:()=>nn,_clearComponents:()=>sa,_components:()=>An,_getProvider:()=>Lt,_registerComponent:()=>Er,_removeServiceInstance:()=>en,deleteApp:()=>wo,getApp:()=>kr,getApps:()=>li,initializeApp:()=>xi,onLog:()=>Qi,registerVersion:()=>Or,setLogLevel:()=>xn});var m=O(5861),te=O(4859),P=O(1877),oe=O(2090),re=O(8766);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(W=>{if(function le(U){return"VERSION"===U.getComponent()?.type}(W)){const be=W.getImmediate();return`${be.library}/${be.version}`}return null}).filter(W=>W).join(" ")}}const he="@firebase/app",B=new P.Yd("@firebase/app"),Bt="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,An=new Map;function Kt(U,H){try{U.container.addComponent(H)}catch(W){B.debug(`Component ${H.name} failed to register with FirebaseApp ${U.name}`,W)}}function Zt(U,H){U.container.addOrOverwriteComponent(H)}function Er(U){const H=U.name;if(An.has(H))return B.debug(`There were multiple attempts to register component ${H}.`),!1;An.set(H,U);for(const W of nn.values())Kt(W,U);return!0}function Lt(U,H){const W=U.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),U.container.getProvider(H)}function en(U,H,W=Bt){Lt(U,H).clearInstance(W)}function sa(){An.clear()}const hr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pr{constructor(H,W,be){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},W),this._name=W.name,this._automaticDataCollectionEnabled=W.automaticDataCollectionEnabled,this._container=be,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const vs="9.10.0";function xi(U,H={}){"object"!=typeof H&&(H={name:H});const W=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},H),be=W.name;if("string"!=typeof be||!be)throw hr.create("bad-app-name",{appName:String(be)});const Ue=nn.get(be);if(Ue){if((0,oe.vZ)(U,Ue.options)&&(0,oe.vZ)(W,Ue.config))return Ue;throw hr.create("duplicate-app",{appName:be})}const rt=new te.H0(be);for(const Qt of An.values())rt.addComponent(Qt);const ln=new Pr(U,W,rt);return nn.set(be,ln),ln}function kr(U=Bt){const H=nn.get(U);if(!H)throw hr.create("no-app",{appName:U});return H}function li(){return Array.from(nn.values())}function wo(U){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(function*(U){const H=U.name;nn.has(H)&&(nn.delete(H),yield Promise.all(U.container.getProviders().map(W=>W.delete())),U.isDeleted=!0)})).apply(this,arguments)}function Or(U,H,W){var be;let Ue=null!==(be=ze[U])&&void 0!==be?be:U;W&&(Ue+=`-${W}`);const rt=Ue.match(/\s|\//),ln=H.match(/\s|\//);if(rt||ln){const Qt=[`Unable to register library "${Ue}" with version "${H}":`];return rt&&Qt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),rt&&ln&&Qt.push("and"),ln&&Qt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void B.warn(Qt.join(" "))}Er(new te.wA(`${Ue}-version`,()=>({library:Ue,version:H}),"VERSION"))}function Qi(U,H){if(null!==U&&"function"!=typeof U)throw hr.create("invalid-log-argument");(0,P.Am)(U,H)}function xn(U){(0,P.Ub)(U)}const Mn="firebase-heartbeat-store";let Gn=null;function hn(){return Gn||(Gn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(U,H)=>{0===H&&U.createObjectStore(Mn)}}).catch(U=>{throw hr.create("idb-open",{originalErrorMessage:U.message})})),Gn}function st(){return(st=(0,m.Z)(function*(U){var H;try{return(yield hn()).transaction(Mn).objectStore(Mn).get(Qn(U))}catch(W){if(W instanceof oe.ZR)B.warn(W.message);else{const be=hr.create("idb-get",{originalErrorMessage:null===(H=W)||void 0===H?void 0:H.message});B.warn(be.message)}}})).apply(this,arguments)}function on(U,H){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(U,H){var W;try{const Ue=(yield hn()).transaction(Mn,"readwrite");return yield Ue.objectStore(Mn).put(H,Qn(U)),Ue.done}catch(be){if(be instanceof oe.ZR)B.warn(be.message);else{const Ue=hr.create("idb-set",{originalErrorMessage:null===(W=be)||void 0===W?void 0:W.message});B.warn(Ue.message)}}})).apply(this,arguments)}function Qn(U){return`${U.name}!${U.options.appId}`}class Ji{constructor(H){this.container=H,this._heartbeatsCache=null;const W=this.container.getProvider("app").getImmediate();this._storage=new zt(W),this._heartbeatsCachePromise=this._storage.read().then(be=>(this._heartbeatsCache=be,be))}triggerHeartbeat(){var H=this;return(0,m.Z)(function*(){const be=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=Yt();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!H._heartbeatsCache.heartbeats.some(rt=>rt.date===Ue))return H._heartbeatsCache.heartbeats.push({date:Ue,agent:be}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(rt=>{const ln=new Date(rt.date).valueOf();return Date.now()-ln<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,m.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const W=Yt(),{heartbeatsToSend:be,unsentEntries:Ue}=function di(U,H=1024){const W=[];let be=U.slice();for(const Ue of U){const rt=W.find(ln=>ln.agent===Ue.agent);if(rt){if(rt.dates.push(Ue.date),K(W)>H){rt.dates.pop();break}}else if(W.push({agent:Ue.agent,dates:[Ue.date]}),K(W)>H){W.pop();break}be=be.slice(1)}return{heartbeatsToSend:W,unsentEntries:be}}(H._heartbeatsCache.heartbeats),rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:be}));return H._heartbeatsCache.lastSentHeartbeatDate=W,Ue.length>0?(H._heartbeatsCache.heartbeats=Ue,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),rt})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class zt{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,m.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function ht(U){return st.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var W=this;return(0,m.Z)(function*(){var be;if(yield W._canUseIndexedDBPromise){const rt=yield W.read();return on(W.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:rt.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var W=this;return(0,m.Z)(function*(){var be;if(yield W._canUseIndexedDBPromise){const rt=yield W.read();return on(W.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...H.heartbeats]})}})()}}function K(U){return(0,oe.L)(JSON.stringify({version:2,heartbeats:U})).length}!function $(U){Er(new te.wA("platform-logger",H=>new fe(H),"PRIVATE")),Er(new te.wA("heartbeat",H=>new Ji(H),"PRIVATE")),Or(he,"0.7.33",U),Or(he,"0.7.33","esm2017"),Or("fire-js","")}("")},4859:(ot,Ce,O)=>{O.d(Ce,{H0:()=>he,wA:()=>P});var m=O(5861),te=O(2090);class P{constructor(B,j,Q){this.name=B,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class re{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Q=new te.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:j});Fe&&Q.resolve(Fe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Q=this.normalizeInstanceIdentifier(B?.identifier),Fe=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Me){if(Fe)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[j,Q]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(j);try{const Me=this.getOrInitializeService({instanceIdentifier:Fe});Q.resolve(Me)}catch{}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,m.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Me,Ee]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Me)&&Ee.resolve(Fe);return Fe}onInit(B,j){var Q;const Fe=this.normalizeInstanceIdentifier(j),Me=null!==(Q=this.onInitCallbacks.get(Fe))&&void 0!==Q?Q:new Set;Me.add(B),this.onInitCallbacks.set(Fe,Me);const Ee=this.instances.get(Fe);return Ee&&B(Ee,Fe),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const Fe of Q)try{Fe(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===oe?void 0:pe),options:j}),this.instances.set(B,Q),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch{}var pe;return Q||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new re(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Ce,O)=>{O.d(Ce,{Am:()=>pe,Ub:()=>he,Yd:()=>le,in:()=>te});const m=[];var te=(()=>{return(B=te||(te={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",te;var B})();const P={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},oe=te.INFO,re={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},fe=(B,j,...Q)=>{if(j<B.logLevel)return;const Fe=(new Date).toISOString(),Me=re[j];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Me](`[${Fe}]  ${B.name}:`,...Q)};class le{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=fe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in te))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...j),this._logHandler(this,te.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...j),this._logHandler(this,te.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,te.INFO,...j),this._logHandler(this,te.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,te.WARN,...j),this._logHandler(this,te.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...j),this._logHandler(this,te.ERROR,...j)}}function he(B){m.forEach(j=>{j.setLogLevel(B)})}function pe(B,j){for(const Q of m){let Fe=null;j&&j.level&&(Fe=P[j.level]),Q.userLogHandler=null===B?null:(Me,Ee,...Xe)=>{const ye=Xe.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");Ee>=(Fe??Me.logLevel)&&B({level:te[Ee].toLowerCase(),message:ye,args:Xe,type:Me.name})}}}},8766:(ot,Ce,O)=>{O.d(Ce,{Lj:()=>Ae,X3:()=>nt});var m=O(5861);let P,oe;const le=new WeakMap,he=new WeakMap,pe=new WeakMap,B=new WeakMap,j=new WeakMap;let Me={get(V,me,Y){if(V instanceof IDBTransaction){if("done"===me)return he.get(V);if("objectStoreNames"===me)return V.objectStoreNames||pe.get(V);if("store"===me)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return ge(V[me])},set:(V,me,Y)=>(V[me]=Y,!0),has:(V,me)=>V instanceof IDBTransaction&&("done"===me||"store"===me)||me in V};function ye(V){return"function"==typeof V?function Xe(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...me){return V.apply(Je(this),me),ge(le.get(this))}:function(...me){return ge(V.apply(Je(this),me))}:function(me,...Y){const X=V.call(Je(this),me,...Y);return pe.set(X,me.sort?me.sort():[me]),ge(X)}}(V):(V instanceof IDBTransaction&&function Fe(V){if(he.has(V))return;const me=new Promise((Y,X)=>{const ie=()=>{V.removeEventListener("complete",ne),V.removeEventListener("error",ke),V.removeEventListener("abort",ke)},ne=()=>{Y(),ie()},ke=()=>{X(V.error||new DOMException("AbortError","AbortError")),ie()};V.addEventListener("complete",ne),V.addEventListener("error",ke),V.addEventListener("abort",ke)});he.set(V,me)}(V),((V,me)=>me.some(Y=>V instanceof Y))(V,function re(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Me):V)}function ge(V){if(V instanceof IDBRequest)return function Q(V){const me=new Promise((Y,X)=>{const ie=()=>{V.removeEventListener("success",ne),V.removeEventListener("error",ke)},ne=()=>{Y(ge(V.result)),ie()},ke=()=>{X(V.error),ie()};V.addEventListener("success",ne),V.addEventListener("error",ke)});return me.then(Y=>{Y instanceof IDBCursor&&le.set(Y,V)}).catch(()=>{}),j.set(me,V),me}(V);if(B.has(V))return B.get(V);const me=ye(V);return me!==V&&(B.set(V,me),j.set(me,V)),me}const Je=V=>j.get(V);function nt(V,me,{blocked:Y,upgrade:X,blocking:ie,terminated:ne}={}){const ke=indexedDB.open(V,me),Ne=ge(ke);return X&&ke.addEventListener("upgradeneeded",ct=>{X(ge(ke.result),ct.oldVersion,ct.newVersion,ge(ke.transaction))}),Y&&ke.addEventListener("blocked",()=>Y()),Ne.then(ct=>{ne&&ct.addEventListener("close",()=>ne()),ie&&ct.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Ne}function Ae(V,{blocked:me}={}){const Y=indexedDB.deleteDatabase(V);return me&&Y.addEventListener("blocked",()=>me()),ge(Y).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Ve=new Map;function Be(V,me){if(!(V instanceof IDBDatabase)||me in V||"string"!=typeof me)return;if(Ve.get(me))return Ve.get(me);const Y=me.replace(/FromIndex$/,""),X=me!==Y,ie=De.includes(Y);if(!(Y in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!_e.includes(Y))return;const ne=function(){var ke=(0,m.Z)(function*(Ne,...ct){const Ht=this.transaction(Ne,ie?"readwrite":"readonly");let Bt=Ht.store;return X&&(Bt=Bt.index(ct.shift())),(yield Promise.all([Bt[Y](...ct),ie&&Ht.done]))[0]});return function(ct){return ke.apply(this,arguments)}}();return Ve.set(me,ne),ne}!function Ee(V){Me=V(Me)}(V=>({...V,get:(me,Y,X)=>Be(me,Y)||V.get(me,Y,X),has:(me,Y)=>!!Be(me,Y)||V.has(me,Y)}))},5861:(ot,Ce,O)=>{function m(P,oe,re,fe,le,he,pe){try{var B=P[he](pe),j=B.value}catch(Q){return void re(Q)}B.done?oe(j):Promise.resolve(j).then(fe,le)}function te(P){return function(){var oe=this,re=arguments;return new Promise(function(fe,le){var he=P.apply(oe,re);function pe(j){m(he,fe,le,pe,B,"next",j)}function B(j){m(he,fe,le,pe,B,"throw",j)}pe(void 0)})}}O.d(Ce,{Z:()=>te})}},ot=>{ot(ot.s=9424)}]);